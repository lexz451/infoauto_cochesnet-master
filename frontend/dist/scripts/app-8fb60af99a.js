!function(){"use strict";function e(e){}e.$inject=["$stateProvider"],angular.module("app.tasks",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u){function p(){o.getTaskTypes(i).then(function(e){b.taskTypes=e}),b.task.date=b.task.date?new Date(moment(b.task.date).format()):null,b.task.planified_realization_date=b.task.planified_realization_date?new Date(moment(b.task.planified_realization_date).format()):null,b.task.realization_date=b.task.realization_date?new Date(moment(b.task.realization_date).format()):null,b.task.planified_tracking_date=b.task.planified_tracking_date?new Date(moment(b.task.planified_tracking_date).format()):null,b.task.tracking_date=b.task.tracking_date?new Date(moment(b.task.tracking_date).format()):null}function g(){if(b.task.planified_realization_date&&b.task.planified_realization_date.setHours(b.task.datetime.getHours(),b.task.datetime.getMinutes()),t.id)return s.saveTask(angular.copy(b.task)).then(function(e){r.successMessage(u.getString("Solicitud guardada correctamente")),h(),b.task.id||t.task.push(b.task)},function(e){b.serverErrors=e.data,r.errorMessage(u.getString("Error al guardar la solicitud.")+" "+(e.data.non_field_errors||""))});if(a)for(var e in b.task)a[e]=b.task[e];else t.task.push(b.task),s.tasks.data.push(b.task),s.tasks.count++;h()}function v(e){b.task.note.push({content:"",essential:!1,modified:new Date})}function f(e){if(e.id){for(var a=0;a<b.task.note.length;a++)if(b.task.note[a].id===e.id){b.task.note.splice(a,1);break}}else for(var a=0;a<b.task.note.length;a++)if(b.task.note[a].content===e.content&&!e.id){b.task.note.splice(a,1);break}}function h(){e.hide()}var b=this;b.title=u.getString("Editar tarea"),b.taskTypes=[],b.origins=d.origins,b.gasTypes=c,b.now=new Date,a?b.task=angular.copy(a):(b.title=u.getString("Nueva tarea"),b.task=s.getEmptyTask(n,t,i)),p(),b.saveTask=g,b.addTaskNote=v,b.deleteTaskNote=f,b.closeDialog=h}e.$inject=["$mdDialog","Task","Request","Lead","Tracing","tasksService","NotifyService","taskTypesService","usersService","originsCarService","GasTypes","$q","gettextCatalog"],angular.module("app.tasks").controller("TaskDialogController",e)}(),function(){"use strict";function e(e){e.state("app.users",{"abstract":!0,url:"/users",resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}]}}).state("app.users.list",{url:"/?concessionaire",views:{"content@app":{templateUrl:"app/main/users/views/list/users.html",controller:"UsersController as vm"}},resolve:{Concessionaire:["currentUser","concessionairesService","$stateParams",function(e,a,t){return t.concessionaire?a.getConcessionaire(t.concessionaire):null}],Users:["currentUser","$rootScope","usersService","Concessionaire",function(e,a,t,n){return t.users.filters={},t.users.filters.online=!0,t.users.filters.is_active=!0,n&&(t.users.filters.concessionaire_data=n),t.getUsers()}]},bodyClass:"users"}).state("app.users.get",{"abstract":!0,url:"/:user/",resolve:{User:["usersService","$stateParams",function(e,a){return e.getUser(a.user)}],Schools:["schoolsService",function(e){return e.schools.filters={},e.schools.filters.page_size="all",e.getSchools()}],Courses:["coursesService",function(e){return e.courses.filters={},e.courses.filters.page_size="all",e.getCourses()}],Specialities:["specialitiesService",function(e){return e.specialities.filters={},e.specialities.filters.page_size="all",e.getSpecialities()}]}}).state("app.users.get.detail",{url:"detail",views:{"content@app":{templateUrl:"app/main/users/views/detail/user.html",controller:"UserController as vm"}},bodyClass:"todo"}).state("app.users.get.edit",{url:"edit",views:{"content@app":{templateUrl:"app/main/users/views/edit/user.html",controller:"UserEditController as vm"}},bodyClass:"todo"})}e.$inject=["$stateProvider"],angular.module("app.users",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u,p){function g(e,a){d.show({controller:"UserDialogController",controllerAs:"vm",templateUrl:"app/main/users/dialogs/user/user-dialog.html",parent:angular.element(c.body),targetEvent:e,clickOutsideToClose:!0,locals:{User:a,event:e}})}function v(e,a){var n=d.confirm().title(p.getString("Eliminar concesionario")+' "'+a.name+'"').textContent(p.getString("¿Seguro que quieres eliminar el concesionario?")).ariaLabel(p.getString("Eliminar concesionario")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(p.getString("Borrar concesionario")).cancel(p.getString("Cancelar"));d.show(n).then(function(){t.removeUser(a).then(function(){i.successMessage(p.getString("Concesionario borrado correctamente."))},function(e){i.errorMessage("Error al borrar el concesionario. "+(e.data.detail||""))})})}function f(e){var a=u.defer();return m.getAllConcessionaires(e).then(function(e){a.resolve(e)}),a.promise}function h(e){var a=u.defer();if(_.user.is_concession_admin)for(var n in e.related_concessionaires){var s=b(e.related_concessionaires[n].concessionaire,_.user.related_concessionaires);if(!s)return i.errorMessage(p.getString("No eres competente para realizar esta acción. Por favor contacte con atención al cliente.")),a.resolve(!1),a.promise}return o.getLeadsByUser(e.id).then(function(n){if(!n.count){var s={id:e.id,is_active:!e.is_active};return t.saveUser(s).then(function(e){e.is_active?i.successMessage(p.getString("Usuario dado de alta correctamente")):i.successMessage(p.getString("Usuario dado de baja correctamente")),a.resolve(!0)},function(e){_.serverErrors=e.data,s.is_active?i.errorMessage(p.getString("Error al dar de alta a este usuario.")+" "+(e.data.non_field_errors||"")):i.errorMessage(p.getString("Error al dar de baja a este usuario.")+" "+(e.data.non_field_errors||"")),a.resolve(!1)})}y(e),a.resolve(!0)},function(){i.errorMessage(p.getString("Se ha producido un error.")),a.resolve(!1)}),a.promise}function b(e,a){for(var t in _.user.related_concessionaires)if(e===a[t].concessionaire)return!0;return!1}function y(e){d.show({controller:"LeadByUserDialogController",controllerAs:"vm",templateUrl:"app/main/users/dialogs/leadByUser/leadByUser-dialog.html",parent:angular.element(c.body),clickOutsideToClose:!0,locals:{User:e}})}var _=this;_.user=a,_.users=n,e.$watch("vm.users.filters",r(t.getUsers,300),!0),_.openUserDialog=g,_.removeUser=v,_.getConcessionaires=f,_.toggleActive=h}e.$inject=["$scope","currentUser","usersService","Users","NotifyService","$rootScope","DebounceService","leadsService","Concessionaire","$mdDialog","$document","concessionairesService","$q","gettextCatalog"],angular.module("app.users").controller("UsersController",e)}(),function(){"use strict";function e(e){e.state("app.sfas",{"abstract":!0,url:"/sfas",resolve:{currentUser:["AuthService",function(e){return e.checkStatus().then(function(e){return e?e:void 0})}]}}).state("app.sfas.list",{url:"/",views:{"content@app":{templateUrl:"app/main/sfas/views/list/sfas.html",controller:"SfasController as vm"}},resolve:{Sfas:["currentUser",function(e){return e.sfa_configurations}]},bodyClass:"sfas"})}e.$inject=["$stateProvider"],angular.module("app.sfas",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m){function u(e){l.show({controller:"SfaDialogController",controllerAs:"vm",templateUrl:"app/main/sfas/dialogs/sfa/sfa-dialog.html",parent:angular.element(d.body),targetEvent:e,clickOutsideToClose:!0,locals:{User:a,event:e}}).then(function(){o.checkStatus().then(function(e){e&&(g.sfas=e.sfa_configurations)})})}function p(e,a){var t=l.confirm().title(m.getString("Eliminar automatismo")).textContent(m.getString("¿Seguro que quieres eliminar el automatismo?")).ariaLabel(m.getString("Eliminar automatismo")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(m.getString("Borrar automatismo")).cancel(m.getString("Cancelar"));l.show(t).then(function(){n.removeSFA(angular.copy(a)).then(function(){g.sfas.splice(e,1)},function(e){i.errorMessage(m.getString("Error al borrar automatísmo.")+" "+(e.data.non_field_errors||""))})})}var g=this;g.user=a,g.sfas=t,g.channels=[{id:"email",name:m.getString("Email")},{id:"sms",name:m.getString("SMS")}],g.events=[{id:"lead_not_attended",name:m.getString("Lead no atendido")},{id:"lead_attended",name:m.getString("Lead atendido por usuario")}],g.openSfaDialog=u,g.removeSfa=p}e.$inject=["$scope","currentUser","Sfas","usersService","NotifyService","$rootScope","DebounceService","AuthService","$mdDialog","$document","$q","gettextCatalog"],angular.module("app.sfas").controller("SfasController",e)}(),function(){"use strict";function e(e,a,t){var n=this;n.user=a,n.professional_profiles=t.professionalProfiles}e.$inject=["currentUser","User","professionalProfilesService"],angular.module("app.users").controller("UserController",e)}(),function(){"use strict";function e(e,a,t,n,i,s){function r(){return t.saveUser(l.form).then(function(a){e.hide(a)})}function o(){e.hide()}var l=this;l.title=s.getString("Disponibilidad"),l.form={id:a.id,is_available:!1},l.reasons=[{id:"asisting_clients",name:"Atendiendo clientes"},{id:"breakfast",name:"Desayunando"},{id:"bathroom",name:"En el aseo"},{id:"excused",name:"Ausencia justificada"}],l.saveAvailable=r,l.closeDialog=o}e.$inject=["$mdDialog","User","usersService","NotifyService","$q","gettextCatalog"],angular.module("app.users").controller("AvailableDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u){function p(){y.user.hire_date?y.user.hire_date=moment(y.user.hire_date,"DD/MM/YYYY").toDate():y.user.hire_date=null,y.user.born_date?y.user.born_date=moment(y.user.born_date,"DD/MM/YYYY").toDate():y.user.born_date=null}function g(e){var a=angular.copy(e);return t.saveUser(a).then(function(e){s.go("app.users.get.edit",{user:e.id}),y.user.image=e.image,i.successMessage(r.getString("Cambios realizados correctamente"))},function(e){y.serverErrors=e.data,i.errorMessage(r.getString("Error al guardar los datos básicos.")+" "+(e.data.non_field_errors||""))})}function v(){g({image:null,id:y.user.id})}function f(e,a,t){e.cancel(),y.serverErrors=JSON.parse(a);var n="";y.serverErrors.image&&y.serverErrors.image[0]&&(n+=y.serverErrors.image[0]),i.errorMessage(r.getString("Error al modificar foto. ")+n)}function h(e,a,t){var n=JSON.parse(a);y.user.image=n.image,i.successMessage(r.getString("Foto modificada correctamente"))}function b(e){var a=u.defer();return m.schools.filters={},m.getSchools(e).then(function(e){a.resolve(e.data)}),a.promise}var y=this;y.user=a,y.schools=l,y.courses=d,y.specialities=c,y.ngFlowOptions={target:o.URLs.users.replace(":id",y.user.id),uploadMethod:"PATCH",fileParameterName:"image"},p(),y.saveUser=g,y.removeImage=v,y.imageError=f,y.reloadImage=h,y.getSchools=b}e.$inject=["currentUser","User","usersService","$rootScope","NotifyService","$state","gettextCatalog","api","Schools","Courses","Specialities","schoolsService","$q"],angular.module("app.users").controller("UserEditController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o){function l(){return t.saveUser(angular.copy(m.user)).then(function(){n.successMessage(o.getString("Automatismo guardado correctamente")),d()},function(e){m.serverErrors=e.data,n.errorMessage(o.getString("Error al guardar el automatismo.")+" "+(e.data.non_field_errors||""))})}function d(){e.hide()}function c(e,a,i){return t.removeSFA(angular.copy(i)).then(function(){a.$setDirty(),m.user.sfa_configurations.splice(e,1)},function(e){n.errorMessage(o.getString("Error al borrar SFA.")+" "+(e.data.non_field_errors||""))})}var m=this;m.title=o.getString("Nuevo automatismo"),m.channels=[{id:"email",name:o.getString("Email")},{id:"sms",name:o.getString("SMS")}],m.events=[{id:"lead_not_attended",name:o.getString("Lead no atendido")},{id:"lead_attended",name:o.getString("Lead atendido por usuario")}],m.user=angular.copy(a),m.user.sfa_configurations.push({}),m.saveUser=l,m.removeSFA=c,m.closeDialog=d}e.$inject=["$mdDialog","User","usersService","NotifyService","channelsService","concessionairesService","$q","gettextCatalog"],angular.module("app.sfas").controller("SfaDialogController",e)}(),function(){"use strict";function e(e,a){e.state("app.origins",{url:"/origins",views:{"content@app":{templateUrl:"app/main/origins/origins.html",controller:"OriginsController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}],Origins:["originsService",function(e){return e.origins.filters={},e.getOrigins()}]},bodyClass:"todo"})}e.$inject=["$stateProvider","msApiProvider"],angular.module("app.origins",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l){function d(){return n.saveOrigin(angular.copy(p.origin)).then(function(){r.successMessage(l.getString("Origen guardado correctamente")),c()},function(e){p.serverErrors=e.data,r.errorMessage(l.getString("Error al guardar el origen.")+" "+(e.data.non_field_errors||""))})}function c(){a.hide()}function m(a){if(a.files&&a.files[0]){var t=new FileReader;t.onload=function(a){p.origin.icon=a.target.result,e.$$phase||e.$digest()},t.readAsDataURL(a.files[0])}}function u(e){e.$setDirty(),$("#image-uploader").click()}var p=this;p.title=l.getString("Editar origen"),p.channels=s,t?p.origin=angular.copy(t):(p.title=l.getString("Nuevo origen"),p.origin=n.getEmptyOrigin()),o(function(){$("#image-uploader").change(function(){m(this)})}),p.saveOrigin=d,p.closeDialog=c,p.openFiles=u}e.$inject=["$scope","$mdDialog","Origin","originsService","channelsService","Channels","NotifyService","$timeout","gettextCatalog"],angular.module("app.origins").controller("OriginDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o){function l(){return t.saveUser(angular.copy(v.user)).then(function(){n.successMessage(o.getString("Usuario guardado correctamente")),d()},function(e){v.serverErrors=e.data,n.errorMessage(o.getString("Error al guardar el usuario.")+" "+(e.data.non_field_errors||""))})}function d(){e.hide()}function c(e){var a=r.defer();return s.concessionaires.filters={},s.getAllConcessionaires(e).then(function(e){a.resolve(e)}),a.promise}function m(){v.user.related_concessionaires.push({})}function u(e,a,i){return i.id?t.removeConcessionaire(angular.copy(i)).then(function(){a.$setDirty(),v.user.related_concessionaires.splice(e,1)},function(e){n.errorMessage(o.getString("Error al borrar concesionario.")+" "+(e.data.non_field_errors||""))}):(a.$setDirty(),void v.user.related_concessionaires.splice(e,1))}function p(){v.user.sfa_configurations.push({})}function g(e,a,i){return i.id?t.removeSFA(angular.copy(i)).then(function(){a.$setDirty(),v.user.sfa_configurations.splice(e,1)},function(e){n.errorMessage(o.getString("Error al borrar SFA.")+" "+(e.data.non_field_errors||""))}):(a.$setDirty(),void v.user.sfa_configurations.splice(e,1))}var v=this;v.title=o.getString("Editar usuario"),v.channels=[{id:"email",name:o.getString("Email")},{id:"sms",name:o.getString("SMS")}],v.events=[{id:"lead_not_attended",name:o.getString("Lead no atendido")},{id:"lead_attended",name:o.getString("Lead atendido por usuario")}],a?(v.user=angular.copy(a),v.user.start_date=moment(v.user.start_date).toDate(),v.user.end_date=moment(v.user.end_date).toDate()):(v.title=o.getString("Nuevo usuario"),v.user=t.getEmptyUser()),v.saveUser=l,v.closeDialog=d,v.getConcessionaires=c,v.addConcessionaire=m,v.removeConcessionaire=u,v.addSFA=p,v.removeSFA=g}e.$inject=["$mdDialog","User","usersService","NotifyService","channelsService","concessionairesService","$q","gettextCatalog"],angular.module("app.users").controller("UserDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r){function o(){var e={};for(var a in g.leads.data)!e["c"+g.leads.data[a].concession_id]&&g.leads.data[a].concession_id&&(e["c"+g.leads.data[a].concession_id]={id:g.leads.data[a].concession_id,name:g.leads.data[a].concession_name,leads:[],user_data:null}),g.leads.data[a].concession_id&&e["c"+g.leads.data[a].concession_id].leads.push(g.leads.data[a]);g.concessionaires=e}function l(e){var a={id:e.id,is_active:!e.is_active};return i.saveUser(a).then(function(e){e.is_active?n.successMessage(r.getString("Usuario dado de alta correctamente")):n.successMessage(r.getString("Usuario dado de baja correctamente")),p()},function(e){g.serverErrors=e.data,a.is_active?n.errorMessage(r.getString("Error al dar de alta a este usuario.")+" "+(e.data.non_field_errors||"")):n.errorMessage(r.getString("Error al dar de baja a este usuario.")+" "+(e.data.non_field_errors||""))})}function d(e,a){var t=s.defer();return i.getAllUsersConcessionaire(e,a).then(function(e){t.resolve(e)}),t.promise}function c(e){return e.first_name+" "+e.last_name}function m(e){var t={id:e.user_data.id,leads:[]};for(var i in e.leads)t.leads.push(e.leads[i].id);return a.setLeadsByUser(t).then(function(a){delete g.concessionaires["c"+e.id],n.successMessage(r.getString("Leads reasignados correctamente"))},function(e){n.errorMessage(r.getString("Error al reasignar leads.")+" "+(e.data.non_field_errors||""))})}function u(){for(var e in g.concessionaires)if(g.concessionaires[e].leads.length>0)return!0;return!1}function p(){e.hide()}var g=this;g.title=r.getString("Reasignación de leads"),g.leads=a.leads,g.user=t,g.concessionaires={},o(),g.toggleActive=l,g.getUsers=d,g.getFullUserName=c,g.reasign=m,g.isFormDisabled=u,g.closeDialog=p}e.$inject=["$mdDialog","leadsService","User","NotifyService","usersService","$q","gettextCatalog"],angular.module("app.users").controller("LeadByUserDialogController",e)}(),function(){"use strict";function e(e){e.state("app.leads",{"abstract":!0,url:"/leads",resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}]}}).state("app.leads.list",{url:"/?created_start_date&created_end_date&user_id__in&tasks__realization_date_check&tasks__is_traking_task&with_concession&without_pending_tasks&tasks__planified_realization_date__lt&tasks__realization_date__isnull&without_pending_trackings&result&source__channel_id__in&tasks__media__in&result__isnull&lead_managements__event&without_outgoing_calls",views:{"content@app":{templateUrl:"app/main/leads/views/list/leads.html",controller:"LeadsController as vm"}},resolve:{Leads:["currentUser","$rootScope","leadsService","$stateParams",function(e,a,t,n){return t.leads.filters=n,n.created_start_date||(t.leads.filters.user_id__in=e.id),t.getLeads()}],Kpis:["currentUser","$rootScope","eventsService",function(e,a,t){return t.kpis.filters={},t.getKpis()}]},bodyClass:"leads"}).state("app.leads.board",{url:"/board",views:{"content@app":{templateUrl:"app/main/leads/views/board/board-view.html",controller:"BoardViewController as vm"}},resolve:{Today:function(){var e=new Date;return e.setHours(0,0,0,0),e},PageSize:function(){return 10},LeadsNews:["currentUser","leadsService","Today","PageSize",function(e,a,t,n){return a.leadsNews.filters={},a.leadsNews.filters.page_size=n,a.leadsNews.filters.page=1,a.leadsNews.filters.ordering="created",a.leadsNews.filters.with_concession=!0,a.getLeadsNews()}],LeadsAttended:["currentUser","leadsService","Today","PageSize",function(e,a,t,n){return a.leadsAttended.filters={},a.leadsAttended.filters.page_size=n,a.leadsAttended.filters.page=1,a.leadsAttended.filters.ordering="created",a.leadsAttended.filters.with_concession=!0,a.getLeadsAttended()}],LeadsCommercialManagements:["currentUser","leadsService","Today","PageSize",function(e,a,t,n){return a.leadsCommercialManagements.filters={},a.leadsCommercialManagements.filters.page_size=n,a.leadsCommercialManagements.filters.page=1,a.leadsCommercialManagements.filters.ordering="lead_task_date",a.leadsCommercialManagements.filters.with_concession=!0,a.getLeadsCommercialManagements()}],LeadsTracings:["currentUser","leadsService","Today","PageSize",function(e,a,t,n){return a.leadsTracings.filters={},a.leadsTracings.filters.page_size=n,a.leadsTracings.filters.page=1,a.leadsTracings.filters.ordering="lead_task_date",a.leadsTracings.filters.with_concession=!0,a.getLeadsTracings()}],LeadsEnds:["currentUser","leadsService","Today","PageSize",function(e,a,t,n){return a.leadsEnds.filters={},a.leadsEnds.filters.page_size=n,a.leadsEnds.filters.page=1,a.leadsEnds.filters.with_concession=!0,a.getLeadsEnds()}],Actions:["currentUser","leadActionsService",function(e,a){return a.getLeadActionsColumn()}]},bodyClass:"leads"}).state("app.leads.allboard",{url:"/all",views:{"content@app":{templateUrl:"app/main/leads/views/board/board-view.html",controller:"BoardViewController as vm"}},resolve:{PageSize:function(){return 10},LeadsNews:["currentUser","leadsService","PageSize",function(e,a,t){return a.leadsNews.filters={},a.leadsNews.filters.page_size=t,a.leadsNews.filters.with_concession=!0,a.getLeadsNews()}],LeadsAttended:["currentUser","leadsService","PageSize",function(e,a,t){return a.leadsAttended.filters={},a.leadsAttended.filters.page_size=t,a.leadsAttended.filters.with_concession=!0,a.getLeadsAttended()}],LeadsCommercialManagements:["currentUser","leadsService","PageSize",function(e,a,t){return a.leadsCommercialManagements.filters={},a.leadsCommercialManagements.filters.page_size=t,a.leadsCommercialManagements.filters.with_concession=!0,a.getLeadsCommercialManagements()}],LeadsTracings:["currentUser","leadsService","PageSize",function(e,a,t){return a.leadsTracings.filters={},a.leadsTracings.filters.page_size=t,a.leadsTracings.filters.with_concession=!0,a.getLeadsTracings()}],LeadsEnds:["currentUser","leadsService","PageSize",function(e,a,t){return a.leadsEnds.filters={},a.leadsEnds.filters.page_size=t,a.leadsEnds.filters.with_concession=!0,a.getLeadsEnds()}],Actions:function(){return!1}},bodyClass:"leads"}).state("app.leads.get",{"abstract":!0,url:"/:lead/",resolve:{Lead:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLead(a.lead):(e.lead.data={},e.getEmptyLead())}],Tasks:["Lead","tasksService",function(e,a){return a.tasks.data=e.request.task,a.tasks.count=e.request.task.length,a.tasks}],GasTypes:["gasTypesService",function(e){return e.getGasTypes()}],Concessionaire:["Lead","concessionairesService","$stateParams",function(e,a,t){return t.lead>0?e.concessionaire_data:{}}],PageSize:function(){return 10},LeadsNews:["currentUser","leadsService","PageSize","Lead",function(e,a,t,n){return a.leadsNews.filters={},n.client&&(a.leadsNews.filters.client__phone__icontains=n.client.phone,a.leadsNews.filters.client__email__icontains=n.client.email),a.leadsNews.filters.id_excluded=n.id||0,a.leadsNews.filters.page_size=t,a.leadsNews.filters.ordering="created",a.leadsNews.filters.with_concession=!0,a.getLeadsNews()}],LeadsAttended:["currentUser","leadsService","PageSize","Lead",function(e,a,t,n){return a.leadsAttended.filters={},n.client&&(a.leadsAttended.filters.client__phone__icontains=n.client.phone,a.leadsAttended.filters.client__email__icontains=n.client.email),a.leadsAttended.filters.id_excluded=n.id||0,a.leadsAttended.filters.page_size=t,a.leadsAttended.filters.ordering="created",a.leadsAttended.filters.with_concession=!0,a.getLeadsAttended()}],LeadsCommercialManagements:["currentUser","leadsService","PageSize","Lead",function(e,a,t,n){return a.leadsCommercialManagements.filters={},n.client&&(a.leadsCommercialManagements.filters.client__phone__icontains=n.client.phone,a.leadsCommercialManagements.filters.client__email__icontains=n.client.email),a.leadsCommercialManagements.filters.id_excluded=n.id||0,a.leadsCommercialManagements.filters.page_size=t,a.leadsCommercialManagements.filters.ordering="lead_task_date",a.leadsCommercialManagements.filters.with_concession=!0,a.getLeadsCommercialManagements()}],LeadsTracings:["currentUser","leadsService","PageSize","Lead",function(e,a,t,n){return a.leadsTracings.filters={},n.client&&(a.leadsTracings.filters.client__phone__icontains=n.client.phone,a.leadsTracings.filters.client__email__icontains=n.client.email),a.leadsTracings.filters.id_excluded=n.id||0,a.leadsTracings.filters.page_size=t,a.leadsTracings.filters.ordering="lead_task_date",a.leadsTracings.filters.with_concession=!0,a.getLeadsTracings()}],LeadsEnds:["currentUser","leadsService","PageSize","Lead",function(e,a,t,n){return a.leadsEnds.filters={},n.client&&(a.leadsEnds.filters.client__phone__icontains=n.client.phone,a.leadsEnds.filters.client__email__icontains=n.client.email),a.leadsEnds.filters.id_excluded=n.id||0,a.leadsEnds.filters.page_size=t,a.leadsEnds.filters.with_concession=!0,a.getLeadsEnds()}]}}).state("app.leads.get.detail",{url:"detail",views:{"content@app":{templateUrl:"app/main/leads/views/detail/lead.html",controller:"LeadController as vm"}},bodyClass:"todo"}).state("app.leads.get.edit",{url:"edit?source&phone&acd&user",views:{"content@app":{templateUrl:"app/main/leads/views/edit/lead.html",controller:"LeadEditController as vm"}},resolve:{Concessionaire:["Lead","concessionairesService","$stateParams",function(e,a,t){return t.lead>0?e.concessionaire_data:{}}],Source:["sourcesService","$stateParams",function(e,a){return a.source?e.getSource(a.source):{}}],LeadsIncomingCalls:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsIncomingCalls(a.lead):{}}],LeadsOutgoingCalls:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsOutgoingCalls(a.lead):{}}],LeadsHistory:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsHistory(a.lead):{}}],LeadsActivity:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsActivity(a.lead):{}}],StartCall:function(){return!1}},bodyClass:"todo"}).state("app.leads.get.call",{url:"call",views:{"content@app":{templateUrl:"app/main/leads/views/edit/lead.html",controller:"LeadEditController as vm"}},resolve:{Concessionaire:["Lead","concessionairesService","$stateParams",function(e,a,t){return t.lead>0?e.concessionaire_data:{}}],Source:["sourcesService","$stateParams",function(e,a){return a.source?e.getSource(a.source):{}}],LeadsIncomingCalls:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsIncomingCalls(a.lead):{}}],LeadsOutgoingCalls:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsOutgoingCalls(a.lead):{}}],LeadsHistory:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsHistory(a.lead):{}}],LeadsActivity:["leadsService","$stateParams",function(e,a){return a.lead>0?e.getLeadsActivity(a.lead):{}}],StartCall:function(){return!0}},bodyClass:"todo"})}e.$inject=["$stateProvider"],angular.module("app.leads",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u,p,g,v,f,h,b,y,_,w,x,k,S,T,C){function M(e){if(e){var a=e.split(/\D+/);return new Date(Date.UTC(a[0],--a[1],a[2],a[3],a[4],a[5],a[6]))}return null}function $(e){var a=S.href("app.leads.get.edit",{lead:e.id});window.open(a,"_blank")}function E(e){for(var a in Z.kpis.data)for(var t in Z.kpis.data[a].kpis)Z.kpis.data[a].kpis[t].active=!1;Z.leads.filters.kpi_filter===e.filter_key?(e.active=!1,Z.leads.filters.kpi_filter=null):(e.active=!0,Z.leads.filters.kpi_filter=e.filter_key)}function A(e){Z.leads.filters.ordering===e?Z.leads.filters.ordering="-"+e:Z.leads.filters.ordering=e}function N(e){o(e).toggle()}function L(e,a){D(),U(),"last_action_end_date"===e&&a.setHours(23,59,59,999),Z.filters[e]=a,Z.leads.filters.page=1,Z.leads.filters[e]=a}function D(){Z.filters.date_end?Z.minDate=moment(Z.filters.date_end).subtract(30,"d").toDate():Z.minDate=null}function U(){Z.filters.date_start?Z.maxDate=moment(Z.filters.date_start).add(30,"d").toDate():Z.maxDate=null}function F(e){Z.filters.score===e?Z.filters.score=null:Z.filters.score=e}function j(e){var a=f.defer(),t=angular.copy(b.usersService.get(e));return t?a.resolve(K(t.data,Z.filters.user_data)):(l.users.filters={},l.users.filters.search=e,l.users.filters.page_size="50",l.users.filters.is_complex=!1,l.getUsers(e).then(function(t){b.usersService.put(e,t),a.resolve(K(t.data,Z.filters.user_data))})),a.promise}function z(e){return e.first_name+" "+e.last_name}function P(e){var a=f.defer(),t=angular.copy(b.concessionairesService.get(e));return t?a.resolve(K(t.data,Z.filters.concessionaire__in_data)):(d.concessionaires.filters={},d.concessionaires.filters.search=e,d.concessionaires.filters.page_size="50",d.concessionaires.filters.is_complex=!1,d.getConcessionaires().then(function(t){b.concessionairesService.put(e,t),a.resolve(K(t.data,Z.filters.concessionaire__in_data))})),a.promise}function O(e){var a=f.defer(),t=angular.copy(b.originsService.get(e));return t?a.resolve(K(t,Z.filters.origin_data)):c.getAllOrigins(e).then(function(t){b.originsService.put(e,t),a.resolve(K(t,Z.filters.origin_data))}),a.promise}function q(e){var a=f.defer(),t=angular.copy(b.channelsService.get(e));return t?a.resolve(K(t,Z.filters.channel_data)):m.getAllChannels(e).then(function(t){b.channelsService.put(e,t),a.resolve(K(t,Z.filters.channel_data))}),a.promise}function R(e){var a=f.defer(),t=[{id:"Whatsapp",name:"Whatsapp"},{id:"Phone",name:"Teléfono"},{id:"SMS",name:"SMS"},{id:"E-mail",name:"Email"},{id:"face",name:"Presencial"}];return a.resolve(K(t,Z.filters.tasks_media_data)),a.promise}function I(e){var a=f.defer(),t=angular.copy(b.vehiclesService.get(e));return t?a.resolve(K(t,Z.filters.brand_data)):u.getBrands(e).then(function(t){b.vehiclesService.put(e,t),a.resolve(K(t,Z.filters.brand_data))}),a.promise}function H(e,a){var t=f.defer(),n=angular.copy(b.taskTypesService.get(a+e));return n?e?t.resolve(K(n,Z.filters.tasks_tracing_data,"key")):t.resolve(K(n,Z.filters.tasks_type_data,"key")):p.getTaskTypes(e).then(function(n){b.taskTypesService.put(a+e,n),e?t.resolve(K(n,Z.filters.tasks_tracing_data,"key")):t.resolve(K(n,Z.filters.tasks_type_data,"key"))}),t.promise}function B(){var e=f.defer(),a=[{id:!0,name:"Vencida"},{id:!1,name:"No vencida"}];return e.resolve(a),e.promise}function V(){var e=f.defer(),a=[{id:"tarea",name:T.getString("Tarea")},{id:"seguimiento",name:T.getString("Seguimiento")}];return e.resolve(a),e.promise}function G(){var e=f.defer(),a=[{id:"new",name:T.getString("Leads no atendidos")},{id:"attended",name:T.getString("Leads atendidos")},{id:"commercial_management",name:T.getString("Tareas pendientes")},{id:"tracing",name:T.getString("Seguimiento")},{id:"end",name:T.getString("Leads cerrados")}];return e.resolve(K(a,Z.filters.status_data)),e.promise}function W(){var e=Z.filters.tasks_type_data.map(function(e){return e.key}).toString(),a=Z.filters.tasks_tracing_data.map(function(e){return e.key}).toString();""!==e&&""!==a&&(e+=","),e+=a;var t={with_concession:Z.filters.with_concession,search:Z.filters.search,score:Z.filters.score,date_start:Z.filters.date_start,date_end:Z.filters.date_end,created_start_date:Z.filters.created_start_date,created_end_date:Z.filters.created_end_date,result:Z.filters.result,result_reason:Z.filters.result_reason,status__in:Z.filters.status_data.map(function(e){return e.id}).toString(),user_id__in:Z.filters.user_id__in,concessionaire__in:Z.filters.concessionaire__in_data.map(function(e){return e.id}).toString(),source__origin_id__in:Z.filters.origin_data.map(function(e){return e.id}).toString(),source__channel_id__in:Z.filters.channel_data.map(function(e){return e.id}).toString(),tasks__media__in:Z.filters.tasks_media_data.map(function(e){return e.id}).toString(),vehicles__brand_model__in:Z.filters.brand_data.map(function(e){return e.name+","+e.name+"___"+e.id}).toString(),vehicles__model__icontains:Z.filters.model,vehicles__version__icontains:Z.filters.version,tasks__type__in:e};Z.filters.user_data.length>0&&(t.user_id__in=Z.filters.user_data.map(function(e){return e.id}).toString()),Z.filters.overdue?(Z.filters.overdue&&Z.filters.overdue.id?(t.tasks__planified_realization_date__lt=moment().format(),t.tasks__planified_realization_date__gt=null):(t.tasks__planified_realization_date__gt=moment().format(),t.tasks__planified_realization_date__lt=null),t.tasks__realization_date_check=!1,t.tasks__tracking_date_check=!1):(t.tasks__planified_realization_date__lt=null,t.tasks__planified_realization_date__gt=null,t.tasks__realization_date_check=null,t.tasks__tracking_date_check=null);
for(var n in t)L(n,t[n])}function Y(e){var a=angular.copy(Z[e]);a&&h(function(){Z[e]=a},100)}function K(e,a,t){t||(t="id");for(var n=e.length-1;n>=0;n--)for(var i=a.length-1;i>=0;i--)e[n]&&e[n][t]===a[i][t]&&e.splice(n,1);return e}function J(){W();var e=angular.copy(Z.leads.filters);return d.getDocument(e).then(function(e){X(e,"leads.xls","leads.xls")},function(e){s.errorMessage(T.getString("Error al exportar leads"))})}function X(e,a,t){var n=new Blob([e],{type:t});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}var Z=this;Z.user=a,Z.leads=n,Z.kpis=i,Z.results=y.newLeadResults,Z.resultReasons=y.resultReasons,Z.filters={search:"",date_start:null,date_end:null,created_start_date:null,created_end_date:null,user_data:[Z.user],concessionaire__in_data:[],status_data:[],origin_data:[],channel_data:[],tasks_media_data:[],brand_data:[],tasks_type_data:[],tasks_tracing_data:[]},C.created_start_date&&(Z.filters=Object.assign({},C,Z.filters),Z.filters.created_start_date=M(C.created_start_date),Z.filters.created_end_date=M(C.created_end_date),Z.filters.user_data=[]),Z.leadStatus=r.leadStatus,e.$watch("vm.leads.filters",k(t.getLeads,300),!0),e.$watch("vm.kpis.filters",k(v.getKpis,300),!0),Z.goLead=$,Z.toggleKpi=E,Z.changeOrder=A,Z.changeFilter=L,Z.toggleSidenav=N,Z.setScore=F,Z.getUsers=j,Z.getFullUserName=z,Z.getConcessionaires=P,Z.getOrigins=O,Z.getChannels=q,Z.getTaskMedia=R,Z.getBrands=I,Z.getTaskTypes=H,Z.getBooleans=B,Z.getRequestTypes=V,Z.getStatusLead=G,Z.setFilters=W,Z.copySearch=Y,Z.getDocument=J}e.$inject=["$scope","currentUser","leadsService","Leads","Kpis","NotifyService","leadStatusService","$mdSidenav","usersService","concessionairesService","originsService","channelsService","vehiclesService","taskTypesService","mediaTypesService","eventsService","$q","$timeout","cacheFactory","leadResultsService","$mdDialog","$rootScope","$document","DebounceService","$state","gettextCatalog","$stateParams"],angular.module("app.leads").controller("LeadsController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u,p,g,v,f,h,b,y,_,w,x,k,S,T,C,M,$,E){function A(){P(),O(),t(function(){angular.element("html").hasClass("explorer")&&(U(),a.onresize=function(){U()})},0);for(var e in l){var n=N(l[e]);"commercial_management"===l[e].current_lead_status||"pending"===l[e].current_lead_status||"new"===l[e].current_lead_status?l[e].last_task&&(ne.leadsActivityCommercialManagement.count++,ne.leadsActivityCommercialManagement[n].push(l[e])):"tracing"===l[e].current_lead_status&&(ne.leadsActivityTracing.count++,ne.leadsActivityTracing[n].push(l[e]))}}function N(e){var a=moment(e.date).format("DD-MM-YYYY"),t=moment().format("DD-MM-YYYY"),n=moment().subtract(1,"d").format("DD-MM-YYYY");return a===t?"dataToday":a===n?"dataYesterday":L(t,a)?"dataFuture":"dataOthers"}function L(e,a){var t=e.split("-"),n=a.split("-"),i=new Date(t[2],t[1]-1,t[0]),s=new Date(n[2],n[1]-1,n[0]);return!(i>=s)}function D(e){ne.leads[e].filters.page?ne.leads[e].filters.page++:ne.leads[e].filters.page=2}function U(){var e=angular.element("#board"),a=e.height();e.find(".list-wrapper").each(function(e,t){var n=angular.element(t),i=n.find(".list-header").height(),s=n.find(".list-footer").height(),r=a-i-s;n.find(".list-content").css({"max-height":r})})}function F(e,a){var t=a.indexOf(e);-1!==t?a.splice(t,1):a.push(e)}function j(e){M(e).toggle()}function z(e,a){P(),O(),"last_action_end_date"===e&&a.setHours(23,59,59,999),ne.filters[e]=a;for(var t in ne.leads)ne.leads[t].filters.page=1,ne.leads[t].filters[e]=a}function P(){ne.filters.date_end?ne.minDate=moment(ne.filters.date_end).subtract(30,"d").toDate():ne.minDate=null}function O(){ne.filters.date_start?ne.maxDate=moment(ne.filters.date_start).add(30,"d").toDate():ne.maxDate=null}function q(e){ne.filters.score===e?ne.filters.score=null:ne.filters.score=e}function R(e){var a=$.defer(),t=angular.copy(x.usersService.get(e));return t?a.resolve(ee(t.data,ne.filters.user_data)):(f.users.filters={},f.users.filters.search=e,f.users.filters.page_size="50",f.users.filters.is_complex=!1,f.getUsers(e).then(function(t){x.usersService.put(e,t),a.resolve(ee(t.data,ne.filters.user_data))})),a.promise}function I(e){return e.first_name+" "+e.last_name}function H(e){var a=$.defer(),t=angular.copy(x.concessionairesService.get(e));return t?a.resolve(ee(t.data,ne.filters.concessionaire__in_data)):(h.concessionaires.filters={},h.concessionaires.filters.search=e,h.concessionaires.filters.page_size="50",h.concessionaires.filters.is_complex=!1,h.getConcessionaires().then(function(t){x.concessionairesService.put(e,t),a.resolve(ee(t.data,ne.filters.concessionaire__in_data))})),a.promise}function B(e){var a=$.defer(),t=angular.copy(x.originsService.get(e));return t?a.resolve(ee(t,ne.filters.origin_data)):b.getAllOrigins(e).then(function(t){x.originsService.put(e,t),a.resolve(ee(t,ne.filters.origin_data))}),a.promise}function V(e){var a=$.defer(),t=angular.copy(x.channelsService.get(e));return t?a.resolve(ee(t,ne.filters.channel_data)):y.getAllChannels(e).then(function(t){x.channelsService.put(e,t),a.resolve(ee(t,ne.filters.channel_data))}),a.promise}function G(e){var a=$.defer(),t=[{id:"Whatsapp",name:"Whatsapp"},{id:"Phone",name:"Teléfono"},{id:"SMS",name:"SMS"},{id:"E-mail",name:"Email"},{id:"face",name:"Presencial"}];return a.resolve(ee(t,ne.filters.tasks_media_data)),a.promise}function W(e){var a=$.defer(),t=angular.copy(x.vehiclesService.get(e));return t?a.resolve(ee(t,ne.filters.brand_data)):_.getBrands(e).then(function(t){x.vehiclesService.put(e,t),a.resolve(ee(t,ne.filters.brand_data))}),a.promise}function Y(e,a){var t=$.defer(),n=angular.copy(x.taskTypesService.get(a+e));return n?e?t.resolve(ee(n,ne.filters.tasks_tracing_data,"key")):t.resolve(ee(n,ne.filters.tasks_type_data,"key")):k.getTaskTypes(e).then(function(n){x.taskTypesService.put(a+e,n),e?t.resolve(ee(n,ne.filters.tasks_tracing_data,"key")):t.resolve(ee(n,ne.filters.tasks_type_data,"key"))}),t.promise}function K(){var e=$.defer(),a=[{id:!0,name:"Vencida"},{id:!1,name:"No vencida"}];return e.resolve(a),e.promise}function J(){var e=$.defer(),a=[{id:"tarea",name:E.getString("Tarea")},{id:"seguimiento",name:E.getString("Seguimiento")}];return e.resolve(a),e.promise}function X(){var e=$.defer(),a=[{id:"new",name:E.getString("Leads no atendidos")},{id:"attended",name:E.getString("Leads atendidos")},{id:"commercial_management",name:E.getString("Tareas pendientes")},{id:"tracing",name:E.getString("Seguimiento")},{id:"end",name:E.getString("Leads cerrados")}];return e.resolve(ee(a,ne.filters.status_data)),e.promise}function Z(){var e=ne.filters.tasks_type_data.map(function(e){return e.key}).toString(),a=ne.filters.tasks_tracing_data.map(function(e){return e.key}).toString();""!==e&&""!==a&&(e+=","),e+=a;var t={with_concession:ne.filters.with_concession,search:ne.filters.search,score:ne.filters.score,date_start:ne.filters.date_start,date_end:ne.filters.date_end,created_start_date:ne.filters.created_start_date,created_end_date:ne.filters.created_end_date,result:ne.filters.result,result_reason:ne.filters.result_reason,status__in:ne.filters.status_data.map(function(e){return e.id}).toString(),user_id__in:ne.filters.user_data.map(function(e){return e.id}).toString(),concessionaire__in:ne.filters.concessionaire__in_data.map(function(e){return e.id}).toString(),source__origin_id__in:ne.filters.origin_data.map(function(e){return e.id}).toString(),source__channel_id__in:ne.filters.channel_data.map(function(e){return e.id}).toString(),tasks__media__in:ne.filters.tasks_media_data.map(function(e){return e.id}).toString(),vehicles__brand_model__in:ne.filters.brand_data.map(function(e){return e.name+","+e.name+"___"+e.id}).toString(),vehicles__model__icontains:ne.filters.model,vehicles__version__icontains:ne.filters.version,tasks__type__in:e};if(ne.filters.status_data&&ne.filters.status_data.length){for(var n in ne.board.lists)ne.board.lists[n].show=!1;for(var n in ne.board.lists)for(var i in ne.filters.status_data)ne.board.lists[n].id===ne.filters.status_data[i].id&&(ne.board.lists[n].show=!0)}else for(var n in ne.board.lists)ne.board.lists[n].show=!0;ne.filters.overdue?(ne.filters.overdue&&ne.filters.overdue.id?(t.tasks__planified_realization_date__lt=moment().format(),t.tasks__planified_realization_date__gt=null):(t.tasks__planified_realization_date__gt=moment().format(),t.tasks__planified_realization_date__lt=null),t.tasks__realization_date_check=!1,t.tasks__tracking_date_check=!1):(t.tasks__planified_realization_date__lt=null,t.tasks__planified_realization_date__gt=null,t.tasks__realization_date_check=null,t.tasks__tracking_date_check=null),ne.hasFilterAdvance=!1;for(var n in t)z(n,t[n]),t[n]&&"user_id__in"!==n&&"with_concession"!==n&&(ne.hasFilterAdvance=!0)}function Q(e){var a=angular.copy(ne[e]);a&&t(function(){ne[e]=a},100)}function ee(e,a,t){t||(t="id");for(var n=e.length-1;n>=0;n--)for(var i=a.length-1;i>=0;i--)e[n]&&e[n][t]===a[i][t]&&e.splice(n,1);return e}function ae(){Z();var e=angular.copy(ne.leads["new"].filters);return h.getDocument(e).then(function(e){te(e,"leads.xls","leads.xls")},function(e){v.errorMessage(E.getString("Error al exportar leads"))})}function te(e,a,t){var n=new Blob([e],{type:t});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}var ne=this;ne.leadStatus=d.leadStatus,ne.user=w,ne.results=m.newLeadResults,ne.resultReasons=m.resultReasons,ne.board={lists:[{id:"new",name:E.getString("Leads no atendidos"),show:!0},{id:"attended",name:E.getString("Leads atendidos por Comercial/Cualificado"),show:!0},{id:"commercial_management",name:E.getString("Tareas pendientes"),show:!0},{id:"tracing",name:E.getString("Seguimiento"),show:!0},{id:"end",name:E.getString("Leads cerrados"),show:!0}]},ne.leads={"new":r,attended:o,commercial_management:c,tracing:u,end:p},ne.hasFilterAdvance=!1,ne.filters={with_concession:!0,search:"",date_start:r.filters.created_start_date||null,date_end:r.filters.created_end_date||null,created_start_date:null,created_end_date:null,user_data:[],concessionaire__in_data:[],status_data:[],origin_data:[],channel_data:[],tasks_media_data:[],brand_data:[],tasks_type_data:[],tasks_tracing_data:[]},ne.taskTypes=k.taskTypes,ne.mediaTypes=S.mediaTypes,ne.leadResults=m.leadResults,ne.leadResultsErrors=m.leadResultsErrors,ne.showColumn=!1,ne.taskTypes=k.taskTypes,ne.tabs=[{key:"leadsActivityCommercialManagement",title:E.getString("Tareas")},{key:"leadsActivityTracing",title:E.getString("Seguimiento")}],ne.leadsActivityCommercialManagement={dataFuture:[],dataToday:[],dataYesterday:[],dataOthers:[],count:0},ne.leadsActivityTracing={dataFuture:[],dataToday:[],dataYesterday:[],dataOthers:[],count:0},ne.activities=[{title:E.getString("Hoy"),key:"dataToday"},{title:E.getString("Ayer"),key:"dataYesterday"},{title:E.getString("Anteriormente"),key:"dataOthers"}],T.$watch("vm.leads.new.filters",C(s.getLeadsNews,300),!0),T.$watch("vm.leads.attended.filters",C(s.getLeadsAttended,300),!0),T.$watch("vm.leads.commercial_management.filters",C(s.getLeadsCommercialManagements,300),!0),T.$watch("vm.leads.tracing.filters",C(s.getLeadsTracings,300),!0),T.$watch("vm.leads.end.filters",C(s.getLeadsEnds,300),!0),ne.changeFilter=z,ne.showMore=D,ne.toggleInArray=F,ne.toggleSidenav=j,ne.setScore=q,ne.getUsers=R,ne.getFullUserName=I,ne.getConcessionaires=H,ne.getOrigins=B,ne.getChannels=V,ne.getTaskMedia=G,ne.getBrands=W,ne.getTaskTypes=Y,ne.getBooleans=K,ne.getRequestTypes=J,ne.getStatusLead=X,ne.setFilters=Z,ne.copySearch=Q,ne.getDocument=ae,A()}e.$inject=["$document","$window","$timeout","$mdDialog","msUtils","leadsService","LeadsNews","LeadsAttended","Actions","leadStatusService","LeadsCommercialManagements","leadResultsService","LeadsTracings","LeadsEnds","scoresService","NotifyService","usersService","concessionairesService","originsService","channelsService","vehiclesService","currentUser","cacheFactory","taskTypesService","mediaTypesService","$scope","DebounceService","$mdSidenav","$q","gettextCatalog"],angular.module("app.leads").controller("BoardViewController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u,p,g,v,f,h,b,y,_,w,x,k,S,T,C,M,$,E,A,N,L,D,U,F,j,z,P,O,q,R,I,H,B,V,G,W,Y,K,J){function X(){for(var e in N.data){var a=Q(N.data[e]);va.leadsHistory[a][N.data[e].history_user]||(va.leadsHistory[a][N.data[e].history_user]={data:[],count:0,history_date_start:N.data[e].history_date,history_date_end:N.data[e].history_date,history_user:N.data[e].history_user}),va.leadsHistory.count++,va.leadsHistory[a][N.data[e].history_user].data.push(N.data[e]),va.leadsHistory[a][N.data[e].history_user].count++,va.leadsHistory[a][N.data[e].history_user].history_date_start=N.data[e].history_date}for(var e in j.data){var a=ee(j.data[e]);va.leadsActivity[a][j.data[e].user]||(va.leadsActivity[a][j.data[e].user]={data:[],count:0,activity_date_start:j.data[e].date,activity_date_end:j.data[e].date,activity_user:j.data[e].user_data}),va.leadsActivity.count++,va.leadsActivity[a][j.data[e].user].data.push(j.data[e]),va.leadsActivity[a][j.data[e].user].count++,va.leadsActivity[a][j.data[e].user].activity_date_start=j.data[e].date}va.lead.id&&va.lead.concessionaire&&Z(va.lead.concessionaire),R&&Ze(va.lead)}function Z(e){z.origins.filters.source__concession=e,z.getAllOrigins().then(function(e){va.origins=e,se(va.lead)})}function Q(e){var a=moment(e.history_date).format("DD-MM-YYYY"),t=moment().format("DD-MM-YYYY"),n=moment().subtract(1,"d").format("DD-MM-YYYY");return a===t?"dataToday":a===n?"dataYesterday":"dataOthers"}function ee(e){var a=moment(e.date).format("DD-MM-YYYY"),t=moment().format("DD-MM-YYYY"),n=moment().subtract(1,"d").format("DD-MM-YYYY");return a===t?"dataToday":a===n?"dataYesterday":ae(t,a)?"dataFuture":"dataOthers"}function ae(e,a){var t=e.split("-"),n=a.split("-"),i=new Date(t[2],t[1]-1,t[0]),s=new Date(n[2],n[1]-1,n[0]);return!(i>=s)}function te(e){var a,t=0;for(a in e)e.hasOwnProperty(a)&&t++;return t}function ne(){return va.lead.id&&"new"!==va.lead.status&&"pending"!==va.lead.status?(va.user.id=va.lead.user||va.user.is_admin)?!0:!1:!0}function ie(){return!1}function se(e){for(var a in e)"source_data"!==a&&"concessionaire_data"!==a&&"origin2_data"!==a&&(va.lead[a]=e[a]);!va.lead.source_data_prov&&va.lead.source_data&&(va.lead.source_data_prov=va.lead.source_data,va.lead.source=null);for(var a in va.lead.vehicles)oa(va.lead.vehicles[a]),va.lead.vehicles[a].brand_model&&(va.lead.vehicles[a].brand_model_data={id:va.lead.vehicles[a].brand_model.split("___")[1]||null,name:va.lead.vehicles[a].brand_model.split("___")[0]}),va.lead.vehicles[a].model&&(va.lead.vehicles[a].model_data={id:va.lead.vehicles[a].model.split("___")[1]||null,model_name:va.lead.vehicles[a].model.split("___")[0]}),va.lead.vehicles[a].version&&(va.lead.vehicles[a].version_data={id:va.lead.vehicles[a].version.split("___")[1]||null,version_name:va.lead.vehicles[a].version.split("___")[0]});for(var a in va.lead.appraisals)va.lead.appraisals[a].brand&&(va.lead.appraisals[a].brand_data={id:va.lead.appraisals[a].brand.split("___")[1]||null,name:va.lead.appraisals[a].brand.split("___")[0]}),va.lead.appraisals[a].model&&(va.lead.appraisals[a].model_data={id:va.lead.appraisals[a].model.split("___")[1]||null,model_name:va.lead.appraisals[a].model.split("___")[0]}),va.lead.appraisals[a].version&&(va.lead.appraisals[a].version_data={id:va.lead.appraisals[a].version.split("___")[1]||null,version_name:va.lead.appraisals[a].version.split("___")[0]});va.lead.vehicles&&va.lead.vehicles[0]&&va.lead.vehicles[0].ad_link&&(va.iframeAdLink=va.lead.vehicles[0].ad_link);for(var a in va.lead.appraisals)va.lead.appraisals[a].circulation_date=va.lead.appraisals[a].circulation_date?new Date(moment(va.lead.appraisals[a].circulation_date).format()):null,va.lead.appraisals[a].buy_date=va.lead.appraisals[a].buy_date?new Date(moment(va.lead.appraisals[a].buy_date).format()):null,va.lead.appraisals[a].registration_date=va.lead.appraisals[a].registration_date?new Date(moment(va.lead.appraisals[a].registration_date).format()):null,va.lead.appraisals[a].last_mechanic_date=va.lead.appraisals[a].last_mechanic_date?new Date(moment(va.lead.appraisals[a].last_mechanic_date).format()):null}function re(){return va.leadAction.date=void 0,oe(!1).then(function(a){e.leadForm.$setPristine(),se(a);for(var t=0;t<a.request.task.length;t++)!va.leadAction.date&&new Date<=moment(a.request.task[t].planified_realization_date)&&(va.leadAction.date=moment(a.request.task[t].planified_realization_date)),moment(a.request.task[t].planified_realization_date)<va.leadAction.date&&new Date<=va.leadAction.date&&(va.leadAction.date=moment(a.request.task[t].planified_realization_date));va.leadAction.lead=a.id,va.leadAction.lead_status_planing=a.status,va.leadAction.date&&q.saveLeadAction(va.leadAction).then(function(e){C(function(){w.go("app.leads.board")},500),x.successMessage(P.getString("Lead guardado correctamente"))},function(e){va.serverErrors=e.data,x.errorMessage(P.getString("Error al guardar el Lead.")+" "+(e.data.non_field_errors||""))})})}function oe(e){e="undefined"!=typeof e?e:!0;var a=S.defer(),t=angular.copy(va.lead);t.id&&delete t.request;var s={};if(t.concessionaire_data&&t.concessionaire_data.id||(s.concessionaire=["Este campo es requerido."]),t.source_data&&t.source_data.origin_data&&t.source_data.origin_data.id||(s.origin=["Este campo es requerido."]),t.source_data&&t.source_data.channel_data&&t.source_data.channel_data.id||(s.channel=["Este campo es requerido."]),t.source_data_prov&&t.source_data_prov.id||(s.source=["Este campo es requerido."]),s.concessionaire||s.origin||s.channel||s.source)return va.serverErrors=s,x.errorMessage(P.getString("Error al guardar el informe.")),a.reject(s),a.promise;if(t.origin2_data&&t.origin2_data.id?t.origin2=t.origin2_data.id:t.origin2=null,t.channel2_data&&t.channel2_data.id?t.channel2=t.channel2_data.id:t.channel2=null,delete t.status,va.lead.request.task.length<1){var r=k.confirm().title(P.getString("Guardar lead")).textContent(P.getString("Este lead no tiene ninguna solicitud adjunta. ¿Desea continuar?")).ariaLabel(P.getString("Guardar lead")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(P.getString("Continuar")).cancel(P.getString("Cancelar"));k.show(r).then(function(){n.saveLead(t).then(function(t){if(g.acd){var n={call_control:g.acd,lead:t.id};T.saveAcd(n)}se(t),e&&w.go("app.leads.board"),i.loadingProgress=!1,x.successMessage(P.getString("Informe guardado correctamente")),va.serverErrors=null,a.resolve(t)},function(e){console.log(e),i.loadingProgress=!1,va.serverErrors=e.data,x.errorMessage(P.getString("Error al guardar el informe.")+" "+(e.data.non_field_errors||"")),a.reject(e)})},function(){i.loadingProgress=!1,a.reject()})}else n.saveLead(t).then(function(t){if(g.acd){var n={id:g.acd,lead:t.id};T.saveAcd(n)}se(t),e&&w.go("app.leads.board"),i.loadingProgress=!1,x.successMessage(P.getString("Informe guardado correctamente")),va.serverErrors=null,a.resolve(t)},function(e){va.serverErrors=e.data,i.loadingProgress=!1,x.errorMessage(P.getString("Error al guardar el informe.")+" "+(e.data.non_field_errors||"")),a.reject(e)});return a.promise}function le(e,a){if(e.id){var t={status:a,id:e.id},i=e.status;return e.status=a,n.saveLead(t).then(function(e){x.successMessage(P.getString("Acción realizada correctamente")),va.lead.status_dates=e.status_dates,va.lead.status_new_datetime=e.status_new_datetime,va.lead.status_pending_datetime=e.status_pending_datetime,va.lead.status_attended_datetime=e.status_attended_datetime,va.lead.status_tracing_datetime=e.status_tracing_datetime,va.lead.status_end_datetime=e.status_end_datetime},function(a){e.status=i,va.serverErrors=a.data,x.errorMessage(P.getString("Error al realizar la acción.")+" "+(a.data.non_field_errors||""))})}va.lead.status=a,va.lead.status_dates={},va.lead.status_dates[a]=new Date}function de(){var e=S.defer();return n.getLead(va.lead.id).then(function(a){if(a.pending_tasks){var t=k.confirm().title(P.getString("Finalizar lead")).textContent(P.getString("Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?")).ariaLabel(P.getString("Finalizar lead")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(P.getString("Confirmar")).cancel(P.getString("Cancelar"));k.show(t).then(function(){me()})}else me();e.resolve()},function(){e.reject()}),e.promise}function ce(){var e=S.defer(),a=!1;return va.saveLead(a).then(function(a){n.getLead(a.id).then(function(a){if(a.pending_tasks){var t=k.confirm().title(P.getString("Finalizar lead")).textContent(P.getString("Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?")).ariaLabel(P.getString("Finalizar lead")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(P.getString("Confirmar")).cancel(P.getString("Cancelar"));k.show(t).then(function(){me()})}else me();e.resolve()},function(){e.reject()})},function(){e.reject()}),e.promise}function me(){va.isOpenFinishLeadBox=!0}function ue(){va.lead.note.push({content:"",modified:new Date})}function pe(e){if(e.id){for(var a=0;a<va.lead.note.length;a++)if(va.lead.note[a].id===e.id){va.lead.note.splice(a,1);break}}else for(var a=0;a<va.lead.note.length;a++)if(va.lead.note[a].content===e.content&&!e.id){va.lead.note.splice(a,1);break}}function ge(){va.lead.tags.push({content:"",modified:new Date})}function ve(e){if(e.id){for(var a=0;a<va.lead.tags.length;a++)if(va.lead.tags[a].id===e.id){va.lead.tags.splice(a,1);break}}else for(var a=0;a<va.lead.tags.length;a++)if(va.lead.tags[a].content===e.content&&!e.id){va.lead.tags.splice(a,1);break}}function fe(e,a,t){return va.lead.id?(t&&(t.datetime=new Date(t.planified_realization_date)),void k.show({controller:"TaskDialogController",controllerAs:"vm",templateUrl:"app/main/tasks/dialogs/task/task-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{Task:t,Tracing:a,GasTypes:v,Request:va.lead.request,Lead:va.lead.id,event:e}})):(i.loadingProgress=!0,void n.saveLead(va.lead).then(function(n){va.lead.id=n.id,va.lead.request=n.request,va.openTaskDialog(e,a,t),i.loadingProgress=!1},function(e){i.loadingProgress=!1,va.serverErrors=e.data,x.errorMessage(P.getString("Error al guardar el informe.")+" "+(e.data.non_field_errors||""))}))}function he(e,a){var t=k.confirm().title(P.getString("Eliminar solicitud")).textContent(P.getString("¿Seguro que quieres eliminar la solicitud?")).ariaLabel(P.getString("Eliminar solicitud")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(P.getString("Borrar solicitud")).cancel(P.getString("Cancelar"));k.show(t).then(function(){h.removeTask(a).then(function(){x.successMessage(P.getString("Solicitud borrada correctamente."))},function(e){x.errorMessage(P.getString("Error al borrar la solicitud.")+" "+(e.data.detail||""))})})}function be(e){var a=Re(e);return function(e){return Re(e.name||e.data).includes(a)}}function ye(e){var a=S.defer();return s.getProvinces("28",e).then(function(t){var n=e?t.filter(be(e)):t;a.resolve(n)}),a.promise}function _e(e){var a=S.defer(),t=null;return va.lead.client.province_data&&(t=va.lead.client.province_data.id),r.getLocalities(t,e).then(function(t){var n=e?t.filter(be(e)):t;a.resolve(n)}),a.promise}function we(e){var a=S.defer();return D.getBrands(e).then(function(e){a.resolve(e)}),a.promise}function xe(e,a){var t=S.defer();return D.getModels(e,a).then(function(e){t.resolve(e)}),t.promise}function ke(e,a){var t=S.defer();return D.getVersions(e,a).then(function(e){t.resolve(e)}),t.promise}function Se(e){return e.version_name+" "+(e.motor||"")+" "+(e.engine_power||"")}function Te(e,a,t){e.version_data&&(e.version_data.engine_power&&(e[a]=e.version_data.engine_power),e.version_data.gas_type_data&&e.version_data.gas_type_data.id&&(e[t]=e.version_data.gas_type_data.id))}function Ce(e){k.show({controller:"SendWhatsappDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/sendWhatsapp/sendWhatsapp-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{Lead:va.lead,event:e}})}function Me(e){var a=S.defer();return y.getSectors(e).then(function(e){a.resolve(e)}),a.promise}function $e(e,a){var t=S.defer();return y.getBusinessActivity(e,a).then(function(e){t.resolve(e)}),t.promise}function Ee(){r.getLocalitiesByCodPostal(va.lead.client.postal_code).then(function(e){console.log(e),e&&e[0]&&(va.lead.client.location_data=e[0],va.lead.client.province_data=e[0].province)})}function Ae(e){var a=S.defer();return va.lead.user_data&&va.lead.user_data.id?F.getUser(va.lead.user_data.id).then(function(t){var n=t.related_concessionaires.map(function(e){return e.concessionaire_data}),i=e?n.filter(be(e)):n;a.resolve(i)}):(B.concessionaires.filters={},B.concessionaires.filters.search=e,B.concessionaires.filters.page_size="all",B.getConcessionaires().then(function(e){a.resolve(e.data)})),a.promise}function Ne(e,a){var t=S.defer();if(a){var n=Array.from(new Set(a.sources.map(function(e){return e.origin}))),i=n.map(function(e){var t=a.sources.find(function(a){return a.origin===e});return t?t.origin_data:void 0}),s=e?i.filter(be(e)):i;t.resolve(s)}else t.resolve([]);return t.promise}function Le(e){var a=S.defer();return z.getAllOrigins(e).then(function(e){a.resolve(e)}),a.promise}function De(e,a,t){var n=S.defer();if(a&&t){var i=Array.from(new Set(a.sources.map(function(e){return e.channel}))),s=i.map(function(e){var n=a.sources.find(function(a){return a.channel===e&&a.origin===t.id});return n?n.channel_data:void 0}).filter(function(e){return null!=e}),r=e?s.filter(be(e)):s;n.resolve(r)}else n.resolve([]);return n.promise}function Ue(e,a){var t=S.defer();return a&&a.available_channels_data.length>0?t.resolve(a.available_channels_data):t.resolve([]),t.promise}function Fe(e,a,t){if(t){var n=Array.from(new Set(e.sources.map(function(e){return e.id}))),i=n.map(function(n){return e.sources.find(function(e){return e.id===n&&e.origin===a.id&&e.channel===t.id})}).filter(function(e){return null!=e});1===i.length&&(va.lead.source_data_prov=i[0])}}function je(){return{id:4,name:"Presencial",slug:"presencial"}}function ze(e,a,t,n){var i=S.defer();if(a&&t&&n){var s=Array.from(new Set(a.sources.map(function(e){return e.id}))),r=s.map(function(e){return a.sources.find(function(a){return a.id===e&&a.origin===t.id&&a.channel===n.id})}).filter(function(e){return null!=e}),o=e?r.filter(be(e)):r;i.resolve(o)}else i.resolve([]);return i.promise}function Pe(e){var a=" _____ ";return P.getString("Origen")+": "+e.origin_data.name+a+P.getString("Canal")+": "+e.channel_data.name+" ("+e.data+")"+a+P.getString("Concesionario")+": "+(e.concession_data__name||e.concession_data.name)}function Oe(e){return e?e.first_name+" "+e.last_name:P.getString("Sin asignar")}function qe(e){var a=S.defer();return y.getClients(e).then(function(e){a.resolve(e)}),a.promise}function Re(e){return e=e.toLowerCase(),e=e.replace(/á/gi,"a"),e=e.replace(/é/gi,"e"),e=e.replace(/í/gi,"i"),e=e.replace(/ó/gi,"o"),e=e.replace(/ú/gi,"u")}function Ie(e){var a=S.defer(),t=!1;return va.saveLead(t).then(function(t){t.cur_user_can_assign?(F.users.filters.userconcession__concessionaire__id=t.concessionaire,F.users.filters.is_superuser=!1,F.users.filters.is_staff=!1,F.users.filters.is_complex=!1,k.show({controller:"LeadDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/lead/lead-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{Lead:va.lead,Concessionaire:b,Users:F.getAllUsers(),event:e}})):x.errorMessage("Usted no puede realizar asignaciones."),a.resolve()},function(){a.reject()}),a.promise}function He(e,a){k.show({controller:"LeadStatusDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/leadStatus/leadStatus-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{Lead:a,event:e}})}function Be(e,a,t){k.show({controller:"LeadStatusDateDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/leadStatusDate/leadStatusDate-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{Lead:a,Field:t,event:e}})}function Ve(e){k.show({controller:"LeadContactDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/leadContact/leadContact-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{LeadContacts:va.lead.contact_history,event:e}})}function Ge(e){for(var a in e){var t,n=new Date(0);e[a].realization_date&&(t=new Date(e[a].realization_date),t>n&&(n=t))}return n}function We(e,a){return e=new Date(e),a=new Date(a),Math.ceil((a-e)/864e5)}function Ye(){va.lead.client.phone&&"+34"===va.lead.client.phone&&(va.lead.client.phone=""),va.lead.client.phone&&va.lead.client.phone.length>8&&ga("client__phone__icontains",va.lead.client.phone)}function Ke(){va.lead.client.email&&va.lead.client.email.length>5&&ga("client__email__icontains",va.lead.client.email)}function Je(){va.lead.client.phone&&""!==va.lead.client.phone||(va.lead.client.phone="+34")}function Xe(){var e=S.defer();return!angular.element(document.body).hasClass("md-dialog-is-showing")&&va.leads["new"].filters.id_excluded>=0&&(va.lead.client.phone&&va.lead.client.phone.length>8||va.lead.client.email&&va.lead.client.email.length>5)&&(va.leads["new"].count>0||va.leads.attended.count>0||va.leads.commercial_management.count>0||va.leads.tracing.count>0||va.leads.end.count>0)&&k.show(k.alert().ok(P.getString("OK")).textContent(P.getString("¡¡Atención existen registros con los mismos datos de contacto revisa sección Coincidentes antes de generar duplicados!!")).multiple(!1)),e.resolve(!0),e.promise}function Ze(e){var a={lead:e.id};return $.saveClick2call(a).then(function(e){x.successMessage(P.getString("Acción realizada correctamente")),va.leadsOutgoingCalls.length>0&&"commercial_management"===va.lead.status?Qe():"tracing"===va.lead.status&&Qe()},function(e){va.serverErrors=e.data,x.errorMessage(P.getString("Error al realizar la acción.")+" "+(e.data.non_field_errors||""))})}function Qe(){var e=S.defer();return n.getLead(va.lead.id).then(function(a){if(a.pending_tasks){var t=k.confirm().title(P.getString("Finalizar lead")).textContent(P.getString("El sistema ha detectado un seguimiento de este lead ¿Desea finalizar el lead?")).ariaLabel(P.getString("Finalizar lead")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(P.getString("Confirmar")).cancel(P.getString("Cancelar"));k.show(t).then(function(){me()})}else me();e.resolve()},function(){e.reject()}),e.promise}function ea(e,a){k.show({controller:"LeadHistoryDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/leadHistory/leadHistory-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{LeadHistories:a,event:e}})}function aa(e,a){k.show({controller:"LeadActivityDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/leadActivity/leadActivity-dialog.html",parent:angular.element(p.body),targetEvent:e,clickOutsideToClose:!0,locals:{LeadActivities:a,event:e}})}function ta(){va.lead.vehicles.push({})}function na(){va.lead.appraisals.push({circulation_date:null,buy_date:null,registration_date:null,last_mechanic_date:null})}function ia(e,a){a.id?D.removeVehicle(a).then(function(){va.lead.vehicles.splice(e,1)}):va.lead.vehicles.splice(e,1)}function sa(e,a){a.id?U.removeAppraisal(a).then(function(){va.lead.appraisals.splice(e,1)}):va.lead.appraisals.splice(e,1)}function ra(){for(var e in va.lead.vehicles)va.lead.vehicles[e].origin=null,va.lead.vehicles[e].media=null;
va.lead.source_data&&va.lead.source_data.concession&&Z(va.lead.source_data.concession)}function oa(e){for(var a in va.origins)va.origins[a].id===e.origin&&(e.channelOptions=va.origins[a].available_channels_data)}function la(e){return new Array(e)}function da(e){if(e.id){var a={id:e.id,realization_date:new Date,realization_date_check:!0};return h.saveTask(a).then(function(e){se()},function(e){x.errorMessage(P.getString("Error al realizar la solicitud.")+" "+(e.data.non_field_errors||""))})}e.realization_date=new Date,e.realization_date_check=!0}function ca(e){n.reactivateLead(e.id).then(function(e){se(e),x.successMessage(P.getString("Lead reactivado correctamente"))},function(e){i.loadingProgress=!1,va.serverErrors=e.data,x.errorMessage(P.getString("Error al reactivar lead.")+" "+(e.data.non_field_errors||""))})}function ma(e){n.sendMail(e.id).then(function(e){},function(e){console.log(e)})}function ua(e){return H.trustAsResourceUrl(e)}function pa(){return n.hubspot(va.lead).then(function(e){x.successMessage(P.getString("Lead sincronizado correctamente"))},function(e){va.serverErrors=e.data,x.errorMessage(P.getString("Error al sincronizar.")+" "+(e.data.error||""))})}function ga(e,a){va.filters[e]=a;for(var t in va.leads)va.leads[t].filters.page=1,va.leads[t].filters[e]=a}var va=this;va.user=a,va.lead=angular.copy(t),va.tasks=f,va.leadStatus=I.leadStatus,va.isOpenFinishLeadBox=!1,va.concessionaire=b,va.origins=[],va.iframeAdLink=null,va.clientTypes=[{id:"private",name:"Particular"},{id:"freelance",name:"Autonomo"},{id:"company",name:"Empresa"}],va.board={lists:[{id:"new",name:P.getString("Leads no atendidos"),show:!0},{id:"attended",name:P.getString("Leads atendidos por Comercial/Cualificado"),show:!0},{id:"commercial_management",name:P.getString("Tareas pendientes"),show:!0},{id:"tracing",name:P.getString("Seguimiento"),show:!0},{id:"end",name:P.getString("Leads cerrados"),show:!0}]},va.leads={"new":V,attended:G,commercial_management:W,tracing:Y,end:K},va.filters={},e.$watch("vm.leads.new.filters",J(n.getLeadsNews,300),!0),e.$watch("vm.leads.attended.filters",J(n.getLeadsAttended,300),!0),e.$watch("vm.leads.commercial_management.filters",J(n.getLeadsCommercialManagements,300),!0),e.$watch("vm.leads.tracing.filters",J(n.getLeadsTracings,300),!0),e.$watch("vm.leads.end.filters",J(n.getLeadsEnds,300),!0),e.$watch("vm.leads.new.data",J(Xe,300),!0),e.$watch("vm.leads.attended.data",J(Xe,300),!0),e.$watch("vm.leads.commercial_management.data",J(Xe,300),!0),e.$watch("vm.leads.tracing.data",J(Xe,300),!0),e.$watch("vm.leads.end.data",J(Xe,300),!0),va.leadAction=q.getEmptyLeadAction(t),va.leadsIncomingCalls=E,va.leadsOutgoingCalls=A,va.leadsHistory={dataToday:{},dataYesterday:{},dataOthers:{},count:0},va.histories=[{title:P.getString("Hoy"),key:"dataToday"},{title:P.getString("Ayer"),key:"dataYesterday"},{title:P.getString("Anteriormente"),key:"dataOthers"}],va.leadsActivity={dataFuture:{},dataToday:{},dataYesterday:{},dataOthers:{},count:0},va.activities=[{title:P.getString("Próximamente"),key:"dataFuture"},{title:P.getString("Hoy"),key:"dataToday"},{title:P.getString("Ayer"),key:"dataYesterday"},{title:P.getString("Anteriormente"),key:"dataOthers"}],va.temperatures=o.temperatures,va.qualifications=d.qualifications,va.scores=c.scores,va.taskTypes=[],m.getTaskTypes(!1).then(function(e){va.taskTypes=e,m.getTaskTypes(!0).then(function(e){va.taskTypes=va.taskTypes.concat(e)})}),va.gasTypes=v,va.results=O.newLeadResults,va.resultReasons=O.resultReasons,va.vehicleTypes=[{id:"new",name:P.getString("Nuevo")},{id:"km0",name:P.getString("Km0")},{id:"seminew",name:P.getString("Seminuevo")},{id:"used",name:P.getString("Ocasión")}],va.comercialCategories=[{id:"request_product",name:P.getString("Producto solicitado")},{id:"offered_product",name:P.getString("Producto ofertado")}],va.requestTypes=[{id:"new",name:P.getString("Nuevo")},{id:"km0",name:P.getString("Kilometro 0")},{id:"seminew",name:P.getString("Seminuevo")},{id:"used",name:P.getString("Ocasión")},{id:"management",name:P.getString("Gerencia")},{id:"apv",name:P.getString("Postventa")},{id:"acc",name:P.getString("Accesorios")}],va.gearShifts=[{id:"manual",name:P.getString("Manual")},{id:"auto",name:P.getString("Automático")}],g.source&&(va.lead.source_data=M,va.lead.source_data_prov=M,va.lead.concessionaire_data=M.concession_data),g.phone&&(va.lead.client.phone=g.phone),g.user&&(va.lead.user=g.user,F.getUser(va.lead.user).then(function(e){va.lead.user_data=e})),va.week={},va.week.monday=P.getString("Lunes"),va.week.tuesday=P.getString("Martes"),va.week.wednesday=P.getString("Miércoles"),va.week.thursday=P.getString("Jueves"),va.week.friday=P.getString("Viernes"),va.week.saturday=P.getString("Sábado"),va.week.sunday=P.getString("Domingo"),e.$on("$stateChangeStart",function(a,t,n,i,s){if("app.leads.get.edit"===i.name&&e.leadForm.$dirty){a.preventDefault();var r=k.confirm().title(P.getString("Se han detectado cambios")).textContent(P.getString("Si abandona esta pantalla perderá los cambios, ¿Desea guardar los cambios?")).ariaLabel(P.getString("Guardar lead")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(P.getString("Guardar")).cancel(P.getString("Abandonar"));k.show(r).then(function(){re()},function(a){e.leadForm.$setPristine(),w.go(t.name,{lead:0})})}}),X(),e.$watch("vm.lead.client_data",function(e,a){!e||a&&e.id===a.id||(va.lead.client=e)},!0),va.canEdit=ne,va.isDisabled=ie,va.openSaveLeadDialog=re,va.saveLead=oe,va.changeStatus=le,va.finishLead=de,va.saveAndfinishLead=ce,va.addNote=ue,va.deleteNote=pe,va.addTag=ge,va.deleteTag=ve,va.openTaskDialog=fe,va.removeTask=he,va.getProvinces=ye,va.getLocalities=_e,va.getBrands=we,va.getModels=xe,va.getVersions=ke,va.getFullNameVersion=Se,va.changeVehicleVersion=Te,va.getBusinessActivity=$e,va.getSectors=Me,va.sendWhatsapp=Ce,va.completeAddress=Ee,va.getConcessionaires=Ae,va.getOrigins=Ne,va.getAllOrigins=Le,va.getChannels=De,va.getAllChannels=Ue,va.changeChannel=Fe,va.getExposicion=je,va.getSources=ze,va.getFullNamceSource=Pe,va.getFullUserName=Oe,va.getClients=qe,va.openLeadDialog=Ie,va.openLeadContactDialog=Ve,va.openLeadStatusDialog=He,va.openLeadStatusDateDialog=Be,va.getLastRealizationDate=Ge,va.datediff=We,va.eventClientBlur=Ye,va.eventClientEmailBlur=Ke,va.setExtension=Je,va.call=Ze,va.objectSize=te,va.openLeadHistoryDialog=ea,va.openLeadActivityDialog=aa,va.addVehicle=ta,va.deleteVehicle=ia,va.addAppraisal=na,va.deleteAppraisal=sa,va.changeSource=ra,va.selectOrigin=oa,va.getNumber=la,va.saveTask=da,va.reactivate=ca,va.sendMail=ma,va.trustSrc=ua,va.hubspot=pa}e.$inject=["$scope","currentUser","Lead","leadsService","$rootScope","provincesService","localitiesService","temperaturesService","phonesService","qualificationsService","scoresService","taskTypesService","sourcesService","$document","$stateParams","GasTypes","Tasks","tasksService","Concessionaire","clientsService","emailsService","$state","NotifyService","$mdDialog","$q","acdsService","$timeout","Source","click2callsService","LeadsIncomingCalls","LeadsOutgoingCalls","LeadsHistory","channelsService","vehiclesService","appraisalsService","usersService","LeadsActivity","originsService","gettextCatalog","leadResultsService","leadActionsService","StartCall","leadStatusService","$sce","concessionairesService","LeadsNews","LeadsAttended","LeadsCommercialManagements","LeadsTracings","LeadsEnds","DebounceService"],angular.module("app.leads").controller("LeadEditController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l){var d=this;d.user=a,d.lead=angular.copy(t)}e.$inject=["$rootScope","currentUser","Lead","leadsService","NotifyService","$document","$state","$mdDialog","gettextCatalog"],angular.module("app.leads").controller("LeadController",e)}(),function(){"use strict";function e(e,a,t,n,i,s){function r(){var e={message:m.whatsappMsg,lead:m.lead.id};t.sendWhatsapp(e).then(function(e){var a=m.lead.client.phone,t="https://web.whatsapp.com/send?phone="+a+"&text="+encodeURIComponent(m.whatsappMsg);window.open(t,"_blank"),m.whatsappMsg="",d()})}function o(){m.templates=angular.copy(a.user_data.whatsapp_templates),m.templates.push({alias:"",text:""}),m.manageTemplates=!0}function l(){var e=[];for(var a in m.templates)""!==m.templates[a].alias&&e.push({id:m.templates[a].id,alias:m.templates[a].alias,text:m.templates[a].text,user:m.lead.user});return n.saveUser({whatsapp_templates:e,email:m.lead.user_data.email,id:m.lead.user}).then(function(){i.successMessage(s.getString("Plantillas guardadas correctamente")),m.lead.user_data.whatsapp_templates=e,m.manageTemplates=!1},function(e){m.serverErrors=e.data,i.errorMessage(s.getString("Error al guardar las plantillas.")+" "+(e.data.non_field_errors||""))})}function d(){e.hide()}function c(){if(m.templateSelected){if(m.whatsappMsg=m.templateSelected,m.whatsappMsg=m.whatsappMsg.replaceAll("[Nombre vendedor]",m.lead.user_data.first_name+" "+m.lead.user_data.last_name),m.whatsappMsg=m.whatsappMsg.replaceAll("[Telefono del vendedor]",m.lead.user_data.phone),m.lead.vehicles.length>0){var e="";m.lead.vehicles[0].brand_model&&(e=m.lead.vehicles[0].brand_model.split("__")[0]),m.lead.vehicles[0].model&&(e+=" "+m.lead.vehicles[0].model.split("__")[0]),m.lead.vehicles[0].price&&(e+=" "+m.lead.vehicles[0].price+" €"),m.whatsappMsg=m.whatsappMsg.replaceAll("[Vehículo solicitado]",e),m.lead.vehicles[0].ad_link&&(m.whatsappMsg=m.whatsappMsg.replaceAll("[Url anuncio]",m.lead.vehicles[0].ad_link))}m.lead.origin&&(m.whatsappMsg=m.whatsappMsg.replaceAll("[Origen del lead]",m.lead.origin.name)),m.lead.concessionaire_data&&(m.whatsappMsg=m.whatsappMsg.replaceAll("[Nombre del concesionario]",m.lead.concessionaire_data.name))}}var m=this;m.lead=a,m.whatsappMsg="",m.manageTemplates=!1,m.newAlias="",m.newText="",m.templates=[],m.templateSelected=null,m.sendWhatsapp=r,m.startManageTemplates=o,m.sendWhatsappTemplates=l,m.updateTemplate=c,m.closeDialog=d}e.$inject=["$mdDialog","Lead","clientsService","usersService","NotifyService","gettextCatalog"],angular.module("app.leads").controller("SendWhatsappDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m){function u(){var e=o.defer(),a=angular.copy(b.lead);return delete a.request,n.saveLead(a).then(function(a){i.saveLeadAction(b.leadAction).then(function(a){f(),d(function(){l.go("app.leads.board")},500),r.successMessage(m.getString("Informe guardado correctamente")),e.resolve(a)},function(a){v(a),e.reject(a)})},function(a){v(a),e.reject(a)}),e.promise}function p(){var a=o.defer();return n.getLead(b.lead.id).then(function(t){if(t.pending_tasks){var n=e.confirm().title(m.getString("Finalizar lead")).textContent(m.getString("Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?")).ariaLabel(m.getString("Finalizar lead")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(m.getString("Confirmar")).cancel(m.getString("Cancelar"));e.show(n).then(function(){g()})}else g();a.resolve()},function(){a.reject()}),a.promise}function g(a){a="undefined"!=typeof a?a:b.lead,e.show({controller:"FinishLeadDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/finishLead/finishLead-dialog.html",parent:angular.element(document.body),clickOutsideToClose:!0,locals:{Lead:a}})}function v(e){b.serverErrors=e.data,r.errorMessage(m.getString("Error al guardar el informe.")+" "+(e.data.non_field_errors||""))}function f(){e.hide()}function h(e){var a=new Date;b.leadAction.date=new Date(a.getFullYear(),a.getMonth(),a.getDate()+e,9,0)}var b=this;b.lead=a,b.tasks=t,b.leadAction=i.getEmptyLeadAction(a),b.taskTypes=s.taskTypes,b.saveSaveLead=u,b.closeDialog=f,b.finishLead=p,b.setDate=h}e.$inject=["$mdDialog","Lead","Tasks","leadsService","leadActionsService","taskTypesService","NotifyService","$q","$state","$timeout","tasksService","gettextCatalog"],angular.module("app.leads").controller("SaveLeadDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r){function o(){return n.saveLead(angular.copy(d.lead)).then(function(e){i.successMessage(r.getString("Fecha guardada correctamente")),a[t]=e[t],l()},function(e){d.serverErrors=e.data,i.errorMessage(r.getString("Error al guardar la fecha.")+" "+(e.data.non_field_errors||""))})}function l(){e.hide()}var d=this;d.lead={id:a.id},d.field="custom_"+t,d.lead[d.field]=moment(a[t],"YYYY-MM-DDThh:mm").toDate(),d.saveLeadStatus=o,d.closeDialog=l}e.$inject=["$mdDialog","Lead","Field","leadsService","NotifyService","$q","gettextCatalog"],angular.module("app.leads").controller("LeadStatusDateDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s){function r(){return t.changeStatus(angular.copy(l.lead)).then(function(e){n.successMessage(s.getString("Estado guardado correctamente")),a.status=e.status,o()},function(e){l.serverErrors=e.data,n.errorMessage(s.getString("Error al guardar el estado.")+" "+(e.data.non_field_errors||""))})}function o(){e.hide()}var l=this;l.lead=angular.copy(a),l.status=[{id:"new",name:s.getString("Lead no atendido")},{id:"commercial_management",name:s.getString("Tareas pendientes")},{id:"tracing",name:s.getString("Seguimiento")}],l.saveLeadStatus=r,l.closeDialog=o}e.$inject=["$mdDialog","Lead","leadsService","NotifyService","$q","gettextCatalog"],angular.module("app.leads").controller("LeadStatusDialogController",e)}(),function(){"use strict";function e(e,a,t,n){function i(){e.hide()}var s=this;s.title=n.getString("Histórico"),s.leadHistories=a,s.closeDialog=i}e.$inject=["$mdDialog","LeadHistories","NotifyService","gettextCatalog"],angular.module("app.leads").controller("LeadHistoryDialogController",e)}(),function(){"use strict";function e(e,a,t,n){function i(){e.hide()}var s=this;s.title=n.getString("Actividades"),s.leadActivities=a,s.activityStatus=[{id:"commercial_management",name:n.getString("En gestión")},{id:"tracing",name:n.getString("Seguimiento")}],s.closeDialog=i}e.$inject=["$mdDialog","LeadActivities","NotifyService","gettextCatalog"],angular.module("app.leads").controller("LeadActivityDialogController",e)}(),function(){"use strict";function e(e,a,t,n){function i(){e.hide()}var s=this;s.title=n.getString("Historial de contactos"),s.leadContacts=a,s.closeDialog=i}e.$inject=["$mdDialog","LeadContacts","NotifyService","gettextCatalog"],angular.module("app.leads").controller("LeadContactDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o){function l(){return n.getDocument(m.exportLead).then(function(e){d(e,"leads.xls","leads.xls"),c()},function(e){i.errorMessage(o.getString("Error al exportar leads"))})}function d(e,a,t){var n=new Blob([e],{type:t});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}function c(){a.hide()}var m=this;m.exportLead={created_start_date:new Date(moment().subtract(1,"months").startOf("day").format()),created_end_date:new Date(moment().startOf("day").format())},m.title=o.getString("Exportar Leads"),m.concessionaires=t,e.loadingProgress=!1,m.getDocument=l,m.closeDialog=c}e.$inject=["$rootScope","$mdDialog","Concessionaires","concessionairesService","NotifyService","usersService","$q","gettextCatalog"],angular.module("app.leads").controller("ExportLeadDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i){function s(){n.go("app.leads.get.edit",{lead:o.lead}),e.hide()}function r(){e.hide()}var o=this;o.title=i.getString("Posible lead duplicado"),o.duplicateLeads=a,o.lead=null,o.status=t.leadStatus,o.goToLead=s,o.closeDialog=r}e.$inject=["$mdDialog","DuplicateLeads","leadStatusService","$state","gettextCatalog"],angular.module("app.leads").controller("DuplicateLeadsDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l){function d(e){return e&&e.id?(u.lead.user=e.id,u.lead.user_data=e,t.saveLead(angular.copy(u.lead)).then(function(e){i.successMessage(l.getString("Infome guardado correctamente")),a.status=e.status,a.end_date=e.end_date,a.user_data=e.user_data,m()},function(e){u.serverErrors=e.data,i.errorMessage(l.getString("Error al guardar el infome.")+" "+(e.data.non_field_errors||""))})):void i.errorMessage(l.getString("Debe seleccionar un comercial existente. "))}function c(e){return e?e.first_name+" "+e.last_name:""}function m(){e.hide()}var u=this;u.lead={user:a.user,user_data:a.user_data,id:a.id,source_data_prov:a.source_data_prov},u.users=o,u.title=l.getString("Asignar comercial"),u.saveLead=d,u.getFullUserName=c,u.closeDialog=m}e.$inject=["$mdDialog","Lead","leadsService","Concessionaire","NotifyService","usersService","$q","Users","gettextCatalog"],angular.module("app.leads").controller("LeadDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r){function o(e){return c.lead.result=e,"negative"===e||"not_available"===e||"error"===e?(c.actionError=!0,void i.successMessage(r.getString("Elija una opción"))):t.saveLead(angular.copy(c.lead)).then(function(e){i.successMessage(r.getString("Lead finalizado correctamente")),s.go("app.leads.board"),d()},function(e){c.serverErrors=e.data,i.errorMessage(r.getString("Error al finalizar lead.")+" "+(e.data.non_field_errors||""))})}function l(e){return c.lead.result_reason=e,t.saveLead(angular.copy(c.lead)).then(function(e){i.successMessage(r.getString("Lead finalizado correctamente")),s.go("app.leads.board"),d()},function(e){c.serverErrors=e.data,i.errorMessage(r.getString("Error al finalizar lead.")+" "+(e.data.non_field_errors||""))})}function d(){e.hide()}var c=this;c.lead={result:null,result_reason:null,id:a.id},c.title=r.getString("Finalizar"),c.actionError=!1,c.buttonErros=n.leadResultsErrors,c.saveLead=o,c.saveLeadError=l,c.closeDialog=d}e.$inject=["$mdDialog","Lead","leadsService","leadResultsService","NotifyService","$state","gettextCatalog"],angular.module("app.leads").controller("FinishLeadDialogController",e)}(),function(){"use strict";function e(e,a){e.state("app.concessionaires",{url:"/concessionaires",views:{"content@app":{templateUrl:"app/main/concessionaires/concessionaires.html",controller:"ConcessionairesController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}],Concessionaires:["concessionairesService",function(e){return e.concessionaires.filters={},e.getConcessionairesConfig()}]},bodyClass:"todo"})}e.$inject=["$stateProvider","msApiProvider"],angular.module("app.concessionaires",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o){function l(){var e=angular.copy(g.concessionaire);return delete g.concessionaire.work_calendar,t.saveConcessionaire(e).then(function(){n.successMessage(o.getString("Concesionario guardado correctamente")),d()},function(e){g.serverErrors=e.data,n.errorMessage(o.getString("Error al guardar el concesionario.")+" "+(e.data.non_field_errors||""))})}function d(){e.hide()}function c(){g.concessionaire.sources.push({data:""})}function m(e,a,i){return i.id?t.removeSource(angular.copy(i)).then(function(){a.$setDirty(),g.concessionaire.sources.splice(e,1)},function(e){n.errorMessage(o.getString("Error al borrar la fuente.")+" "+(e.data.non_field_errors||""))}):(a.$setDirty(),void g.concessionaire.sources.splice(e,1))}function u(e){var a=r.defer();return i.getAllOrigins(e).then(function(e){a.resolve(e)}),a.promise}function p(e,a){var t=r.defer();return a.available_channels_data.length>0?t.resolve(a.available_channels_data):s.getAllChannels(e).then(function(e){t.resolve(e)}),t.promise}var g=this;g.title=o.getString("Editar concesionario"),a?g.concessionaire=angular.copy(a):(g.title=o.getString("Nuevo concesionario"),g.concessionaire=t.getEmptyConcessionaire()),g.saveConcessionaire=l,g.closeDialog=d,g.addSource=c,g.removeSource=m,g.getOrigins=u,g.getChannels=p}e.$inject=["$mdDialog","Concessionaire","concessionairesService","NotifyService","originsService","channelsService","$q","gettextCatalog"],angular.module("app.concessionaires").controller("ConcessionaireDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o){function l(){if(m.concessionaire.work_calendar){var e=m.concessionaire;for(var a in e.work_calendar)e.work_calendar[a].start_hour&&(e.work_calendar[a].start_hour=moment(e.work_calendar[a].start_hour,"HH:mm").toDate()),e.work_calendar[a].end_hour&&(e.work_calendar[a].end_hour=moment(e.work_calendar[a].end_hour,"HH:mm").toDate())}else m.concessionaire.work_calendar={},m.concessionaire.work_calendar.monday={working_day:!1},m.concessionaire.work_calendar.tuesday={working_day:!1},m.concessionaire.work_calendar.wednesday={working_day:!1},m.concessionaire.work_calendar.thursday={working_day:!1},m.concessionaire.work_calendar.friday={working_day:!1},m.concessionaire.work_calendar.saturday={working_day:!1},m.concessionaire.work_calendar.sunday={working_day:!1}}function d(){var e=angular.copy(m.concessionaire);for(var a in e.work_calendar)e.work_calendar[a].start_hour&&(e.work_calendar[a].start_hour=moment(e.work_calendar[a].start_hour).format("HH:mm")),e.work_calendar[a].end_hour&&(e.work_calendar[a].end_hour=moment(e.work_calendar[a].end_hour).format("HH:mm"));return t.saveConcessionaire(e).then(function(){n.successMessage(o.getString("Calendario guardado correctamente")),c()},function(e){m.serverErrors=e.data,n.errorMessage(o.getString("Error al guardar el calendario.")+" "+(e.data.non_field_errors||""))})}function c(){e.hide()}var m=this;m.title=o.getString("Calendario de trabajo"),m.concessionaire=angular.copy(a),m.week={},m.week.monday=o.getString("Lunes"),m.week.tuesday=o.getString("Martes"),m.week.wednesday=o.getString("Miércoles"),m.week.thursday=o.getString("Jueves"),m.week.friday=o.getString("Viernes"),m.week.saturday=o.getString("Sábado"),m.week.sunday=o.getString("Domingo"),l(),m.saveConcessionaire=d,m.closeDialog=c}e.$inject=["$mdDialog","Concessionaire","concessionairesService","NotifyService","originsService","channelsService","$q","gettextCatalog"],angular.module("app.concessionaires").controller("ConcessionaireCalendarDialogController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o){function l(){var e=angular.copy(u.concessionaire);return delete u.concessionaire.work_calendar,t.saveConcessionaire(e).then(function(){n.successMessage(o.getString("Concesionario guardado correctamente")),m()},function(e){u.serverErrors=e.data,n.errorMessage(o.getString("Error al guardar el concesionario.")+" "+(e.data.non_field_errors||""))})}function d(){u.concessionaire.notes_data.push({content:"",modified:new Date})}function c(e){if(e.id){for(var a=0;a<u.concessionaire.notes_data.length;a++)if(u.concessionaire.notes_data[a].id===e.id){u.concessionaire.notes_data.splice(a,1);break}}else for(var a=0;a<u.concessionaire.notes_data.length;a++)if(u.concessionaire.notes_data[a].content===e.content&&!e.id){u.concessionaire.notes_data.splice(a,1);break}}function m(){e.hide()}var u=this;u.title=o.getString("Notas"),u.concessionaire=angular.copy(a),u.saveConcessionaire=l,u.addNote=d,u.deleteNote=c,u.closeDialog=m}e.$inject=["$mdDialog","Concessionaire","concessionairesService","NotifyService","originsService","channelsService","$q","gettextCatalog"],angular.module("app.concessionaires").controller("ConcessionaireNotesDialogController",e)}(),function(){"use strict";function e(e,a){e.state("app.channels",{url:"/channels",views:{"content@app":{templateUrl:"app/main/channels/channels.html",controller:"ChannelsController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}],Channels:["channelsService",function(e){return e.channels.filters={},e.getChannels()}]},bodyClass:"todo"})}e.$inject=["$stateProvider","msApiProvider"],angular.module("app.channels",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r){function o(){return n.saveChannel(angular.copy(d.channel)).then(function(){i.successMessage(r.getString("Canal guardado correctamente")),l()},function(e){d.serverErrors=e.data,i.errorMessage(r.getString("Error al guardar el canal.")+" "+(e.data.non_field_errors||""))})}function l(){a.hide()}var d=this;d.title=r.getString("Editar canal"),t?d.channel=angular.copy(t):(d.title=r.getString("Nuevo canal"),d.channel=n.getEmptyChannel()),d.saveChannel=o,d.closeDialog=l}e.$inject=["$scope","$mdDialog","Channel","channelsService","NotifyService","$timeout","gettextCatalog"],angular.module("app.channels").controller("ChannelDialogController",e)}(),function(){"use strict";function e(e,a){e.state("app.acds",{url:"/acds",views:{"content@app":{templateUrl:"app/main/acds/acds.html",controller:"AcdsController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}],Acds:["acdsService",function(e){return e.acds.filters={},e.getAcds()}]},bodyClass:"todo"})}e.$inject=["$stateProvider","msApiProvider"],angular.module("app.acds",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r){function o(){return t.saveAcd(angular.copy(d.acd)).then(function(){n.successMessage(r.getString("Concesionario guardado correctamente")),l()},function(e){d.serverErrors=e.data,n.errorMessage(r.getString("Error al guardar el concesionario.")+" "+(e.data.non_field_errors||""))})}function l(){e.hide()}var d=this;d.title=r.getString("Asignar Lead"),d.acd=angular.copy(a),d.saveAcd=o,d.closeDialog=l}e.$inject=["$mdDialog","Acd","acdsService","NotifyService","originsService","$q","gettextCatalog"],angular.module("app.acds").controller("AcdDialogController",e)}(),function(){"use strict";function e(e,a){e.state("app.auth",{"abstract":!0,url:"/auth"}).state("app.auth.login",{url:"/login",views:{"main@":{templateUrl:"app/core/layouts/content-only.html",controller:"MainController as vm"},"content@app.auth.login":{templateUrl:"app/main/auth/views/login/login.html",controller:"LoginController as vm"}},bodyClass:"login"}).state("app.auth.register",{url:"/register",views:{"main@":{templateUrl:"app/core/layouts/content-only.html",controller:"MainController as vm"},"content@app.auth.register":{templateUrl:"app/main/auth/views/register/register.html",controller:"RegisterController as vm"}},bodyClass:"register"}),a.setBaseUrl("api/"),a.register("auth.login",["auth/login/"]),a.register("auth.logout",["auth/logout/"]),a.register("auth.currentUser",["user/current_user/"]),a.register("auth.reset",["authentication/reset_password/"]),a.register("auth.register",["user/"])}e.$inject=["$stateProvider","msApiProvider"],angular.module("app.auth",[]).config(e)}(),function(){"use strict";function e(e,a,t){function n(){return e.login(i.username,i.password).then(function(e){},function(e){a.errorMessage(e.error)})}var i=this;i.login=n,i.loginSelected=t.action||"students"}e.$inject=["AuthService","NotifyService","$stateParams"],angular.module("app.auth").controller("LoginController",e)}(),function(){"use strict";function e(e,a,t,n){function i(){var t=angular.copy(s.form);return e.register(t).then(function(e){a.successMessage(n.getString("Registro realizado correctamente"))},function(e){s.serverErrors=e.data,a.errorMessage(n.getString("Error al realizar el registro"))})}var s=this;s.form={},s.register=i}e.$inject=["AuthService","NotifyService","$q","gettextCatalog"],angular.module("app.auth").controller("RegisterController",e)}(),function(){"use strict";function e(e,a){function t(){function n(e){u.users.data=e.results,u.users.count=e.count,s.resolve(u.users)}function i(e){404==e.status&&1!=u.users.filters.page&&(u.users.filters.page=1,t()),s.reject(e)}var s=e.defer(),r=angular.copy(u.users.filters);return r.concessionaire_data&&r.concessionaire_data.id&&(r.userconcession__concessionaire__id=r.concessionaire_data.id),delete r.concessionaire_data,a.users.get(r,n,i),s.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(u.users.filters);return r.search=t,r.page_size="all",a.users.get(r,n,i),s.promise}function i(t,n){function i(e){r.resolve(e.results)}function s(e){r.reject(e)}var r=e.defer(),o={};return o.userconcession__concessionaire__id=n,o.search=t,o.page_size="all",a.users.get(o,i,s),r.promise}function s(t,n){function i(e){r.resolve(e.results)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(u.users.filters);return o.search=t,o.concessionaire=n.id,o.page_size="all",a.admins.get(o,i,s),r.promise}function r(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.users.get({id:t},n,i),s.promise}function o(t){function n(e){u.getUsers(),r.resolve(e)}function i(e){for(var a=0;a<u.users.data.length;a++)u.users.data[a].id===e.id&&(u.users.data[a]=angular.copy(e));r.resolve(e)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(t);for(var l in o.related_concessionaires)o.related_concessionaires[l].concessionaire_data&&o.related_concessionaires[l].concessionaire_data.id&&(o.related_concessionaires[l].concessionaire=o.related_concessionaires[l].concessionaire_data.id);return t.id?a.users.update(o,i,s):a.users.create(o,n,s),r.promise}function l(){return{related_concessionaires:[]}}function d(t){function n(e){for(var a=0;a<u.users.data.length;a++)if(u.users.data[a].id===t.id){u.users.data.splice(a,1),u.users.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.users.remove({id:t.id},n,i),s.promise}function c(t){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.users.removeConcessionaire({id:t.id},n,i),s.promise}function m(t){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.users.removeSFA({id:t.id},n,i),s.promise}var u={users:{data:[],count:0,filters:{}},getUsers:t,getAllUsers:n,getAllUsersConcessionaire:i,getAllAdmins:s,getUser:r,saveUser:o,getEmptyUser:l,removeUser:d,removeConcessionaire:c,removeSFA:m};return u}e.$inject=["$q","api"],angular.module("app.users").factory("usersService",e)}(),function(){"use strict";function e(e,a){function t(){function t(e){l.tasks.data=e.results,l.tasks.count=e.count,i.resolve(l.tasks)}function n(e){404==e.status&&1!=l.tasks.filters.page&&(l.tasks.filters.page=1),i.reject(e)}var i=e.defer();return a.tasks.get(l.tasks.filters,t,n),i.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(l.tasks.filters);return r.search=t,r.page_size="all",a.tasks.get(r,n,i),s.promise}function i(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.tasks.get({id:t},n,i),s.promise}function s(t){function n(e){l.tasks.data.push(e),l.tasks.count++,r.resolve(e)}function i(e){for(var a=0;a<l.tasks.data.length;a++)l.tasks.data[a].id===e.id&&(l.tasks.data[a]=angular.copy(e));r.resolve(e)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(t);return t.id?a.tasks.update(o,i,s):a.tasks.create(o,n,s),r.promise}function r(e,a,t){return{request:[a.id],lead:e,media:"Phone",is_traking_task:t,note:[]}}function o(t){function n(e){for(var a=0;a<l.tasks.data.length;a++)if(l.tasks.data[a].id===t.id){l.tasks.data.splice(a,1),l.tasks.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.tasks.remove({id:t.id},n,i),s.promise}var l={tasks:{data:[],count:0,filters:{}},getTasks:t,getAllTasks:n,getTask:i,saveTask:s,getEmptyTask:r,removeTask:o};return l}e.$inject=["$q","api"],angular.module("app.tasks").factory("tasksService",e)}(),function(){"use strict";function e(e,a,t){function n(){function t(e){d.origins.data=e.results,d.origins.count=e.count,s.resolve(d.origins)}function i(e){404==e.status&&1!=d.origins.filters.page&&(d.origins.filters.page=1,n()),s.reject(e)}var s=e.defer();return a.origins.get(d.origins.filters,t,i),s.promise}function i(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(d.origins.filters);return r.search=t,r.page_size="all",a.origins.get(r,n,i),s.promise}function s(t){function n(e){s.resolve(e);
}function i(e){s.reject(e)}var s=e.defer();return a.origins.get({id:t},n,i),s.promise}function r(t){function n(e){d.origins.data.push(e),d.origins.count++,r.resolve(e)}function i(e){for(var a=0;a<d.origins.data.length;a++)d.origins.data[a].id===e.id&&(d.origins.data[a]=angular.copy(e));r.resolve(e)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(t);return o.icon&&-1!==o.icon.indexOf("http")&&delete o.icon,delete o.phone_set,delete o.email_set,t.id?a.origins.update(o,i,s):a.origins.create(o,n,s),r.promise}function o(){return{}}function l(t){function n(e){for(var a=0;a<d.origins.data.length;a++)if(d.origins.data[a].id===t.id){d.origins.data.splice(a,1),d.origins.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.origins.remove({id:t.id},n,i),s.promise}var d={origins:{data:[],count:0,filters:{}},getOrigins:n,getAllOrigins:i,getOrigin:s,saveOrigin:r,getEmptyOrigin:o,removeOrigin:l};return d}e.$inject=["$q","api","$http"],angular.module("app.origins").factory("originsService",e)}(),function(){"use strict";function e(e){e.state("app.metrics",{url:"/metrics",views:{"content@app":{templateUrl:"app/main/metrics/metrics.html",controller:"MetricsController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}],Metrics:["metricsService",function(e){return e.metrics.filters={},e.metrics.filters.user_data=[],e.metrics}],Benchmark:["Metrics","metricsService",function(e,a){return a.benchmark}],Servicelevel:["Metrics","metricsService",function(e,a){return a.servicelevel}],VoiceService:["Metrics","metricsService",function(e,a){return a.voiceservice}],DigitalService:["Metrics","metricsService",function(e,a){return a.digitalservice}]},bodyClass:"metrics"})}e.$inject=["$stateProvider"],angular.module("app.metrics",["nvd3","gridshore.c3js.chart","angular-chartist"]).config(e)}(),function(){"use strict";function e(e,a){function t(){function a(){u.metrics.loading=!1,t.resolve(u.metrics)}var t=e.defer();u.metrics.loading=!0;var i=e.all([n(),s(),o(),d()]);return i.then(a),t.promise}function n(){function t(e){u.benchmark.data=i(e),s.resolve(u.benchmark)}function n(e){s.reject(e)}var s=e.defer(),r=angular.copy(u.metrics.filters);return r.user_id__in=r.user_data.map(function(e){return e.id}).toString(),delete r.user_data,r.useful||delete r.useful,a.benchmark.get(r,t,n),s.promise}function i(e){return e.funnel.lead_util=e.funnel.lead_util||0,e.funnel.lead_recibido=e.funnel.lead_recibido||0,e.funnel.ganados=e.funnel.ganados||0,e.funnel.lead_util_percentage=(100*e.funnel.lead_util/e.funnel.lead_recibido).toFixed(2),e.funnel.ganados_percentage=(100*e.funnel.ganados/e.funnel.lead_recibido).toFixed(2),e.total_origins={abiertos:0,descartados:0,ganados:0},e.total_users={abiertos:0,descartados:0,ganados:0},e.origins.forEach(function(a){a.abiertos_percentage=(100*a.abiertos/a.total).toFixed(2),a.descartados_percentage=(100*a.descartados/a.total).toFixed(2),a.ganados_percentage=(100*a.ganados/a.total).toFixed(2),e.total_origins.abiertos+=a.abiertos,e.total_origins.descartados+=a.descartados,e.total_origins.ganados+=a.ganados}),e.total_origins.abiertos_percentage=(100*e.total_origins.abiertos/e.funnel.lead_recibido).toFixed(2),e.total_origins.descartados_percentage=(100*e.total_origins.descartados/e.funnel.lead_recibido).toFixed(2),e.total_origins.ganados_percentage=(100*e.total_origins.ganados/e.funnel.lead_recibido).toFixed(2),e.users.forEach(function(a){a.abiertos_percentage=(100*a.abiertos/a.total).toFixed(2),a.descartados_percentage=(100*a.descartados/a.total).toFixed(2),a.ganados_percentage=(100*a.ganados/a.total).toFixed(2),e.total_users.abiertos+=a.abiertos,e.total_users.descartados+=a.descartados,e.total_users.ganados+=a.ganados}),e.total_users.abiertos_percentage=(100*e.total_users.abiertos/e.funnel.lead_recibido).toFixed(2),e.total_users.descartados_percentage=(100*e.total_users.descartados/e.funnel.lead_recibido).toFixed(2),e.total_users.ganados_percentage=(100*e.total_users.ganados/e.funnel.lead_recibido).toFixed(2),e}function s(){function t(e){u.servicelevel.data=r(e),i.resolve(u.servicelevel)}function n(e){i.reject(e)}var i=e.defer(),s=angular.copy(u.metrics.filters);return s.user_id__in=s.user_data.map(function(e){return e.id}).toString(),delete s.user_data,s.useful||delete s.useful,a.servicelevel.get(s,t,n),i.promise}function r(e){for(var a in e.kpis)if("total"!==a){var t=e.kpis[a],n=(100*t/e.kpis.total).toFixed(2),i=a.split("_").join(" ");i=-1!==i.indexOf("sin ")?"Leads "+i:"Leads con "+i,e.kpis[a]={number:t,percentage:n,title:i},"tareas_realizadas"===a&&(e.kpis[a].filters={tasks__realization_date_check:!0,tasks__is_traking_task:!1}),"tareas_programadas"===a&&(e.kpis[a].filters={tasks__is_traking_task:!1}),"sin_tareas_programadas"===a&&(e.kpis[a].filters={without_pending_tasks:!0}),"tareas_atrasadas"===a&&(e.kpis[a].filters={tasks__realization_date_check:!1,tasks__planified_realization_date__lt:(new Date).toISOString(),tasks__is_traking_task:!1}),"seguimientos_realizados"===a&&(e.kpis[a].filters={tasks__realization_date__isnull:!1,tasks__is_traking_task:!0}),"seguimientos_programados"===a&&(e.kpis[a].filters={tasks__is_traking_task:!0}),"sin_seguimientos_programados"===a&&(e.kpis[a].filters={without_pending_trackings:!0}),"seguimientos_atrasados"===a&&(e.kpis[a].filters={tasks__realization_date_check:!1,tasks__planified_realization_date__lt:(new Date).toISOString(),tasks__is_traking_task:!0}),e.kpis[a]&&e.kpis[a].filters&&(e.kpis[a].filters.with_concession=!0)}return e}function o(){function t(e){u.voiceservice.data=l(e),i.resolve(u.voiceservice)}function n(e){i.reject(e)}var i=e.defer(),s=angular.copy(u.metrics.filters);return s.user_id__in=s.user_data.map(function(e){return e.id}).toString(),delete s.user_data,s.useful||delete s.useful,a.voiceService.get(s,t,n),i.promise}function l(e){var a={};return a.labels=e.llamadas.map(function(e){return e.hour}),a.atendidas=e.llamadas.map(function(e){return e.total-e.no_atendidas}),a.no_atendidas=e.llamadas.map(function(e){return e.no_atendidas}),e.llamadas=a,e.no_atendidos.con_llamadas_percentage=(100*e.no_atendidos.con_llamadas/e.totales.no_atendidas).toFixed(2),e.no_atendidos.sin_llamadas_percentage=(100*e.no_atendidos.sin_llamadas/e.totales.no_atendidas).toFixed(2),e.asa.tiempo=m(e.asa.tiempo),e.asa.menos_una_hora_percentage=(100*e.asa.menos_una_hora/e.asa.total).toFixed(2),e}function d(){function t(e){u.digitalservice.data=c(e),i.resolve(u.digitalservice)}function n(e){i.reject(e)}var i=e.defer(),s=angular.copy(u.metrics.filters);return s.user_id__in=s.user_data.map(function(e){return e.id}).toString(),delete s.user_data,s.useful||delete s.useful,a.digitalService.get(s,t,n),i.promise}function c(e){return e.con_telefono.con_llamadas_percentage=(100*e.con_telefono.con_llamadas/e.totales.total).toFixed(2),e.con_telefono.sin_llamadas_percentage=(100*e.con_telefono.sin_llamadas/e.totales.total).toFixed(2),e.asa.tiempo=m(e.asa.tiempo),e.asa.menos_una_hora_percentage=(100*e.asa.menos_una_hora/e.asa.total).toFixed(2),e}function m(e){var a=Math.floor(e/3600),t=Math.floor(e/60%60),n=e%60;return n=n.toFixed(0),{hour:a,minute:t,second:n}}var u={metrics:{loading:!1,filters:{}},benchmark:{data:{}},servicelevel:{data:{}},voiceservice:{data:{}},digitalservice:{data:{}},getMetrics:t,getBenchmark:n,getServicelevel:s,getVoiceService:o,getDigitalService:d};return u}e.$inject=["$q","api"],angular.module("app.metrics").factory("metricsService",e)}(),function(){"use strict";function e(e,a){}e.$inject=["$stateProvider","msApiProvider"],angular.module("app.geopostcodes",[]).config(e)}(),function(){"use strict";function e(e,a){function t(t,n){function i(e){r.resolve(e.results)}function s(e){r.reject(e)}var r=e.defer();return a.provinces.get({country:t,page_size:"all"},i,s),r.promise}var n={provinces:{data:[],count:0,filters:{}},getProvinces:t};return n}e.$inject=["$q","api"],angular.module("app.geopostcodes").factory("provincesService",e)}(),function(){"use strict";function e(e,a){function t(t,n){function i(e){r.resolve(e.results)}function s(e){r.reject(e)}var r=e.defer();return a.localities.get({province:t,search:n,page_size:"50"},i,s),r.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer();return a.localities.get({postal_code:t,page_size:"all"},n,i),s.promise}var i={localities:{data:[],count:0,filters:{}},getLocalities:t,getLocalitiesByCodPostal:n};return i}e.$inject=["$q","api"],angular.module("app.geopostcodes").factory("localitiesService",e)}(),function(){"use strict";function e(e,a){function t(){function t(e){i.resolve(e.results)}function n(e){i.reject(e)}var i=e.defer();return a.countries.get({page_size:"all"},t,n),i.promise}var n={countries:{data:[],count:0,filters:{}},getCountries:t};return n}e.$inject=["$q","api"],angular.module("app.geopostcodes").factory("countriesService",e)}(),function(){"use strict";function e(e){e.state("app.dashboard",{url:"/dashboard",views:{"content@app":{templateUrl:"app/main/dashboard/dashboard.html",controller:"DashboardController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}],Dashboards:["currentUser","dashboardService",function(e,a){return a.dashboards.filters={},a.dashboards.filters.page_size="all",a.getDashboards()}]},bodyClass:"todo"})}e.$inject=["$stateProvider"],angular.module("app.dashboard",[]).config(e)}(),function(){"use strict";function e(e,a){function t(){function t(e){i.dashboards.data=e.results,i.dashboards.count=e.count,s.resolve(i.dashboards)}function n(e){s.reject(e)}var s=e.defer();return a.dashboards.get(i.dashboards.filters,t,n),s.promise}function n(t){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.dashboards.get({id:t},n,i),s.promise}var i={dashboards:{data:[],count:0,filters:{}},getDashboards:t,getDashboard:n};return i}e.$inject=["$q","api"],angular.module("app.dashboard").factory("dashboardService",e)}(),function(){"use strict";function e(e,a){function t(t){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.vehicles.remove({id:t.id},n,i),s.promise}function n(t){function n(e){t&&e.count<1&&e.results.push({id:null,name:t}),s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer();return a.brands.get({search:t,page_size:"all"},n,i),s.promise}function i(t,n){function i(e){n&&e.count<1&&e.results.push({id:null,model_name:n}),r.resolve(e.results)}function s(e){r.reject(e)}var r=e.defer();return a.models.get({brand__id:t,search:n,page_size:"50"},i,s),r.promise}function s(t,n){function i(e){n&&e.count<1&&e.results.push({id:null,version_name:n}),r.resolve(e.results)}function s(e){r.reject(e)}var r=e.defer();return a.versions.get({vehicle_model__id:t,search:n,page_size:"50"},i,s),r.promise}var r={removeVehicle:t,getBrands:n,getModels:i,getVersions:s};return r}e.$inject=["$q","api"],angular.module("app.leads").factory("vehiclesService",e)}(),function(){"use strict";function e(e,a,t){function n(){function t(e){M.leads.data=e.results,M.leads.count=e.count,i.resolve(M.leads)}function n(e){404==e.status&&1!=M.leads.filters.page&&(M.leads.filters.page=1),i.reject(e)}var i=e.defer();return a.leads.get(M.leads.filters,t,n),i.promise}function i(t){function n(e){M.leads.data=e,M.leads.count=e.length,s.resolve(M.leads)}function i(e){s.reject(e)}var s=e.defer();return M.leads.filters={},M.leads.filters.id=t,a.leadsByUser.queryAll(M.leads.filters,n,i),s.promise}function s(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(M.leads.filters);return r.search=t,r.page_size="all",a.leads.get(r,n,i),s.promise}function r(t){function n(e){M.lead.data=e,s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.leads.get({id:t},n,i),s.promise}function o(t){function n(e){M.leads.data.push(e),M.leads.count++,r.resolve(e)}function i(e){for(var a=0;a<M.leads.data.length;a++)M.leads.data[a].id===e.id&&(M.leads.data[a]=angular.copy(e));r.resolve(e)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(t);o.client&&o.client.province_data&&o.client.province_data.id&&(o.client.province=o.client.province_data.id),o.client&&o.client.location_data&&o.client.location_data.id&&(o.client.location=o.client.location_data.id),o.source_data_prov&&o.source_data_prov.id&&(o.source=o.source_data_prov.id),o.concessionaire_data&&o.concessionaire_data.id&&(o.concessionaire=o.concessionaire_data.id),o.user_data&&o.user_data.id&&(o.user=o.user_data.id),o.client&&o.client.business_activity_data&&o.client.business_activity_data.id&&(o.client.business_activity=o.client.business_activity_data.id),o.client&&o.client.sector_data&&o.client.sector_data.id&&(o.client.sector=o.client.sector_data.id);for(var l in o.vehicles)o.vehicles[l].brand_model_data&&o.vehicles[l].brand_model_data.name&&(o.vehicles[l].brand_model=o.vehicles[l].brand_model_data.name),o.vehicles[l].brand_model_data&&o.vehicles[l].brand_model_data.id&&(o.vehicles[l].brand_model+="___"+o.vehicles[l].brand_model_data.id),o.vehicles[l].model_data&&o.vehicles[l].model_data.model_name&&(o.vehicles[l].model=o.vehicles[l].model_data.model_name),o.vehicles[l].model_data&&o.vehicles[l].model_data.id&&(o.vehicles[l].model+="___"+o.vehicles[l].model_data.id),o.vehicles[l].version_data&&o.vehicles[l].version_data.version_name&&(o.vehicles[l].version=o.vehicles[l].version_data.version_name),o.vehicles[l].version_data&&o.vehicles[l].version_data.id&&(o.vehicles[l].version+="___"+o.vehicles[l].version_data.id);for(var l in o.appraisals)o.appraisals[l].brand_data&&o.appraisals[l].brand_data.name&&(o.appraisals[l].brand=o.appraisals[l].brand_data.name),o.appraisals[l].brand_data&&o.appraisals[l].brand_data.id&&(o.appraisals[l].brand+="___"+o.appraisals[l].brand_data.id),o.appraisals[l].model_data&&o.appraisals[l].model_data.model_name&&(o.appraisals[l].model=o.appraisals[l].model_data.model_name),o.appraisals[l].model_data&&o.appraisals[l].model_data.id&&(o.appraisals[l].model+="___"+o.appraisals[l].model_data.id),o.appraisals[l].version_data&&o.appraisals[l].version_data.version_name&&(o.appraisals[l].version=o.appraisals[l].version_data.version_name),o.appraisals[l].version_data&&o.appraisals[l].version_data.id&&(o.appraisals[l].version+="___"+o.appraisals[l].version_data.id);return t.id?a.leads.update(o,i,s):a.leads.create(o,n,s),r.promise}function l(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.setLeadsByUser.create(t,n,i),s.promise}function d(t){function n(e){for(var a=0;a<M.leads.data.length;a++)M.leads.data[a].id===e.id&&(M.leads.data[a]=angular.copy(e));s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(t);return a.leads.leadsStatus(r,n,i),s.promise}function c(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r={id:t.id};return a.leads.leadsHubspot(r,n,i),s.promise}function m(t){function n(e){M.leads.data.push(e),M.leads.count++,s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.leads.clone({id:t.id},n,i),s.promise}function u(){return{client:{},vehicles:[{}],appraisals:[{circulation_date:null,buy_date:null,registration_date:null,last_mechanic_date:null}],note:[],tags:[],request:{task:[]}}}function p(t){function n(e){for(var a=0;a<M.leads.data.length;a++)if(M.leads.data[a].id===t.id){M.leads.data.splice(a,1),M.leads.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.leads.remove({id:t.id},n,i),s.promise}function g(){function t(e){M.leadsNews.filters.page>1?M.leadsNews.data=M.leadsNews.data.concat(e.results):M.leadsNews.data=e.results,M.leadsNews.count=e.count,i.resolve(M.leadsNews)}function n(e){404==e.status&&1!=M.leadsNews.filters.page&&(M.leadsNews.filters.page=1),i.reject(e)}var i=e.defer();return a.leadsNews.get(M.leadsNews.filters,t,n),i.promise}function v(){function t(e){M.leadsAttended.filters.page>1?M.leadsAttended.data=M.leadsAttended.data.concat(e.results):M.leadsAttended.data=e.results,M.leadsAttended.count=e.count,i.resolve(M.leadsAttended)}function n(e){404==e.status&&1!=M.leadsAttended.filters.page&&(M.leadsAttended.filters.page=1),i.reject(e)}var i=e.defer();return a.leadsAttended.get(M.leadsAttended.filters,t,n),i.promise}function f(){function t(e){M.leadsCommercialManagements.filters.page>1?M.leadsCommercialManagements.data=M.leadsCommercialManagements.data.concat(e.results):M.leadsCommercialManagements.data=e.results,M.leadsCommercialManagements.count=e.count,i.resolve(M.leadsCommercialManagements)}function n(e){404==e.status&&1!=M.leadsCommercialManagements.filters.page&&(M.leadsCommercialManagements.filters.page=1),i.reject(e)}var i=e.defer();return a.leadsCommercialManagements.get(M.leadsCommercialManagements.filters,t,n),i.promise}function h(){function t(e){M.leadsTracings.filters.page>1?M.leadsTracings.data=M.leadsTracings.data.concat(e.results):M.leadsTracings.data=e.results,M.leadsTracings.count=e.count,i.resolve(M.leadsTracings)}function n(e){404==e.status&&1!=M.leadsTracings.filters.page&&(M.leadsTracings.filters.page=1),i.reject(e)}var i=e.defer();return a.leadsTracings.get(M.leadsTracings.filters,t,n),i.promise}function b(){function t(e){M.leadsEnds.filters.page>1?M.leadsEnds.data=M.leadsEnds.data.concat(e.results):M.leadsEnds.data=e.results,M.leadsEnds.count=e.count,i.resolve(M.leadsEnds)}function n(e){404==e.status&&1!=M.leadsEnds.filters.page&&(M.leadsEnds.filters.page=1),i.reject(e)}var i=e.defer();return a.leadsEnds.get(M.leadsEnds.filters,t,n),i.promise}function y(t){function n(e){M.leadsIncomingCalls.data=e.results,M.leadsIncomingCalls.count=e.count,s.resolve(M.leadsIncomingCalls)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(M.leadsIncomingCalls.filters);return r.page_size="all",r.id=t,a.leadsIncomingCalls.get(r,n,i),s.promise}function _(t){function n(e){M.leadsOutgoingCalls.data=e.results,M.leadsOutgoingCalls.count=e.count,s.resolve(M.leadsOutgoingCalls)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(M.leadsOutgoingCalls.filters);return r.page_size="all",r.id=t,a.leadsOutgoingCalls.get(r,n,i),s.promise}function w(t){function n(e){M.leadsHistory.data=e.results,M.leadsHistory.count=e.count,s.resolve(M.leadsHistory)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(M.leadsHistory.filters);return r.page_size="all",r.id=t,a.leadsHistory.get(r,n,i),s.promise}function x(t){function n(e){M.leadsActivity.data=e.results,M.leadsActivity.count=e.count,s.resolve(M.leadsActivity)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(M.leadsActivity.filters);return r.page_size="all",r.lead=t,a.leadActions.get(r,n,i),s.promise}function k(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r={};return r.id=t,a.leadsReactivate.create(r,n,i),s.promise}function S(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r={};return r.id=t,a.leadsMail.create(r,n,i),s.promise}function T(){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return t.get(a.baseUrl+"lead_importer/download_template/",{responseType:"arraybuffer",timeout:36e5}).then(n,i),s.promise}function C(){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer(),r=null,o=$("#file-uploader"),l=o.prop("files");l&&l.length&&(r=l[0]);var d=new FormData;return r&&d.append("file",r),t.post(a.baseUrl+"lead_importer/upload/",d,{transformRequest:angular.identity,headers:{"Content-Type":void 0},responseType:"arraybuffer",timeout:36e5}).then(n,i),s.promise}var M={lead:{data:{}},leads:{data:[],count:0,filters:{}},leadsNews:{data:[],count:0,filters:{}},leadsAttended:{data:[],count:0,filters:{}},leadsCommercialManagements:{data:[],count:0,filters:{}},leadsTracings:{data:[],count:0,filters:{}},leadsEnds:{data:[],count:0,filters:{}},leadsIncomingCalls:{data:[],count:0,filters:{}},leadsOutgoingCalls:{data:[],count:0,filters:{}},leadsHistory:{data:[],count:0,filters:{}},leadsActivity:{data:[],count:0,filters:{}},getLeads:n,getLeadsByUser:i,getAllLeads:s,getLead:r,saveLead:o,setLeadsByUser:l,changeStatus:d,hubspot:c,clone:m,getEmptyLead:u,removeLead:p,getLeadsNews:g,getLeadsAttended:v,getLeadsCommercialManagements:f,getLeadsTracings:h,getLeadsEnds:b,getLeadsIncomingCalls:y,getLeadsOutgoingCalls:_,getLeadsHistory:w,getLeadsActivity:x,reactivateLead:k,sendMail:S,getDocument:T,importLeads:C};return M}e.$inject=["$q","api","$http"],angular.module("app.leads").factory("leadsService",e)}(),function(){"use strict";function e(e,a){function t(){function t(e){d.leadActions.data=e.results,d.leadActions.count=e.count,i.resolve(d.leadActions)}function n(e){404==e.status&&1!=d.leadActions.filters.page&&(d.leadActions.filters.page=1),i.reject(e)}var i=e.defer();return a.leadActions.get(d.leadActions.filters,t,n),i.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(d.leadActions.filters);return r.search=t,r.page_size="all",a.leadActions.get(r,n,i),s.promise}function i(){function t(e){i.resolve(e.results)}function n(e){i.reject(e)}var i=e.defer(),s={};return s.page_size="all",a.leadActionsColumn.get(s,t,n),i.promise}function s(t){function n(e){d.leadAction.data=e,s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.leadActions.get({id:t},n,i),s.promise}function r(t){function n(e){d.leadActions.data.push(e),d.leadActions.count++,s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(t);return a.leadActions.create(r,n,i),s.promise}function o(e){return{lead:e.id,lead_status_planing:e.last_lead_action&&e.last_lead_action.lead_status_planing?e.last_lead_action.lead_status_planing:null,date:e.last_lead_action&&e.last_lead_action.date?moment(e.last_lead_action.date).toDate():null}}function l(t){function n(e){for(var a=0;a<d.leadActions.data.length;a++)if(d.leadActions.data[a].id===t.id){d.leadActions.data.splice(a,1),d.leadActions.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.leadActions.remove({id:t.id},n,i),s.promise}var d={leadActions:{data:[],count:0,filters:{}},getLeadActions:t,getAllLeadActions:n,getLeadActionsColumn:i,getLeadAction:s,saveLeadAction:r,getEmptyLeadAction:o,removeLeadAction:l};return d}e.$inject=["$q","api"],angular.module("app.leads").factory("leadActionsService",e)}(),function(){"use strict";function e(e,a){function t(t){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.appraisals.remove({id:t.id},n,i),s.promise}var n={removeAppraisal:t};return n}e.$inject=["$q","api"],angular.module("app.leads").factory("appraisalsService",e)}(),function(){"use strict";function e(e,a,t){function n(){function t(e){u.concessionaires.data=e.results,u.concessionaires.count=e.count,s.resolve(u.concessionaires)}function i(e){404==e.status&&1!=u.concessionaires.filters.page&&(u.concessionaires.filters.page=1,n()),s.reject(e)}var s=e.defer();return a.concessionaires.get(u.concessionaires.filters,t,i),s.promise}function i(){function t(e){u.concessionaires.data=e.results,u.concessionaires.count=e.count,s.resolve(u.concessionaires)}function i(e){404==e.status&&1!=u.concessionaires.filters.page&&(u.concessionaires.filters.page=1,n()),s.reject(e)}var s=e.defer();return a.concessionaires.config(u.concessionaires.filters,t,i),s.promise}function s(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(u.concessionaires.filters);return r.search=t,r.page_size="all",a.concessionaires.config(r,n,i),s.promise}function r(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.concessionaires.get({id:t},n,i),s.promise}function o(t){function n(e){u.concessionaires.data.push(e),u.concessionaires.count++,r.resolve(e)}function i(e){for(var a=0;a<u.concessionaires.data.length;a++)u.concessionaires.data[a].id===e.id&&(u.concessionaires.data[a]=angular.copy(e));r.resolve(e)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(t);for(var l in o.sources)o.sources[l].origin_data&&o.sources[l].origin_data.id&&(o.sources[l].origin=o.sources[l].origin_data.id),o.sources[l].channel_data&&o.sources[l].channel_data.id&&(o.sources[l].channel=o.sources[l].channel_data.id);return t.id?a.concessionaires.update(o,i,s):a.concessionaires.create(o,n,s),r.promise}function l(){return{phones:[{number:""}],emails:[],sources:[]}}function d(t){function n(e){for(var a=0;a<u.concessionaires.data.length;a++)if(u.concessionaires.data[a].id===t.id){u.concessionaires.data.splice(a,1),u.concessionaires.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.concessionaires.remove({id:t.id},n,i),s.promise}function c(t){function n(e){s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.concessionaires.removeSource({id:t.id},n,i),s.promise}function m(n){function i(e){r.resolve(e.data)}function s(e){r.reject(e)}var r=e.defer();return n.page_size="all",t({url:a.baseUrl+"lead/excel/",method:"GET",params:n,responseType:"arraybuffer",timeout:36e5}).then(i,s),r.promise}var u={concessionaires:{data:[],count:0,filters:{}},getConcessionaires:n,getConcessionairesConfig:i,getAllConcessionaires:s,getConcessionaire:r,saveConcessionaire:o,getEmptyConcessionaire:l,removeConcessionaire:d,removeSource:c,getDocument:m};return u}e.$inject=["$q","api","$http"],angular.module("app.concessionaires").factory("concessionairesService",e)}(),function(){"use strict";function e(e,a,t){function n(){function t(e){d.channels.data=e.results,d.channels.count=e.count,s.resolve(d.channels)}function i(e){404==e.status&&1!=d.channels.filters.page&&(d.channels.filters.page=1,n()),s.reject(e)}var s=e.defer();return a.channels.get(d.channels.filters,t,i),s.promise}function i(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(d.channels.filters);return r.search=t,r.page_size="all",a.channels.get(r,n,i),s.promise}function s(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.channels.get({id:t},n,i),s.promise}function r(t){function n(e){d.channels.data.push(e),d.channels.count++,r.resolve(e)}function i(e){for(var a=0;a<d.channels.data.length;a++)d.channels.data[a].id===e.id&&(d.channels.data[a]=angular.copy(e));r.resolve(e)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(t);return o.icon&&-1!==o.icon.indexOf("http")&&delete o.icon,delete o.phone_set,delete o.email_set,t.id?a.channels.update(o,i,s):a.channels.create(o,n,s),r.promise}function o(){return{}}function l(t){function n(e){for(var a=0;a<d.channels.data.length;a++)if(d.channels.data[a].id===t.id){d.channels.data.splice(a,1),d.channels.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.channels.remove({id:t.id},n,i),s.promise}var d={channels:{data:[],count:0,filters:{}},getChannels:n,getAllChannels:i,getChannel:s,saveChannel:r,getEmptyChannel:o,removeChannel:l};return d}e.$inject=["$q","api","$http"],angular.module("app.channels").factory("channelsService",e)}(),function(){"use strict";function e(e,a){}e.$inject=["$stateProvider","msApiProvider"],angular.module("app.clients",[]).config(e)}(),function(){"use strict";function e(e,a){function t(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer();return a.clients.get({phone__icontains:t,page_size:"all"},n,i),s.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer();return a.whatsapp.create(t,n,i),s.promise}function i(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer();return a.sectors.get({search:t,page_size:"50"},n,i),s.promise}function s(t,n){function i(e){r.resolve(e.results)}function s(e){r.reject(e)}var r=e.defer();return a.businessActivity.get({sector__id:t,search:n,page_size:"50"},i,s),r.promise}var r={clients:{data:[],count:0,filters:{}},getClients:t,getBusinessActivity:s,getSectors:i,sendWhatsapp:n};return r}e.$inject=["$q","api"],angular.module("app.clients").factory("clientsService",e)}(),function(){"use strict";function e(e,a,t,n){function i(e,a){if(e.is_admin)s("admin",a);else for(var t in e.related_concessionaires)e.related_concessionaires[t].concessionaire_data.mask_c2c&&s(e.related_concessionaires[t].concessionaire_data.mask_c2c,a)}function s(e,t){var n=new ReconnectingWebSocket(a.wsAcds+e+"/");n.onopen=t,n.onmessage=t,n.readyState===WebSocket.OPEN&&n.onopen(),v.wsAcds.sockets.push(n)}function r(){function t(e){v.acds.data=e.results,v.acds.count=e.count,i.resolve(v.acds)}function n(e){404==e.status&&1!=v.acds.filters.page&&(v.acds.filters.page=1,r()),i.reject(e)}var i=e.defer();return a.acds.get(v.acds.filters,t,n),i.promise}function o(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(v.acds.filters);return r.search=t,r.page_size="all",a.acds.get(r,n,i),s.promise}function l(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.acds.get({id:t},n,i),s.promise}function d(t){function n(e){v.getAcds(),r.resolve(e)}function i(e){v.getAcds(),r.resolve(e)}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(t);for(var l in o.phones)o.phones[l].origin_data&&o.phones[l].origin_data.id&&(o.phones[l].origin=o.phones[l].origin_data.id);return t.id?a.acds.update(o,i,s):a.acds.create(o,n,s),r.promise}function c(){return{phones:[{number:""}]}}function m(t){function n(e){for(var a=0;a<v.acds.data.length;a++)if(v.acds.data[a].id===t.id){v.acds.data.splice(a,1),v.acds.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.acds.remove({id:t.id},n,i),s.promise}function u(n){function i(e){r.resolve(e.data)}function s(e){r.reject(e)}var r=e.defer();return t.get(a.baseUrl+"netelip/calls/"+n+"/audio/",{responseType:"arraybuffer",timeout:36e5}).then(i,s),r.promise}function p(){return[{id:"CHANUNAVAIL",name:n.getString("El número llamado no existe"),color:"red-bg"},{id:"BUSY",name:n.getString("El número llamado está ocupado"),color:"orange-bg"},{id:"NOANSWER",name:n.getString("El número llamado no contesta"),color:"orange-bg"},{id:"ANSWER",name:n.getString("El número llamado ha contestado"),color:"green-bg"},{id:"CANCEL",name:n.getString("El número llamado ha colgado"),color:"orange-bg"},{id:"CONGESTION",name:n.getString("Fallo en red telefónica por congestión"),color:"red-bg"},{id:"UNKNOW",name:n.getString("Fallo en red telefónica desconocido"),color:"red-bg"}]}function g(){return[{id:"user",name:n.getString("Usuario"),color:"teal-bg"},{id:"client",name:n.getString("Cliente"),color:"green-bg"}]}var v={acds:{data:[],count:0,filters:{}},wsAcds:{sockets:[]},socketAcds:i,getAcds:r,getAllAcds:o,getAcd:l,saveAcd:d,getEmptyAcd:c,removeAcd:m,getAudio:u,getStatusCall:p,getOriginsCall:g};return v}e.$inject=["$q","api","$http","gettextCatalog"],angular.module("app.acds").factory("acdsService",e)}(),function(){"use strict";function e(e){e.state("app.calendar",{url:"/calendar",views:{"content@app":{templateUrl:"app/main/calendar/calendar.html",controller:"CalendarController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}],Kpis:["currentUser","$rootScope","eventsService",function(e,a,t){return t.leads.filters={},t.leads.filters.user_data=e,t.kpis.filters={},t.kpis}],KpisPositive:["currentUser","$rootScope","eventsService",function(e,a,t){return t.kpisPositive.filters={},t.kpisPositive.filters.result="positive",t.kpisPositive}]},bodyClass:"calendar"})}e.$inject=["$stateProvider"],angular.module("app.calendar",["ui.calendar"]).config(e)}(),function(){"use strict";function e(e,a,t){function n(){return a.URLs.calendar}function i(){return[{url:n(),beforeSend:function(e,a){var n=new URLSearchParams(a.url.split("?")[1]),i=angular.copy(d.leads.filters);i.user_data&&i.user_data.id&&(i.user=i.user_data.id),delete i.user_data,d.kpis.filters.start=n.get("start"),d.kpis.filters.end=n.get("end"),d.kpis.filters.user=i.user,d.kpisPositive.filters.start=n.get("start"),d.kpisPositive.filters.end=n.get("end"),
d.kpisPositive.filters.user=i.user;var s="";for(var r in i)null!==i[r]&&(s+="&",s+=r+"="+encodeURIComponent(i[r]));a.url+=s,t.get("token")&&e.setRequestHeader("Authorization","Token "+t.get("token"))}}]}function s(){function t(e){d.kpis.data=e.kpis,d.kpis.count=e.kpis.length,i.resolve(d.kpis)}function n(e){i.reject(e)}var i=e.defer();return a.leads.kpis(d.kpis.filters,t,n),i.promise}function r(){function t(e){if(d.kpis.data.length>0)for(var a in d.kpis.data)for(var t in e.kpis)d.kpis.data[a].name===e.kpis[t].name&&(d.kpis.data[a].kpis=e.kpis[t].kpis);else d.kpis.data=e.kpis,d.kpis.count=e.kpis.length;i.resolve(d.kpis)}function n(e){i.reject(e)}var i=e.defer();return a.leads.kpis(d.kpis.filters,t,n),i.promise}function o(){function t(e){d.kpisPositive.data=e.kpis,d.kpisPositive.count=e.kpis.length,i.resolve(d.kpisPositive)}function n(e){i.reject(e)}var i=e.defer();return a.leads.kpis(d.kpisPositive.filters,t,n),i.promise}function l(){function t(e){if(d.kpisPositive.data.length>0)for(var a in d.kpisPositive.data)for(var t in e.kpis)d.kpisPositive.data[a].name===e.kpis[t].name&&(d.kpisPositive.data[a].kpis=e.kpis[t].kpis);else d.kpisPositive.data=e.kpis,d.kpisPositive.count=e.kpis.length;i.resolve(d.kpisPositive)}function n(e){i.reject(e)}var i=e.defer();return a.leads.kpis(d.kpisPositive.filters,t,n),i.promise}var d={leads:{filters:{}},kpis:{data:[],count:0,filters:{}},kpisPositive:{data:[],count:0,filters:{}},getEvents:i,getKpis:s,reloadKpis:r,getKpisPositive:o,reloadKpisPositive:l};return d}e.$inject=["$q","api","localStorageService"],angular.module("app.calendar").factory("eventsService",e)}(),function(){"use strict";function e(e,a,t,n,i,s){function r(){var a=e.defer();return n.request("auth.currentUser@get",{},function(e){if(e){for(var t in e.profiles)for(var n in e.profiles[t])e.profiles[t][n].id===i.get("token")&&(e.profile=e.profiles[t][n],e.type_user=e.profiles[t][n].profile_type);f.loggedIn=!0,f.currentUser=e,f.token=i.get("token"),a.resolve(f.currentUser)}else a.reject({error:"No hay ningún usuario autenticado"})},function(){a.reject({error:"No hay ningún usuario autenticado"})}),a.promise}function o(){var a=e.defer();return f.currentUser?a.resolve(f.currentUser):f.checkStatus().then(function(){a.resolve(f.currentUser)},function(){a.reject({error:"No hay ningún usuario autenticado"})}),a.promise}function l(e){f.token=e.id,i.set("token",f.token),f.currentUser.profile=e,f.currentUser.type_user=e.profile_type,t.ON_LOGIN_BROADCAST&&a.$broadcast(t.ON_LOGIN_BROADCAST,f.currentUser),location.reload()}function d(s,r,o){var l=e.defer();return i.remove("token"),i.remove("tokenImpersonate"),n.request("auth.login@save",{username:s,password:r},function(e){f.loggedIn=!0,f.token=e.token,i.set("token",f.token),f.checkStatus().then(function(n){t.ON_LOGIN_BROADCAST&&o!==!0&&a.$broadcast(t.ON_LOGIN_BROADCAST,n),l.resolve(e)},function(){l.reject({error:"Error al obtener los datos del usuario"})})},function(){l.reject({error:"Nombre de usuario o contraseña incorrecta"})}),l.promise}function c(){var s=e.defer();n.request("auth.logout@save",function(e){f.loggedIn=!1,f.currentUser=null,f.token=null,i.remove("token"),i.remove("tokenImpersonate"),t.ON_LOGOUT_BROADCAST&&a.$broadcast(t.ON_LOGOUT_BROADCAST)},function(e){s.reject(e)})}function m(a){var t=e.defer();return n.request("auth.reset@save",a,function(e){e?t.resolve(e):t.reject({error:"No hay ningún usuario con este email"})},function(e){t.reject(e)}),t.promise}function u(s){var r=e.defer();return n.request("auth.resetConfirm@save",s,function(e){f.loggedIn=!0,f.token=e.token,i.set("token",f.token),f.checkStatus().then(function(n){t.ON_LOGIN_BROADCAST&&a.$broadcast(t.ON_LOGIN_BROADCAST,n),r.resolve(e)})},function(e){r.reject(e)}),r.promise}function p(a,t,n){var i=e.defer();return s.user.passwordChange({current_password:a,password:t,password_repeat:n},function(){i.resolve()},function(e){i.reject(e.data)}),i.promise}function g(s){var r=e.defer();return i.remove("token"),i.remove("tokenImpersonate"),n.request("auth.register@save",s,function(e){f.loggedIn=!0,f.token=e.token,i.set("token",f.token),f.checkStatus().then(function(n){t.ON_LOGIN_BROADCAST&&a.$broadcast(t.ON_LOGIN_BROADCAST,n),r.resolve(e)})},function(e){r.reject(e)}),r.promise}function v(){function a(e){f.currentUser.session.online=e.forced_online_status,n.resolve(e)}function t(e){n.reject(e)}var n=e.defer();return s.users.sessionStatus({},a,t),n.promise}var f={loggedIn:!1,token:"",currentUser:null,getCurrentUser:o,changeProfile:l,checkStatus:r,login:d,logout:c,register:g,toggleOnline:v,password:{resetRequest:m,resetConfirm:u,change:p}};return f}e.$inject=["$q","$rootScope","authSettings","msApi","localStorageService","api"],angular.module("app.auth").factory("AuthService",e)}(),function(){"use strict";function e(e,a,t,n){e.factory("AuthenticationInterceptor",["localStorageService","$q","$rootScope",function(e,a,i){return{request:function(t){return t.headers=t.headers||{},e.get("token")&&(t.headers.Authorization="Token "+e.get("token")),e.get("tokenImpersonate")&&(t.headers.ImpersonateAuthorization="Token "+e.get("tokenImpersonate")),i.languageSelected&&(t.headers["Accept-Language"]=i.languageSelected),t||a.when(t)},responseError:function(s){return(401===s.status||403===s.status)&&(t.ON_UNAUTHORIZED_REQUEST&&e.get("token")?n.$get().getCurrentUser().then(function(e){i.$broadcast(t.ON_UNAUTHORIZED_REQUEST,e)}):i.$broadcast(t.ON_UNAUTHORIZED_REQUEST),e.remove("token"),e.remove("tokenImpersonate")),a.reject(s)}}}]),a.interceptors.push("AuthenticationInterceptor")}e.$inject=["$provide","$httpProvider","authSettings","AuthServiceProvider"],angular.module("app.auth").config(e)}(),function(){"use strict";angular.module("app.auth").constant("authSettings",{LOGIN_STATE:"app.auth.login",LOGIN_STATE_SUCCESS:"app.leads.board",ON_LOGIN_BROADCAST:"auth.login",ON_LOGOUT_BROADCAST:"auth.logout",ON_UNAUTHORIZED_REQUEST:"auth.unauthorized"})}(),function(){"use strict";angular.module("app.services",[])}(),function(){"use strict";function e(e){var a={temperatures:[{id:"30",name:e.getString("Menos de 30")},{id:"90",name:"30 - 90"},{id:"120",name:"90 - 120"},{id:"240",name:"120 - 240"}]};return a}e.$inject=["gettextCatalog"],angular.module("app.services").factory("temperaturesService",e)}(),function(){"use strict";function e(e,a){function t(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.taskTypes.queryAll({is_traking_task:t},n,i),s.promise}var n={getTaskTypes:t};return n}e.$inject=["$q","api"],angular.module("app.services").factory("taskTypesService",e)}(),function(){"use strict";function e(e){var a={scores:[{id:"1",color:"#ea5242",name:e.getString("Muy bajo")},{id:"2",color:"#feca15",name:e.getString("Bajo")},{id:"3",color:"#8dbf22",name:e.getString("Medio")},{id:"4",color:"#3fab34",name:e.getString("Alto")}]};return a}e.$inject=["gettextCatalog"],angular.module("app.services").factory("scoresService",e)}(),function(){"use strict";function e(e,a){function t(){function n(e){l.sources.data=e.results,l.sources.count=e.count,s.resolve(l.sources)}function i(e){404==e.status&&1!=l.sources.filters.page&&(l.sources.filters.page=1,t()),s.reject(e)}var s=e.defer();return a.sources.get(l.sources.filters,n,i),s.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(l.sources.filters);return r.search=t,r.page_size="all",a.sources.get(r,n,i),s.promise}function i(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.sources.get({id:t},n,i),s.promise}function s(t){function n(e){for(var a=0;a<l.sources.data.length;a++)l.sources.data[a].id===e.id&&(l.sources.data[a]=angular.copy(e));s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(t);return a.sources.update(r,n,i),s.promise}function r(){return{}}function o(t){function n(e){for(var a=0;a<l.sources.data.length;a++)if(l.sources.data[a].id===t.id){l.sources.data.splice(a,1),l.sources.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.sources.remove({id:t.id},n,i),s.promise}var l={sources:{data:[],count:0,filters:{}},getSources:t,getAllSources:n,getSource:i,saveSource:s,getEmptySource:r,removeSource:o};return l}e.$inject=["$q","api"],angular.module("app.services").factory("sourcesService",e)}(),function(){"use strict";function e(e){var a={qualifications:[{id:"positive",name:e.getString("Positiva")},{id:"negative",name:e.getString("Negativa")}]};return a}e.$inject=["gettextCatalog"],angular.module("app.services").factory("qualificationsService",e)}(),function(){"use strict";function e(e){var a={mediaTypes:[{id:"Whatsapp",icon:"icon-whatsapp",name:e.getString("Whatsapp"),alias:e.getString("Enviar Whatsapp a")},{id:"Phone",icon:"icon-phone",name:e.getString("Teléfono"),alias:e.getString("LLamar a")},{id:"SMS",icon:"SMS",name:e.getString("SMS"),alias:e.getString("Enviar SMS a")},{id:"E-mail",icon:"icon-email",name:e.getString("Email"),alias:e.getString("Enviar Email a")},{id:"face",icon:"icon-account-multiple",name:e.getString("Reunión"),alias:e.getString("Reunión con")}]};return a}e.$inject=["gettextCatalog"],angular.module("app.services").factory("mediaTypesService",e)}(),function(){"use strict";function e(e){var a={origins:[{id:"national",name:e.getString("Nacional")},{id:"foreign",name:e.getString("Extranjero")}]};return a}e.$inject=["gettextCatalog"],angular.module("app.services").factory("originsCarService",e)}(),function(){"use strict";function e(e){var a={leadStatus:[{id:"new",name:e.getString("Lead no atendido"),color:"#009688"},{id:"attended",name:e.getString("Lead atendido por comercial"),color:"#f39400"},{id:"commercial_management",name:e.getString("Tareas pendientes"),color:"#2196f3"},{id:"tracing",name:e.getString("Seguimiento"),color:"#673ab7"},{id:"end",name:e.getString("Lead cerrado"),color:"#f44336"}]};return a}e.$inject=["gettextCatalog"],angular.module("app.services").factory("leadStatusService",e)}(),function(){"use strict";function e(e,a){function t(){function n(e){l.phones.data=e.results,l.phones.count=e.count,s.resolve(l.phones)}function i(e){404==e.status&&1!=l.phones.filters.page&&(l.phones.filters.page=1,t()),s.reject(e)}var s=e.defer();return a.phones.get(l.phones.filters,n,i),s.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(l.phones.filters);return r.search=t,r.page_size="all",a.phones.get(r,n,i),s.promise}function i(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.phones.get({id:t},n,i),s.promise}function s(t){function n(e){for(var a=0;a<l.phones.data.length;a++)l.phones.data[a].id===e.id&&(l.phones.data[a]=angular.copy(e));s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(t);return a.phones.update(r,n,i),s.promise}function r(){return{}}function o(t){function n(e){for(var a=0;a<l.phones.data.length;a++)if(l.phones.data[a].id===t.id){l.phones.data.splice(a,1),l.phones.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.phones.remove({id:t.id},n,i),s.promise}var l={phones:{data:[],count:0,filters:{}},getPhones:t,getAllPhones:n,getPhone:i,savePhone:s,getEmptyPhone:r,removePhone:o};return l}e.$inject=["$q","api"],angular.module("app.services").factory("phonesService",e)}(),function(){"use strict";function e(e,a){function t(){function n(e){l.gasTypes.data=e.results,l.gasTypes.count=e.count,s.resolve(l.gasTypes)}function i(e){404==e.status&&1!=l.gasTypes.filters.page&&(l.gasTypes.filters.page=1,t()),s.reject(e)}var s=e.defer();return a.gasTypes.get(l.gasTypes.filters,n,i),s.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(l.gasTypes.filters);return r.search=t,r.page_size="all",a.gasTypes.get(r,n,i),s.promise}function i(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.gasTypes.get({id:t},n,i),s.promise}function s(t){function n(e){for(var a=0;a<l.gasTypes.data.length;a++)l.gasTypes.data[a].id===e.id&&(l.gasTypes.data[a]=angular.copy(e));s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(t);return a.gasTypes.update(r,n,i),s.promise}function r(){return{}}function o(t){function n(e){for(var a=0;a<l.gasTypes.data.length;a++)if(l.gasTypes.data[a].id===t.id){l.gasTypes.data.splice(a,1),l.gasTypes.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.gasTypes.remove({id:t.id},n,i),s.promise}var l={gasTypes:{data:[],count:0,filters:{}},getGasTypes:t,getAllGasTypes:n,getGasType:i,saveGasType:s,getEmptyGasType:r,removeGasType:o};return l}e.$inject=["$q","api"],angular.module("app.services").factory("gasTypesService",e)}(),function(){"use strict";function e(e){var a={newLeadResults:[{id:"positive",name:e.getString("Ganado")},{id:"negative",name:e.getString("Descartado")}],resultReasons:{positive:[{id:"pedido",name:e.getString("Pedido")},{id:"reservado",name:e.getString("Reservado")}],negative:[{id:"publicidad",name:e.getString("Publicidad")},{id:"compra_competencia_precio",name:e.getString("Compra competencia por precio")},{id:"compra_competencia_proximidad",name:e.getString("Compra competencia por proximidad")},{id:"compra_competencia_stock",name:e.getString("Compra competencia por stock")},{id:"no_encaja_producto",name:e.getString("No le encaja el producto")},{id:"no_encaja_precio",name:e.getString("No le encaja el precio")},{id:"no_encaja_cuota",name:e.getString("No le encaja la cuota")},{id:"disconforme_tasacion",name:e.getString("Disconforme con tasación")},{id:"infinanciable",name:e.getString("Infinanciable")},{id:"aplaza_decision",name:e.getString("Aplaza decisión")},{id:"cita_cancelada",name:e.getString("Cita cancelada")},{id:"ilocalizable",name:e.getString("Ilocalizable")},{id:"informacion_cliente_incorrecta",name:e.getString("Información cliente incorrecta")},{id:"duplicado",name:e.getString("Duplicado")},{id:"otro",name:e.getString("Otro")},{id:"caducado",name:e.getString("Caducado")},{id:"vehiculo_ya_vendido",name:e.getString("Vehiculo ya vendido")}]},leadResults:[{id:"positive",name:e.getString("Ganado"),color:"#388E3C"},{id:"negative",name:e.getString("Negativo"),color:"rgb(244,67,54)"},{id:"reserved_vehicle",name:e.getString("Vehiculo reservado"),color:"#388E3C"},{id:"unreachable",name:e.getString("Ilocalizable"),color:"rgb(3,155,229)"},{id:"wrong",name:e.getString("Duplicado"),color:"rgb(45,50,62)"},{id:"not_available",name:e.getString("No disponible"),color:"rgb(45,50,62)"},{id:"error",name:e.getString("Error"),color:"rgb(123,31,162)"}],leadResultsErrors:[{id:"rechaza_financiacion",name:e.getString("Rechaza financiación"),status:"negative"},{id:"rechaza_tasacion",name:e.getString("Rechaza tasación"),status:"negative"},{id:"rechaza_precio",name:e.getString("Rechaza precio"),status:"negative"},{id:"aplaza_compra",name:e.getString("Aplaza compra"),status:"negative"},{id:"compra_competencia",name:e.getString("Compra competencia"),status:"negative"},{id:"pre-reservado",name:e.getString("Pre-Reservado"),status:"not_available"},{id:"reservado-old",name:e.getString("Reservado"),status:"not_available"},{id:"publicidad",name:e.getString("Publicidad"),status:"error"},{id:"otro_departamento",name:e.getString("Otro Departamento"),status:"error"},{id:"error",name:e.getString("Error"),status:"error"},{id:"compra_competencia_precio",name:e.getString("Compra competencia por precio"),status:"negative"},{id:"compra_competencia_proximidad",name:e.getString("Compra competencia por proximidad"),status:"negative"},{id:"compra_competencia_stock",name:e.getString("Compra competencia por stock"),status:"negative"},{id:"infinanciable",name:e.getString("Infinanciable"),status:"negative"},{id:"aplaza_decision",name:e.getString("Aplaza decisión"),status:"negative"},{id:"otro",name:e.getString("Otro"),status:"negative"},{id:"duplicado",name:e.getString("Duplicado"),status:"negative"},{id:"cita_cancelada",name:e.getString("Cita cancelada"),status:"negative"},{id:"informacion_cliente_incorrecta",name:e.getString("Información cliente incorrecta"),status:"negative"},{id:"ilocalizable",name:e.getString("Ilocalizable"),status:"negative"},{id:"disconforme_tasacion",name:e.getString("Disconforme con tasación"),status:"negative"},{id:"caducado",name:e.getString("Caducado"),status:"negative"},{id:"no_encaja_producto",name:e.getString("No le encaja el producto"),status:"negative"},{id:"no_encaja_precio",name:e.getString("No le encaja el precio"),status:"negative"},{id:"no_encaja_cuota",name:e.getString("No le encaja la cuota"),status:"negative"},{id:"pedido",name:e.getString("Pedido"),status:"positive"},{id:"reservado",name:e.getString("Reservado"),status:"positive"}]};return a}e.$inject=["gettextCatalog"],angular.module("app.services").factory("leadResultsService",e)}(),function(){"use strict";function e(e,a){function t(){function n(e){l.emails.data=e.results,l.emails.count=e.count,s.resolve(l.emails)}function i(e){404==e.status&&1!=l.emails.filters.page&&(l.emails.filters.page=1,t()),s.reject(e)}var s=e.defer();return a.emails.get(l.emails.filters,n,i),s.promise}function n(t){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(l.emails.filters);return r.search=t,r.page_size="all",a.emails.get(r,n,i),s.promise}function i(t){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return a.emails.get({id:t},n,i),s.promise}function s(t){function n(e){for(var a=0;a<l.emails.data.length;a++)l.emails.data[a].id===e.id&&(l.emails.data[a]=angular.copy(e));s.resolve(e)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(t);return a.emails.update(r,n,i),s.promise}function r(){return{}}function o(t){function n(e){for(var a=0;a<l.emails.data.length;a++)if(l.emails.data[a].id===t.id){l.emails.data.splice(a,1),l.emails.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return a.emails.remove({id:t.id},n,i),s.promise}var l={emails:{data:[],count:0,filters:{}},getEmails:t,getAllEmails:n,getEmail:i,saveEmail:s,getEmptyEmail:r,removeEmail:o};return l}e.$inject=["$q","api"],angular.module("app.services").factory("emailsService",e)}(),function(){"use strict";function e(e,a,t){function n(){function a(e){d.click2calls.data=e.results,d.click2calls.count=e.count,s.resolve(d.click2calls)}function i(e){404==e.status&&1!=d.click2calls.filters.page&&(d.click2calls.filters.page=1,n()),s.reject(e)}var s=e.defer();return t.click2calls.get(d.click2calls.filters,a,i),s.promise}function i(a){function n(e){s.resolve(e.results)}function i(e){s.reject(e)}var s=e.defer(),r=angular.copy(d.click2calls.filters);return r.search=a,r.page_size="all",t.click2calls.get(r,n,i),s.promise}function s(a){function n(e){s.resolve(e)}function i(e){s.reject(e)}var s=e.defer();return t.click2calls.get({id:a},n,i),s.promise}function r(n){function i(e){a.getLeadsOutgoingCalls(n.lead).then(function(){r.resolve(e)})}function s(e){r.reject(e)}var r=e.defer(),o=angular.copy(n);return t.click2calls.create(o,i,s),r.promise}function o(){return{}}function l(a){function n(e){for(var t=0;t<d.click2calls.data.length;t++)if(d.click2calls.data[t].id===a.id){d.click2calls.data.splice(t,1),d.click2calls.count-=1;break}s.resolve(e.data)}function i(e){s.reject(e)}var s=e.defer();return t.click2calls.remove({id:a.id},n,i),s.promise}var d={click2calls:{data:[],count:0,filters:{}},getClick2calls:n,getAllClick2calls:i,getClick2call:s,saveClick2call:r,getEmptyClick2call:o,removeClick2call:l};return d}e.$inject=["$q","leadsService","api"],angular.module("app.services").factory("click2callsService",e)}(),function(){"use strict";angular.module("app.core",["ngAnimate","ngAria","ngCookies","ngMessages","ngResource","ngSanitize","ngMaterial","ui.router"])}(),function(){"use strict";function e(e,a){function t(){n()&&(i.flipped=!i.flipped,a.toggleClass("flipped",i.flipped))}function n(){return angular.isDefined(e.flippable)&&e.flippable===!0}var i=this;i.flipped=!1,i.flip=t}function a(){return{restrict:"E",scope:{flippable:"=?"},controller:"MsWidgetController",transclude:!0,compile:function(e){return e.addClass("ms-widget"),function(e,a,t,n,i){i(function(e){a.empty(),a.append(e)})}}}}function t(){return{restrict:"E",require:"^msWidget",transclude:!0,compile:function(e){return e.addClass("ms-widget-front"),function(e,a,t,n,i){i(function(e){a.empty(),a.append(e)}),e.flipWidget=n.flip}}}}function n(){return{restrict:"E",require:"^msWidget",transclude:!0,compile:function(e){return e.addClass("ms-widget-back"),function(e,a,t,n,i){i(function(e){a.empty(),a.append(e)}),e.flipWidget=n.flip}}}}e.$inject=["$scope","$element"],angular.module("app.core").controller("MsWidgetController",e).directive("msWidget",a).directive("msWidgetFront",t).directive("msWidgetBack",n)}(),function(){"use strict";function e(){function e(e){t.scrollEl=e}function a(){return t.scrollEl}var t=this;t.scrollEl=void 0,t.setScrollEl=e,t.getScrollEl=a}function a(){return{scope:{msTimeline:"=?",loadMore:"&?msTimelineLoadMore"},controller:"MsTimelineController",compile:function(e){return e.addClass("ms-timeline"),function(e,a,t,n){function i(){d.scrollTop()+d.height()+c>o.position().top&&(o.addClass("show"),r(),e.loadMore().then(function(){o.removeClass("show"),s()},function(){o.remove()}))}function s(){d.on("scroll",i)}function r(){d.off("scroll",i)}var o=angular.element('<div class="ms-timeline-loader md-accent-bg md-whiteframe-4dp"><span class="spinner animate-rotate"></span></div>');a.append(o);var l={scrollEl:"#content"};l=angular.extend(l,e.msTimeline,{});var d=angular.element(l.scrollEl);n.setScrollEl(d);var c=144;s(),e.$on("$destroy",function(){r()})}}}}function t(e,a){return{scope:!0,require:"^msTimeline",compile:function(t){return t.addClass("ms-timeline-item").addClass("hidden"),function(t,n,i,s){function r(){n.find("ms-card")?t.$on("msCard::cardTemplateLoaded",function(a,t){var n=angular.element(t[0]);o(n).then(function(){e(function(){c=!0})})}):o(n).then(function(){e(function(){c=!0})}),u.on("scroll",l),l()}function o(e){var t=a.defer(),n=e.find("img");return n.length>0?n.on("load",function(){t.resolve("Image is loaded")}):t.resolve("No images"),t.promise}function l(){u.scrollTop()+u.height()>n.position().top+d&&(e(function(){m=!0}),u.off("scroll",l))}var d=72,c=!1,m=!1,u=s.getScrollEl();r();var p=t.$watch(function(){return c&&m},function(e,a){angular.equals(e,a)||e&&(n.removeClass("hidden").addClass("animate"),p())},!0)}}}}t.$inject=["$timeout","$q"],angular.module("app.core").controller("MsTimelineController",e).directive("msTimeline",a).directive("msTimelineItem",t)}(),function(){"use strict";function e(e){function a(e){x.orientation=e||"horizontal"}function t(e){x.mainForm=e}function n(e,a,t){var n={element:e,scope:a,form:t,stepNumber:a.step||x.steps.length+1,stepTitle:a.stepTitle,stepTitleTranslate:a.stepTitleTranslate};return x.steps.push(n),x.steps.sort(function(e,a){return e.stepNumber-a.stepNumber}),n}function i(){x.setCurrentStep(x.currentStepNumber)}function s(){e(function(){for(var e=0;e<x.steps.length;e++)x.steps[e].form.$setPristine(),x.steps[e].form.$setUntouched();x.mainForm.$setPristine(),x.mainForm.$setUntouched(),c()})}function r(e){if(_(e))if(x.currentStepNumber=e,"horizontal"===x.orientation){for(var a=0;a<x.steps.length;a++)x.steps[a].element.hide();x.steps[x.currentStepNumber-1].element.show()}else if("vertical"===x.orientation){for(var t=0;t<x.steps.length;t++)x.steps[t].element.find(".ms-stepper-step-content").hide();x.steps[x.currentStepNumber-1].element.find(".ms-stepper-step-content").show()}}function o(e){h(e)||x.setCurrentStep(e)}function l(){for(var e=x.currentStepNumber-1,a=e;a>=1;a--)if(!h(a)){e=a;break}x.setCurrentStep(e)}function d(){for(var e=x.currentStepNumber+1,a=e;a<=x.steps.length;a++)if(!h(a)){e=a;break}x.setCurrentStep(e)}function c(){x.setCurrentStep(1)}function m(){x.setCurrentStep(x.steps.length)}function u(){return 1===x.currentStepNumber}function p(){return x.currentStepNumber===x.steps.length}function g(e){return _(e)?x.currentStepNumber===e:null}function v(e){if(!_(e))return null;for(var a=!1,t=1;e>t;t++)if(!y(t)){a=!0;break}return a}function f(e){return _(e)?x.steps[e-1].scope.optionalStep:null}function h(e){return _(e)?!!x.steps[e-1].scope.hideStep:null}function b(e){return!h(e.stepNumber)}function y(e){return _(e)?f(e)?!0:x.steps[e-1].form.$valid:null}function _(e){return!(angular.isUndefined(e)||1>e||e>x.steps.length)}function w(){return x.mainForm.$valid}var x=this;x.mainForm=void 0,x.orientation="horizontal",x.steps=[],x.currentStep=void 0,x.currentStepNumber=1,x.setOrientation=a,x.registerMainForm=t,x.registerStep=n,x.setupSteps=i,x.resetForm=s,x.setCurrentStep=r,x.gotoStep=o,x.gotoPreviousStep=l,x.gotoNextStep=d,x.gotoFirstStep=c,x.gotoLastStep=m,x.isFirstStep=u,x.isLastStep=p,x.isStepCurrent=g,x.isStepDisabled=v,x.isStepOptional=f,x.isStepHidden=h,x.filterHiddenStep=b,x.isStepValid=y,x.isStepNumberValid=_,x.isFormValid=w}function a(){return{restrict:"A",scope:{},require:["form","msHorizontalStepper"],priority:1001,controller:"MsStepperController as MsStepper",bindToController:{model:"=ngModel"},transclude:!0,templateUrl:"app/core/directives/ms-stepper/templates/horizontal/horizontal.html",compile:function(e){return e.addClass("ms-stepper"),function(e,a,t,n){var i=n[0],s=n[1];s.setOrientation("horizontal"),s.registerMainForm(i),s.setupSteps()}}}}function t(){return{restrict:"E",require:["form","^msHorizontalStepper"],priority:1e3,scope:{step:"=?",stepTitle:"=?",stepTitleTranslate:"=?",optionalStep:"=?",hideStep:"=?"},compile:function(e){return e.addClass("ms-stepper-step"),function(e,a,t,n){var i=n[0],s=n[1];e.optionalStep=angular.isDefined(t.optionalStep),s.registerStep(a,e,i),a.hide()}}}}function n(e){return{restrict:"A",scope:{},require:["form","msVerticalStepper"],priority:1001,controller:"MsStepperController as MsStepper",bindToController:{model:"=ngModel"},transclude:!0,templateUrl:"app/core/directives/ms-stepper/templates/vertical/vertical.html",compile:function(a){return a.addClass("ms-stepper"),function(a,t,n,i){var s=i[0],r=i[1];e(function(){r.setOrientation("vertical"),r.registerMainForm(s),r.setupSteps()})}}}}function i(){return{restrict:"E",require:["form","^msVerticalStepper"],priority:1e3,scope:{step:"=?",stepTitle:"=?",stepTitleTranslate:"=?",optionalStep:"=?",hideStep:"=?"},transclude:!0,templateUrl:"app/core/directives/ms-stepper/templates/vertical/step/vertical-step.html",compile:function(e){return e.addClass("ms-stepper-step"),function(e,a,t,n){var i=n[0],s=n[1];e.optionalStep=angular.isDefined(t.optionalStep),e.stepInfo=s.registerStep(a,e,i),e.MsStepper=s,a.find(".ms-stepper-step-content").hide()}}}}e.$inject=["$timeout"],n.$inject=["$timeout"],angular.module("app.core").controller("MsStepperController",e).directive("msHorizontalStepper",a).directive("msHorizontalStepperStep",t).directive("msVerticalStepper",n).directive("msVerticalStepperStep",i)}(),function(){"use strict";function e(e){return{restrict:"E",link:function(a,t){var n=a.$on("msSplashScreen::remove",function(){e.leave(t).then(function(){n(),a=t=null})})}}}e.$inject=["$animate"],angular.module("app.core").directive("msSplashScreen",e)}(),function(){"use strict";function e(e,a,t,n,i,s){function r(){y.loadShortcuts().then(function(e){y.shortcuts=e,y.shortcuts.length>0&&(y.results=e)}),e.$watch("MsShortcuts.query",function(e,a){angular.isUndefined(e)||angular.equals(e,a)||(y.resultsLoading=!0,y.populateResults().then(function(e){y.results=e},function(){y.results=[]})["finally"](function(){y.resultsLoading=!1}))})}function o(){for(var e=[],a=s.getFlatNavigation(),t=i.defer(),r=0;r<a.length;r++)a[r].uisref&&e.push(a[r]);if(y.query){e=e.filter(function(e){return angular.lowercase(e.title).search(angular.lowercase(y.query))>-1?!0:void 0});for(var o=0;o<e.length;o++){e[o].hasShortcut=!1;for(var l=0;l<y.shortcuts.length;l++)if(y.shortcuts[l]._id===e[o]._id){e[o].hasShortcut=!0;break}}}else y.shortcuts.length>0&&(e=y.shortcuts);return y.selectedResultIndex=0,n(function(){t.resolve(e)},250),t.promise}function l(){var e=i.defer(),t=angular.fromJson(a.get("FUSE.shortcuts"));return angular.isUndefined(t)&&(t=[{title:"Sample",icon:"icon-tile-four",state:"app.sample",weight:1,children:[],_id:"sample",_path:"apps.sample",uisref:"app.sample",hasShortcut:!0}],a.put("FUSE.shortcuts",angular.toJson(t))),e.resolve(t),e.promise}function d(){var e=i.defer();return a.put("FUSE.shortcuts",angular.toJson(y.shortcuts)),n(function(){e.resolve({success:!0})},250),e.promise}function c(e){e.hasShortcut=!0,y.shortcuts.push(e),y.saveShortcuts()}function m(e){e.hasShortcut=!1;for(var a=0;a<y.shortcuts.length;a++)y.shortcuts[a]._id===e._id&&(y.shortcuts.splice(a,1),y.query||(0===y.shortcuts.length?y.results=null:a>=y.shortcuts.length&&(y.selectedResultIndex=y.shortcuts.length-1)));y.saveShortcuts()}function u(e){e.hasShortcut?y.removeShortcut(e):y.addShortcut(e)}function p(e){e.preventDefault()}function g(e){var a=e.keyCode,t=[38,40];switch(t.indexOf(a)>-1&&e.preventDefault(),a){case 13:y.handleResultClick(y.results[y.selectedResultIndex]);break;case 38:y.selectedResultIndex-1>=0&&(y.selectedResultIndex--,y.ensureSelectedResultIsVisible());break;case 40:y.selectedResultIndex+1<y.results.length&&(y.selectedResultIndex++,y.ensureSelectedResultIsVisible())}}function v(e){y.ignoreMouseEvents||(y.selectedResultIndex=e)}function f(){y.ignoreMouseEvents=!0,n.cancel(y.mouseEventIgnoreTimeout),y.mouseEventIgnoreTimeout=n(function(){y.ignoreMouseEvents=!1},250)}function h(){var e=t.find("#ms-shortcut-add-menu").find(".results"),a=angular.element(e.find(".result")[y.selectedResultIndex]);if(e&&a){var n=a.position().top-8,i=a.position().top+a.outerHeight()+8;y.temporarilyIgnoreMouseEvents(),e.scrollTop()>n&&e.scrollTop(n),i>e.height()+e.scrollTop()&&e.scrollTop(i-e.height())}}function b(){y.mobileBarActive=!y.mobileBarActive}var y=this;y.query="",y.queryOptions={debounce:300},y.resultsLoading=!1,y.selectedResultIndex=0,y.ignoreMouseEvents=!1,y.mobileBarActive=!1,y.results=null,y.shortcuts=[],y.sortableOptions={ghostClass:"ghost",forceFallback:!0,fallbackClass:"dragging",onSort:function(){y.saveShortcuts()}},y.populateResults=o,y.loadShortcuts=l,y.saveShortcuts=d,y.addShortcut=c,y.removeShortcut=m,y.handleResultClick=u,y.absorbEvent=p,y.handleKeydown=g,y.handleMouseenter=v,y.temporarilyIgnoreMouseEvents=f,y.ensureSelectedResultIsVisible=h,y.toggleMobileBar=b,r()}function a(){return{restrict:"E",scope:{},require:"msShortcuts",controller:"MsShortcutsController as MsShortcuts",bindToController:{},templateUrl:"app/core/directives/ms-shortcuts/ms-shortcuts.html",compile:function(e){return e.addClass("ms-shortcuts"),function(e,a){}}}}e.$inject=["$scope","$cookies","$document","$timeout","$q","msNavigationService"],angular.module("app.core").controller("MsShortcutsController",e).directive("msShortcuts",a)}(),function(){"use strict";function e(){return{restrict:"A",require:"^mdSidenav",link:function(e,a,t,n){e.$watch(function(){return n.isOpen()&&!n.isLockedOpen()},function(e){angular.isUndefined(e)||(a.parent().toggleClass("full-height",e),angular.element("html").toggleClass("sidenav-open",e))})}}}angular.module("app.core").directive("msSidenavHelper",e)}(),function(){"use strict";function e(e,a,t){function n(){e.$watch("MsSearchBar.query",function(a,t){if(!angular.isUndefined(a)&&!angular.equals(a,t)&&!p.collapsed){var n=e.$parent.$eval(p.onSearch,{query:a}),i=angular.isArray(n),s=n&&!!n.then;i&&p.populateResults(n),s&&(p.resultsLoading=!0,n.then(function(e){p.populateResults(e)},function(){p.populateResults([])})["finally"](function(){p.resultsLoading=!1}))}})}function i(e){if(!p.collapsed){var a=angular.isArray(e),t=null===e;(a||t)&&(p.selectedResultIndex=0,p.results=e)}}function s(){p.collapsed=!1,e.expand(),p.onExpand&&angular.isFunction(p.onExpand)&&p.onExpand()}function r(){p.query="",p.populateResults(null),p.collapsed=!0,e.collapse(),p.onCollapse&&angular.isFunction(p.onCollapse)&&p.onCollapse();
}function o(e){e.preventDefault()}function l(e){var a=e.keyCode,t=[27,38,40];switch(t.indexOf(a)>-1&&e.preventDefault(),a){case 13:p.handleResultClick(p.results[p.selectedResultIndex]);break;case 27:p.collapse();break;case 38:p.selectedResultIndex-1>=0&&(p.selectedResultIndex--,p.ensureSelectedResultIsVisible());break;case 40:if(!p.results)return;p.selectedResultIndex+1<p.results.length&&(p.selectedResultIndex++,p.ensureSelectedResultIsVisible())}}function d(e){p.ignoreMouseEvents||(p.selectedResultIndex=e)}function c(){p.ignoreMouseEvents=!0,t.cancel(p.mouseEventIgnoreTimeout),p.mouseEventIgnoreTimeout=t(function(){p.ignoreMouseEvents=!1},250)}function m(e){p.onResultClick&&p.onResultClick({item:e}),p.collapse()}function u(){var e=a.find(".ms-search-bar-results"),t=angular.element(e.find(".result")[p.selectedResultIndex]);if(e&&t){var n=t.position().top-8,i=t.position().top+t.outerHeight()+8;p.temporarilyIgnoreMouseEvents(),e.scrollTop()>n&&e.scrollTop(n),i>e.height()+e.scrollTop()&&e.scrollTop(i-e.height())}}var p=this;p.collapsed=!0,p.query="",p.queryOptions={debounce:p.debounce||0},p.resultsLoading=!1,p.results=null,p.selectedResultIndex=0,p.ignoreMouseEvents=!1,p.populateResults=i,p.expand=s,p.collapse=r,p.absorbEvent=o,p.handleKeydown=l,p.handleMouseenter=d,p.temporarilyIgnoreMouseEvents=c,p.handleResultClick=m,p.ensureSelectedResultIsVisible=u,n()}function a(e){return{restrict:"E",scope:{},require:"msSearchBar",controller:"MsSearchBarController as MsSearchBar",bindToController:{debounce:"=?",onSearch:"@",onResultClick:"&?",onExpand:"&?",onCollapse:"&?"},templateUrl:"app/core/directives/ms-search-bar/ms-search-bar.html",compile:function(a){return a.addClass("ms-search-bar"),function(a,t){function n(){r=t.find("#ms-search-bar-input")}function i(){t.addClass("expanded"),o.addClass("ms-search-bar-expanded"),r.focus()}function s(){t.removeClass("expanded"),o.removeClass("ms-search-bar-expanded")}var r,o=e.find("body");a.collapse=s,a.expand=i,n()}}}}e.$inject=["$scope","$element","$timeout"],a.$inject=["$document"],angular.module("app.core").controller("MsSearchBarController",e).directive("msSearchBar",a)}(),function(){"use strict";function e(){function e(e){a=angular.extend({},a,e)}var a={wheelSpeed:1,wheelPropagation:!1,swipePropagation:!0,minScrollbarLength:null,maxScrollbarLength:null,useBothWheelAxes:!1,useKeyboard:!0,suppressScrollX:!1,suppressScrollY:!1,scrollXMarginOffset:0,scrollYMarginOffset:0,stopPropagationOnClick:!0};this.config=e,this.$get=function(){function e(){return a}var t={getConfig:e};return t}}function a(e,a,t,n){return{restrict:"AE",compile:function(i){return n.getConfig("disableCustomScrollbars")||n.getConfig("disableCustomScrollbarsOnMobile")&&t.isMobile()?void 0:(i.addClass("ms-scroll"),function(t,n,i){function s(){PerfectScrollbar.update(n[0])}var r={};i.msScroll&&(r=t.$eval(i.msScroll)),r=angular.extend({},a.getConfig(),r),e(function(){PerfectScrollbar.initialize(n[0],r)},0),n.on("mouseenter",s),t.$watch(function(){return n.prop("scrollHeight")},function(e,a){angular.isUndefined(e)||angular.equals(e,a)||s()}),t.$watch(function(){return n.prop("scrollWidth")},function(e,a){angular.isUndefined(e)||angular.equals(e,a)||s()}),t.$on("$destroy",function(){n.off("mouseenter"),PerfectScrollbar.destroy(n[0])})})}}}a.$inject=["$timeout","msScrollConfig","msUtils","fuseConfig"],angular.module("app.core").provider("msScrollConfig",e).directive("msScroll",a)}(),function(){"use strict";function e(){return{restrict:"A",link:function(e,a){var t=angular.element('<div class="ms-responsive-table-wrapper"></div>');a.after(t),t.append(a)}}}angular.module("app.core").directive("msResponsiveTable",e)}(),function(){"use strict";function e(){return{restrict:"A",scope:{msRandomClass:"="},link:function(e,a){var t=e.msRandomClass[Math.floor(Math.random()*e.msRandomClass.length)];a.addClass(t)}}}angular.module("app.core").directive("msRandomClass",e)}(),function(){"use strict";function e(){function e(e,a){if(!angular.isString(e))return void r.error("path must be a string (eg. `dashboard.project`)");for(var t=e.split("."),i=t[t.length-1],o=n(t),l=!1,d=0;d<o.length;d++)if(o[d]._id===i){l=o[d];break}l?(angular.extend(l,a),l.uisref=s(l)):(a.children=[],(angular.isUndefined(a.weight)||!angular.isNumber(a.weight))&&(a.weight=1),a._id=i,a._path=e,a.uisref=s(a),o.push(a))}function a(e){if(!angular.isString(e))return void r.error("path must be a string (eg. `dashboard.project`)");for(var a=o,t=e.split("."),n=0;n<t.length;n++)for(var i=t[n],s=0;s<a.length;s++)if(a[s]._id===i){if(a[s]._path===e)return a.splice(s,1),!0;a=a[s].children;break}return!1}function t(e){e||(e=o,e.sort(i));for(var a=0;a<e.length;a++){var n=e[a].children;n.length>1&&n.sort(i),n.length>0&&t(n)}}function n(e){var a=o;if(1===e.length)return a;e.pop();for(var t=0;t<e.length;t++){for(var n=e[t],i=!0,s=0;s<a.length;s++)if(a[s]._id===n){a=a[s].children,i=!1;break}if(i){var r={_id:n,_path:e.join("."),title:n,weight:1,children:[]};a.push(r),a=r.children}}return a}function i(e,a){return parseInt(e.weight)-parseInt(a.weight)}function s(e){var a="";return angular.isDefined(e.state)&&(a=e.state,angular.isDefined(e.stateParams)&&angular.isObject(e.stateParams)&&(a=a+"("+angular.toJson(e.stateParams)+")")),a}var r=angular.injector(["ng"]).get("$log"),o=[],l=this;l.saveItem=e,l.deleteItem=a,l.sortByWeight=t,this.$get=function(){function n(){o=[],h&&(h.vm.navigation=o)}function i(e,a){f={node:e,scope:a}}function s(){return f}function r(e){if(e){for(var a=0;a<o.length;a++)if(o[a]._id===e)return[o[a]];return null}return o}function l(e){var a=r(e);return v(a)}function d(e){h=e}function c(e){b=e}function m(){return b}function u(e){y=e}function p(){return y}function g(){h.toggleFolded()}function v(e){for(var a=[],t=0;t<e.length;t++){var n=angular.copy(e[t]);n.children=[],a.push(n),e[t].children.length>0&&(a=a.concat(v(e[t].children)))}return a}var f=null,h=null,b=null,y=null,_={saveItem:e,deleteItem:a,sort:t,clearNavigation:n,setActiveItem:i,getActiveItem:s,getNavigation:r,getFlatNavigation:l,setNavigationScope:d,setFolded:c,getFolded:m,setFoldedOpen:u,getFoldedOpen:p,toggleFolded:g};return _}}function a(e,a){function t(){a.sort()}function n(){angular.element("body").toggleClass("ms-navigation-horizontal-mobile-menu-active")}var i=this;e.root?i.navigation=a.getNavigation(e.root):i.navigation=a.getNavigation(),i.toggleHorizontalMobileMenu=n,t()}function t(e,a,t,n){return{restrict:"E",scope:{folded:"=",root:"@"},controller:"MsNavigationController as vm",templateUrl:"app/core/directives/ms-navigation/templates/vertical.html",transclude:!0,compile:function(i){return i.addClass("ms-navigation"),function(i,s){function r(){null===n.getFolded()&&n.setFolded(i.folded),n.getFolded()&&(a(function(){e.$broadcast("msNavigation::collapse")}),p.addClass("ms-navigation-folded"),l())}function o(a){if(n.setFolded(a),a)e.$broadcast("msNavigation::collapse"),p.addClass("ms-navigation-folded"),l();else{var t=n.getActiveItem();t&&t.scope.$emit("msNavigation::stateMatched"),p.removeClass("ms-navigation-folded ms-navigation-folded-open"),c()}}function l(){s.parent().append(g),a(function(){g.on("mouseenter touchstart",m)})}function d(){p.find("#main").append(v),v.on("mouseenter touchstart",u)}function c(){v.remove()}function m(e){e&&e.preventDefault(),n.setFoldedOpen(!0);var a=n.getActiveItem();a&&a.scope.$emit("msNavigation::stateMatched"),p.addClass("ms-navigation-folded-open"),g.remove(),d()}function u(a){a&&a.preventDefault(),n.setFoldedOpen(!1),e.$broadcast("msNavigation::collapse"),p.removeClass("ms-navigation-folded-open"),v.remove(),l()}var p=angular.element("body"),g=angular.element('<div id="ms-navigation-fold-expander"></div>'),v=angular.element('<div id="ms-navigation-fold-collapser"></div>'),f=t("navigation");n.setNavigationScope(i),r(),i.$watch(function(){return f.isLockedOpen()},function(a,t){if(!angular.isUndefined(a)&&!angular.equals(a,t)){var i=n.getFolded();if(i)if(a)e.$broadcast("msNavigation::collapse");else{var s=n.getActiveItem();s&&s.scope.$emit("msNavigation::stateMatched")}}}),i.$watch("folded",function(e,a){angular.isUndefined(e)||angular.equals(e,a)||o(e)}),i.toggleFolded=function(){var e=n.getFolded();o(!e)},i.$on("$stateChangeStart",function(){f.close()}),i.$on("$destroy",function(){v.off("mouseenter touchstart"),g.off("mouseenter touchstart")})}}}}function n(e,a,t,n,i,s){function r(){if(u.hasChildren=u.node.children.length>0,u.group=!(!angular.isDefined(u.node.group)||u.node.group!==!0),!u.hasChildren||u.group?u.collapsable=!1:u.collapsable=!(!angular.isUndefined(u.node.collapsable)&&"boolean"==typeof u.node.collapsable&&u.node.collapsable!==!0),u.collapsable?u.collapsed=!(!angular.isUndefined(u.node.collapsed)&&"boolean"==typeof u.node.collapsed&&u.node.collapsed!==!0):u.collapsed=!1,u.node.state===i.current.name||i.includes(u.node.state)){if(angular.isDefined(u.node.stateParams)&&angular.isDefined(i.params)&&!angular.equals(u.node.stateParams,i.params))return;e.$emit("msNavigation::stateMatched"),s.setActiveItem(u.node,e)}e.$on("msNavigation::stateMatched",function(){u.collapsable&&u.collapsed&&e.$evalAsync(function(){u.collapsed=!1})}),e.$on("msNavigation::collapse",function(e,a){if(!u.collapsed&&u.collapsable)if(angular.isUndefined(a))u.collapse();else{var t=a.split("."),n=[],i=s.getActiveItem();if(i&&(n=i.node._path.split(".")),t.indexOf(u.node._id)>-1)return;if(n.indexOf(u.node._id)>-1)return;u.collapse()}}),e.$on("$stateChangeSuccess",function(){if(u.node.state===i.current.name){if(angular.isDefined(u.node.stateParams)&&angular.isDefined(i.params)&&!angular.equals(u.node.stateParams,i.params))return;s.setActiveItem(u.node,e),t.$broadcast("msNavigation::collapse",u.node._path)}if(i.includes(u.node.state)){if(angular.isDefined(u.node.stateParams)&&angular.isDefined(i.params)&&!angular.equals(u.node.stateParams,i.params))return;e.$emit("msNavigation::stateMatched")}})}function o(){u.collapsed?u.expand():u.collapse()}function l(){var a=u.element.children("ul"),t=a[0].offsetHeight;e.$evalAsync(function(){u.collapsed=!0,u.element.addClass("collapsing"),n.animate(a,{display:"block",height:t+"px"},{height:"0px"},u.animateHeightClass).then(function(){a.css({display:"",height:""}),u.element.removeClass("collapsing")}),e.$broadcast("msNavigation::collapse")})}function d(){var a=u.element.children("ul");a.css({position:"absolute",visibility:"hidden",display:"block",height:"auto"});var i=a[0].offsetHeight;a.css({position:"",visibility:"",display:"",height:""}),e.$evalAsync(function(){u.collapsed=!1,u.element.addClass("expanding"),n.animate(a,{display:"block",height:"0px"},{height:i+"px"},u.animateHeightClass).then(function(){a.css({height:""}),u.element.removeClass("expanding")}),t.$broadcast("msNavigation::collapse",u.node._path)})}function c(){return u.node["class"]}function m(){return angular.isDefined(u.node.hidden)&&angular.isFunction(u.node.hidden)?u.node.hidden():!1}var u=this;u.element=a,u.node=e.node,u.hasChildren=void 0,u.collapsed=void 0,u.collapsable=void 0,u.group=void 0,u.animateHeightClass="animate-height",u.toggleCollapsed=o,u.collapse=l,u.expand=d,u.getClass=c,u.isHidden=m,r()}function i(){return{restrict:"A",bindToController:{node:"=msNavigationNode"},controller:"MsNavigationNodeController as vm",compile:function(e){return e.addClass("ms-navigation-node"),function(e,a,t,n){a.addClass(n.getClass()),n.group&&a.addClass("group")}}}}function s(){return{restrict:"A",require:"^msNavigationNode",compile:function(e){return e.addClass("ms-navigation-item"),function(e,a,t,n){n.collapsable&&a.on("click",n.toggleCollapsed),e.$on("$destroy",function(){a.off("click")})}}}}function r(e){return{restrict:"E",scope:{root:"@"},controller:"MsNavigationController as vm",templateUrl:"app/core/directives/ms-navigation/templates/horizontal.html",transclude:!0,compile:function(a){return a.addClass("ms-navigation-horizontal"),function(a){e.setNavigationScope(a)}}}}function o(e,a,t,n,i){function s(){if(l.isActive=!1,l.hasChildren=l.node.children.length>0,l.group=!(!angular.isDefined(l.node.group)||l.node.group!==!0),l.node.state===n.current.name||n.includes(l.node.state)){if(angular.isDefined(l.node.stateParams)&&angular.isDefined(n.params)&&!angular.equals(l.node.stateParams,n.params))return;e.$emit("msNavigation::stateMatched"),i.setActiveItem(l.node,e)}e.$on("msNavigation::stateMatched",function(){l.hasChildren&&e.$evalAsync(function(){l.isActive=!0})}),e.$on("msNavigation::clearActive",function(){if(l.hasChildren){var a=[],t=i.getActiveItem();t&&(a=t.node._path.split(".")),a.indexOf(l.node._id)>-1?e.$evalAsync(function(){l.isActive=!0}):e.$evalAsync(function(){l.isActive=!1})}}),e.$on("$stateChangeSuccess",function(){if(l.node.state===n.current.name||n.includes(l.node.state)){if(angular.isDefined(l.node.stateParams)&&angular.isDefined(n.params)&&!angular.equals(l.node.stateParams,n.params))return;i.setActiveItem(l.node,e),t.$broadcast("msNavigation::clearActive")}})}function r(){return l.node["class"]}function o(){return angular.isDefined(l.node.hidden)&&angular.isFunction(l.node.hidden)?l.node.hidden():!1}var l=this;l.element=a,l.node=e.node,l.hasChildren=void 0,l.group=void 0,l.getClass=r,l.isHidden=o,s()}function l(){return{restrict:"A",bindToController:{node:"=msNavigationHorizontalNode"},controller:"MsNavigationHorizontalNodeController as vm",compile:function(e){return e.addClass("ms-navigation-horizontal-node"),function(e,a,t,n){a.addClass(n.getClass()),n.group&&a.addClass("group")}}}}function d(e){return{restrict:"A",require:"^msNavigationHorizontalNode",compile:function(a){return a.addClass("ms-navigation-horizontal-item"),function(a,t,n,i){function s(){i.hasChildren&&!e("gt-md")&&t.toggleClass("expanded")}t.on("click",s),a.$on("$destroy",function(){t.off("click")})}}}}a.$inject=["$scope","msNavigationService"],t.$inject=["$rootScope","$timeout","$mdSidenav","msNavigationService"],n.$inject=["$scope","$element","$rootScope","$animate","$state","msNavigationService"],r.$inject=["msNavigationService"],o.$inject=["$scope","$element","$rootScope","$state","msNavigationService"],d.$inject=["$mdMedia"],angular.module("app.core").provider("msNavigationService",e).controller("MsNavigationController",a).directive("msNavigation",t).controller("MsNavigationNodeController",n).directive("msNavigationNode",i).directive("msNavigationItem",s).directive("msNavigationHorizontal",r).controller("MsNavigationHorizontalNodeController",o).directive("msNavigationHorizontalNode",l).directive("msNavigationHorizontalItem",d)}(),function(){"use strict";function e(){function e(e,a){s={scope:e,element:a}}function a(){return s.scope.isNavFoldedOpen()}function t(){s.scope.toggleFold()}function n(){s.scope.openFolded()}function i(){s.scope.closeFolded()}var s={},r={setFoldable:e,isNavFoldedOpen:a,toggleFold:t,openFolded:n,closeFolded:i};return r}function a(e,a,t){return{restrict:"A",link:function(n,i,s){function r(){return p}function o(){u=!u,u?l():m()}function l(){g.addClass("ms-nav-folded"),a.$broadcast("msNav::forceCollapse"),i.scrollTop(0),h.append(v),v.on("mouseenter touchstart",function(e){d(e),p=!0})}function d(e){angular.isDefined(e)&&e.preventDefault(),g.addClass("ms-nav-folded-open"),a.$broadcast("msNav::expandMatchingToggles"),h.find(v).remove(),h.parent().append(f),f.on("mouseenter touchstart",function(e){c(e),p=!1})}function c(e){angular.isDefined(e)&&e.preventDefault(),a.$broadcast("msNav::forceCollapse"),i.scrollTop(0),g.removeClass("ms-nav-folded-open"),h.parent().find(f).remove(),h.append(v),v.on("mouseenter touchstart",function(e){d(e),p=!0})}function m(){g.removeClass("ms-nav-folded ms-nav-folded-open"),a.$broadcast("msNav::expandMatchingToggles"),i.off("mouseenter mouseleave")}var u="true"===s.msNavIsFolded,p=!1,g=angular.element(e[0].body),v=angular.element('<div id="ms-nav-fold-open-overlay"></div>'),f=angular.element('<div id="ms-nav-fold-close-overlay"></div>'),h=i.parent();t.setFoldable(n,i,u),u?l():m(),n.toggleFold=o,n.openFolded=d,n.closeFolded=c,n.isNavFoldedOpen=r,n.$on("$destroy",function(){v.off("mouseenter touchstart"),f.off("mouseenter touchstart"),i.off("mouseenter mouseleave")})}}}function t(){function e(){return l}function a(){l=!0}function t(){l=!1}function n(e,a){d.push({element:e,scope:a})}function i(){return c}function s(e,a){c.push({element:e,scope:a})}function r(){c=[]}var o=this,l=!1,d=[],c=[];o.isDisabled=e,o.enable=t,o.disable=a,o.setToggleItem=n,o.getLockedItems=i,o.setLockedItem=s,o.clearLockedItems=r}function n(e,a,t){return{restrict:"E",scope:{},controller:"MsNavController",compile:function(n){return n.addClass("ms-nav"),function(n){e.$broadcast("msNav::expandMatchingToggles");var i=e.$on("$stateChangeSuccess",function(){e.$broadcast("msNav::expandMatchingToggles"),a.when("navigation").then(function(e){e.close(),t.isNavFoldedOpen()&&t.closeFolded()})});n.$on("$destroy",function(){i()})}}}}function i(){return{restrict:"A",compile:function(e){return e.addClass("ms-nav-title"),function(){}}}}function s(){return{restrict:"AE",compile:function(e){return e.addClass("ms-nav-button"),function(){}}}}function r(e,a,t,n){return{restrict:"A",require:"^msNav",scope:!0,compile:function(i,s){return i.addClass("ms-nav-toggle"),angular.isUndefined(s.collapsed)&&(s.collapsed=!0),i.attr("collapsed",s.collapsed),function(i,s,r,o){function l(){o.isDisabled()||(o.disable(),d()?(o.clearLockedItems(),i.$emit("msNav::pushToLockedList"),e.$broadcast("msNav::collapse"),m().then(function(){o.enable()})):i.$broadcast("msNav::forceCollapse"))}function d(){return"true"===s.attr("collapsed")}function c(){return!d()}function m(){var e=a.defer();if(c())return e.reject({error:!0}),e.promise;s.attr("collapsed",!1);var n=angular.element(s.find("ms-nav-toggle-items")[0]);n.css({position:"absolute",visibility:"hidden",display:"block",height:"auto"});var r=n[0].offsetHeight;return n.css({position:"",visibility:"",display:"",height:""}),i.$evalAsync(function(){t.animate(n,{display:"block",height:"0px"},{height:r+"px"},p.expandAnimation).then(function(){n.addClass(p.expanded),n.css({height:""}),e.resolve({success:!0})})}),e.promise}function u(){var e=a.defer();if(d())return e.reject({error:!0}),e.promise;s.attr("collapsed",!0);var n=angular.element(s.find("ms-nav-toggle-items")[0]),r=n[0].offsetHeight;return i.$evalAsync(function(){t.animate(n,{height:r+"px"},{height:"0px"},p.collapseAnimation).then(function(){n.removeClass(p.expanded),n.css({display:"",height:""}),e.resolve({success:!0})})}),e.promise}var p={expanded:"expanded",expandAnimation:"expand-animation",collapseAnimation:"collapse-animation"},g=s.find("a"),v=[],f=/\(.*\)/g;angular.forEach(g,function(e){var a=angular.element(e).attr("ui-sref");angular.isUndefined(a)||(a=a.replace(f,""),v.push(a))}),o.setToggleItem(s,i),s.children(".ms-nav-button").on("click",l),i.$on("$destroy",function(){s.children(".ms-nav-button").off("click")}),i.$on("msNav::collapse",function(){var e=o.getLockedItems(),a=!1;angular.forEach(e,function(e){angular.equals(e.scope,i)&&(a=!0)}),a||u().then(function(){o.enable()})}),i.$on("msNav::forceCollapse",function(){u().then(function(){o.enable()})}),i.$on("msNav::expandMatchingToggles",function(){var e=n.current.name,a=!1;angular.forEach(v,function(t){e===t&&(a=!0)}),a?m():u()}),i.$on("msNav::pushToLockedList",function(){o.setLockedItem(s,i)})}}}}a.$inject=["$document","$rootScope","msNavFoldService"],n.$inject=["$rootScope","$mdComponentRegistry","msNavFoldService"],r.$inject=["$rootScope","$q","$animate","$state"],angular.module("app.core").factory("msNavFoldService",e).directive("msNavIsFolded",a).controller("MsNavController",t).directive("msNav",n).directive("msNavTitle",i).directive("msNavButton",s).directive("msNavToggle",r)}(),function(){"use strict";function e(e){return{restrict:"E",scope:{},transclude:!0,templateUrl:"app/core/directives/ms-info-bar/ms-info-bar.html",link:function(a,t){function n(){i.removeClass(s),t.remove(),a.$destroy()}var i=e.find("body"),s="ms-info-bar-active";i.addClass(s),a.removeInfoBar=n}}}e.$inject=["$document"],angular.module("app.core").directive("msInfoBar",e)}(),function(){"use strict";function e(e,a,t,n){function i(e,a){c.selectedPalette=e,c.selectedHues=a}function s(e,a){l(e,a),d(),t.hide()}function r(){c.selectedColor={palette:"",hue:"","class":""},i(!1,!1),d()}function o(){if(!c.modelCtrl.$viewValue||""===c.modelCtrl.$viewValue)return void r();var e,a;if("class"===c.msModelType){var t=c.modelCtrl.$viewValue.split("-");t.length>=5?(e=t[1]+"-"+t[2],a=t[3]):(e=t[1],a=t[2])}else"obj"===c.msModelType&&(e=c.modelCtrl.$viewValue.palette,a=c.modelCtrl.$viewValue.hue||500);l(e,a)}function l(a,t){c.selectedColor={palette:a,hue:t,"class":"md-"+a+"-"+t+"-bg",bgColorValue:n.rgba(c.palettes[a][t].value),fgColorValue:n.rgba(c.palettes[a][t].contrast)},"obj"!==c.msModelType||angular.equals(c.selectedColor,c.modelCtrl.$viewValue)||d(),i(a,c.palettes[a]),e.$selectedColor=c.selectedColor}function d(){"class"===c.msModelType?c.modelCtrl.$setViewValue(c.selectedColor["class"]):"obj"===c.msModelType&&c.modelCtrl.$setViewValue(c.selectedColor)}var c=this;c.palettes=a,c.selectedPalette=!1,c.selectedHues=!1,e.$selectedColor={},c.activateHueSelection=i,c.selectColor=s,c.removeColor=r,e.$watch("ngModel",o)}function a(){return{require:["msMaterialColorPicker","ngModel"],restrict:"E",scope:{ngModel:"=",msModelType:"@?"},controller:"msMaterialColorPickerController as vm",transclude:!0,templateUrl:"app/core/directives/ms-material-color-picker/ms-material-color-picker.html",link:function(e,a,t,n,i){var s=n[0];s.modelCtrl=n[1],s.msModelType=e.msModelType||"class",i(e,function(e){e=e.filter(function(e,a){return 1===a.nodeType?!0:!1}),e.length&&a.find("ms-color-picker-button").replaceWith(e)})}}}e.$inject=["$scope","$mdColorPalette","$mdMenu","fuseGenerator"],angular.module("app.core").controller("msMaterialColorPickerController",e).directive("msMaterialColorPicker",a)}(),function(){"use strict";function e(e,a,t,n){function i(){d.options=d.options?angular.extend(c,d.options):c,r()}function s(e,t){if("undefined"!=typeof imagesLoaded){var n=a.imagesLoaded(e);n.on("done",function(){t()})}else t()}function r(){e.$watch(function(){return d.container.width()},function(e,a){e!==a&&o()})}function o(){function a(){d.containerPos=d.container[0].getBoundingClientRect(),l(),e.$broadcast("msMasonry:relayoutStarted"),d.items=d.container.find("ms-masonry-item");for(var a=Array.apply(null,new Array(d.columnCount)).map(function(){return 0}),t=0;t<d.items.length;t++){var n,i,s,r,o=d.items[t];o=angular.element(o),o.scope()&&o.scope().$broadcast("msMasonryItem:startReLayout"),o.css({width:d.columnWidth}),d.options.respectItemOrder?(s=t%d.columnCount,r=a[s]):(r=Math.min.apply(Math,a),s=a.indexOf(r)),a[s]=r+o[0].getBoundingClientRect().height,n=Math.round(s*d.columnWidth),i=r,o.css({transform:"translate3d("+n+"px,"+i+"px,0px)"}),o.addClass("placed"),o.scope()&&o.scope().$broadcast("msMasonryItem:finishReLayout")}}m&&n.cancel(m),m=n(function(){a(),e.$broadcast("msMasonry:relayoutFinished")},d.options.reLayoutDebounce)}function l(){d.columnCount=d.options.columnCount,t("gt-md")?d.columnCount=d.options.columnCount:t("md")?d.columnCount=d.columnCount>d.options.responsive.md?d.options.responsive.md:d.columnCount:t("sm")?d.columnCount=d.columnCount>d.options.responsive.sm?d.options.responsive.sm:d.columnCount:d.columnCount=d.options.responsive.xs,d.columnWidth=d.containerPos.width/d.columnCount}var d=this,c={columnCount:5,respectItemOrder:!1,reLayoutDebounce:400,responsive:{md:3,sm:2,xs:1}},m=!0;d.options=null,d.container=[],d.containerPos="",d.columnWidth="",d.items=[],d.reLayout=o,d.initialize=i,d.waitImagesLoaded=s,e.$on("msMasonry:relayout",function(){o()})}function a(e){function a(a,t){return{pre:function(e,n,i,s){s.options=angular.fromJson(t.options||"{}"),s.container=a},post:function(a,t,n,i){e(function(){i.initialize()})}}}return{restrict:"AEC",controller:"msMasonryController",compile:a}}function t(){function e(e,a,t,n){n.waitImagesLoaded(a,function(){n.reLayout()}),e.$on("msMasonryItem:finishReLayout",function(){e.$watch(function(){return a.height()},function(e,a){e!==a&&n.reLayout()})}),a.on("$destroy",function(){n.reLayout()})}return{restrict:"AEC",require:"^msMasonry",priority:1,link:e}}e.$inject=["$scope","$window","$mdMedia","$timeout"],a.$inject=["$timeout"],angular.module("app.core").controller("msMasonryController",e).directive("msMasonry",a).directive("msMasonryItem",t)}(),function(){"use strict";function e(){return{restrict:"E",scope:{templatePath:"=template",card:"=ngModel",vm:"=viewModel"},template:'<div class="ms-card-content-wrapper" ng-include="templatePath" onload="cardTemplateLoaded()"></div>',compile:function(e){return e.addClass("ms-card"),function(e,a){function t(){e.$emit("msCard::cardTemplateLoaded",a)}e.cardTemplateLoaded=t}}}}angular.module("app.core").directive("msCard",e)}(),function(){"use strict";function e(){function e(e){t=angular.extend({},t,e)}var a=this,t={formatter:function(e){return e?""===e?e:new Date(e):""},parser:function(e){return e?moment(e).add(moment(e).utcOffset(),"m").toDate():""}};a.config=e,a.$get=function(){return t}}function a(e){return{require:"ngModel",priority:1,link:function(a,t,n,i){i.$formatters.push(e.formatter),i.$parsers.push(e.parser)}}}a.$inject=["msDatepickerFixConfig"],angular.module("app.core").provider("msDatepickerFixConfig",e).directive("msDatepickerFix",a)}(),function(){"use strict";function e(){function e(e){u.forms.push(e)}function a(){r()||u.selectedIndex--}function t(){o()||u.selectedIndex++}function n(){u.selectedIndex=0}function i(){u.selectedIndex=s()-1}function s(){return u.forms.length}function r(){return 0===u.selectedIndex}function o(){return u.selectedIndex===s()-1}function l(){return angular.isDefined(u.forms[u.selectedIndex])&&u.forms[u.selectedIndex].$invalid}function d(){return u.selectedIndex>0&&angular.isDefined(u.forms[u.selectedIndex-1])&&u.forms[u.selectedIndex-1].$invalid}function c(){for(var e=0;e<u.forms.length;e++)if(u.forms[e].$invalid)return!0;return!1}function m(){u.selectedIndex=0;for(var e=0;e<u.forms.length;e++)u.forms[e].$setPristine(),u.forms[e].$setUntouched()}var u=this;u.forms=[],u.selectedIndex=0,u.registerForm=e,u.previousStep=a,u.nextStep=t,u.firstStep=n,u.lastStep=i,u.totalSteps=s,u.isFirstStep=r,u.isLastStep=o,u.currentStepInvalid=l,u.previousStepInvalid=d,u.formsIncomplete=c,u.resetForm=m}function a(){return{restrict:"E",scope:!0,controller:"MsFormWizardController as msWizard",compile:function(e){return e.addClass("ms-form-wizard"),function(){}}}}function t(){return{restrict:"A",require:["form","^msFormWizard"],compile:function(e){return e.addClass("ms-form-wizard-form"),function(e,a,t,n){var i=n[0],s=n[1];s.registerForm(i)}}}}angular.module("app.core").controller("MsFormWizardController",e).directive("msFormWizard",a).directive("msFormWizardForm",t)}(),function(){"use strict";function e(){}angular.module("app.utils.notify",[]).config(e)}(),function(){"use strict";function e(e){function a(a){var t=2500;t+=20*a.length,e.show(e.simple().textContent(a).theme("toast-error").hideDelay(t))}function t(a){var t=2500;t+=20*a.length,e.show(e.simple().textContent(a).theme("toast-success").hideDelay(t))}var n={errorMessage:a,successMessage:t};return n}e.$inject=["$mdToast"],angular.module("app.utils.notify").factory("NotifyService",e)}(),function(){"use strict";function e(){}angular.module("app.utils.debounce",[]).config(e)}(),function(){"use strict";function e(e,a){function t(t,n){var i=null;return function(s,r){s!==r&&(a.loadingProgress=!0,e.cancel(i),i=e(function(){t.apply(this,arguments).then(function(){a.loadingProgress=!1})},n))}}return t}e.$inject=["$timeout","$rootScope"],angular.module("app.utils.debounce").factory("DebounceService",e)}(),function(){"use strict";function e(){}function a(e){return function(a,t){var n=a.split(":"),i=new Date(0,0,0,n[0],n[1],n[2]);return e("date")(i,t||"HH:mm")}}a.$inject=["$filter"],angular.module("app.utils.filters",[]).config(e).filter("formatTime",a)}(),function(){"use strict";function e(){return function(e){if(e){for(var a=e.split(" "),t="",n=0;n<a.length;n++)t+=a[n].split("___")[0]+" ";return t}return e}}angular.module("app.utils.filters").filter("vehicle",e)}(),function(){"use strict";function e(){return function(e,a){var t=[],n=[];return angular.forEach(e,function(e){var i=e[a];-1===n.indexOf(i)&&(n.push(i),t.push(e))}),t}}angular.module("app.utils.filters").filter("unique",e)}(),function(){"use strict";function e(){return function(e){return"string"!=typeof e||"{"!==e.charAt(0)?e:(e=JSON.parse(e),"string"!=typeof e&&(e=JSON.stringify(e,void 0,2)),e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),e.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g,function(e){var a="number";return/^"/.test(e)?a=/:$/.test(e)?"key":"string":/true|false/.test(e)?a="boolean":/null/.test(e)&&(a="null"),'<span class="'+a+'">'+e+"</span>"}))}}angular.module("app.utils.filters").filter("syntaxHighlight",e)}(),function(){"use strict";function e(){return function(e){var a={inProgress:!0,resolved:!1,rejected:!1};return e.then(function(){a.resolved=!0})["catch"](function(){a.rejected=!0})["finally"](function(){a.inProgress=!1}),a}}angular.module("app.utils.filters").filter("promiseStatus",e)}(),function(){"use strict";function e(e){return function(a){return"initial"===a?e.getString("Inicial"):"medium"===a?e.getString("Medio"):"advanced"===a?e.getString("Avanzado"):a}}e.$inject=["gettextCatalog"],angular.module("app.utils.filters").filter("level",e)}(),function(){"use strict";function e(){return function(e){var a=e,t=/<body[^>]*>((.|[\n\r])*)<\/body>/im,n=t.exec(a);return n||e}}angular.module("app.utils.filters").filter("findBodyHtml",e)}(),function(){"use strict";function e(e){return function(a){return e.duration(a,"minutes").format("D [días], h [horas], m [minutos]")}}e.$inject=["moment"],angular.module("app.utils.filters").filter("durationHumanize",e)}(),function(){"use strict";function e(e){return function(a){return e(a,"€",6)}}e.$inject=["currencyFilter"],angular.module("app.utils.filters").filter("currency6",e)}(),function(){"use strict";function e(e,a,t){return{filtersAndOrdering:function(t,n,i,s,r){n.ordering=e.get(i),t.$watchCollection("vm.ordering",function(t,o){t!==o&&(void 0!==n.ordering&&e.set(i,n.ordering),r?a(s.listFiltered,300)():a(s.list,300)())}),t.$watch("config.itemsPerPage",function(e,t){e!==t&&(r?a(s.listFiltered,300)():a(s.list,300)())})}}}e.$inject=["localStorageService","DebounceService","$state"],angular.module("app.utils.factory",[]).factory("utils",e)}(),function(){"use strict";function e(e){var a={usersService:e("usersService"),concessionairesService:e("concessionairesService"),originsService:e("originsService"),channelsService:e("channelsService"),vehiclesService:e("vehiclesService"),taskTypesService:e("taskTypesService")};return a}e.$inject=["$cacheFactory"],angular.module("app.utils.factory",[]).factory("cacheFactory",e)}(),function(){"use strict";function e(){}function a(e,a){return{restrict:"A",scope:{tableAjax:"="},link:function(e,t,n){function i(){for(var e={},a=arguments.length,t=0;a>t;t++)for(var n in arguments[t])arguments[t].hasOwnProperty(n)&&(e[n]=arguments[t][n]);return e}$(t).closest(".md-card").find(".md-card-toolbar .md-card-toolbar-heading-text").text();window.location.host.includes("localhost")||($.fn.dataTableExt.sErrMode=function(e,a,t){console.log(e,a,t)}),e.$watch("tableAjax.data",function(e,a){if(e!==a){var t=o.page();if(o.clear().draw(),o.rows.add(e),o.columns.adjust().draw(),e.length===a.length)o.page(t).draw("page");else if(e.length>a.length){var n=o.rows().data(),i=e[e.length-1].id,s=-1;for(var r in n)n[r].id&&n[r].id===i&&(s=r);if(-1!==s){var l=s/o.page.len();l=Math.trunc(l),o.page(l).draw("page")}}}}),e.$watch("tableAjax.reload",function(a,t){a&&a!==t&&(o.ajax.reload(),e.tableAjax.reload=!1)},!0);var s=$(t);if(s.length){var r={lengthMenu:[[10,25,50,100,-1],[10,25,50,100,"Todos"]],
language:{sProcessing:'<div id="page_preloader" class="loaddatatable" style="display: block;opacity:1;width: 200px;height: 200px;margin-top: -100px;margin-left: -100px;top: 50%;left: 50%;border: 1px solid #ccc;"><img src="assets/img/page_preloader.gif" alt=""></div>',sLengthMenu:"Mostrar _MENU_ registros",sZeroRecords:"No se encontraron resultados",sEmptyTable:"Ningún dato disponible en esta tabla",sInfo:"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",sInfoEmpty:"Mostrando registros del 0 al 0 de un total de 0 registros",sInfoFiltered:"(filtrado de un total de _MAX_ registros)",sInfoPostFix:"",sSearch:"Buscar:",sUrl:"",sInfoThousands:",",sLoadingRecords:'<div id="page_preloader" class="loaddatatable" style="display: block;opacity:1;width: 200px;height: 200px;margin-top: -100px;margin-left: -100px;top: 50%;left: 50%;border: 1px solid #ccc;"><img src="assets/img/page_preloader.gif" alt=""></div>',oPaginate:{sFirst:"Primero",sLast:"Último",sNext:"Siguiente",sPrevious:"Anterior"},oAria:{sSortAscending:": Activar para ordenar la columna de manera ascendente",sSortDescending:": Activar para ordenar la columna de manera descendente"}}};r=i(r,e.tableAjax);var o=s.DataTable(r),l=function(){$(".DTTT.uk-text-right").remove();var e=new $.fn.dataTable.TableTools(o,{sSwfPath:"bower_components/datatables-tabletools/swf/copy_csv_xls_pdf.swf",aButtons:[{sExtends:"copy",sButtonClass:"md-raised md-background md-button md-default-theme md-ink-ripple",sButtonText:"Copiar"},{sExtends:"xls",sButtonClass:"md-raised md-background md-button md-default-theme md-ink-ripple",sButtonText:"Excel",fnCellRender:function(e,a,t,n){return e},sFileName:"*.xls"},{sExtends:"csv",sButtonClass:"md-raised md-background md-button md-default-theme md-ink-ripple",sButtonText:"CSV",fnCellRender:function(e,a,t,n){return e}}]});s.closest(".content-card").find(".toolbar .options-datatable").append($(e.fnContainer())),$("a.DTTT_button").removeClass("DTTT_button")};a(function(){l()})}}}}a.$inject=["$compile","$timeout"],angular.module("app.utils.directives",[]).directive("tableAjax",a).config(e)}(),function(){"use strict";function e(e,a){return{require:"ngModel",link:function(t,n,i,s){s.$asyncValidators.unique=function(t,n){var i=a.defer();return e.user.emailCheck({email:n},function(e){e.exists?i.reject():i.resolve()}),i.promise}}}}e.$inject=["api","$q"],angular.module("app.utils.directives").directive("uniqueEmail",e)}(),/*
 * Angular Fixed Table Header
 * https://github.com/daniel-nagy/fixed-table-header
 * @license MIT
 * v0.2.1
 */
function(e,a,t){"use strict";function n(e,t){return{compile:function(n){var i={clone:n.find("table").clone(),original:n.find("table")},s=n;return n.css("position","relative"),i.clone.css({position:"absolute","z-index":9999}),function(n){function r(){return d.clone.find("th").length}function o(e){return Array.prototype.map.call(e.find("th"),function(e){return a.element(e)})}function l(){var e={clone:o(d.clone),original:o(d.original)};e.clone.forEach(function(a,i){if(!a.data("isClone")){a.data("isClone",!0);var s=e.original[i],r=t.getComputedStyle(s[0]),o=function(){a.css({minWidth:r.width,maxWidth:r.width})},l=function(){return r.width},d=n.$watch(l,o);t.addEventListener("resize",o),a.on("$destroy",function(){d(),t.removeEventListener("resize",o)}),s.on("$destroy",function(){a.remove()})}})}i.clone.find("tbody").remove(),s.before(i.clone);var d={clone:i.clone.find("thead"),original:i.original.find("thead")};n.$watch(r,l),e(i.clone)(n)}}}}n.$inject=["$compile","$window"],a.module("app.utils.directives").directive("tableFixedHeader",n)}(window,angular),function(){"use strict";function e(e,a,t,n){}function a(e,a){return{restrict:"E",scope:{},replace:!0,bindToController:{score:"=score"},controller:"StarsController as Stars",template:'<div class="tags" layout="row" layout-align="start center" layout-wrap><div class="ntag" layout="row" layout-align="start center"><md-icon ng-if="Stars.score <=0.5" md-font-icon="{{Stars.score >0 ? \'icon-star-half\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon><md-icon ng-if="Stars.score >0.5" md-font-icon="{{Stars.score >0 ? \'icon-star\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon><md-icon ng-if="Stars.score <=1.5" md-font-icon="{{Stars.score >1 ? \'icon-star-half\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon><md-icon ng-if="Stars.score >1.5" md-font-icon="{{Stars.score >1 ? \'icon-star\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon><md-icon ng-if="Stars.score <=2.5" md-font-icon="{{Stars.score >2 ? \'icon-star-half\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon><md-icon ng-if="Stars.score >2.5" md-font-icon="{{Stars.score >2 ? \'icon-star\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon><md-icon ng-if="Stars.score <=3.5" md-font-icon="{{Stars.score >3 ? \'icon-star-half\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon><md-icon ng-if="Stars.score >3.5" md-font-icon="{{Stars.score >3 ? \'icon-star\' : \'icon-star-outline\'}}" class="s16 amber-fg"></md-icon></div></div>',link:function(e,a){}}}e.$inject=["$attrs","$scope","$timeout","gettextCatalog"],a.$inject=["api","$q"],angular.module("app.utils.directives").controller("StarsController",e).directive("stars",a)}(),function(){"use strict";function e(e){function a(a,t){r.load=!0,e(function(){r.load=!1},500),a?(r.selectedParameter=t.data||t,r.breadcrumb.push({key:a,value:t.human_name,parameters:t.data||t})):(r.breadcrumb.splice(-1,1),r.breadcrumb.length?r.selectedParameter=r.breadcrumb[r.breadcrumb.length-1].parameters:r.selectedParameter=null)}function t(e){var a="";for(var t in r.breadcrumb)a+=r.breadcrumb[t].key+".";a+=e,"string"==typeof r.model?r.model+=" "+a+" ":"object"==typeof r.model&&-1===r.model.indexOf(a)&&r.model.push(a),n()}function n(){r.selectedParameter=null,r.breadcrumb=[]}function i(e){for(var a in e)if(s(e[a][r.filter]))return!0;return!1}function s(e){return Object.keys(e).length>0}var r=this;r.selectedParameter=null,r.breadcrumb=[],r.load=!1,r.addToBreadcrumb=a,r.addValueParemeter=t,r.resetParameters=n,r.showMenu=i,r.notEmpty=s}function a(){return{restrict:"E",scope:{},bindToController:{model:"=model",filter:"=filter",parameters:"=parameters",icon:"@icon"},controller:"ParametersController as Parameters",templateUrl:"app/main/parameters/parameters.html",link:function(e,a){}}}e.$inject=["$timeout"],angular.module("app.utils.directives").controller("ParametersController",e).directive("parameters",a)}(),function(e,a,t){"use strict";function n(e,a){return{restrict:"E",scope:{src:"="},link:function(t,n){function i(e){var t=$(n),i=e.data,s=i.indexOf("<body"),r=i.indexOf("</body>")+7;i=i.slice(s,r),i=i.replace("<body","<div"),i=i.replace("</body>","</div>"),a.server&&(i=i.replace(/<img[^<]*src=["']([^"]*)["']/g,"<img src='"+a.server+"$1'")),t.html(i)}e({method:"GET",url:t.src}).then(function(e){i(e)})}}}n.$inject=["$http","$rootScope"],a.module("app.utils.directives").directive("iframeAuthentication",n)}(window,angular),function(e,a,t){"use strict";function n(e){return{restrict:"A",scope:{formTranslate:"="},compile:function(e,a){}}}function i(e,a){return{restrict:"A",scope:{formTranslate:"="},compile:function(e,a){}}}function s(e){return{restrict:"A",compile:function(e,a){}}}function r(e){return{restrict:"A",compile:function(e,a){}}}function o(e){return{restrict:"A",compile:function(e,a){}}}n.$inject=["$rootScope"],i.$inject=["$rootScope","gettextCatalog"],s.$inject=["$rootScope"],r.$inject=["$rootScope"],o.$inject=["$rootScope"],a.module("app.utils.directives").directive("formTranslate",n).directive("formTranslateTemplates",i).directive("varTranslate",s).directive("bindTranslate",r).directive("mdAutocompleteTranslate",o)}(window,angular),function(){"use strict";function e(e,a,t,n){function i(){angular.isDefined(e.required)&&r.messages.push({type:["required"],message:n.getString("Este campo es obligatorio")}),angular.isDefined(e.mdRequireMatch)&&r.messages.push({type:["md-require-match"],message:n.getString("Debe seleccionar una opción de la lista")}),angular.isDefined(e.url)&&r.messages.push({type:["url"],message:n.getString("La dirección web debe ser de la forma http://...")}),angular.isDefined(e.pattern)&&r.messages.push({type:["pattern"],message:n.getString(e.pattern)}),angular.isDefined(e.passwordMatch)&&r.messages.push({type:["passwordMatch"],message:n.getString("Las contraseñas no coinciden")}),angular.isDefined(e.unique)&&r.messages.push({type:["unique"],message:n.getString("El email indicado ya existe")})}function s(e,a){var t=e;for(var n in a)if(t=t[a[n]],!t)return!1;return t[0]}var r=this;r.messages=[],r.serverMessages=[],i(),a.$watch("ErrorMessages.errors",function(){if(r.serverMessages.length=0,r.field&&r.field.$name&&r.errors){var a=r.field.$name.split("___"),n=s(r.errors,a);n&&(r.serverMessages.push(n),r.field.$setTouched(),r.field.$setValidity("serverError",!1),angular.isDefined(e.forcechange)&&t(function(){r.field.$setValidity("serverError",!0)},6e3))}})}function a(e){return{restrict:"E",scope:{},replace:!0,bindToController:{field:"=field",errors:"=serverErrors"},controller:"ErrorMessagesController as ErrorMessages",template:'<div ng-messages="ErrorMessages.field.$error" ng-show="ErrorMessages.field.$touched || ErrorMessages.serverMessages.length > 0" role="alert"><div ng-hide="ErrorMessages.serverMessages.length > 0" ng-repeat="message in ErrorMessages.messages" ng-message-exp="message.type"><span>{{message.message}}</span></div><div ng-repeat="message in ErrorMessages.serverMessages" ng-message="serverError" class="has-animate"><span>{{message}}</span></div></div>',link:function(a,t){e(function(){var e=$(t).find(".has-animate");e&&(e.hasClass("ng-animate")||e.addClass("ng-animate"))})}}}e.$inject=["$attrs","$scope","$timeout","gettextCatalog"],a.$inject=["$timeout"],angular.module("app.utils.directives").controller("ErrorMessagesController",e).directive("errorMessages",a)}(),function(){"use strict";function e(e){e.state("app.videos",{url:"/videos",views:{"content@app":{templateUrl:"app/main/videos/videos.html",controller:"VideosController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}]},bodyClass:"todo"})}e.$inject=["$stateProvider"],angular.module("app.videos",[]).config(e)}(),function(){"use strict";function e(e,a){var t=this;t.user=a,t.videos=[]}e.$inject=["$scope","currentUser"],angular.module("app.videos").controller("VideosController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d){function c(e,a){s.show({controller:"OriginDialogController",controllerAs:"vm",templateUrl:"app/main/origins/dialogs/origin/origin-dialog.html",parent:angular.element(r.body),targetEvent:e,clickOutsideToClose:!0,locals:{Origin:a,Channels:o.getAllChannels(),event:e}})}function m(e,a){var n=s.confirm().title(d.getString("Eliminar concesionario")+' "'+a.name+'"').textContent(d.getString("¿Seguro que quieres eliminar el concesionario?")).ariaLabel(d.getString("Eliminar concesionario")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(d.getString("Borrar concesionario")).cancel(d.getString("Cancelar"));s.show(n).then(function(){t.removeOrigin(a).then(function(){i.successMessage(d.getString("Concesionario borrado correctamente."))},function(e){i.errorMessage("Error al borrar el concesionario. "+(e.data.detail||""))})})}var u=this;u.user=a,u.origins=n,e.$watch("vm.origins.filters",l(t.getOrigins,300),!0),u.openOriginDialog=c,u.removeOrigin=m}e.$inject=["$scope","currentUser","originsService","Origins","NotifyService","$mdDialog","$document","channelsService","DebounceService","gettextCatalog"],angular.module("app.origins").controller("OriginsController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u,p){function g(){w.donutChartDigital={data:{series:[w.digitalService.data.con_telefono.con_llamadas,w.digitalService.data.con_telefono.sin_llamadas]},options:{donut:!0,height:"450px"},events:{draw:function(e){if("slice"===e.type){var a=0===e.index?"#3182ce":"#63b3ed";e.element.attr({style:"stroke:"+a})}}}},w.stackedBarChart={data:{labels:w.voiceService.data.llamadas.labels,series:[w.voiceService.data.llamadas.atendidas,w.voiceService.data.llamadas.no_atendidas]},options:{stackBars:!0,axisY:{labelInterpolationFnc:function(e){return e}},height:"450px",plugins:[Chartist.plugins.tooltip()]},events:{draw:function(e){if("bar"===e.type){var a=0===e.seriesIndex?"#448aff":"#e0e0e0";e.element.attr({style:"stroke:"+a})}}}},w.donutChart={data:{series:[w.voiceService.data.no_atendidos.con_llamadas,w.voiceService.data.no_atendidos.sin_llamadas]},options:{donut:!0,height:"450px"},events:{draw:function(e){if("slice"===e.type){var a=0===e.index?"#3182ce":"#63b3ed";e.element.attr({style:"stroke:"+a})}}}}}function v(e){return e.first_name+" "+e.last_name}function f(e){var a=angular.copy(w[e]);a&&m(function(){w[e]=a},100)}function h(e){var a=c.defer(),t=angular.copy(u.usersService.get(e));return t?a.resolve(b(t.data,w.metrics.filters.user_data)):(p.users.filters={},p.users.filters.search=e,p.users.filters.page_size="20",p.users.filters.is_complex=!1,p.getUsers(e).then(function(t){u.usersService.put(e,t),a.resolve(b(t.data,w.metrics.filters.user_data))})),a.promise}function b(e,a,t){t||(t="id");for(var n=e.length-1;n>=0;n--)for(var i=a.length-1;i>=0;i--)e[n]&&e[n][t]===a[i][t]&&e.splice(n,1);return e}function y(e){var a=e-w.colors.length*Math.trunc(e/w.colors.length);return w.colors[a]}function _(e,a){var t=Object.assign({},e,a);return t.created_end_date=new Date(t.created_end_date).toISOString(),t.created_start_date=new Date(t.created_start_date).toISOString(),t.user_id__in=t.user_data.map(function(e){return e.id}).toString(),t}var w=this;w.user=a,w.metrics=o,w.benchmark=n,w.digitalService=i,w.servicelevel=s,w.voiceService=r,w.data_origins="numbers",w.data_users="numbers",w.colors=["gris","violeta","verde"],w.calendarModel=[],w.calendarUiConfig={calendar:{defaultView:"agendaWeek",locale:"es",lang:"es",viewRender:function(e){w.calendarView=e,w.calendar=w.calendarView.calendar,w.metrics.filters.created_start_date=e.intervalStart._d,w.metrics.filters.created_end_date=e.intervalEnd._d},views:{agendaDay:{titleFormat:"dddd, DD [de] MMMM [de] YYYY"}}}},e.$watch("vm.metrics.filters",d(t.getMetrics,300),!0),w.getChart=g,w.getFullUserName=v,w.copySearch=f,w.getUsers=h,w.getColor=y,w.concatFilters=_}e.$inject=["$scope","currentUser","metricsService","Benchmark","DigitalService","Servicelevel","VoiceService","Metrics","$rootScope","DebounceService","$q","$timeout","cacheFactory","usersService"],angular.module("app.metrics").controller("MetricsController",e)}(),function(){"use strict";function e(e){e.state("app.imports",{url:"/imports",views:{"content@app":{templateUrl:"app/main/imports/imports-view.html",controller:"ImportsViewController as vm"}},resolve:{currentUser:["AuthService",function(e){return e.getCurrentUser().then(function(e){return e?e:void 0})}]},bodyClass:"todo"})}e.$inject=["$stateProvider"],angular.module("app.imports",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o){function l(){i(function(){$("#file-uploader").change(function(){u()})})}function d(){return t.getDocument().then(function(e){c(e,"leads.xls","leads.xls")},function(e){n.errorMessage(o.getString("Error al exportar leads"))})}function c(e,a,t){var n=new Blob([e],{type:t});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}function m(){$("#file-uploader").trigger("click")}function u(){return g.loadingImport=!0,t.importLeads().then(function(e){n.successMessage(o.getString("Leads importado correctamente")),c(e,"result.xls","result.xls"),g.loadingImport=!1},function(e){g.serverErrors=e.data,n.errorMessage(o.getString("Error al importar leads. ")+(e.data.non_field_errors||"")),g.loadingImport=!1})}function p(t){a.loadingProgress=!0,r.show({controller:"ExportLeadDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/exportLeads/exportLeads-dialog.html",parent:angular.element(e.body),targetEvent:t,clickOutsideToClose:!0,locals:{event:t,Concessionaires:s.getAllConcessionaires()}})}var g=this;g.loadingImport=!1,g.getDocument=d,g.openFiles=m,g.importLeads=u,g.openExportLeadDialog=p,l()}e.$inject=["$document","$rootScope","leadsService","NotifyService","$timeout","concessionairesService","$mdDialog","gettextCatalog"],angular.module("app.imports").controller("ImportsViewController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r){function o(e){return t.trustAsHtml(e)}var l=this;l.user=a,l.concessionaires=n.data,l.trustAsHtml=o}e.$inject=["$scope","currentUser","$sce","Dashboards","NotifyService","$mdDialog","$document"],angular.module("app.dashboard").controller("DashboardController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l){function d(e,a){s.show({controller:"ConcessionaireDialogController",controllerAs:"vm",templateUrl:"app/main/concessionaires/dialogs/concessionaire/concessionaire-dialog.html",parent:angular.element(r.body),targetEvent:e,clickOutsideToClose:!0,locals:{Concessionaire:a,event:e}})}function c(e,a){s.show({controller:"ConcessionaireCalendarDialogController",controllerAs:"vm",templateUrl:"app/main/concessionaires/dialogs/concessionaireCalendar/concessionaireCalendar-dialog.html",parent:angular.element(r.body),targetEvent:e,clickOutsideToClose:!0,locals:{Concessionaire:a,event:e}})}function m(e,a){s.show({controller:"ConcessionaireNotesDialogController",controllerAs:"vm",templateUrl:"app/main/concessionaires/dialogs/concessionaireNotes/concessionaireNotes-dialog.html",parent:angular.element(r.body),targetEvent:e,clickOutsideToClose:!0,locals:{Concessionaire:a,event:e}})}function u(e,a){var n=s.confirm().title(l.getString("Eliminar concesionario")+' "'+a.name+'"').textContent(l.getString("¿Seguro que quieres eliminar el concesionario?")).ariaLabel(l.getString("Eliminar concesionario")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(l.getString("Borrar concesionario")).cancel(l.getString("Cancelar"));s.show(n).then(function(){t.removeConcessionaire(a).then(function(){i.successMessage(l.getString("Concesionario borrado correctamente."))},function(e){i.errorMessage("Error al borrar el concesionario. "+(e.data.detail||""))})})}var p=this;p.user=a,p.concessionaires=n,e.$watch("vm.concessionaires.filters",o(t.getConcessionairesConfig,300),!0),p.openConcessionaireDialog=d,p.openConcessionaireCalendarDialog=c,p.openConcessionaireNotesDialog=m,p.removeConcessionaire=u}e.$inject=["$scope","currentUser","concessionairesService","Concessionaires","NotifyService","$mdDialog","$document","DebounceService","gettextCatalog"],angular.module("app.concessionaires").controller("ConcessionairesController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l){function d(e,a){s.show({controller:"ChannelDialogController",controllerAs:"vm",templateUrl:"app/main/channels/dialogs/channel/channel-dialog.html",parent:angular.element(r.body),targetEvent:e,clickOutsideToClose:!0,locals:{Channel:a,event:e}})}function c(e,a){var n=s.confirm().title(l.getString("Eliminar canal")+' "'+a.name+'"').textContent(l.getString("¿Seguro que quieres eliminar el canal?")).ariaLabel(l.getString("Eliminar canal")).clickOutsideToClose(!0).parent(angular.element(document.body)).ok(l.getString("Borrar canal")).cancel(l.getString("Cancelar"));s.show(n).then(function(){t.removeChannel(a).then(function(){i.successMessage(l.getString("Canal borrado correctamente."))},function(e){i.errorMessage("Error al borrar el canal. "+(e.data.detail||""))})})}var m=this;m.user=a,m.channels=n,e.$watch("vm.channels.filters",o(t.getChannels,300),!0),m.openChannelDialog=d,m.removeChannel=c}e.$inject=["$scope","currentUser","channelsService","Channels","NotifyService","$mdDialog","$document","DebounceService","gettextCatalog"],angular.module("app.channels").controller("ChannelsController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m){function u(e){if(e.data){var a=JSON.parse(e.data);h.lastAcds=JSON.parse(a.received_call).ID}return t.getAcds().then(function(){m(function(){h.lastAcds=null},2e3)})}function p(e){o.go("app.leads.get.edit",{lead:0,source:e.source.id,phone:e.src,acd:e.id,user:e.user?e.user.id:void 0})}function g(e,a){var t={call_control:a.id,possible_leads:a.possible_leads};s.show({controller:"AcdDialogController",controllerAs:"vm",templateUrl:"app/main/acds/dialogs/acd/acd-dialog.html",parent:angular.element(r.body),targetEvent:e,clickOutsideToClose:!0,locals:{Acd:t,event:e}})}function v(e){return t.getAudio(e.id).then(function(a){f(a,e.src+"-audio.mp3",e.src+"-audio.mp3")},function(e){i.errorMessage(c.getString("Error al obtener audio"))})}function f(e,a,t){var n=new Blob([e],{type:t});if(window.navigator&&window.navigator.msSaveOrOpenBlob)window.navigator.msSaveOrOpenBlob(n);else{var i=document.createElement("a");i.href=window.URL.createObjectURL(n),i.download=a,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}var h=this;h.user=a,h.acds=n,h.lastAcds=null,h.status=t.getStatusCall(),h.origins=t.getOriginsCall(),l.getCurrentUser().then(function(e){e&&(h.user=e,h.user.id&&t.socketAcds(h.user,u))}),e.$watch("vm.acds.filters",d(t.getAcds,300),!0),h.openAcdDialog=g,h.createLead=p,h.getAudio=v}e.$inject=["$scope","currentUser","acdsService","Acds","NotifyService","$mdDialog","$document","$state","AuthService","DebounceService","gettextCatalog","$timeout"],angular.module("app.acds").controller("AcdsController",e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m){function u(){var e=d.defer();return x.events=o.getEvents(),$("#calendarView").fullCalendar("refetchEvents"),e.resolve(x.events),e.promise}function p(e){var a=c.href("app.leads.get.edit",{lead:e.id});window.open(a,"_blank")}function g(){x.calendarView.calendar.next()}function v(){x.calendarView.calendar.prev()}function f(e,a,t){var n=$(a).find(".fc-content");setTimeout(function(){if(e.description){var a=$("<span>("+e.description+")</span>");n.append(a)}},100)}function h(){for(var e in x.kpis.data)for(var a in x.kpis.data[e].kpis)x.kpis.data[e].kpis[a].active=!1;for(var e in x.kpisPositive.data)for(var a in x.kpisPositive.data[e].kpis)x.kpisPositive.data[e].kpis[a].active=!1;delete x.leads.filters.kpi_filter,1===x.selectedTabIndex||"1"===x.selectedTabIndex?x.leads.filters.result="positive":delete x.leads.filters.result}function b(e){for(var a in x.kpis.data)for(var t in x.kpis.data[a].kpis)x.kpis.data[a].kpis[t].active=!1;x.leads.filters.kpi_filter===e.filter_key?(e.active=!1,x.leads.filters.kpi_filter=null):(e.active=!0,x.leads.filters.kpi_filter=e.filter_key)}function y(e){for(var a in x.kpisPositive.data)for(var t in x.kpisPositive.data[a].kpis)x.kpisPositive.data[a].kpis[t].active=!1;x.leads.filters.kpi_filter===e.filter_key?(e.active=!1,x.leads.filters.kpi_filter=null):(e.active=!0,x.leads.filters.kpi_filter=e.filter_key)}function _(e){var a=d.defer(),t=angular.copy(m.usersService.get(e));return t?a.resolve(t.data):(i.users.filters={},i.users.filters.search=e,i.users.filters.page_size="50",i.users.filters.is_complex=!1,i.getUsers(e).then(function(t){m.usersService.put(e,t),a.resolve(t.data)})),a.promise}function w(e){return e.first_name+" "+e.last_name}var x=this;x.user=a,x.kpis=t,x.kpisPositive=n,x.events=[],x.leads=o.leads,x.selectedTabIndex=0,e.$watch("vm.leads.filters",l(u,300),!0),e.$watch("vm.kpis.filters",l(o.reloadKpis,300),!0),e.$watch("vm.kpisPositive.filters",l(o.reloadKpisPositive,300),!0),x.calendarUiConfig={calendar:{defaultView:"month",locale:"es",lang:"es",editable:!1,eventLimit:!0,header:"",handleWindowResize:!1,aspectRatio:1,slotDuration:"00:30:00",minTime:"08:00:00",maxTime:"22:00:00",slotLabelFormat:"HH:mm",allDayText:"Todo el día",viewRender:function(e){x.calendarView=e,x.calendar=x.calendarView.calendar,x.currentMonthShort=x.calendar.getDate().format("MMMM"),x.currentDate=x.calendar.getDate().format("DD-MM-YYYY")},lazyFetching:!1,eventClick:p,selectable:!1,selectHelper:!!x.user,eventRender:f,views:{agendaDay:{titleFormat:"dddd, DD [de] MMMM [de] YYYY"}},timeFormat:"H:mm"}},x.next=g,x.prev=v,x.togglePositive=h,x.toggleKpi=b,x.toggleKpiPositive=y,x.getUsers=_,x.getFullUserName=w,u()}e.$inject=["$scope","currentUser","Kpis","KpisPositive","usersService","$mdDialog","$document","eventsService","DebounceService","$q","$state","cacheFactory"],angular.module("app.calendar").controller("CalendarController",e)}(),function(){"use strict";function e(e,a,t){function n(){return t.PALETTES}function i(){return t.THEMES}function s(t){return angular.isUndefined(o.themes.list[t])?angular.isUndefined(o.themes.list["default"])?void a.error('You must have at least one theme named "default"'):(a.warn('The theme "'+t+'" does not exist! Falling back to the "default" theme.'),o.themes.active.name="default",o.themes.active.theme=o.themes.list["default"],void e.put("selectedTheme",o.themes.active.name)):(o.themes.active.name=t,o.themes.active.theme=o.themes.list[t],void e.put("selectedTheme",t))}function r(e){o.themes.list=e}var o={getRegisteredPalettes:n,getRegisteredThemes:i,setActiveTheme:s,setThemesList:r,themes:{list:{},active:{name:"",theme:{}}}};return o}e.$inject=["$cookies","$log","$mdTheming"],angular.module("app.core").service("fuseTheming",e)}(),function(){"use strict";function e(e,a,t){var n;angular.injector(["ngCookies"]).invoke(["$cookies",function(e){n=e}]);var i=n.getObject("customTheme");i&&(t.custom=i),e.alwaysWatchTheme(!0),angular.forEach(a,function(a){e.definePalette(a.name,a.options)}),angular.forEach(t,function(a,t){e.theme(t).primaryPalette(a.primary.name,a.primary.hues).accentPalette(a.accent.name,a.accent.hues).warnPalette(a.warn.name,a.warn.hues).backgroundPalette(a.background.name,a.background.hues)})}e.$inject=["$mdThemingProvider","fusePalettes","fuseThemes"],angular.module("app.core").config(e)}(),function(){"use strict";var e={"default":{primary:{name:"fuse-paleblue",hues:{"default":"700","hue-1":"500","hue-2":"600","hue-3":"400"}},accent:{name:"light-blue",hues:{"default":"600","hue-1":"400","hue-2":"700","hue-3":"A100"}},warn:{name:"red"},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}},pinkTheme:{primary:{name:"blue-grey",hues:{"default":"800","hue-1":"600","hue-2":"400","hue-3":"A100"}},accent:{name:"pink",hues:{"default":"400","hue-1":"300","hue-2":"600","hue-3":"A100"}},warn:{name:"blue"},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}},tealTheme:{primary:{name:"fuse-paleblue",hues:{"default":"900","hue-1":"600","hue-2":"500","hue-3":"A100"}},accent:{name:"teal",hues:{"default":"500","hue-1":"400","hue-2":"600","hue-3":"A100"}},warn:{name:"red"},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}},sail:{primary:{name:"fuse-paleblue",hues:{"default":"700","hue-1":"500","hue-2":"600","hue-3":"400"}},accent:{name:"cyan",hues:{"default":"600","hue-1":"400","hue-2":"700","hue-3":"A100"}},warn:{name:"red",hues:{"default":"500","hue-1":"300","hue-2":"800","hue-3":"A100"}},background:{name:"grey",hues:{"default":"A100","hue-1":"A100","hue-2":"100","hue-3":"300"}}}};angular.module("app.core").constant("fuseThemes",e)}(),function(){"use strict";var e=[{name:"fuse-blue",options:{50:"#ebf1fa",100:"#c2d4ef",200:"#9ab8e5",300:"#78a0dc",400:"#5688d3",500:"#3470ca",600:"#2e62b1",700:"#275498",800:"#21467e",900:"#1a3865",A100:"#c2d4ef",A200:"#9ab8e5",A400:"#5688d3",A700:"#275498",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400"}},{name:"fuse-paleblue",options:{50:"#ececee",100:"#c5c6cb",200:"#9ea1a9",300:"#7d818c",400:"#5c616f",500:"#3c4252",600:"#353a48",700:"#2d323e",800:"#262933",900:"#1e2129",A100:"#c5c6cb",A200:"#9ea1a9",A400:"#5c616f",A700:"#2d323e",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400"}}];angular.module("app.core").constant("fusePalettes",e)}(),function(){"use strict";function e(e,a,t){function n(){var e=angular.copy(t.getRegisteredThemes()),a=angular.copy(t.getRegisteredPalettes());angular.forEach(e,function(e){d[e.name]={},angular.forEach(e.colors,function(t,n){d[e.name][n]={name:t.name,levels:{"default":{color:r(a[t.name][t.hues["default"]].value),contrast1:r(a[t.name][t.hues["default"]].contrast,1),contrast2:r(a[t.name][t.hues["default"]].contrast,2),contrast3:r(a[t.name][t.hues["default"]].contrast,3),contrast4:r(a[t.name][t.hues["default"]].contrast,4)},hue1:{color:r(a[t.name][t.hues["hue-1"]].value),contrast1:r(a[t.name][t.hues["hue-1"]].contrast,1),contrast2:r(a[t.name][t.hues["hue-1"]].contrast,2),contrast3:r(a[t.name][t.hues["hue-1"]].contrast,3),contrast4:r(a[t.name][t.hues["hue-1"]].contrast,4)},hue2:{color:r(a[t.name][t.hues["hue-2"]].value),contrast1:r(a[t.name][t.hues["hue-2"]].contrast,1),contrast2:r(a[t.name][t.hues["hue-2"]].contrast,2),contrast3:r(a[t.name][t.hues["hue-2"]].contrast,3),contrast4:r(a[t.name][t.hues["hue-2"]].contrast,4)},hue3:{color:r(a[t.name][t.hues["hue-3"]].value),contrast1:r(a[t.name][t.hues["hue-3"]].contrast,1),contrast2:r(a[t.name][t.hues["hue-3"]].contrast,2),contrast3:r(a[t.name][t.hues["hue-3"]].contrast,3),contrast4:r(a[t.name][t.hues["hue-3"]].contrast,4)}}}})}),i(d);var n={};angular.forEach(d,function(e,a){n={},n["@themeName"]=a,angular.forEach(e,function(e,a){angular.forEach(e.levels,function(e,t){angular.forEach(e,function(e,i){n["@"+a+l(t)+l(i)]=e})})}),s(n)})}function i(a){var n=angular.copy(a);angular.forEach(n,function(e){angular.forEach(e,function(a,t){e[t]=a.levels,e[t].color=a.levels["default"].color,e[t].contrast1=a.levels["default"].contrast1,e[t].contrast2=a.levels["default"].contrast2,e[t].contrast3=a.levels["default"].contrast3,e[t].contrast4=a.levels["default"].contrast4,delete e[t]["default"]})}),t.setThemesList(n);var i=e.get("selectedTheme");i?t.setActiveTheme(i):t.setActiveTheme("default")}function s(e){var a='/* Content hack because they wont fix */\n/* https://github.com/angular/material/pull/8067 */\n[md-theme="@themeName"] md-content.md-hue-1,\nmd-content.md-@themeName-theme.md-hue-1 {\n    color: @backgroundHue1Contrast1;\n    background-color: @backgroundHue1Color;\n}\n\n[md-theme="@themeName"] md-content.md-hue-2,\nmd-content.md-@themeName-theme.md-hue-2 {\n    color: @backgroundHue2Contrast1;\n    background-color: @backgroundHue2Color;\n}\n\n[md-theme="@themeName"] md-content.md-hue-3,\n md-content.md-@themeName-theme.md-hue-3 {\n    color: @backgroundHue3Contrast1;\n    background-color: @backgroundHue3Color;\n}\n\n/* Text Colors */\n[md-theme="@themeName"] a {\n    color: @accentDefaultColor;\n}\n\n[md-theme="@themeName"] .secondary-text,\n[md-theme="@themeName"] .icon {\n    color: @backgroundDefaultContrast2;\n}\n\n[md-theme="@themeName"] .hint-text,\n[md-theme="@themeName"] .disabled-text {\n    color: @backgroundDefaultContrast3;\n}\n\n[md-theme="@themeName"] .fade-text,\n[md-theme="@themeName"] .divider {\n    color: @backgroundDefaultContrast4;\n}\n\n/* Primary */\n[md-theme="@themeName"] .md-primary-bg {\n    background-color: @primaryDefaultColor;\n    color: @primaryDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg .secondary-text,\n[md-theme="@themeName"] .md-primary-bg .icon {\n    color: @primaryDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-primary-bg .hint-text,\n[md-theme="@themeName"] .md-primary-bg .disabled-text {\n    color: @primaryDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg .fade-text,\n[md-theme="@themeName"] .md-primary-bg .divider {\n    color: @primaryDefaultContrast4;\n}\n\n/* Primary, Hue-1 */\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 {\n    background-color: @primaryHue1Color;\n    color: @primaryHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .icon {\n    color: @primaryHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .disabled-text {\n    color: @primaryHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-1 .divider {\n    color: @primaryHue1Contrast4;\n}\n\n/* Primary, Hue-2 */\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 {\n    background-color: @primaryHue2Color;\n    color: @primaryHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .icon {\n    color: @primaryHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .disabled-text {\n    color: @primaryHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-2 .divider {\n    color: @primaryHue2Contrast4;\n}\n\n/* Primary, Hue-3 */\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 {\n    background-color: @primaryHue3Color;\n    color: @primaryHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .icon {\n    color: @primaryHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .disabled-text {\n    color: @primaryHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-primary-bg.md-hue-3 .divider {\n    color: @primaryHue3Contrast4;\n}\n\n/* Primary foreground */\n[md-theme="@themeName"] .md-primary-fg {\n    color: @primaryDefaultColor !important;\n}\n\n/* Primary foreground, Hue-1 */\n[md-theme="@themeName"] .md-primary-fg.md-hue-1 {\n    color: @primaryHue1Color !important;\n}\n\n/* Primary foreground, Hue-2 */\n[md-theme="@themeName"] .md-primary-fg.md-hue-2 {\n    color: @primaryHue2Color !important;\n}\n\n/* Primary foreground, Hue-3 */\n[md-theme="@themeName"] .md-primary-fg.md-hue-3 {\n    color: @primaryHue3Color !important;\n}\n\n/* Accent */\n[md-theme="@themeName"] .md-accent-bg {\n    background-color: @accentDefaultColor;\n    color: @accentDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg .secondary-text,\n[md-theme="@themeName"] .md-accent-bg .icon {\n    color: @accentDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-accent-bg .hint-text,\n[md-theme="@themeName"] .md-accent-bg .disabled-text {\n    color: @accentDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg .fade-text,\n[md-theme="@themeName"] .md-accent-bg .divider {\n    color: @accentDefaultContrast4;\n}\n\n/* Accent, Hue-1 */\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 {\n    background-color: @accentHue1Color;\n    color: @accentHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .icon {\n    color: @accentHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .disabled-text {\n    color: @accentHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-1 .divider {\n    color: @accentHue1Contrast4;\n}\n\n/* Accent, Hue-2 */\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 {\n    background-color: @accentHue2Color;\n    color: @accentHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .icon {\n    color: @accentHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .disabled-text {\n    color: @accentHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-2 .divider {\n    color: @accentHue2Contrast4;\n}\n\n/* Accent, Hue-3 */\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 {\n    background-color: @accentHue3Color;\n    color: @accentHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .icon {\n    color: @accentHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .disabled-text {\n    color: @accentHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-accent-bg.md-hue-3 .divider {\n    color: @accentHue3Contrast4;\n}\n\n/* Accent foreground */\n[md-theme="@themeName"] .md-accent-fg {\n    color: @accentDefaultColor !important;\n}\n\n/* Accent foreground, Hue-1 */\n[md-theme="@themeName"] .md-accent-fg.md-hue-1 {\n    color: @accentHue1Color !important;\n}\n\n/* Accent foreground, Hue-2 */\n[md-theme="@themeName"] .md-accent-fg.md-hue-2 {\n    color: @accentHue2Color !important;\n}\n\n/* Accent foreground, Hue-3 */\n[md-theme="@themeName"] .md-accent-fg.md-hue-3 {\n    color: @accentHue3Color !important;\n}\n\n/* Warn */\n[md-theme="@themeName"] .md-warn-bg {\n    background-color: @warnDefaultColor;\n    color: @warnDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg .secondary-text,\n[md-theme="@themeName"] .md-warn-bg .icon {\n    color: @warnDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-warn-bg .hint-text,\n[md-theme="@themeName"] .md-warn-bg .disabled-text {\n    color: @warnDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg .fade-text,\n[md-theme="@themeName"] .md-warn-bg .divider {\n    color: @warnDefaultContrast4;\n}\n\n/* Warn, Hue-1 */\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 {\n    background-color: @warnHue1Color;\n    color: @warnHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .icon {\n    color: @warnHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .disabled-text {\n    color: @warnHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-1 .divider {\n    color: @warnHue1Contrast4;\n}\n\n/* Warn, Hue-2 */\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 {\n    background-color: @warnHue2Color;\n    color: @warnHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .icon {\n    color: @warnHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .disabled-text {\n    color: @warnHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-2 .divider {\n    color: @warnHue2Contrast4;\n}\n\n/* Warn, Hue-3 */\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 {\n    background-color: @warnHue3Color;\n    color: @warnHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .icon {\n    color: @warnHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .disabled-text {\n    color: @warnHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-warn-bg.md-hue-3 .divider {\n    color: @warnHue3Contrast4;\n}\n\n/* Warn foreground */\n[md-theme="@themeName"] .md-warn-fg {\n    color: @warnDefaultColor !important;\n}\n\n/* Warn foreground, Hue-1 */\n[md-theme="@themeName"] .md-warn-fg.md-hue-1 {\n    color: @warnHue1Color !important;\n}\n\n/* Warn foreground, Hue-2 */\n[md-theme="@themeName"] .md-warn-fg.md-hue-2 {\n    color: @warnHue2Color !important;\n}\n\n/* Warn foreground, Hue-3 */\n[md-theme="@themeName"] .md-warn-fg.md-hue-3 {\n    color: @warnHue3Color !important;\n}\n\n/* Background */\n[md-theme="@themeName"] .md-background-bg {\n    background-color: @backgroundDefaultColor;\n    color: @backgroundDefaultContrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg .secondary-text,\n[md-theme="@themeName"] .md-background-bg .icon {\n    color: @backgroundDefaultContrast2;\n}\n\n[md-theme="@themeName"] .md-background-bg .hint-text,\n[md-theme="@themeName"] .md-background-bg .disabled-text {\n    color: @backgroundDefaultContrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg .fade-text,\n[md-theme="@themeName"] .md-background-bg .divider {\n    color: @backgroundDefaultContrast4;\n}\n\n/* Background, Hue-1 */\n[md-theme="@themeName"] .md-background-bg.md-hue-1 {\n    background-color: @backgroundHue1Color;\n    color: @backgroundHue1Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .secondary-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .icon {\n    color: @backgroundHue1Contrast2;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .hint-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .disabled-text {\n    color: @backgroundHue1Contrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .fade-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-1 .divider {\n    color: @backgroundHue1Contrast4;\n}\n\n/* Background, Hue-2 */\n[md-theme="@themeName"] .md-background-bg.md-hue-2 {\n    background-color: @backgroundHue2Color;\n    color: @backgroundHue2Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .secondary-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .icon {\n    color: @backgroundHue2Contrast2;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .hint-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .disabled-text {\n    color: @backgroundHue2Contrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .fade-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-2 .divider {\n    color: @backgroundHue2Contrast4;\n}\n\n/* Background, Hue-3 */\n[md-theme="@themeName"] .md-background-bg.md-hue-3 {\n    background-color: @backgroundHue3Color;\n    color: @backgroundHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .secondary-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .icon {\n    color: @backgroundHue3Contrast1;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .hint-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .disabled-text {\n    color: @backgroundHue3Contrast3;\n}\n\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .fade-text,\n[md-theme="@themeName"] .md-background-bg.md-hue-3 .divider {\n    color: @backgroundHue3Contrast4;\n}\n\n/* Background foreground */\n[md-theme="@themeName"] .md-background-fg {\n    color: @backgroundDefaultColor !important;\n}\n\n/* Background foreground, Hue-1 */\n[md-theme="@themeName"] .md-background-fg.md-hue-1 {\n    color: @backgroundHue1Color !important;\n}\n\n/* Background foreground, Hue-2 */\n[md-theme="@themeName"] .md-background-fg.md-hue-2 {\n    color: @backgroundHue2Color !important;\n}\n\n/* Background foreground, Hue-3 */\n[md-theme="@themeName"] .md-background-fg.md-hue-3 {\n    color: @backgroundHue3Color !important;\n}',t=new RegExp(Object.keys(e).join("|"),"gi"),n=a.replace(t,function(a){
return e[a]}),i=angular.element("head"),s=angular.element('<style type="text/css"></style>');s.html(n),i.append(s)}function r(e,t){var n=t||!1;return 4===e.length&&255===e[0]&&255===e[1]&&255===e[2]&&e.splice(3,4),n&&(e=o(e,n)),3===e.length?"rgb("+e.join(",")+")":4===e.length?"rgba("+e.join(",")+")":void a.error("Invalid number of arguments supplied in the color array: "+e.length+"\nThe array must have 3 or 4 colors.")}function o(e,a){var t={white:{1:"1",2:"0.7",3:"0.3",4:"0.12"},black:{1:"0.87",2:"0.54",3:"0.26",4:"0.12"}};return 255===e[0]&&255===e[1]&&255===e[2]?e[3]=t.white[a]:0===e[0]&&0===e[1]&&0===e[2]&&(e[3]=t.black[a]),e}function l(e){return e.charAt(0).toUpperCase()+e.slice(1)}var d={},c={generate:n,rgba:r};return c}e.$inject=["$cookies","$log","fuseTheming"],angular.module("app.core").factory("fuseGenerator",e)}(),function(){"use strict";function e(e,a){function t(e){a.setActiveTheme(e)}function n(){return a.themes.active}function i(){var e=angular.element("body");e.toggleClass("boxed","boxed"===r.layoutMode)}function s(){e.put("layoutStyle",r.layoutStyle),location.reload()}var r=this;r.themes=a.themes,r.layoutModes=[{label:"Boxed",value:"boxed"},{label:"Wide",value:"wide"}],r.layoutStyles=[{label:"Vertical Navigation",value:"verticalNavigation",figure:"/assets/images/theme-options/vertical-nav.jpg"},{label:"Vertical Navigation with Fullwidth Toolbar",value:"verticalNavigationFullwidthToolbar",figure:"/assets/images/theme-options/vertical-nav-with-full-toolbar.jpg"},{label:"Vertical Navigation with Fullwidth Toolbar 2",value:"verticalNavigationFullwidthToolbar2",figure:"/assets/images/theme-options/vertical-nav-with-full-toolbar-2.jpg"},{label:"Horizontal Navigation",value:"horizontalNavigation",figure:"/assets/images/theme-options/horizontal-nav.jpg"},{label:"Content with Toolbar",value:"contentWithToolbar",figure:"/assets/images/theme-options/content-with-toolbar.jpg"},{label:"Content Only",value:"contentOnly",figure:"/assets/images/theme-options/content-only.jpg"}],r.layoutMode="wide",r.layoutStyle=e.get("layoutStyle")||"verticalNavigation",r.setActiveTheme=t,r.getActiveTheme=n,r.updateLayoutMode=i,r.updateLayoutStyle=s}function a(e){return{restrict:"E",scope:{},controller:"MsThemeOptionsController as vm",templateUrl:"app/core/theme-options/theme-options.html",compile:function(a){return a.addClass("ms-theme-options"),function(a){function t(){e("fuse-theme-options").toggle()}a.toggleOptionsSidenav=t}}}}e.$inject=["$cookies","fuseTheming"],a.$inject=["$mdSidenav"],angular.module("app.core").controller("MsThemeOptionsController",e).directive("msThemeOptions",a)}(),function(){"use strict";function e(e){function a(e,a){return a.indexOf(e)>-1}function t(){function a(e){for(var a=0;a<e.length;a++){var t=e[a].string,n=e[a].prop;if(s=e[a].versionSearch||e[a].identity,t){if(-1!==t.indexOf(e[a].subString))return e[a].identity}else if(n)return e[a].identity}}function t(e){var a=e.indexOf(s);if(-1!==a)return parseInt(e.substring(a+s.length+1))}if(o)return o;var n=[{string:e.navigator.userAgent,subString:"Edge",versionSearch:"Edge",identity:"Edge"},{string:e.navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:e.navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:e.navigator.vendor,subString:"Apple",versionSearch:"Version",identity:"Safari"},{prop:e.opera,identity:"Opera"},{string:e.navigator.vendor,subString:"iCab",identity:"iCab"},{string:e.navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:e.navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:e.navigator.vendor,subString:"Camino",identity:"Camino"},{string:e.navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:e.navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:e.navigator.userAgent,subString:"Trident/7",identity:"Explorer",versionSearch:"rv"},{string:e.navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:e.navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],i=[{string:e.navigator.platform,subString:"Win",identity:"Windows"},{string:e.navigator.platform,subString:"Mac",identity:"Mac"},{string:e.navigator.platform,subString:"Linux",identity:"Linux"},{string:e.navigator.platform,subString:"iPhone",identity:"iPhone"},{string:e.navigator.platform,subString:"iPod",identity:"iPod"},{string:e.navigator.platform,subString:"iPad",identity:"iPad"},{string:e.navigator.platform,subString:"Android",identity:"Android"}],s="",r=a(n)||"unknown-browser",l=t(e.navigator.userAgent)||t(e.navigator.appVersion)||"unknown-version",d=a(i)||"unknown-os";return r=r.toLowerCase(),l=r+"-"+l,d=d.toLowerCase(),o={browser:r,version:l,os:d}}function n(){var e=function(){return(65536*(1+Math.random())||0).toString(16).substring(1)};return e()+e()+e()+e()+e()+e()}function i(){return r.mobile()}function s(e,a){-1===a.indexOf(e)?a.push(e):a.splice(a.indexOf(e),1)}var r=new MobileDetect(e.navigator.userAgent),o=null,l={exists:a,detectBrowser:t,guidGenerator:n,isMobile:i,toggleInArray:s};return l}e.$inject=["$window"],angular.module("app.core").factory("msUtils",e)}(),function(){"use strict";function e(){function e(e){r=e}function a(){return r}function t(){return o}function n(e,a){return angular.isString(e)?angular.isArray(a)?void(o[e]={url:r+(a[0]||""),paramDefaults:a[1]||[],actions:a[2]||[],options:a[3]||{}}):void s.error('"resource" must be an array and it must follow $resource definition'):void s.error('"path" must be a string (eg. `dashboard.project`)')}var i=this,s=angular.injector(["ng"]).get("$log"),r="",o=[];i.setBaseUrl=e,i.getBaseUrl=a,i.getApiObject=t,i.register=n,this.$get=["$log","$q","$resource","$rootScope",function(t,i,s,r){function l(e,a){r.$broadcast("msApi::resolveStart");var n=e.split("@"),l=n[0],d=n[1],c=a||{};if(!l||!d)return t.error("msApi.resolve requires correct action parameter (resourceName@methodName)"),!1;var m=i.defer(),u=o[l];if(u){var p=s(u.url,u.paramDefaults,u.actions,u.options);p[d](c,function(e){m.resolve(e),r.$broadcast("msApi::resolveSuccess")},function(e){m.reject(e),r.$broadcast("msApi::resolveError")})}else t.error('Resource "'+l+'" is not defined in the api service!'),m.reject('Resource "'+l+'" is not defined in the api service!');return m.promise}function d(e,a,n,l){r.$broadcast("msApi::requestStart");var d=e.split("@"),c=d[0],m=d[1],u=a||{};if(!c||!m)return t.error("msApi.resolve requires correct action parameter (resourceName@methodName)"),!1;var p=i.defer(),g=o[c];if(g){var v=s(g.url,g.paramDefaults,g.actions,g.options);v[m](u,function(e){r.$broadcast("msApi::requestSuccess"),p.resolve(e),angular.isDefined(n)&&angular.isFunction(n)&&n(e)},function(e){r.$broadcast("msApi::requestError"),p.reject(e),angular.isDefined(l)&&angular.isFunction(l)&&l(e)})}else t.error('Resource "'+c+'" is not defined in the api service!'),p.reject('Resource "'+c+'" is not defined in the api service!');return p.promise}var c={setBaseUrl:e,getBaseUrl:a,register:n,resolve:l,request:d};return c}]}angular.module("app.core").provider("msApi",e)}(),function(){"use strict";function e(e,a,t){function n(t,n){var s=t.split("@"),r=s[0],o=s[1],l=n||{};if(!r||!o)return a.error("apiResolver.resolve requires correct action parameter (ResourceName@methodName)"),!1;var d=e.defer(),c=i(r);return c?c[o](l,function(e){d.resolve(e)},function(e){d.reject(e)}):(a.error('Resource "'+r+'" is not defined in the api service!'),d.reject('Resource "'+r+'" is not defined in the api service!')),d.promise}function i(e){for(var n=e.split("."),i=t,s=0;s<n.length;s++){if(angular.isUndefined(i[n[s]])){a.error('Resource part "'+n[s]+'" is not defined!'),i=!1;break}i=i[n[s]]}return i?i:!1}var s={resolve:n};return s}e.$inject=["$q","$log","api"],angular.module("app.core").factory("apiResolver",e)}(),function(){"use strict";function e(){return function(e,a){if(0===e.length||0===a.length)return e;var t=[];return e.forEach(function(e){var n=a.every(function(a){var t=!1;return e.tags.forEach(function(e){return e.name===a.name?void(t=!0):void 0}),t});n&&t.push(e)}),t}}function a(){return function(e,a){if(0!==e.length&&0!==a.length){if(e.length<a.length)return[];var t=[],n=a.every(function(a){var t=!1;return e.forEach(function(e){return e.name===a.name?void(t=!0):void 0}),t});return n&&t.push(e),t}}}angular.module("app.core").filter("filterByTags",e).filter("filterSingleByTags",a)}(),function(){"use strict";function e(){return function(e,a,t){if(0===e.length||!t||0===t.length)return e;for(var n=[],i=0;i<e.length;i++){for(var s=e[i],r=!1,o=0;o<t.length;o++){var l=t[o];if(s[a].indexOf(l)>-1){r=!0;break}}r&&n.push(s)}return n}}angular.module("app.core").filter("filterByPropIds",e)}(),function(){"use strict";function e(){return function(e,a){if(0===e.length||!a)return e;if(0===a.length)return[];for(var t=[],n=0;n<e.length;n++){for(var i=e[n],s=!1,r=0;r<a.length;r++){var o=a[r];if(i.id===o){s=!0;break}}s&&t.push(i)}return t}}angular.module("app.core").filter("filterByIds",e)}(),function(){"use strict";function e(e){return function(a){return e.trustAsHtml(a)}}function a(){return function(e){return String(e).replace(/<[^>]+>/gm,"")}}function t(){return function(e){return e?e.replace(/ /g,""):""}}function n(){return function(e){return e?"directive"===e.type?e.name.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()}):e.label||e.name:void 0}}e.$inject=["$sce"],angular.module("app.core").filter("toTrusted",e).filter("htmlToPlaintext",a).filter("nospace",t).filter("humanizeDoc",n)}(),function(){"use strict";function e(){return function(e){var a=Date.now()-new Date(e);return 36e5>a?moment(e).fromNow():864e5>a?moment(e).format("HH:mm"):6048e5>a?moment(e).format("dddd"):moment(e).calendar()}}angular.module("app.core").filter("altDate",e)}(),function(){"use strict";function e(){function e(e){a=angular.extend({},a,e)}var a={disableCustomScrollbars:!1,disableMdInkRippleOnMobile:!0,disableCustomScrollbarsOnMobile:!0};this.config=e,this.$get=function(){function e(e){return angular.isUndefined(a[e])?!1:a[e]}function t(e,t){a[e]=t}var n={getConfig:e,setConfig:t};return n}}angular.module("app.core").provider("fuseConfig",e)}(),function(){"use strict";function e(e,a,t){return{restrict:"E",compile:function(n,i){var s;return i.code||(s=n.html(),n.empty()),function(n,i,r){function o(e,a){var t=a.find("code"),n=e.split("\n");n=n.filter(function(e){return e.trim().length});var i=n[0].match(/^\s*/)[0],s=new RegExp("^"+i);n=n.map(function(e){return e.replace(s,"").replace(/\s+$/,"")});var o=hljs.highlight(r.language||r.lang,n.join("\n"),!0);o.value=o.value.replace(/=<span class="hljs-value">""<\/span>/gi,"").replace("<head>","").replace("<head/>",""),t.append(o.value).addClass("highlight")}r.code&&(s=n.$eval(r.code));var l=n.$eval(r.shouldInterpolate);a.when(s).then(function(a){if(a){l&&(a=t(a)(n));var s=angular.element('<pre><code class="highlight" ng-non-bindable></code></pre>');i.append(s),e(function(){o(a,s)},34,!1)}})}}}}e.$inject=["$timeout","$q","$interpolate"],angular.module("app.core").directive("hljs",e)}(),function(){"use strict";function e(){}angular.module("app.toolbar",[]).config(e)}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d,c,m,u,p,g,v,f){function h(e){i(e).toggle()}function b(){return"app.leads.get.edit"===t.current.name}function y(){p.logout()}function _(){C.bodyEl.toggleClass("ms-navigation-horizontal-mobile-menu-active")}function w(){r.toggleFolded()}function x(){p.toggleOnline()}function k(e){var a=(e.first_name||"")+" "+(e.last_name||"");return" "===a&&(a=e.email),a}function S(e){if(e){var a={id:C.user.id,is_available:e,unavailable_reason:""};return o.saveUser(a).then(function(e){C.user.is_available=e.is_available})}T(C.user)}function T(e){l.show({controller:"AvailableDialogController",controllerAs:"vm",templateUrl:"app/main/users/dialogs/available/available-dialog.html",parent:angular.element(d.body),clickOutsideToClose:!0,locals:{User:e}}).then(function(e){C.user.is_available=e.is_available})}var C=this;C.authService=p,C.user=p.currentUser,p.getCurrentUser().then(function(e){}),C.bodyEl=angular.element("body"),C.scores=v.scores,C.lead=g.lead,C.leadStatus=f.leadStatus,c.$watch("vm.authService",function(){C.user=p.currentUser},!0),C.toggleSidenav=h,C.logout=y,C.toggleHorizontalMobileMenu=_,C.toggleMsNavigationFolded=w,C.showInfo=b,C.toggleOnline=x,C.getFullNameUser=k,C.toggleAvailable=S}e.$inject=["$rootScope","$q","$state","$timeout","$mdSidenav","$mdToast","msNavigationService","usersService","$mdDialog","$document","$scope","authSettings","localStorageService","AuthService","leadsService","scoresService","leadStatusService"],angular.module("app.toolbar").controller("ToolbarController",e)}(),function(){"use strict";angular.module("fuse",["angularMoment","LocalStorageModule","datatables","flow","textAngular","app.core","app.services","app.auth","app.users","app.navigation","app.toolbar","app.dashboard","app.metrics","app.leads","app.calendar","app.tasks","app.concessionaires","app.origins","app.channels","app.acds","app.sfas","app.imports","app.clients","app.videos","app.geopostcodes","app.utils.notify","app.utils.filters","app.utils.directives","app.utils.debounce","app.utils.factory","angularUtils.directives.dirPagination","ngPassword","gettext"])}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l){function d(){t.saveItem("leads",{title:l.getString("Mis leads"),icon:"icon-home",state:"app.leads.board",weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("allleads",{title:l.getString("Ver todos"),icon:"icon-file-multiple",state:"app.leads.allboard",weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("newleads",{title:l.getString("Nuevo lead"),icon:"icon-plus",state:'app.leads.get.edit({"lead":0})',weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("calendar",{title:"Calendario",icon:"icon-calendar-today",state:"app.calendar",weight:0,hidden:function(){return a.hasPermission("calendar","LIST")?void 0:!0}}),t.saveItem("exportleads",{title:l.getString("Exportar leads"),icon:"icon-download",click:m,weight:0,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("acds",{title:l.getString("Llamadas entrantes"),icon:"icon-phone",state:"app.acds",weight:1,hidden:function(){return u.is_admin?void 0:!0}}),t.saveItem("dashboard",{title:l.getString("Dashboard"),icon:"icon-tile-four",state:"app.dashboard",weight:2,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("config",{title:l.getString("Configuración"),icon:"icon-cog",weight:20,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("config.concessionaires",{title:l.getString("Concesionarios"),icon:"icon-car",state:"app.concessionaires",weight:1,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("config.origins",{title:l.getString("Orígenes"),icon:"icon-voicemail",state:"app.origins",weight:2,hidden:function(){return u.is_admin?void 0:!0}}),t.saveItem("config.channels",{title:l.getString("Canales"),icon:"icon-checkerboard",state:"app.channels",weight:3,hidden:function(){return u.is_admin?void 0:!0}}),t.saveItem("config.users",{title:l.getString("Usuarios"),icon:"icon-account",state:"app.users.list",weight:4,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("resources",{title:l.getString("Centro de recursos"),icon:"icon-document",weight:21,hidden:function(){}}),t.saveItem("resources.kit",{title:l.getString("Guía desarrollador SML​"),icon:"icon-document",weight:1,href:"/assets/documents/manual.pdf",hidden:function(){}}),t.saveItem("videos",{title:l.getString("Tutoriales"),icon:"icon-video",state:"app.videos",weight:22,hidden:function(){}}),t.saveItem("resources.clients",{title:l.getString("Atención al clientes"),icon:"icon-people",weight:2,href:"https://www.artificialintelligencelead.com/atencion-al-cliente",hidden:function(){}}),t.saveItem("resources.news",{title:l.getString("Novedades"),icon:"icon-newspaper",weight:2,href:"https://www.artificialintelligencelead.com/blog",hidden:function(){}}),t.saveItem("resources.academy",{title:l.getString("Atención al clientes"),icon:"icon-bank",weight:2,href:"https://www.artificialintelligencelead.com/courses",hidden:function(){}})}function c(){t.saveItem("calendar",{title:"Calendario",icon:"icon-calendar-today",state:"app.calendar",weight:0,hidden:function(){return a.hasPermission("calendar","LIST")?void 0:!0}}),t.saveItem("leads",{title:l.getString("Buscar"),icon:"icon-account-search",state:"app.leads.board",weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("contacts",{title:l.getString("Contactos"),icon:"icon-account-multiple",state:"app.leads.list",weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("newleads",{title:l.getString("Nuevo lead"),icon:"icon-plus",state:'app.leads.get.edit({"lead":0})',weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("sfa",{title:l.getString("Mis automatismos"),icon:"icon-arrange-bring-to-front",state:"app.sfas.list",weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("import",{title:l.getString("Importador / Exportador"),icon:"icon-cloud-download",state:"app.imports",weight:0,hidden:function(){return a.hasPermission("leads","LIST")?void 0:!0}}),t.saveItem("acds",{title:l.getString("Llamadas entrantes"),icon:"icon-phone",state:"app.acds",weight:1,hidden:function(){return u.is_admin?void 0:!0}}),t.saveItem("dashboard",{title:l.getString("Dashboard"),icon:"icon-tile-four",state:"app.dashboard",weight:2,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("metrics",{title:l.getString("Métricas"),icon:"icon-tile-four",state:"app.metrics",weight:2,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("config",{title:l.getString("Configuración"),icon:"icon-cog",weight:20,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("config.concessionaires",{title:l.getString("Concesionarios"),icon:"icon-car",state:"app.concessionaires",weight:1,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("config.origins",{title:l.getString("Orígenes"),icon:"icon-voicemail",state:"app.origins",weight:2,hidden:function(){return u.is_admin?void 0:!0}}),t.saveItem("config.channels",{title:l.getString("Canales"),icon:"icon-checkerboard",state:"app.channels",weight:3,hidden:function(){return u.is_admin?void 0:!0}}),t.saveItem("config.users",{title:l.getString("Usuarios"),icon:"icon-account",state:"app.users.list",weight:4,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("resources",{title:l.getString("Centro de recursos"),icon:"icon-document",weight:21,hidden:function(){}}),t.saveItem("resources.kit",{title:l.getString("Guía desarrollador SML"),icon:"icon-document",weight:1,href:"/assets/documents/manual.pdf",hidden:function(){}}),t.saveItem("resources.extension",{title:l.getString("Extensión PSA"),icon:"icon-download",weight:2,href:"/assets/documents/psa_extension.zip",hidden:function(){}}),t.saveItem("videos",{title:l.getString("Tutoriales"),icon:"icon-video",state:"app.videos",weight:22,hidden:function(){}}),t.saveItem("pbx",{title:l.getString("PBX"),icon:"icon-link-variant",href:"https://pbx.smartmotorlead.net:1443/",weight:23,hidden:function(){return u.is_admin||u.is_concession_admin?void 0:!0}}),t.saveItem("clients",{title:l.getString("Atención al cliente"),icon:"icon-people",weight:24,href:"https://www.artificialintelligencelead.com/atencion-al-cliente",hidden:function(){}}),t.saveItem("news",{title:l.getString("Novedades"),icon:"icon-newspaper",weight:25,href:"https://www.artificialintelligencelead.com/blog",hidden:function(){}}),t.saveItem("academy",{title:l.getString("Academy"),icon:"icon-bank",weight:26,href:"https://www.artificialintelligencelead.com/courses",hidden:function(){}})}function m(e){a.loadingProgress=!0,s.show({controller:"ExportLeadDialogController",controllerAs:"vm",templateUrl:"app/main/leads/dialogs/exportLeads/exportLeads-dialog.html",parent:angular.element(r.body),targetEvent:e,clickOutsideToClose:!0,locals:{event:e,Concessionaires:o.getAllConcessionaires()}})}var u=null;n.loggedIn&&n.getCurrentUser().then(function(e){e&&(u=e,"sail"===a.domain?c():d())}),e.$on("$viewContentAnimationEnded",function(t){t.targetScope.$id===e.$id&&a.$broadcast("msSplashScreen::remove")})}e.$inject=["$scope","$rootScope","msNavigationService","AuthService","localStorageService","$mdDialog","$document","concessionairesService","gettextCatalog"],angular.module("fuse").controller("MainController",e)}(),function(){"use strict";function e(){}angular.module("app.navigation",[]).config(e)}(),function(){"use strict";function e(e){function a(){t.folded=!t.folded}var t=this;t.bodyEl=angular.element("body"),t.folded=!0,t.msScrollOptions={suppressScrollX:!0},t.toggleMsNavigationFolded=a,e.$on("$stateChangeSuccess",function(){t.bodyEl.removeClass("ms-navigation-horizontal-mobile-menu-active")})}e.$inject=["$scope"],angular.module("app.navigation").controller("NavigationController",e)}(),function(){"use strict";function e(e,a,t){if(a.generate(),t.getConfig("disableMdInkRippleOnMobile")&&e.isMobile()){var n=angular.element("body");n.attr("md-no-ink",!0)}e.isMobile()&&angular.element("html").addClass("is-mobile");var i=e.detectBrowser();if(i){var s=i.browser+" "+i.version+" "+i.os;angular.element("html").addClass(s)}}e.$inject=["msUtils","fuseGenerator","fuseConfig"],angular.module("app.core").run(e)}(),function(){"use strict";function e(e,a,t,n){a.debugEnabled(!0),e.config({tabindex:!1}),n.config({disableCustomScrollbars:!1,disableCustomScrollbarsOnMobile:!0,disableMdInkRippleOnMobile:!0}),t.config({wheelPropagation:!0})}e.$inject=["$ariaProvider","$logProvider","msScrollConfigProvider","fuseConfigProvider"],angular.module("app.core").config(e)}(),angular.module("gettext").run(["gettextCatalog",function(e){e.setStrings("en",{Abandonar:"Leave","Abrir lead":"Open lead","Acción realizada correctamente":"Action done correctly","Activado el {{ user.user_activation_date | date:'dd/MM/yyyy' }}":"Enabled {{User. user_activation_date | date: ' DD/MM/yyyy '}}",Activos:"Active","Administrador de concesionario":"Dealer administrator","Administrar perfil":"Manage profile",Alta:"Register","Alta lead":"Registrer lead",Alto:"Stop",Apellidos:"Surname","Asignación":"Assing",Asignar:"Assing","Asignar Lead":"Assing lead","Asignar comercial":"Assing user",Avanzado:"Advanced",Ayer:"Yesterday","Añadir concesionario":"Add dealer","Añadir fuente":"Add origin","Añadir icono":"Add icon","Añadir nota":"Add note","Añadir solicitud":"Add request","Año":"Year",Bajo:"Low","Biografía":"Biography",Borrar:"Delete","Borrar canal":"Delete channel","Borrar concesionario":"Delete dealer","Borrar leada":"Delete lead","Borrar nota":"Delete note","Borrar solicitud":"Delete request","Borrar tag":"Delete tag",Buscar:"Search",Calendario:"Calendar","Calendario de trabajo":"Work calendar","Calendario guardado correctamente":"Action done correctly","Cambiar foto":"Edit photo","Cambios realizados correctamente":"Action done correctly",Canal:"Channel","Canal borrado correctamente.":"Channel delete correctly.","Canal guardado correctamente":"Canal save correctly","Canal:":"Channel:",Canales:"Channels","Canales permitidos":"Channels allowed",Cancelar:"Cancel","Centro de recursos":"Resource Center","Centro de trabajo":"Work Center",Cerrar:"Close","Cerrar sesión":"Sing off",Cliente:"Client","Cliente:":"Client:",Combustible:"Fuel type",Comercial:"User",Concesionario:"Dealer","Concesionario borrado correctamente.":"Dealer deleted correctly.","Concesionario guardado correctamente":"Dealer saved correctly",Concesionarios:"Dealers","Concesionarios a los que pertenece:":"Linked dealers:","Concesión":"Dealer",Conectados:"Connected","Conexión":"Connected","Configuración":"Configuration","Configuración del sitio":"Web configuration",Confirmar:"Confirm",Contactos:"Contacts","Contactos comerciales:":"Business contacts:",Continuar:"Continue","Contraseña":"Password",Crear:"Create","Crear Lead":"Create lead",Curso:"Apply","Dados de baja":"Unsubscribed","Dar de alta":"Register","Dar de baja":"Unsubscribe",Dashboard:"Dashboard","Datos básicos":"Basics data","Datos de lead":"Lead data","Debe seleccionar un comercial existente.":"You must select an existing comercial.","Debe seleccionar una opción de la lista":"You must select a list option","Departamento / Área":"Department/ Area","Desactivado el {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}":"User deactivation date {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}","Descargar audio":"Download audio",Desconectados:"Disconnect","Descripción":"Description","Dirección":"Address",Domingo:"Sunday",Duplicado:"Duplicate","Día laborable":"Laborable day",Editar:"Edit","Editar canal":"Edit channel","Editar concesionario":"Edit dealer","Editar icono":"Edit icon","Editar origen":"Edit origin","Editar solicitud":"Edit request","Editar usuario":"Edit user","El email indicado ya existe":"This mail already exists","El sistema ha detectado un seguimiento de este lead ¿Desea finalizar el lead?":"The system has detected a lead  follow-up , do you want to finish the lead?",Eliminar:"Remove","Eliminar canal":"Remove channel","Eliminar concesionario":"Remove dealer","Eliminar leada":"Remove lead","Eliminar solicitud":"Remove request",Email:"Email","Email o nombre de usario":"Email or user name",Entrar:"Enter","Error al borrar concesionario.":"Mistake when deleting dealer.","Error al borrar la fuente.":"Mistake when deleting origin.","Error al dar de alta a este usuario.":"Mistake when registering a dealer.","Error al dar de baja a este usuario.":"Mistake when deleting user.","Error al exportar leads":"Mistake when export lead","Error al finalizar lead.":"Mistake when end lead.","Error al guardar el calendario.":"Mistake when saved calendar.","Error al guardar el canal.":"Mistake when saved the cannel.","Error al guardar el concesionario.":"Mistake when saved dealer.","Error al guardar el estado.":"Mistake when saved status.","Error al guardar el infome.":"Mistake when saved report.","Error al guardar el informe.":"Mistake when saved report.","Error al guardar el origen.":"Mistake when saved origin.","Error al guardar el usuario.":"Mistake when saved user.","Error al guardar la solicitud.":"Mistake when saved request.","Error al guardar los datos básicos.":"Mistake when saved basics datas.","Error al modificar foto.":"Mistake when edit photo.","Error al obtener audio":"Mistake when saved","Error al realizar el registro":"Mistake when registering","Error al realizar la acción.":"Mistake when performing the action.","Error al reasignar leads.":"Mistake when reassigning leads.","Es administrador del concesionario":"Account manager of the car dealership","Es gestor del concesionario":"Manager of a car dealership",Escuela:"School","Español":"Spanish",Especialidad:"Specialty","Esta semana":"This week",Estado:"State","Estado guardado correctamente":"Status saved correctly","Este campo es obligatorio":"This field is required","Este lead no tiene ninguna solicitud adjunta. ¿Desea continuar?":"This lead has no application attached. Do you wish to continue?","Este mes":"This month",Exportar:"Export","Exportar Leads":"Export Leads","Exportar leads":"Export leads",Extranjero:"Foreign",Extras:"Additional features",Fecha:"Date","Fecha de alta:":"Discharge date:","Fecha de nacimiento":"Birthdate","Fecha de realización:":"Date of realization:","Fecha de seguimiento:":"Date of follow-up:","Fecha en la que comenzó como profesor":"Date you started as a teacher",Filtrar:"Filter","Filtrar por score":"Filter by score","Filtrar por solicitudes":"Filter by requests",Finalidazo:"Finalized",Finalizar:"Finalize","Finalizar lead":"Finish lead","Financiación":"Financing","Foto modificada correctamente":"Photo modified correctly","Francés":"French",Fuente:"Source","Fuentes:":"Sources:","Garantía":"Warranty","Gestión comercial":"Commercial management","Gestor comercial":"Business manager",Guardar:"Save","Guardar lead":"Save lead","Guía desarrollador SML​":"SML Developer Guide","Historial de contactos":"Contacts history","Histórico":"Historic","Histórico de llamadas":"Call history",Hoy:"Today","Icono:":"Icon:","Id click2call":"Id click2call","Id llamada c2c":"Id called c2c","Identificador click2call":"Click2call identifier",Ilocalizable:"Ilocable",Indiferente:"Indifferent",Infoauto:"Infoauto","Infome guardado correctamente":"Report saved correctly","Información del vehículo":"Vehicle information","Informe guardado correctamente":"Report saved correctly","Inglés":"English",Inicial:"Initial",Inicio:"Start",Jueves:"Thursday",Km:"Km","LLamada respondida:":"Call answered:","La dirección web debe ser de la forma http://...":"The web address must be in the form http: // ...","Las contraseñas no coinciden":"Passwords do not match",Lead:"Lead","Lead finalizado correctamente":"Lead completed correctly","Lead no atendido":"Lead unattended","Leada borrado correctamente.":"Lead erased correctly.","Leads cerrados":"Closed leads","Leads no atendidos":"Leads not attended","Leads reasignados correctamente":"Leads reassigned correctly","Listado de solicitudes":"List of requests","Llamadas entrantes":"Incoming calls",Llamar:"Call",Localidad:"Locality",Lunes:"Monday","Marca/Modelo":"Make/model",Martes:"Tuesday","Matrícula":"Registration number",Medio:"Means","Menos de 30":"Less than 30","Mis leads":"My leads","Miércoles":"Wednesday",Mujer:"Woman","Muy bajo":"Very low","NSA:":"NSA:",Nacional:"National",Negativa:"Negative",Negativo:"Negative",No:"No","No disponible":"Not available","No eres competente para realizar esta acción. Por favor contacte con atención al cliente.":"You are not competent to perform this action. Please contact customer service.","No hay ningun comercial con ese nombre":"There is no commercial with that name","No hay ningun provincia con ese nombre":"There is no province with that name","No hay ninguna escuela con ese nombre":"There is no school with that name","No hay ninguna fuente para esta búsqueda":"There is no source for this search","No hay ninguna localidad":"There is no locality","No hay ningún canal con ese nombre":"There is no channel with that name","No hay ningún concesionario con ese nombre":"There is no dealer with that name","No hay ningún concesionario con ese teléfono":"There is no dealer with that phone","No hay ningún origen con ese nombre":"There is no origin with that name",Nombre:"First name",Nota:"Note",Notas:"Notes","Nueva alta":"New high","Nueva solicitud":"New request","Nuevo canal":"New channel","Nuevo concesionario":"New dealer","Nuevo estado":"New state","Nuevo lead":"New lead","Nuevo origen":"New origin","Nuevo usuario":"New user","Número de canales:":"Number of channels:","Número de concesionarios:":"Number of dealers:","Número de leads:":"Number of leads:","Número de llamadas entrantes:":"Number of incoming calls:","Número de orígenes:":"Number of origins:","Número de usuarios:":"Number of users:",Origen:"Origin","Origen guardado correctamente":"Origin saved correctly","Orígenes":"Origins",Otro:"Other","Pendiente de asignación":"Pending assignment","Posible lead duplicado":"Possible duplicate lead",Positiva:"Positive",Positivo:"Positive",Precio:"Price",Presupuesto:"Budget",Provincia:"Province","Puede que esté dando de alta un lead ya creado en el sistema, compruebe si alguno de estos leads es el que usted está creando":"You may be registering a lead already created in the system, check if any of these leads is the one you are creating",Realizado:"Accomplished","Reasignación de leads":"Reassignment of leads",Reasignar:"Reasign","Registrar nuevo usuario":"Register new user",
"Registro realizado correctamente":"Registration made correctly",Reservado:"Reserved","Respuesta a solicitud vía Email":"Response to request via Email",Resultado:"Result",Score:"Score","Score:":"Score:",Scoring:"Scoring","Se ha producido un error.":"An error has occurred.","Se han detectado cambios":"Changes have been detected","Se usará para acceder al sistema":"It will be used to access the system",Seguimiento:"Tracing","Seguimiento programado el:":"Scheduled follow-up on:","Selecciona un resultado de la gestión":"Select a result of the management",Sexo:"Gender",Si:"Yes","Si abandona esta pantalla perderá los cambios, ¿Desea guardar los cambios?":"If you leave this screen you will lose the changes, do you want to save the changes?","Sin canales":"Without channels","Sin concesionarios":"Without dealers","Sin definir":"Undefined","Sin informes":"No reports","Sin llamadas entrantes":"No incoming calls","Sin notas añadidas":"No added notes","Sin orígenes":"Without origins","Sin solicitudes":"Without requests","Sin tags añadidos":"No tags added","Sin usuarios":"Without users","Solicitud borrada correctamente.":"Request deleted correctly.","Solicitud guardada correctamente":"Request saved correctly",Solicitudes:"Request","Super Administrador":"Super Administrator","Sábado":"Saturday",Tag:"Tag",Tags:"Tags","Tarea programada el:":"Scheduled task on:","Tareas pendientes":"Pending tasks","Tasación":"Assessment","Teléfono":"Phone","Teléfono de concesión oficial":"Official concession phone","Teléfono:":"Phone:","Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?":"You have pending tasks of realization and follow-up. Are you sure you want to finish the lead?",Tipo:"Type",Todas:"All","Tutor académico":"Academic tutor","Tutor profesional":"Professional tutor","Url coches.net":"Url coches.net","Usuario dado de alta correctamente":"User successfully registered","Usuario dado de baja correctamente":"User successfully unsubscribed","Usuario guardado correctamente":"User saved correctly",Usuarios:"Users","Usuarios conectados":"Users online","Valoración media":"Average Rating","Varón":"Male","Vehiculo reservado":"Reserved vehicle","Vehículo":"Vehicle","Vehículo reservado":"Reserved vehicle","Ver Lead":"See Lead","Ver historial":"See history","Ver más":"See more","Ver todos":"See all",Viernes:"Friday","Visible para empresas":"Visible to companies","Visita / Test Drive":"Visit / Test Drive",Volver:"Return",Web:"Web","Ya puede realizar la baja del usuario":"You can now unsubscribe the user","a las:":"at:","¿Deseas dar de alta un vehículo de interés alternativo?":"Do you want to register a vehicle of alternative interest?","¿Seguro que quieres eliminar el canal?":"Are you sure you want to delete the channel?","¿Seguro que quieres eliminar el concesionario?":"Are you sure you want to delete the dealer?","¿Seguro que quieres eliminar el leada?":"Are you sure you want to delete the leads?","¿Seguro que quieres eliminar la solicitud?":"Are you sure you want to delete the request?"}),e.setStrings("fr",{Abandonar:"Partir","Abrir lead":"Plomb ouvert","Acción realizada correctamente":"Action effectuée correctement","Activado el {{ user.user_activation_date | date:'dd/MM/yyyy' }}":"Activé le {{ user.user_activation_date | date:'dd/MM/yyyy' }}",Activos:"Les atouts","Administrador de concesionario":"Administrateur de concessionnaire","Administrar perfil":"Gérer le profil",Alta:"Haute","Alta lead":"Haute lead",Alto:"Haute",Apellidos:"Nom de famille","Asignación":"Cession",Asignar:"Assigner","Asignar Lead":"Assigner lead","Asignar comercial":"Attribuer commercial",Avanzado:"Avancée",Ayer:"Hier","Añadir concesionario":"Ajouter un revendeur","Añadir fuente":"Ajouter une source","Añadir icono":"Ajouter une icône","Añadir nota":"Ajouter une note","Añadir solicitud":"Ajouter une demande","Año":"Année",Bajo:"Bas","Biografía":"Biographie",Borrar:"Supprimer","Borrar canal":"Supprimer le canal","Borrar concesionario":"Supprimer le revendeur","Borrar leada":"Supprimer leada","Borrar nota":"Supprimer la note","Borrar solicitud":"Supprimer la demande","Borrar tag":"Supprimer la balise",Buscar:"Recherche",Calendario:"Calendrier","Calendario de trabajo":"Calendrier de travail","Calendario guardado correctamente":"Calendrier enregistré correctement","Cambiar foto":"Changer de photo","Cambios realizados correctamente":"Changements faits correctement",Canal:"Channel","Canal borrado correctamente.":"Chaîne supprimée correctement.","Canal guardado correctamente":"Chaîne enregistrée correctement","Canal:":"Canal:",Canales:"Canaux","Canales permitidos":"Canaux autorisés",Cancelar:"Annuler","Centro de recursos":"Centre de ressources","Centro de trabajo":"Centre de travail",Cerrar:"Fermer","Cerrar sesión":"Fermer la session",Cliente:"Client","Cliente:":"Client:",Combustible:"Carburant",Comercial:"Commercial",Concesionario:"Concessionnaire","Concesionario borrado correctamente.":"Concessionnaire supprimé correctement.","Concesionario guardado correctamente":"Concessionnaire enregistré correctement",Concesionarios:"Concessionnaires","Concesionarios a los que pertenece:":"Concessionnaires auxquels il appartient:","Concesión":"Concession",Conectados:"Connecté","Conexión":"Connexion","Configuración":"Configuration","Configuración del sitio":"Configuration du site",Confirmar:"Confirmer",Contactos:"Contacts","Contactos comerciales:":"Contacts commerciaux:",Continuar:"Continuer","Contraseña":"Mot de passe",Crear:"Créer","Crear Lead":"Créer Lead",Curso:"Cours","Dados de baja":"Déconnexions","Dar de alta":"S'inscrire","Dar de baja":"Désinscription",Dashboard:"Dashboard","Datos básicos":"Données de base","Datos de lead":"Données de lead","Debe seleccionar un comercial existente.":"Vous devez sélectionner une publicité existante.","Debe seleccionar una opción de la lista":"Vous devez sélectionner une option dans la liste","Departamento / Área":"Département / Zone","Desactivado el {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}":"Désactivé le {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}","Descargar audio":"Télécharger l'audio",Desconectados:"Déconnecté","Descripción":"Description","Dirección":"Adresse",Domingo:"Le dimanche",Duplicado:"Dupliquer","Día laborable":"Jour ouvrable",Editar:"Éditer","Editar canal":"Editer le canal","Editar concesionario":"Éditer concessionnaire","Editar icono":"Icône d'édition","Editar origen":"Modifier l'origine","Editar solicitud":"Demande de modification","Editar usuario":"Modifier l'utilisateur","El email indicado ya existe":"L'email indiqué existe déjà","El sistema ha detectado un seguimiento de este lead ¿Desea finalizar el lead?":"Le système a détecté un suivi de cette piste. Voulez-vous la terminer?",Eliminar:"Supprimer","Eliminar canal":"Supprimer le canal","Eliminar concesionario":"Supprimer le concessionnaire","Eliminar leada":"Supprimer leada","Eliminar solicitud":"Supprimer la demande",Email:"Email","Email o nombre de usario":"Email ou nom d'utilisateur",Entrar:"Entrer","Error al borrar concesionario.":"Erreur lors de la suppression du concessionnaire.","Error al borrar la fuente.":"Erreur lors de la suppression de la source.","Error al dar de alta a este usuario.":"Erreur lors de l'enregistrement de cet utilisateur.","Error al dar de baja a este usuario.":"Échec de la désinscription de cet utilisateur.","Error al exportar leads":"Erreur d'exportation de leads","Error al finalizar lead.":"Erreur lors de la finalisation de lead.","Error al guardar el calendario.":"Erreur lors de l'enregistrement du calendrier.","Error al guardar el canal.":"Erreur lors de l'enregistrement du canal.","Error al guardar el concesionario.":"Erreur lors de la sauvegarde du concessionnaire.","Error al guardar el estado.":"Erreur lors de la sauvegarde de l'état.","Error al guardar el infome.":"Erreur lors de l'enregistrement de l'infome.","Error al guardar el informe.":"Erreur lors de l'enregistrement de l'infome.","Error al guardar el origen.":"Échec de l'enregistrement de l'origine.","Error al guardar el usuario.":"Erreur lors de la sauvegarde de l'utilisateur.","Error al guardar la solicitud.":"Erreur lors de l'enregistrement de la demande.","Error al guardar los datos básicos.":"Erreur lors de l'enregistrement des données de base.","Error al modificar foto.":"Erreur lors de la modification de la photo.","Error al obtener audio":"Erreur lors de l'obtention du son","Error al realizar el registro":"Erreur lors de l'inscription","Error al realizar la acción.":"Erreur lors de l’action.","Error al reasignar leads.":"Erreur lors de la réaffectation des leads.","Es administrador del concesionario":"Il est le gérant du concessionnaire","Es gestor del concesionario":"Il est gérant de concession",Escuela:"École","Español":"Espagnol",Especialidad:"Spécialité","Esta semana":"Cette semaine",Estado:"Statut","Estado guardado correctamente":"Statut sauvegardé correctement","Este campo es obligatorio":"Ce champ est obligatoire","Este lead no tiene ninguna solicitud adjunta. ¿Desea continuar?":"Cette lead n'a pas d'application jointe. Voulez-vous continuer?","Este mes":"Ce mois",Exportar:"Exportation","Exportar Leads":"Leads d'exportation","Exportar leads":"Leads d'exportation",Extranjero:"Étrangère",Extras:"Extras",Fecha:"Date","Fecha de alta:":"Date d'inscription:","Fecha de nacimiento":"Date de naissance","Fecha de realización:":"Date de réalisation:","Fecha de seguimiento:":"Date de suivi:","Fecha en la que comenzó como profesor":"Date à laquelle vous avez commencé en tant qu'enseignant",Filtrar:"Filtrer","Filtrar por score":"Filtrer par score","Filtrar por solicitudes":"Filtrer par demandes",Finalidazo:"Finalidazo",Finalizar:"Terminer","Finalizar lead":"Terminer lead","Financiación":"Financement","Foto modificada correctamente":"Photo modifiée correctement","Francés":"Francais",Fuente:"Source","Fuentes:":"Sources:","Garantía":"Garantie","Gestión comercial":"Gestion commerciale","Gestor comercial":"Gérant commercial",Guardar:"Sauvegarder","Guardar lead":"Sauvegarder lead","Guía desarrollador SML​":"Guide du développeur SML","Historial de contactos":"Historique des contacts","Histórico":"Historique","Histórico de llamadas":"Historique des appels",Hoy:"Aujourd'hui","Icono:":"Icône:","Id click2call":"Id click2call","Id llamada c2c":"Id appel c2c","Identificador click2call":"Identifiant click2call",Ilocalizable:"Ilocalizable",Indiferente:"Indifférent",Infoauto:"Infoauto","Infome guardado correctamente":"Infome enregistré correctement","Información del vehículo":"Information du véhicule","Informe guardado correctamente":"Rapport enregistré correctement","Inglés":"Anglais",Inicial:"Initiale",Inicio:"Début",Jueves:"Jeudi",Km:"Km","LLamada respondida:":"Appel répondu:","La dirección web debe ser de la forma http://...":"L’adresse web doit être http://...","Las contraseñas no coinciden":"Les mots de passe ne coïncident pas",Lead:"Lead","Lead finalizado correctamente":"Lead fini correctement","Lead no atendido":"Lead pas assisté","Leada borrado correctamente.":"Lead effacé correctement.","Leads cerrados":"Leads fermé","Leads no atendidos":"Leads sans surveillance","Leads reasignados correctamente":"Leads correctement réaffecté","Listado de solicitudes":"Listing de demandes","Llamadas entrantes":"Appels entrants",Llamar:"Appel",Localidad:"Localité",Lunes:"Lundi","Marca/Modelo":"Marque / Modèle",Martes:"Mardi","Matrícula":"Inscription",Medio:"Moyen","Menos de 30":"Moins de 30","Mis leads":"Mes leads","Miércoles":"Mercredi",Mujer:"Femme","Muy bajo":"Très bas","NSA:":"NSA:",Nacional:"National",Negativa:"Refus",Negativo:"Négatif",No:"Non","No disponible":"Non disponible","No eres competente para realizar esta acción. Por favor contacte con atención al cliente.":"Vous n’êtes pas compétent pour cette action. Veuillez contacter le service clientèle.","No hay ningun comercial con ese nombre":"Il n'y a pas de conseiller avec ce nom","No hay ningun provincia con ese nombre":"Aucune province ne porte ce nom","No hay ninguna escuela con ese nombre":"Il n’y a pas d’école de ce nom","No hay ninguna fuente para esta búsqueda":"Il n'y a pas de source pour cette recherche","No hay ninguna localidad":"Il n'y a pas de localité","No hay ningún canal con ese nombre":"Il n'y a pas de chaîne avec ce nom","No hay ningún concesionario con ese nombre":"Aucun concessionnaire de ce nom","No hay ningún concesionario con ese teléfono":"Il n’y a pas de concessionnaire avec ce téléphone","No hay ningún origen con ese nombre":"Il n’y a pas d’origine avec ce nom",Nombre:"Nom",Nota:"Note",Notas:"Notes","Nueva alta":"Nouvelle inscription","Nueva solicitud":"Nouvelle demande","Nuevo canal":"Nouveau canal","Nuevo concesionario":"Nouveau concessionnaire","Nuevo estado":"Nouvel état","Nuevo lead":"Nouvel lead","Nuevo origen":"Nouvelle origine","Nuevo usuario":"Nouvel utilisateur","Número de canales:":"Nombre de canaux:","Número de concesionarios:":"Nombre de concessionnaires:","Número de leads:":"Nombre de leads:","Número de llamadas entrantes:":"Nombre d'appels entrants:","Número de orígenes:":"Nombre d'origines:","Número de usuarios:":"Nombre d'utilisateurs:",Origen:"Origine","Origen guardado correctamente":"Origine gardée correctement","Orígenes":"Origines",Otro:"Autre","Pendiente de asignación":"Pente d'assignation","Posible lead duplicado":"Lead possible doublé",Positiva:"Positive",Positivo:"Positif",Precio:"Prix",Presupuesto:"Budget",Provincia:"Province","Puede que esté dando de alta un lead ya creado en el sistema, compruebe si alguno de estos leads es el que usted está creando":"Peut-être que vous enregistrez un lead déjà créé dans le système, vérifiez si l’un de ces Leads est celui que vous créez",Realizado:"Réalisé","Reasignación de leads":"Réassignation de leads",Reasignar:"Réaffecter","Registrar nuevo usuario":"Inscrire un nouvel utilisateur","Registro realizado correctamente":"Registre réalisé correctement",Reservado:"Réservé","Respuesta a solicitud vía Email":"Réponse à la demande par email",Resultado:"Résultat",Score:"Score","Score:":"Score:",Scoring:"Scoring","Se ha producido un error.":"Une erreur s'est produite.","Se han detectado cambios":"Des changements ont été détectés","Se usará para acceder al sistema":"Il sera utilisé pour accéder au système",Seguimiento:"Suivi","Seguimiento programado el:":"Suivi programmé :","Selecciona un resultado de la gestión":"Sélectionne un résultat de gestion",Sexo:"Genre",Si:"Oui","Si abandona esta pantalla perderá los cambios, ¿Desea guardar los cambios?":"Si vous quittez cet écran, vous perdrez les modifications. Voulez-vous enregistrer les modifications?","Sin canales":"Sans canaux","Sin concesionarios":"Sans des concessionnaires","Sin definir":"Sans definir","Sin informes":"Sans des rapports","Sin llamadas entrantes":"Sans des appels entrants","Sin notas añadidas":"Sans des notes ajoutées","Sin orígenes":"Sans des origines","Sin solicitudes":"Sans des demandes","Sin tags añadidos":"Sans des tags ajoutés","Sin usuarios":"Sans des utilisateurs","Solicitud borrada correctamente.":"Demande supprimée correctement.","Solicitud guardada correctamente":"Demande gardée correctement",Solicitudes:"Demandes","Super Administrador":"Super Administrateur","Sábado":"Samedi",Tag:"Tag",Tags:"Tags","Tarea programada el:":"Tâche programmée:","Tareas pendientes":"Tâches pendantes","Tasación":"Évaluation","Teléfono":"Téléphone","Teléfono de concesión oficial":"Teléfono de concesión oficial","Teléfono:":"Téléphone:","Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?":"Vous avez des tâches à accomplir et à suivre. Êtes-vous sûr de vouloir terminer le lead?",Tipo:"Type",Todas:"Toutes","Tutor académico":"Tuteur académique","Tutor profesional":"Tuteur professionnel","Url coches.net":"Url coches.net","Usuario dado de alta correctamente":"Utilisateur inscrit correctement","Usuario dado de baja correctamente":"Utilisateur résilié correctement","Usuario guardado correctamente":"Utilisateur gardé correctement",Usuarios:"Utilisateurs","Usuarios conectados":"Utilisateurs branchés","Valoración media":"Note moyenne","Varón":"Homme","Vehiculo reservado":"Véhicule réservé","Vehículo":"Véhicule","Vehículo reservado":"Vehiculo reservado","Ver Lead":"Voir Lead","Ver historial":"Voir l'histoire","Ver más":"Voir plus","Ver todos":"Voir tous",Viernes:"Vendredi","Visible para empresas":"Visible aux entreprises","Visita / Test Drive":"Visite / Test Drive",Volver:"Revenir",Web:"Web","Ya puede realizar la baja del usuario":"Vous pouvez maintenant désinscrire l'utilisateur","a las:":"à :","¿Deseas dar de alta un vehículo de interés alternativo?":"Voulez-vous ajouter un véhicule d'intérêt alternatif?","¿Seguro que quieres eliminar el canal?":"Tu veux vraiment supprimer le canal ?","¿Seguro que quieres eliminar el concesionario?":"Tu es sûr de vouloir supprimer le concessionnaire ?","¿Seguro que quieres eliminar el leada?":"Tu es sûr de vouloir supprimer la lead?","¿Seguro que quieres eliminar la solicitud?":"Êtes-vous sûr de vouloir annuler la demande?"})}]),MimeType={},MimeType.ez="application/andrew-inset",MimeType.aw="application/applixware",MimeType.atom="application/atom+xml",MimeType.atomcat="application/atomcat+xml",MimeType.atomsvc="application/atomsvc+xml",MimeType.ccxml="application/ccxml+xml",MimeType.cu="application/cu-seeme",MimeType.davmount="application/davmount+xml",MimeType.ecma="application/ecmascript",MimeType.emma="application/emma+xml",MimeType.epub="application/epub+zip",MimeType.pfr="application/font-tdpfr",MimeType.stk="application/hyperstudio",MimeType.jar="application/java-archive",MimeType.ser="application/java-serialized-object",MimeType["class"]="application/java-vm",MimeType.js="application/javascript",MimeType.json="application/json",MimeType.lostxml="application/lost+xml",MimeType.hqx="application/mac-binhex40",MimeType.cpt="application/mac-compactpro",MimeType.mrc="application/marc",MimeType.ma="application/mathematica",MimeType.nb="application/mathematica",MimeType.mb="application/mathematica",MimeType.mathml="application/mathml+xml",MimeType.mbox="application/mbox",MimeType.mscml="application/mediaservercontrol+xml",MimeType.mp4s="application/mp4",MimeType.doc="application/msword",MimeType.dot="application/msword",MimeType.mxf="application/mxf",MimeType.oda="application/oda",MimeType.opf="application/oebps-package+xml",MimeType.ogx="application/ogg",MimeType.xer="application/patch-ops-error+xml",MimeType.pdf="application/pdf",MimeType.pgp="application/pgp-encrypted",MimeType.prf="application/pics-rules",MimeType.p10="application/pkcs10",MimeType.p7s="application/pkcs7-signature",MimeType.cer="application/pkix-cert",MimeType.crl="application/pkix-crl",MimeType.pkipath="application/pkix-pkipath",MimeType.pki="application/pkixcmp",MimeType.pls="application/pls+xml",MimeType.cww="application/prs.cww",MimeType.rdf="application/rdf+xml",MimeType.rif="application/reginfo+xml",MimeType.rnc="application/relax-ng-compact-syntax",MimeType.rl="application/resource-lists+xml",MimeType.rld="application/resource-lists-diff+xml",MimeType.rs="application/rls-services+xml",MimeType.rsd="application/rsd+xml",MimeType.rss="application/rss+xml",MimeType.rtf="application/rtf",MimeType.sbml="application/sbml+xml",MimeType.scq="application/scvp-cv-request",MimeType.scs="application/scvp-cv-response",MimeType.spq="application/scvp-vp-request",MimeType.spp="application/scvp-vp-response",MimeType.sdp="application/sdp",MimeType.setpay="application/set-payment-initiation",MimeType.setreg="application/set-registration-initiation",MimeType.shf="application/shf+xml",MimeType.rq="application/sparql-query",MimeType.srx="application/sparql-results+xml",MimeType.gram="application/srgs",MimeType.grxml="application/srgs+xml",MimeType.ssml="application/ssml+xml",MimeType.plb="application/vnd.3gpp.pic-bw-large",MimeType.psb="application/vnd.3gpp.pic-bw-small",MimeType.pvb="application/vnd.3gpp.pic-bw-var",MimeType.tcap="application/vnd.3gpp2.tcap",MimeType.pwn="application/vnd.3m.post-it-notes",MimeType.aso="application/vnd.accpac.simply.aso",MimeType.imp="application/vnd.accpac.simply.imp",MimeType.acu="application/vnd.acucobol",MimeType.air="application/vnd.adobe.air-application-installer-package+zip",MimeType.xdp="application/vnd.adobe.xdp+xml",MimeType.xfdf="application/vnd.adobe.xfdf",MimeType.azf="application/vnd.airzip.filesecure.azf",MimeType.azs="application/vnd.airzip.filesecure.azs",MimeType.azw="application/vnd.amazon.ebook",MimeType.acc="application/vnd.americandynamics.acc",MimeType.ami="application/vnd.amiga.ami",MimeType.apk="application/vnd.android.package-archive",MimeType.cii="application/vnd.anser-web-certificate-issue-initiation",MimeType.fti="application/vnd.anser-web-funds-transfer-initiation",MimeType.atx="application/vnd.antix.game-component",MimeType.mpkg="application/vnd.apple.installer+xml",MimeType.swi="application/vnd.arastra.swi",MimeType.aep="application/vnd.audiograph",MimeType.mpm="application/vnd.blueice.multipass",MimeType.bmi="application/vnd.bmi",MimeType.rep="application/vnd.businessobjects",MimeType.cdxml="application/vnd.chemdraw+xml",MimeType.mmd="application/vnd.chipnuts.karaoke-mmd",MimeType.cdy="application/vnd.cinderella",MimeType.cla="application/vnd.claymore",MimeType.csp="application/vnd.commonspace",MimeType.cdbcmsg="application/vnd.contact.cmsg",MimeType.cmc="application/vnd.cosmocaller",MimeType.clkx="application/vnd.crick.clicker",MimeType.clkk="application/vnd.crick.clicker.keyboard",MimeType.clkp="application/vnd.crick.clicker.palette",MimeType.clkt="application/vnd.crick.clicker.template",MimeType.clkw="application/vnd.crick.clicker.wordbank",MimeType.wbs="application/vnd.criticaltools.wbs+xml",MimeType.pml="application/vnd.ctc-posml",MimeType.ppd="application/vnd.cups-ppd",MimeType.car="application/vnd.curl.car",MimeType.pcurl="application/vnd.curl.pcurl",MimeType.rdz="application/vnd.data-vision.rdz",MimeType.fe_launch="application/vnd.denovo.fcselayout-link",MimeType.dna="application/vnd.dna",MimeType.mlp="application/vnd.dolby.mlp",MimeType.dpg="application/vnd.dpgraph",MimeType.dfac="application/vnd.dreamfactory",MimeType.geo="application/vnd.dynageo",MimeType.mag="application/vnd.ecowin.chart",MimeType.nml="application/vnd.enliven",MimeType.esf="application/vnd.epson.esf",MimeType.msf="application/vnd.epson.msf",MimeType.qam="application/vnd.epson.quickanime",MimeType.slt="application/vnd.epson.salt",MimeType.ssf="application/vnd.epson.ssf",MimeType.ez2="application/vnd.ezpix-album",MimeType.ez3="application/vnd.ezpix-package",MimeType.fdf="application/vnd.fdf",MimeType.mseed="application/vnd.fdsn.mseed",MimeType.gph="application/vnd.flographit",MimeType.ftc="application/vnd.fluxtime.clip",MimeType.fnc="application/vnd.frogans.fnc",MimeType.ltf="application/vnd.frogans.ltf",MimeType.fsc="application/vnd.fsc.weblaunch",MimeType.oas="application/vnd.fujitsu.oasys",MimeType.oa2="application/vnd.fujitsu.oasys2",MimeType.oa3="application/vnd.fujitsu.oasys3",MimeType.fg5="application/vnd.fujitsu.oasysgp",MimeType.bh2="application/vnd.fujitsu.oasysprs",MimeType.ddd="application/vnd.fujixerox.ddd",MimeType.xdw="application/vnd.fujixerox.docuworks",MimeType.xbd="application/vnd.fujixerox.docuworks.binder",MimeType.fzs="application/vnd.fuzzysheet",MimeType.txd="application/vnd.genomatix.tuxedo",MimeType.ggb="application/vnd.geogebra.file",MimeType.ggt="application/vnd.geogebra.tool",MimeType.gmx="application/vnd.gmx",MimeType.kml="application/vnd.google-earth.kml+xml",MimeType.kmz="application/vnd.google-earth.kmz",MimeType.gac="application/vnd.groove-account",MimeType.ghf="application/vnd.groove-help",MimeType.gim="application/vnd.groove-identity-message",MimeType.grv="application/vnd.groove-injector",MimeType.gtm="application/vnd.groove-tool-message",MimeType.tpl="application/vnd.groove-tool-template",MimeType.vcg="application/vnd.groove-vcard",MimeType.zmm="application/vnd.handheld-entertainment+xml",MimeType.hbci="application/vnd.hbci",MimeType.les="application/vnd.hhe.lesson-player",MimeType.hpgl="application/vnd.hp-hpgl",MimeType.hpid="application/vnd.hp-hpid",MimeType.hps="application/vnd.hp-hps",MimeType.jlt="application/vnd.hp-jlyt",MimeType.pcl="application/vnd.hp-pcl",MimeType.pclxl="application/vnd.hp-pclxl",MimeType.x3d="application/vnd.hzn-3d-crossword",MimeType.mpy="application/vnd.ibm.minipay",MimeType.irm="application/vnd.ibm.rights-management",MimeType.sc="application/vnd.ibm.secure-container",MimeType.igl="application/vnd.igloader",MimeType.ivp="application/vnd.immervision-ivp",MimeType.ivu="application/vnd.immervision-ivu",MimeType.qbo="application/vnd.intu.qbo",MimeType.qfx="application/vnd.intu.qfx",MimeType.rcprofile="application/vnd.ipunplugged.rcprofile",MimeType.irp="application/vnd.irepository.package+xml",MimeType.xpr="application/vnd.is-xpr",MimeType.jam="application/vnd.jam",MimeType.rms="application/vnd.jcp.javame.midlet-rms",MimeType.jisp="application/vnd.jisp",MimeType.joda="application/vnd.joost.joda-archive",MimeType.karbon="application/vnd.kde.karbon",MimeType.chrt="application/vnd.kde.kchart",MimeType.kfo="application/vnd.kde.kformula",MimeType.flw="application/vnd.kde.kivio",MimeType.kon="application/vnd.kde.kontour",MimeType.ksp="application/vnd.kde.kspread",MimeType.htke="application/vnd.kenameaapp",MimeType.kia="application/vnd.kidspiration",MimeType.sse="application/vnd.kodak-descriptor",MimeType.lbd="application/vnd.llamagraphics.life-balance.desktop",MimeType.lbe="application/vnd.llamagraphics.life-balance.exchange+xml",MimeType.apr="application/vnd.lotus-approach",MimeType.pre="application/vnd.lotus-freelance",MimeType.nsf="application/vnd.lotus-notes",MimeType.org="application/vnd.lotus-organizer",MimeType.scm="application/vnd.lotus-screencam",MimeType.lwp="application/vnd.lotus-wordpro",MimeType.portpkg="application/vnd.macports.portpkg",MimeType.mcd="application/vnd.mcd",MimeType.mc1="application/vnd.medcalcdata",MimeType.cdkey="application/vnd.mediastation.cdkey",MimeType.mwf="application/vnd.mfer",MimeType.mfm="application/vnd.mfmp",MimeType.flo="application/vnd.micrografx.flo",MimeType.igx="application/vnd.micrografx.igx",MimeType.mif="application/vnd.mif",MimeType.daf="application/vnd.mobius.daf",MimeType.dis="application/vnd.mobius.dis",MimeType.mbk="application/vnd.mobius.mbk",MimeType.mqy="application/vnd.mobius.mqy",MimeType.msl="application/vnd.mobius.msl",MimeType.plc="application/vnd.mobius.plc",MimeType.txf="application/vnd.mobius.txf",MimeType.mpn="application/vnd.mophun.application",MimeType.mpc="application/vnd.mophun.certificate",MimeType.xul="application/vnd.mozilla.xul+xml",MimeType.cil="application/vnd.ms-artgalry",MimeType.cab="application/vnd.ms-cab-compressed",MimeType.xls="application/vnd.ms-excel",MimeType.xlm="application/vnd.ms-excel",MimeType.xla="application/vnd.ms-excel",MimeType.xlc="application/vnd.ms-excel",MimeType.xlt="application/vnd.ms-excel",MimeType.xlw="application/vnd.ms-excel",MimeType.xlam="application/vnd.ms-excel.addin.macroenabled.12",MimeType.xlsb="application/vnd.ms-excel.sheet.binary.macroenabled.12",MimeType.xlsm="application/vnd.ms-excel.sheet.macroenabled.12",MimeType.xltm="application/vnd.ms-excel.template.macroenabled.12",MimeType.eot="application/vnd.ms-fontobject",MimeType.chm="application/vnd.ms-htmlhelp",MimeType.ims="application/vnd.ms-ims",MimeType.lrm="application/vnd.ms-lrm",MimeType.cat="application/vnd.ms-pki.seccat",MimeType.stl="application/vnd.ms-pki.stl",MimeType.ppt="application/vnd.ms-powerpoint",MimeType.pps="application/vnd.ms-powerpoint",MimeType.pot="application/vnd.ms-powerpoint",MimeType.ppam="application/vnd.ms-powerpoint.addin.macroenabled.12",MimeType.pptm="application/vnd.ms-powerpoint.presentation.macroenabled.12",MimeType.sldm="application/vnd.ms-powerpoint.slide.macroenabled.12",MimeType.ppsm="application/vnd.ms-powerpoint.slideshow.macroenabled.12",MimeType.potm="application/vnd.ms-powerpoint.template.macroenabled.12",MimeType.docm="application/vnd.ms-word.document.macroenabled.12",MimeType.dotm="application/vnd.ms-word.template.macroenabled.12",MimeType.wpl="application/vnd.ms-wpl",MimeType.xps="application/vnd.ms-xpsdocument",MimeType.mseq="application/vnd.mseq",MimeType.mus="application/vnd.musician",MimeType.msty="application/vnd.muvee.style",MimeType.nlu="application/vnd.neurolanguage.nlu",MimeType.nnd="application/vnd.noblenet-directory",MimeType.nns="application/vnd.noblenet-sealer",MimeType.nnw="application/vnd.noblenet-web",MimeType.ngdat="application/vnd.nokia.n-gage.data",MimeType.rpst="application/vnd.nokia.radio-preset",MimeType.rpss="application/vnd.nokia.radio-presets",MimeType.edm="application/vnd.novadigm.edm",MimeType.edx="application/vnd.novadigm.edx",MimeType.ext="application/vnd.novadigm.ext",MimeType.odc="application/vnd.oasis.opendocument.chart",MimeType.otc="application/vnd.oasis.opendocument.chart-template",MimeType.odb="application/vnd.oasis.opendocument.database",MimeType.odf="application/vnd.oasis.opendocument.formula",MimeType.odft="application/vnd.oasis.opendocument.formula-template",MimeType.odg="application/vnd.oasis.opendocument.graphics",MimeType.otg="application/vnd.oasis.opendocument.graphics-template",MimeType.odi="application/vnd.oasis.opendocument.image",MimeType.oti="application/vnd.oasis.opendocument.image-template",MimeType.odp="application/vnd.oasis.opendocument.presentation",MimeType.ods="application/vnd.oasis.opendocument.spreadsheet",MimeType.ots="application/vnd.oasis.opendocument.spreadsheet-template",MimeType.odt="application/vnd.oasis.opendocument.text",MimeType.otm="application/vnd.oasis.opendocument.text-master",MimeType.ott="application/vnd.oasis.opendocument.text-template",MimeType.oth="application/vnd.oasis.opendocument.text-web",MimeType.xo="application/vnd.olpc-sugar",MimeType.dd2="application/vnd.oma.dd2+xml",MimeType.oxt="application/vnd.openofficeorg.extension",MimeType.pptx="application/vnd.openxmlformats-officedocument.presentationml.presentation",MimeType.sldx="application/vnd.openxmlformats-officedocument.presentationml.slide",MimeType.ppsx="application/vnd.openxmlformats-officedocument.presentationml.slideshow",MimeType.potx="application/vnd.openxmlformats-officedocument.presentationml.template",MimeType.xlsx="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",MimeType.xltx="application/vnd.openxmlformats-officedocument.spreadsheetml.template",MimeType.docx="application/vnd.openxmlformats-officedocument.wordprocessingml.document",MimeType.dotx="application/vnd.openxmlformats-officedocument.wordprocessingml.template",MimeType.dp="application/vnd.osgi.dp",MimeType.str="application/vnd.pg.format",MimeType.ei6="application/vnd.pg.osasli",MimeType.efif="application/vnd.picsel",MimeType.plf="application/vnd.pocketlearn",MimeType.pbd="application/vnd.powerbuilder6",MimeType.box="application/vnd.previewsystems.box",MimeType.mgz="application/vnd.proteus.magazine",MimeType.qps="application/vnd.publishare-delta-tree",MimeType.ptid="application/vnd.pvi.ptid1",MimeType.mxl="application/vnd.recordare.musicxml",MimeType.musicxml="application/vnd.recordare.musicxml+xml",MimeType.cod="application/vnd.rim.cod",MimeType.rm="application/vnd.rn-realmedia",MimeType.link66="application/vnd.route66.link66+xml",MimeType.see="application/vnd.seemail",MimeType.sema="application/vnd.sema",MimeType.semd="application/vnd.semd",MimeType.semf="application/vnd.semf",MimeType.ifm="application/vnd.shana.informed.formdata",MimeType.itp="application/vnd.shana.informed.formtemplate",MimeType.iif="application/vnd.shana.informed.interchange",MimeType.ipk="application/vnd.shana.informed.package",MimeType.mmf="application/vnd.smaf",MimeType.teacher="application/vnd.smart.teacher",MimeType.dxp="application/vnd.spotfire.dxp",MimeType.sfs="application/vnd.spotfire.sfs",MimeType.sdc="application/vnd.stardivision.calc",MimeType.sda="application/vnd.stardivision.draw",MimeType.sdd="application/vnd.stardivision.impress",
MimeType.smf="application/vnd.stardivision.math",MimeType.sdw="application/vnd.stardivision.writer",MimeType.vor="application/vnd.stardivision.writer",MimeType.sgl="application/vnd.stardivision.writer-global",MimeType.sxc="application/vnd.sun.xml.calc",MimeType.stc="application/vnd.sun.xml.calc.template",MimeType.sxd="application/vnd.sun.xml.draw",MimeType.std="application/vnd.sun.xml.draw.template",MimeType.sxi="application/vnd.sun.xml.impress",MimeType.sti="application/vnd.sun.xml.impress.template",MimeType.sxm="application/vnd.sun.xml.math",MimeType.sxw="application/vnd.sun.xml.writer",MimeType.sxg="application/vnd.sun.xml.writer.global",MimeType.stw="application/vnd.sun.xml.writer.template",MimeType.svd="application/vnd.svd",MimeType.xsm="application/vnd.syncml+xml",MimeType.bdm="application/vnd.syncml.dm+wbxml",MimeType.xdm="application/vnd.syncml.dm+xml",MimeType.tao="application/vnd.tao.intent-module-archive",MimeType.tmo="application/vnd.tmobile-livetv",MimeType.tpt="application/vnd.trid.tpt",MimeType.mxs="application/vnd.triscape.mxs",MimeType.tra="application/vnd.trueapp",MimeType.utz="application/vnd.uiq.theme",MimeType.umj="application/vnd.umajin",MimeType.unityweb="application/vnd.unity",MimeType.uoml="application/vnd.uoml+xml",MimeType.vcx="application/vnd.vcx",MimeType.vis="application/vnd.visionary",MimeType.vsf="application/vnd.vsf",MimeType.wbxml="application/vnd.wap.wbxml",MimeType.wmlc="application/vnd.wap.wmlc",MimeType.wmlsc="application/vnd.wap.wmlscriptc",MimeType.wtb="application/vnd.webturbo",MimeType.wpd="application/vnd.wordperfect",MimeType.wqd="application/vnd.wqd",MimeType.stf="application/vnd.wt.stf",MimeType.xar="application/vnd.xara",MimeType.xfdl="application/vnd.xfdl",MimeType.hvd="application/vnd.yamaha.hv-dic",MimeType.hvs="application/vnd.yamaha.hv-script",MimeType.hvp="application/vnd.yamaha.hv-voice",MimeType.osf="application/vnd.yamaha.openscoreformat",MimeType.osfpvg="application/vnd.yamaha.openscoreformat.osfpvg+xml",MimeType.saf="application/vnd.yamaha.smaf-audio",MimeType.spf="application/vnd.yamaha.smaf-phrase",MimeType.cmp="application/vnd.yellowriver-custom-menu",MimeType.zaz="application/vnd.zzazz.deck+xml",MimeType.vxml="application/voicexml+xml",MimeType.hlp="application/winhlp",MimeType.wsdl="application/wsdl+xml",MimeType.wspolicy="application/wspolicy+xml",MimeType.abw="application/x-abiword",MimeType.ace="application/x-ace-compressed",MimeType.aam="application/x-authorware-map",MimeType.aas="application/x-authorware-seg",MimeType.bcpio="application/x-bcpio",MimeType.torrent="application/x-bittorrent",MimeType.bz="application/x-bzip",MimeType.vcd="application/x-cdlink",MimeType.chat="application/x-chat",MimeType.pgn="application/x-chess-pgn",MimeType.cpio="application/x-cpio",MimeType.csh="application/x-csh",MimeType.wad="application/x-doom",MimeType.ncx="application/x-dtbncx+xml",MimeType.dtb="application/x-dtbook+xml",MimeType.res="application/x-dtbresource+xml",MimeType.dvi="application/x-dvi",MimeType.bdf="application/x-font-bdf",MimeType.gsf="application/x-font-ghostscript",MimeType.psf="application/x-font-linux-psf",MimeType.otf="application/x-font-otf",MimeType.pcf="application/x-font-pcf",MimeType.snf="application/x-font-snf",MimeType.ttf="application/x-font-ttf",MimeType.ttc="application/x-font-ttf",MimeType.woff="application/font-woff",MimeType.spl="application/x-futuresplash",MimeType.gnumeric="application/x-gnumeric",MimeType.gtar="application/x-gtar",MimeType.hdf="application/x-hdf",MimeType.jnlp="application/x-java-jnlp-file",MimeType.latex="application/x-latex",MimeType.application="application/x-ms-application",MimeType.wmd="application/x-ms-wmd",MimeType.wmz="application/x-ms-wmz",MimeType.xbap="application/x-ms-xbap",MimeType.mdb="application/x-msaccess",MimeType.obd="application/x-msbinder",MimeType.crd="application/x-mscardfile",MimeType.clp="application/x-msclip",MimeType.exe="application/x-msdownload",MimeType.dll="application/x-msdownload",MimeType.com="application/x-msdownload",MimeType.bat="application/x-msdownload",MimeType.msi="application/x-msdownload",MimeType.wmf="application/x-msmetafile",MimeType.mny="application/x-msmoney",MimeType.pub="application/x-mspublisher",MimeType.scd="application/x-msschedule",MimeType.trm="application/x-msterminal",MimeType.wri="application/x-mswrite",MimeType.p7r="application/x-pkcs7-certreqresp",MimeType.rar="application/x-rar-compressed",MimeType.sh="application/x-sh",MimeType.shar="application/x-shar",MimeType.swf="application/x-shockwave-flash",MimeType.xap="application/x-silverlight-app",MimeType.sit="application/x-stuffit",MimeType.sitx="application/x-stuffitx",MimeType.sv4cpio="application/x-sv4cpio",MimeType.sv4crc="application/x-sv4crc",MimeType.tar="application/x-tar",MimeType.tcl="application/x-tcl",MimeType.tex="application/x-tex",MimeType.tfm="application/x-tex-tfm",MimeType.texinfo="application/x-texinfo",MimeType.texi="application/x-texinfo",MimeType.ustar="application/x-ustar",MimeType.src="application/x-wais-source",MimeType.fig="application/x-xfig",MimeType.xpi="application/x-xpinstall",MimeType.xenc="application/xenc+xml",MimeType.xhtml="application/xhtml+xml",MimeType.xht="application/xhtml+xml",MimeType.xml="application/xml",MimeType.xsl="application/xml",MimeType.dtd="application/xml-dtd",MimeType.xop="application/xop+xml",MimeType.xslt="application/xslt+xml",MimeType.xspf="application/xspf+xml",MimeType.zip="application/zip",MimeType.adp="audio/adpcm",MimeType.mp4a="audio/mp4",MimeType.m4a="audio/mp4a-latm",MimeType.m4p="audio/mp4a-latm",MimeType.mpga="audio/mpeg",MimeType.mp2="audio/mpeg",MimeType.mp2a="audio/mpeg",MimeType.mp3="audio/mpeg",MimeType.m2a="audio/mpeg",MimeType.m3a="audio/mpeg",MimeType.oga="audio/ogg",MimeType.ogg="audio/ogg",MimeType.spx="audio/ogg",MimeType.eol="audio/vnd.digital-winds",MimeType.dts="audio/vnd.dts",MimeType.dtshd="audio/vnd.dts.hd",MimeType.lvp="audio/vnd.lucent.voice",MimeType.pya="audio/vnd.ms-playready.media.pya",MimeType.ecelp4800="audio/vnd.nuera.ecelp4800",MimeType.ecelp7470="audio/vnd.nuera.ecelp7470",MimeType.ecelp9600="audio/vnd.nuera.ecelp9600",MimeType.aac="audio/x-aac",MimeType.m3u="audio/x-mpegurl",MimeType.wax="audio/x-ms-wax",MimeType.wma="audio/x-ms-wma",MimeType.rmp="audio/x-pn-realaudio-plugin",MimeType.wav="audio/x-wav",MimeType.cdx="chemical/x-cdx",MimeType.cif="chemical/x-cif",MimeType.cmdf="chemical/x-cmdf",MimeType.cml="chemical/x-cml",MimeType.csml="chemical/x-csml",MimeType.xyz="chemical/x-xyz",MimeType.bmp="image/bmp",MimeType.cgm="image/cgm",MimeType.g3="image/g3fax",MimeType.gif="image/gif",MimeType.ief="image/ief",MimeType.jp2="image/jp2",MimeType.jpeg="image/jpeg",MimeType.jpg="image/jpeg",MimeType.jpe="image/jpeg",MimeType.png="image/png",MimeType.btif="image/prs.btif",MimeType.svg="image/svg+xml",MimeType.svgz="image/svg+xml",MimeType.tiff="image/tiff",MimeType.tif="image/tiff",MimeType.psd="image/vnd.adobe.photoshop",MimeType.dwg="image/vnd.dwg",MimeType.dxf="image/vnd.dxf",MimeType.fbs="image/vnd.fastbidsheet",MimeType.fpx="image/vnd.fpx",MimeType.fst="image/vnd.fst",MimeType.mmr="image/vnd.fujixerox.edmics-mmr",MimeType.rlc="image/vnd.fujixerox.edmics-rlc",MimeType.mdi="image/vnd.ms-modi",MimeType.npx="image/vnd.net-fpx",MimeType.wbmp="image/vnd.wap.wbmp",MimeType.xif="image/vnd.xiff",MimeType.ras="image/x-cmu-raster",MimeType.cmx="image/x-cmx",MimeType.ico="image/x-icon",MimeType.pcx="image/x-pcx",MimeType.pnm="image/x-portable-anymap",MimeType.pbm="image/x-portable-bitmap",MimeType.pgm="image/x-portable-graymap",MimeType.ppm="image/x-portable-pixmap",MimeType.rgb="image/x-rgb",MimeType.xbm="image/x-xbitmap",MimeType.xpm="image/x-xpixmap",MimeType.xwd="image/x-xwindowdump",MimeType.dwf="model/vnd.dwf",MimeType.gdl="model/vnd.gdl",MimeType.gtw="model/vnd.gtw",MimeType.mts="model/vnd.mts",MimeType.vtu="model/vnd.vtu",MimeType.css="text/css",MimeType.csv="text/csv",MimeType.html="text/html",MimeType.htm="text/html",MimeType.txt="text/plain",MimeType.text="text/plain",MimeType.dsc="text/prs.lines.tag",MimeType.rtx="text/richtext",MimeType.tsv="text/tab-separated-values",MimeType.curl="text/vnd.curl",MimeType.dcurl="text/vnd.curl.dcurl",MimeType.scurl="text/vnd.curl.scurl",MimeType.mcurl="text/vnd.curl.mcurl",MimeType.fly="text/vnd.fly",MimeType.flx="text/vnd.fmi.flexstor",MimeType.gv="text/vnd.graphviz",MimeType.spot="text/vnd.in3d.spot",MimeType.jad="text/vnd.sun.j2me.app-descriptor",MimeType.wml="text/vnd.wap.wml",MimeType.wmls="text/vnd.wap.wmlscript",MimeType.java="text/x-java-source",MimeType.etx="text/x-setext",MimeType.uu="text/x-uuencode",MimeType.vcs="text/x-vcalendar",MimeType.vcf="text/x-vcard",MimeType["3gp"]="video/3gpp",MimeType["3g2"]="video/3gpp2",MimeType.h261="video/h261",MimeType.h263="video/h263",MimeType.h264="video/h264",MimeType.jpgv="video/jpeg",MimeType.mp4="video/mp4",MimeType.mp4v="video/mp4",MimeType.mpg4="video/mp4",MimeType.m4v="video/mp4",MimeType.webm="video/webm",MimeType.mpeg="video/mpeg",MimeType.mpg="video/mpeg",MimeType.mpe="video/mpeg",MimeType.m1v="video/mpeg",MimeType.m2v="video/mpeg",MimeType.ogv="video/ogg",MimeType.qt="video/quicktime",MimeType.mov="video/quicktime",MimeType.fvt="video/vnd.fvt",MimeType.pyv="video/vnd.ms-playready.media.pyv",MimeType.viv="video/vnd.vivo",MimeType.f4v="video/x-f4v",MimeType.fli="video/x-fli",MimeType.flv="video/x-flv",MimeType.wm="video/x-ms-wm",MimeType.wmv="video/x-ms-wmv",MimeType.wmx="video/x-ms-wmx",MimeType.wvx="video/x-ms-wvx",MimeType.avi="video/x-msvideo",MimeType.movie="video/x-sgi-movie",MimeType.ice="x-conference/x-cooltalk",MimeType.indd="application/x-indesign",MimeType.dat="application/octet-stream",MimeType.gz="application/x-gzip",MimeType.tgz="application/x-tar",MimeType.tar="application/x-tar",function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d){var c=localStorage.language||window.navigator.language||navigator.browserLanguage;e.languageDefault="es",s.currentLanguage=c||e.languageDefault,e.languageSelected=c||e.languageDefault,e.languageSelected=e.languageSelected.split("-")[0],e.server="",(window.location.host.includes("localhost")||window.location.host.includes("192.168.2."))&&(e.server="http://localhost:8000"),e.languages=[{code:"es",name:s.getString("Español")},{code:"en",name:s.getString("Inglés")},{code:"fr",name:s.getString("Francés")}],e.changeLanguage=function(e){localStorage.language=e,window.location.reload()},e.hasPermission=function(e,a){if(i.currentUser&&i.currentUser.urlPermissions){var t=d.URLs[e],n=a;("LIST"===a||"POST"===a)&&(t=t.replace(/:([^\/]*)[\/]$/g,""),"LIST"===a&&(n="GET")),t=t.replace(/:([^\/]*)[\/]/g,":/");var s="/"+t+"["+n.toLowerCase()+"]";return!!i.currentUser.urlPermissions[s]}return!0},e.showError=function(e){o.errorMessage(e)};var m=e.$on("$stateChangeStart",function(){e.loadingProgress=!0}),u=e.$on("$stateChangeSuccess",function(){a(function(){e.loadingProgress=!1}),a(function(){if(r.getActiveItem()){var a=r.getActiveItem().node;a.hidden()&&e.$broadcast(n.ON_UNAUTHORIZED_REQUEST,i.currentUser)}},500)});e.state=t,e.$on("$destroy",function(){m(),u()}),e.$on(n.ON_UNAUTHORIZED_REQUEST,function(e,a){n.LOGIN_STATE?a?t.go(n.LOGIN_STATE_SUCCESS):t.go(n.LOGIN_STATE):console.warn("No ha definido una ruta para el formulario de login")}),e.$on(n.ON_LOGOUT_BROADCAST,function(){n.LOGIN_STATE?(t.go(n.LOGIN_STATE),window.location.reload()):console.warn("No ha definido una ruta para el formulario de login")}),e.$on(n.ON_LOGIN_BROADCAST,function(e,a){n.LOGIN_STATE_SUCCESS?"Manager"===a.type_user?t.go("app.programs"):t.go(n.LOGIN_STATE_SUCCESS):console.warn("No ha definido una ruta para la redirección despues del login")})}e.$inject=["$rootScope","$timeout","$state","authSettings","AuthService","gettextCatalog","msNavigationService","NotifyService","fuseTheming","api"],angular.module("fuse").run(e)}(),function(){"use strict";function e(e,a,t){t.html5Mode(!0),a.otherwise(function(e){e.get("$state").go("app.leads.board")});var n;angular.injector(["ngCookies"]).invoke(["$cookies",function(e){n=e}]);var i=n.get("layoutStyle")||"verticalNavigation",s={verticalNavigation:{main:"app/core/layouts/vertical-navigation.html",toolbar:"app/toolbar/layouts/vertical-navigation/toolbar.html",navigation:"app/navigation/layouts/vertical-navigation/navigation.html"},verticalNavigationFullwidthToolbar:{main:"app/core/layouts/vertical-navigation-fullwidth-toolbar.html",toolbar:"app/toolbar/layouts/vertical-navigation-fullwidth-toolbar/toolbar.html",navigation:"app/navigation/layouts/vertical-navigation/navigation.html"},verticalNavigationFullwidthToolbar2:{main:"app/core/layouts/vertical-navigation-fullwidth-toolbar-2.html",toolbar:"app/toolbar/layouts/vertical-navigation-fullwidth-toolbar-2/toolbar.html",navigation:"app/navigation/layouts/vertical-navigation/navigation.html"},horizontalNavigation:{main:"app/core/layouts/horizontal-navigation.html",toolbar:"app/toolbar/layouts/horizontal-navigation/toolbar.html",navigation:"app/navigation/layouts/horizontal-navigation/navigation.html"},contentOnly:{main:"app/core/layouts/content-only.html",toolbar:"",navigation:""},contentWithToolbar:{main:"app/core/layouts/content-with-toolbar.html",toolbar:"app/toolbar/layouts/content-with-toolbar/toolbar.html",navigation:""}};e.state("app",{"abstract":!0,views:{"main@":{templateUrl:s[i].main,controller:"MainController as vm"},"toolbar@app":{templateUrl:s[i].toolbar,controller:"ToolbarController as vm"},"navigation@app":{templateUrl:s[i].navigation,controller:"NavigationController as vm"}}})}e.$inject=["$stateProvider","$urlRouterProvider","$locationProvider"],angular.module("fuse").config(e)}(),function(){"use strict";function e(e,a){var t=this;e.domain="",t.themes=a.themes,window.location.host.includes("sail"),a.setActiveTheme("sail"),e.domain="sail"}e.$inject=["$rootScope","fuseTheming"],angular.module("fuse").controller("IndexController",e)}(),function(){"use strict";angular.module("fuse")}(),function(){"use strict";function e(e,a,t,n,i,s,r,o,l,d){function c(e){if("string"!=typeof e)throw new TypeError("parameter ‘unicodeString’ is not a string");const a=e.replace(/[\u0080-\u07ff]/g,function(e){var a=e.charCodeAt(0);return String.fromCharCode(192|a>>6,128|63&a)}).replace(/[\u0800-\uffff]/g,function(e){var a=e.charCodeAt(0);return String.fromCharCode(224|a>>12,128|a>>6&63,128|63&a)});return a}e.defaults.xsrfHeaderName="X-CSRFToken",e.defaults.xsrfCookieName="csrftoken",o.setPrefix("config"),a.defaults.stripTrailingSlashes=!1,t.theme("toast-error"),t.theme("toast-success"),i.months=["Enero","Febrero","Marzo","Abril","Mayo","Junio","Julio","Agosto","Septiembre","Octubre","Noviembre","Diciembre"],i.shortMonths=["Ene","Feb","Mar","Abr","May","Jun","Jul","Ago","Sep","Oct","Nov","Dic"],i.days=["Domingo","Lunes","Martes","Miercoles","Jueves","Viernes","Sábado"],i.shortDays=["Do","Lu","Ma","Mi","Ju","Vi","Sá"],i.firstDayOfWeek=1,i.weekNumberFormatter=function(e){return"Semana "+e},i.msgCalendar="Calendario",i.msgOpenCalendar="Abrir calendario",i.parseDate=function(e){var a=s(e,"D/M/YYYY",!0);return a.isValid()?a.toDate():new Date(NaN)},i.formatDate=function(e){var a=s(e);return a.isValid()?a.format("D/M/YYYY"):""},r.setPath("app/utils/templates/dirPagination.tpl.html"),n.decorator("mdButtonDirective",["$delegate",function(e){function a(e,a){if(angular.isUndefined(a.debouceClick))return n(e,a);""!==a.debouceClick&&(s=a.debouceClick),i++,a.ngClick=s+i+" = ("+a.ngClick+" | promiseStatus)";var t="";void 0===a.ngDisabled?t='ng-disabled="'+s+i+'.inProgress"':a.ngDisabled="("+a.ngDisabled+") || ("+s+i+".inProgress )";var r="undefined"==typeof a.type?"button":a.type,o="undefined"==typeof a.layout?"row":a.layout,l="undefined"==typeof a.layoutAlign?"center center":a.layoutAlign;return"<button "+t+' class="md-button" type="'+r+'"><ng-transclude layout="'+o+'" layout-align="'+l+'"></ng-transclude><md-progress-circular ng-show="'+s+i+'.inProgress" class="for-button" md-diameter="16" md-mode="indeterminate"></md-progress-circular> </button>'}var t=e[0],n=t.template,i=0,s="__promiseStatusVar";return t.template=a,e}]),n.decorator("inputDirective",["$delegate",function(e){var a=e[0];return a.compile=function(){return function(e,t,n,i){a.link.pre.apply(this,arguments),t.on("change",function(){i[0]&&e.$apply(function(){i[0].$setValidity("serverError",!0)})}),t.on("focus",function(){i[0]&&i[0].$setValidity("serverError",!0)}),t.on("keydown",function(){i[1]&&e.$apply(function(){i[1].$setValidity("serverError",!0)})})}},e}]),n.decorator("textareaDirective",["$delegate",function(e){var a=e[0];return a.compile=function(){return function(e,t,n,i){a.link.pre.apply(this,arguments),t.on("change",function(){i[0]&&e.$apply(function(){i[0].$setValidity("serverError",!0)})}),t.on("focus",function(){i[0]&&i[0].$setValidity("serverError",!0)}),t.on("keydown",function(){i[1]&&e.$apply(function(){i[1].$setValidity("serverError",!0)})})}},e}]),n.decorator("selectDirective",["$delegate",function(e){var a=e[0];return a.compile=function(){return function(e,t,n,i){var s=t.parent().find("md-select"),r=t.closest("form").attr("name"),o=s.attr("name");a.link.pre.apply(this,arguments),s.on("focus",function(){e[r]&&e[r][o]&&e[r][o].$setValidity("serverError",!0)})}},e}]),n.decorator("taOptions",["$delegate",function(e){return e.toolbar=[["bold","italics","underline","ul","ol","quote"]],e.classes={focussed:"focussed",toolbar:"ta-toolbar",toolbarGroup:"ta-group",toolbarButton:"md-button",toolbarButtonActive:"active",disabled:"",textEditor:"form-control",htmlEditor:"form-control"},e}]),n.decorator("taTools",["$delegate",function(e){return e.quote.iconclass="icon-format-quote",e.bold.iconclass="icon-format-bold",e.italics.iconclass="icon-format-italic",e.underline.iconclass="icon-format-underline",e.strikeThrough.iconclass="icon-format-strikethrough",e.ul.iconclass="icon-format-list-bulleted",e.ol.iconclass="icon-format-list-numbers",e.redo.iconclass="icon-redo",e.undo.iconclass="icon-undo",e.clear.iconclass="icon-close-circle-outline",e.justifyLeft.iconclass="icon-format-align-left",e.justifyCenter.iconclass="icon-format-align-center",e.justifyRight.iconclass="icon-format-align-right",e.justifyFull.iconclass="icon-format-align-justify",e.indent.iconclass="icon-format-indent-increase",e.outdent.iconclass="icon-format-indent-decrease",e.html.iconclass="icon-code-tags",e.insertImage.iconclass="icon-file-image-box",e.insertLink.iconclass="icon-link",e.insertVideo.iconclass="icon-filmstrip",e}]),n.decorator("mdRadioGroupDirective",["$delegate",function(e){var a=e[0];return a.compile=function(){return function(e,t,n,i){a.link.pre.apply(this,arguments),t.on("mousedown",function(){i[1]&&e.$apply(function(){i[1].$setValidity("serverError",!0)})}),t.on("keydown",function(){i[1]&&e.$apply(function(){i[1].$setValidity("serverError",!0)})})}},e}]),l.defaults={target:"/api/documents/",headers:function(e,a,t){return{Authorization:"Token "+(localStorage["config.token"]?localStorage["config.token"].split('"')[1]:"")}},testChunks:!1,chunkSize:0x4000000000000,fileParameterName:"document",query:function(e){return{name:c(e.name)}}},l.on("catchAll",function(e,a){if("error"===e){var t=JSON.parse(a);d.$get().errorMessage(t.detail)}})}e.$inject=["$httpProvider","$resourceProvider","$mdThemingProvider","$provide","$mdDateLocaleProvider","moment","paginationTemplateProvider","localStorageServiceProvider","flowFactoryProvider","NotifyServiceProvider"],angular.module("fuse").config(e)}(),function(){"use strict";function e(e){var a={},t={method:"GET",params:{page:"all"},isArray:!0},n={method:"GET",params:{page:"all"}},i={queryAll:t,queryAllObj:n,create:{method:"POST"},update:{method:"PATCH"}};a.baseUrl="api/",a.URLs={},a.URLs.users=a.baseUrl+"user/:id/",a.URLs.usersComplexCreate=a.baseUrl+"user/complex_create/",a.URLs.usersComplexUpdate=a.baseUrl+"user/:id/complex_update/",a.URLs.sessionStatus=a.baseUrl+"session_historic/change_forced_online_status/",a.URLs.removeConcessionaire=a.baseUrl+"user_concession/:id/",a.URLs.removeSFA=a.baseUrl+"sfa/:id/",a.URLs.admins=a.baseUrl+"user/:concessionaire/concession_manager_or_admin/",a.URLs.leads=a.baseUrl+"lead/:id/",a.URLs.leadsReactivate=a.baseUrl+"lead/:id/reactivate/",a.URLs.leadsMail=a.baseUrl+"lead/:id/email/",a.URLs.leadsStatus=a.baseUrl+"lead/:id/change_status/",a.URLs.kpis=a.baseUrl+"lead_calendar/kpis/",a.URLs.leadActions=a.baseUrl+"lead_actions/",a.URLs.leadActionsColumn=a.baseUrl+"lead_actions/get_column/",a.URLs.leadsByUser=a.baseUrl+"user/:id/list_user_leads/",a.URLs.setLeadsByUser=a.baseUrl+"user/:id/set_user_leads/",a.URLs.vehicles=a.baseUrl+"vehicles/:id/",a.URLs.appraisals=a.baseUrl+"appraisal/:id/",a.URLs.leadsNews=a.baseUrl+"lead_col/?status=new",a.URLs.leadsAttended=a.baseUrl+"lead_col/?status=attended",a.URLs.leadsCommercialManagements=a.baseUrl+"lead_col/?status=commercial_management",a.URLs.leadsTracings=a.baseUrl+"lead_col/?status=tracing",a.URLs.leadsEnds=a.baseUrl+"lead_col/?status=end",a.URLs.leadsHistory=a.baseUrl+"lead_history/:id/get_history/",a.URLs.leadsIncomingCalls=a.baseUrl+"lead-historic/:id/incoming_calls/",a.URLs.leadsOutgoingCalls=a.baseUrl+"lead-historic/:id/outgoing_calls/",a.URLs.leadsClone=a.baseUrl+"lead/:id/clone/",a.URLs.tasks=a.baseUrl+"task/:id/",a.URLs.taskTypes=a.baseUrl+"task/options/:id/",a.URLs.concessionaires=a.baseUrl+"concessionaire/:id/",a.URLs.concessionairesConfig=a.baseUrl+"concessionaire/config/",a.URLs.removeSource=a.baseUrl+"source/:id/",a.URLs.gasTypes=a.baseUrl+"gas_type/:id/",a.URLs.provinces=a.baseUrl+"provinces/:id/",a.URLs.localities=a.baseUrl+"localities/:id/",a.URLs.countries=a.baseUrl+"countries/:id/",a.URLs.brands=a.baseUrl+"vehicles_brand/:id/",a.URLs.models=a.baseUrl+"vehicles_model/:id/",a.URLs.versions=a.baseUrl+"vehicles_version/:id/",a.URLs.clients=a.baseUrl+"clients/:id/",a.URLs.businessActivity=a.baseUrl+"business_activity/:id/",a.URLs.sectors=a.baseUrl+"business_sector/:id/",a.URLs.whatsapp=a.baseUrl+"lead_whatsapp_message/:id/",a.URLs.origins=a.baseUrl+"origin/:id/",a.URLs.channels=a.baseUrl+"channel/:id/",a.URLs.sources=a.baseUrl+"source/:id/",a.URLs.acds=a.baseUrl+"netelip/call_manager/:id/",a.URLs.netelip=a.baseUrl+"netelip/call_control_lead/:id/",a.URLs.phones=a.baseUrl+"phone/:id/",a.URLs.emails=a.baseUrl+"email/:id/",a.URLs.calendar=a.baseUrl+"lead_calendar/",a.URLs.dashboards=a.baseUrl+"concession-dashboard/:id/",a.URLs.benchmark=a.baseUrl+"lead/dashboard_benchmark/:id/",a.URLs.servicelevel=a.baseUrl+"lead/dashboard_service_level/:id/",a.URLs.voiceService=a.baseUrl+"lead/dashboard_voice_service_level/:id/",a.URLs.digitalService=a.baseUrl+"lead/dashboard_digital_service_level/:id/",a.URLs.click2calls=a.baseUrl+"netelip/call_control_lead/click2call/:id/",a.URLs.leadsHubspot=a.baseUrl+"lead/:id/update_hubspot/";var s="https:"===window.location.protocol?"wss":"ws";return a.socket=s+"://"+window.location.host+"/websocket/",(window.location.host.includes("localhost")||window.location.host.includes("192.168.2."))&&(a.socket=s+"://localhost:8000/ws/"),a.wsAcds=a.socket+"netelip/",a.users=e(a.URLs.users,{id:"@id"},{queryAll:t,queryAllObj:n,create:{url:a.URLs.usersComplexCreate,method:"POST"},update:{url:a.URLs.usersComplexUpdate,method:"PATCH"},removeConcessionaire:{url:a.URLs.removeConcessionaire,method:"DELETE"},removeSFA:{url:a.URLs.removeSFA,method:"DELETE"},sessionStatus:{url:a.URLs.sessionStatus,method:"PATCH"}}),a.admins=e(a.URLs.admins,{concessionaire:"@concessionaire"},i),a.leads=e(a.URLs.leads,{id:"@id"},{queryAll:t,queryAllObj:n,create:{method:"POST"},update:{method:"PATCH"},clone:{url:a.URLs.leadsClone,method:"POST"},leadsStatus:{url:a.URLs.leadsStatus,method:"PATCH"},leadsHubspot:{url:a.URLs.leadsHubspot,method:"POST"},kpis:{url:a.URLs.kpis,method:"GET"}}),a.leadActions=e(a.URLs.leadActions,{id:"@id"},i),a.leadActionsColumn=e(a.URLs.leadActionsColumn,{id:"@id"},i),a.leadsNews=e(a.URLs.leadsNews,{id:"@id"},i),a.leadsReactivate=e(a.URLs.leadsReactivate,{id:"@id"},i),a.leadsMail=e(a.URLs.leadsMail,{id:"@id"},i),a.leadsAttended=e(a.URLs.leadsAttended,{id:"@id"},i),a.leadsCommercialManagements=e(a.URLs.leadsCommercialManagements,{id:"@id"},i),a.leadsTracings=e(a.URLs.leadsTracings,{id:"@id"},i),a.leadsEnds=e(a.URLs.leadsEnds,{id:"@id"},i),a.leadsHistory=e(a.URLs.leadsHistory,{id:"@id"},i),a.leadsIncomingCalls=e(a.URLs.leadsIncomingCalls,{id:"@id"},i),a.leadsOutgoingCalls=e(a.URLs.leadsOutgoingCalls,{id:"@id"},i),a.leadsByUser=e(a.URLs.leadsByUser,{id:"@id"},i),a.setLeadsByUser=e(a.URLs.setLeadsByUser,{id:"@id"},i),a.vehicles=e(a.URLs.vehicles,{id:"@id"},i),a.appraisals=e(a.URLs.appraisals,{id:"@id"},i),a.tasks=e(a.URLs.tasks,{id:"@id"},i),a.taskTypes=e(a.URLs.taskTypes,{id:"@id"},i),a.concessionaires=e(a.URLs.concessionaires,{id:"@id"},{queryAll:t,queryAllObj:n,create:{method:"POST"},update:{method:"PATCH"},removeSource:{url:a.URLs.removeSource,method:"DELETE"},config:{url:a.URLs.concessionairesConfig,method:"GET"}}),a.gasTypes=e(a.URLs.gasTypes,{id:"@id"},i),a.provinces=e(a.URLs.provinces,{id:"@id"},i),a.localities=e(a.URLs.localities,{id:"@id"},i),a.countries=e(a.URLs.countries,{id:"@id"},i),a.brands=e(a.URLs.brands,{id:"@id"},i),a.models=e(a.URLs.models,{id:"@id"},i),a.versions=e(a.URLs.versions,{id:"@id"},i),a.clients=e(a.URLs.clients,{id:"@id"},i),a.businessActivity=e(a.URLs.businessActivity,{id:"@id"},i),a.sectors=e(a.URLs.sectors,{id:"@id"},i),a.whatsapp=e(a.URLs.whatsapp,{id:"@id"},i),a.origins=e(a.URLs.origins,{id:"@id"},i),a.channels=e(a.URLs.channels,{id:"@id"},i),a.sources=e(a.URLs.sources,{id:"@id"},i),a.acds=e(a.URLs.acds,{id:"@id"},{queryAll:t,queryAllObj:n,create:{url:a.URLs.netelip,method:"POST"},update:{url:a.URLs.netelip,method:"PATCH"}}),a.phones=e(a.URLs.phones,{id:"@id"},i),a.emails=e(a.URLs.emails,{id:"@id"},i),a.dashboards=e(a.URLs.dashboards,{id:"@id"},i),a.benchmark=e(a.URLs.benchmark,{id:"@id"},i),a.servicelevel=e(a.URLs.servicelevel,{id:"@id"},i),a.voiceService=e(a.URLs.voiceService,{id:"@id"},i),a.digitalService=e(a.URLs.digitalService,{id:"@id"},i),a.click2calls=e(a.URLs.click2calls,{id:"@id"},i),a}e.$inject=["$resource"],angular.module("fuse").factory("api",e)}(),angular.module("fuse").run(["$templateCache",function(e){e.put("app/core/layouts/content-only.html",'<div id="layout-content-only" class="template-layout" layout="column" flex><md-content id="content" \nclass="animate-slide-up md-hue-2" ui-view="content" flex></md-content></div>'),e.put("app/core/layouts/content-with-toolbar.html",'<div id="layout-content-with-toolbar" class="template-layout" layout="column" flex><md-toolbar id="toolbar" \nclass="md-menu-toolbar md-whiteframe-1dp" ui-view="toolbar"></md-toolbar><md-content id="content" \nclass="animate-slide-up md-hue-2" ui-view="content" flex></md-content><md-sidenav id="quick-panel" \nclass="md-sidenav-right md-whiteframe-4dp" md-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav>\n</div>'),e.put("app/core/layouts/horizontal-navigation.html",'<div id="layout-horizontal-navigation" class="template-layout" layout="column" flex><div \nid="toolbar-navigation-container" class="md-whiteframe-1dp" layout="column" layout-align="space-between start">\n<md-toolbar id="toolbar" class="md-menu-toolbar md-whiteframe-1dp" ui-view="toolbar"></md-toolbar><div \nid="horizontal-navigation" ui-view="navigation" layout="row" layout-align="start end" flex></div><ms-breadcrumb \nid="breadcrumb" hide-xs hide-sm></ms-breadcrumb></div><ms-breadcrumb id="breadcrumb" hide-gt-sm></ms-breadcrumb><div \nid="content-container" flex layout="column"><md-content id="content" class="animate-slide-up md-hue-2" ms-scroll \nui-view="content" flex></md-content></div><md-sidenav id="quick-panel" class="md-sidenav-right md-whiteframe-4dp" \nmd-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav></div>'),e.put("app/core/layouts/vertical-navigation-fullwidth-toolbar-2.html",'<div id="layout-vertical-navigation-fullwidth-toolbar-2" class="template-layout" layout="column" flex><md-toolbar \nid="toolbar" class="md-menu-toolbar md-whiteframe-1dp md-accent" ui-view="toolbar"></md-toolbar><div \nid="main-container" layout="row" flex><md-sidenav id="vertical-navigation" class="md-primary-bg" \nmd-is-locked-open="$mdMedia(\'gt-sm\')" md-component-id="navigation" ms-scroll ui-view="navigation"></md-sidenav><div \nid="content-container" flex layout="column"><md-content id="content" class="animate-slide-up md-hue-2" ms-scroll \nui-view="content" flex></md-content></div><md-sidenav id="quick-panel" class="md-sidenav-right md-whiteframe-4dp" \nmd-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav></div></div>'),e.put("app/core/layouts/vertical-navigation-fullwidth-toolbar.html",'<div id="layout-vertical-navigation-fullwidth-toolbar" class="template-layout" layout="column" flex><md-toolbar \nid="toolbar" class="md-menu-toolbar md-whiteframe-1dp md-accent" ui-view="toolbar"></md-toolbar><div \nid="main-container" layout="row" flex><md-sidenav id="vertical-navigation" class="md-primary-bg" \nmd-is-locked-open="$mdMedia(\'gt-sm\')" md-component-id="navigation" ms-scroll ui-view="navigation"></md-sidenav><div \nid="content-container" flex layout="column"><md-content id="content" class="animate-slide-up md-hue-2" ms-scroll \nui-view="content" flex></md-content></div><md-sidenav id="quick-panel" class="md-sidenav-right md-whiteframe-4dp" \nmd-component-id="quick-panel" ms-scroll ui-view="quickPanel"></md-sidenav></div></div>'),e.put("app/core/layouts/vertical-navigation.html",'<div id="layout-vertical-navigation" class="template-layout" data-layout="row" data-flex><md-sidenav \nid="vertical-navigation" class="md-primary-bg" data-md-is-locked-open="$mdMedia(\'gt-sm\')" \ndata-md-component-id="navigation" data-ms-scroll data-ui-view="navigation"></md-sidenav><div id="content-container" \ndata-flex data-layout="column"><md-toolbar id="toolbar" class="md-menu-toolbar md-whiteframe-1dp" \ndata-ui-view="toolbar"></md-toolbar><md-content id="content" class="animate-slide-up md-hue-2" data-ms-scroll \ndata-ui-view="content" data-flex></md-content></div><md-sidenav id="quick-panel" \nclass="md-sidenav-right md-whiteframe-4dp" data-md-component-id="quick-panel" data-ms-scroll data-ui-view="quickPanel">\n</md-sidenav></div>'),e.put("app/core/theme-options/theme-options.html",'<div class="ms-theme-options-button md-primary-bg" ng-click="toggleOptionsSidenav()"><md-icon md-font-icon="icon-cog" \nclass="white-text"></md-icon></div><md-sidenav md-component-id="fuse-theme-options" class="md-sidenav-right"><div \nclass="ms-theme-options-list" layout="column"><div class="theme-option layout-options"><div class="option-title">\nLayout Style:</div><md-radio-group layout="row" layout-align="start start" layout-wrap ng-model="vm.layoutStyle" \nng-change="vm.updateLayoutStyle()"><md-radio-button ng-repeat="layoutStyle in vm.layoutStyles" \nng-value="layoutStyle.value"><div layout="column" layout-align="center center"><img ng-src="{{layoutStyle.figure}}"> \n<span class="text-center font-size-12 mt-8">{{layoutStyle.label}}</span></div></md-radio-button></md-radio-group></div>\n<md-divider></md-divider><div class="theme-option"><div class="option-title">Layout Mode:</div><md-radio-group \nlayout="row" layout-align="start center" ng-model="vm.layoutMode" ng-change="vm.updateLayoutMode()"><md-radio-button \nng-repeat="layoutMode in vm.layoutModes" ng-value="layoutMode.value">{{layoutMode.label}}</md-radio-button>\n</md-radio-group></div><md-divider></md-divider><div class="theme-option color-palettes"><div class="option-title">\nColor Palette:</div><div layout="row" layout-align="start start" layout-wrap><md-button \nng-repeat="(themeName, theme) in vm.themes.list" class="md-raised theme-button" layout="row" \nlayout-align="center center" aria-label="{{themeName}}" ng-click="vm.setActiveTheme(themeName)" \nng-style="{\'background-color\': theme.primary.color,\'border-color\': theme.accent.color,\'color\': theme.primary.contrast1}" \nng-class="{active: vm.getActiveTheme().name === themeName}"><md-icon ng-style="{\'color\': theme.primary.contrast1}" \nmd-font-icon="icon-palette" class="icon s32"></md-icon></md-button></div></div></div></md-sidenav>'),
e.put("app/main/acds/acds.html",'<div id="acds" class="page-layout carded fullwidth" data-layout="row"><div class="top-bg md-accent-bg"></div><div \nclass="center" data-layout="column" data-flex><div class="header" layout="row" layout-align="space-between center"><div\n class="white-fg" layout="column" layout-align="start start"><div class="h1" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-phone"></md-icon><span data-translate>Llamadas entrantes</span></div><div \nclass="count secondary-text"><span data-translate>Número de llamadas entrantes:</span> <span>{{vm.acds.count}}</span>\n</div></div></div><div class="content-card" data-layout="column" data-flex><md-content class="content p-20" flex \nms-scroll><div layout="column" layout-align="space-between start"><div class="no-results text-center" \nng-if="vm.acds.count == 0"><div class="message"><md-icon class="message-icon s96" md-font-icon="icon-phone"></md-icon>\n<div class="message-text" translate>Sin llamadas entrantes</div></div></div><div class="todo-item" layout="row" \nlayout-align="start center" ng-class="{\'grey-200-bg\':vm.lastAcds===acd.ID}" \ndata-dir-paginate="acd in vm.acds.data | itemsPerPage: 10 | orderBy:\'order\'" data-total-items="vm.acds.count" \ndata-current-page="vm.acds.filters.page"><div layout="row" layout-align="start center" flex><div class="info" \nflex="auto"><div layout="row" data-layout-xs="column" layout-align="space-between center"><div layout="row" \nlayout-align="space-between start"><div class="mr-40 w-100" ng-if="acd.source.origin_data.icon"><img \nng-src="{{ server }}{{ acd.source.origin_data.icon }}" alt="origen" class="image"></div><div class="mr-40"><div \nclass="title mb-5"><span>{{acd.ID}}</span></div><div class="mb-5" ng-if="acd.concessionaire.name"><span \nclass="text-boxed m-0 indigo-bg white-fg">{{ acd.concessionaire.name }}</span></div><div class="mb-5" \nng-if="acd.source.origin_data.name"><span class="text-boxed m-0 deep-purple-bg white-fg">\n{{ acd.source.origin_data.name }}</span></div><div ng-if="acd.user" layout="row"><div \nclass="text-boxed m-0 md-purple-800-bg white-fg mb-5"><md-icon md-font-icon="icon-account" class="s16"></md-icon><span>\n{{ acd.user.first_name }} {{ acd.user.last_name }}</span></div></div></div><div><div class="title mb-5"><md-icon \nmd-font-icon="icon-phone-outgoing"></md-icon><span>{{acd.src}}</span></div><div class="title mb-5"><md-icon \nmd-font-icon="icon-phone-incoming"></md-icon><span>{{acd.dst}}</span></div><div class="tags" layout="row" \nlayout-align="start center" layout-wrap><div class="tag" layout="row" layout-align="start center" \nng-if="acd.startcall"><md-icon md-font-icon="icon-calendar" class="s16"></md-icon><div class="ml-10 tag-label">\n{{acd.startcall | date:\'dd/MM/yyyy HH:mm\'}}</div></div><div class="tag" layout="row" layout-align="start center" \nng-if="acd.durationcallanswered"><md-icon md-font-icon="icon-clock" class="s16"></md-icon><div class="ml-10 tag-label">\n{{acd.durationcallanswered}}</div></div><div ng-repeat="status in vm.status" ng-if="status.id===acd.statuscall" \nclass="text-boxed m-0 white-fg mr-5" ng-class="status.color"><md-icon md-font-icon="icon-phone" class="s16"></md-icon>\n<span>{{ status.name }}</span></div><div ng-repeat="origin in vm.origins" ng-if="origin.id===acd.call_origin" \nclass="text-boxed m-0 white-fg" ng-class="origin.color"><md-icon md-font-icon="icon-phone" class="s16"></md-icon><span>\n{{ origin.name }}</span></div></div></div></div><div layout="row" layout-align="end center"><div layout="row" \nlayout-align="end center" ng-if="!acd.callcontrolleadmodel.lead"><md-button data-layout="column" class="md-accent" \ndata-layout-align="start center" data-ng-click="vm.createLead(acd)"><md-icon class="pt-5" \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-plus-circle"></md-icon><span class="pt-5" data-translate>Crear Lead\n</span></md-button><md-button data-layout="column" class="md-accent" data-layout-align="start center" \nng-if="acd.possible_leads.length>0" data-ng-click="vm.openAcdDialog($event, acd)"><md-icon class="pt-5" \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-arrow-right"></md-icon><span class="pt-5" data-translate>Duplicado\n</span></md-button></div><div layout="row" layout-align="end center" ng-if="acd.callcontrolleadmodel.lead"><md-button \ndata-layout="column" class="md-accent" data-layout-align="start center" \ndata-ui-sref="app.leads.get.edit({lead:\'{{ acd.callcontrolleadmodel.lead }}\'})"><md-icon class="pt-5" \ntitle="{{\'Ver Lead\' | translate}}" md-font-icon="icon-eye"></md-icon><span class="pt-5" data-translate>Ver Lead</span>\n</md-button></div><div layout="row" layout-align="end center" ng-if="acd.has_audio"><md-button data-layout="column" \nclass="md-accent" data-layout-align="start center" data-debouce-click data-ng-click="vm.getAudio(acd)"><md-icon \nclass="pt-5 green-700-fg" title="{{\'Editar\' | translate}}" md-font-icon="icon-download"></md-icon><span \nclass="pt-5 green-700-fg" data-translate>Descargar audio</span></md-button></div></div></div></div></div></div>\n<dir-pagination-controls class="bottomFixed"></dir-pagination-controls></div></md-content></div></div></div>'),e.put("app/main/calendar/calendar.html",'<div id="calendar" class="page-layout fullwidth" layout="column"><div class="header" ng-class="vm.currentMonthShort">\n<div class="header-content" layout="column" layout-align="space-between"><div class="header-top" layout="row" \nlayout-align="space-between center" layout-xs="column"><div class="logo" layout="row" layout-align="start center"><span\n class="logo-icon"><md-icon md-font-icon="icon-calendar-today"></md-icon></span><span class="logo-text" translate>\nCalendario</span></div><div><md-autocomplete placeholder="{{\'Usuario\' | translate }}" md-delay="300" \nmd-input-name="user" md-no-cache="true" md-min-length="3" md-search-text="searchTextUser" \nmd-selected-item="vm.leads.filters.user_data" md-items="user in vm.getUsers(searchTextUser)" \nmd-item-text="vm.getFullUserName(user)"><md-item-template><span md-highlight-text="vm.searchTextUser">\n{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ningun usuario con ese nombre</span></md-not-found></md-autocomplete></div><div class="toolbar" layout="row" \nlayout-align="start center"><md-button class="md-icon-button" ng-click="vm.calendar.today()" aria-label="Hoy"><md-icon \nmd-font-icon="icon-calendar-today"></md-icon><md-tooltip><span translate>Hoy</span></md-tooltip></md-button><md-button \nclass="md-icon-button" ng-click="vm.calendar.changeView(\'agendaDay\')"><md-icon md-font-icon="icon-view-day"></md-icon>\n<md-tooltip><span translate>Dia</span></md-tooltip></md-button><md-button class="md-icon-button" \nng-click="vm.calendar.changeView(\'agendaWeek\')"><md-icon md-font-icon="icon-view-week"></md-icon><md-tooltip><span \ntranslate>Semana</span></md-tooltip></md-button><md-button class="md-icon-button" \nng-click="vm.calendar.changeView(\'month\')"><md-icon md-font-icon="icon-view-module"></md-icon><md-tooltip><span \ntranslate>Mes</span></md-tooltip></md-button></div></div><div class="fullwidth" \nng-include="\'app/main/leads/views/list/kpis.html\'"></div><div class="header-bottom" layout="row" \nlayout-align="center center"><md-button class="md-icon-button arrow" ng-click="vm.calendar.prev()" \naria-label="Anterior"><md-icon md-font-icon="icon-chevron-left"></md-icon></md-button><div class="title">\n{{vm.calendarView.title}}</div><md-button class="md-icon-button arrow" ng-click="vm.calendar.next()" \naria-label="Siguiente"><md-icon md-font-icon="icon-chevron-right"></md-icon></md-button></div></div></div><div \nclass="content"><div id="calendarView" ui-calendar="vm.calendarUiConfig.calendar" ng-model="vm.events" calendar="main">\n</div></div></div>'),e.put("app/main/channels/channels.html",'<div id="channels" class="page-layout carded fullwidth" data-layout="row"><div class="top-bg md-accent-bg"></div><div \nclass="center" data-layout="column" data-flex><div class="header" layout="row" layout-align="space-between center"><div\n class="white-fg" layout="column" layout-align="start start"><div class="h1" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-checkerboard"></md-icon><span data-translate>Canales</span></div><div \nclass="count secondary-text"><span data-translate>Número de canales:</span> <span>{{vm.channels.count}}</span></div>\n</div><div data-layout="row" data-layout-align="space-between center" data-layout-wrap><div class="actions" \ndata-layout="row" data-layout-align="end center" data-ng-if="hasPermission(\'channels\',\'POST\')"><md-button \nclass="md-raised" aria-label="{{\'Nuevo canal\' | translate}}" data-ng-click="vm.openChannelDialog($event)"><md-icon \nmd-font-icon="icon-plus-circle-outline"></md-icon><span data-translate>Nuevo canal</span></md-button></div></div></div>\n<div class="content-card" data-layout="column" data-flex><md-content class="content p-20" flex ms-scroll><div \nlayout="column" layout-align="space-between start"><div class="no-results text-center" ng-if="vm.channels.count == 0">\n<div class="message"><md-icon class="message-icon s96" md-font-icon="icon-checkerboard"></md-icon><div \nclass="message-text" translate>Sin canales</div></div></div><div class="todo-item" layout="row" \nlayout-align="start center" data-dir-paginate="channel in vm.channels.data | itemsPerPage: 10 | orderBy:\'order\'" \ndata-total-items="vm.channels.count" data-current-page="vm.channels.filters.page"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><div><div class="title">\n<span>{{channel.name}}</span></div></div></div><div layout="row" layout-align="end center"><md-button \ndata-layout="column" class="md-accent" data-layout-align="start center" data-ng-if="hasPermission(\'channels\',\'PATCH\')" \ndata-ng-click="vm.openChannelDialog($event, channel)"><md-icon class="pt-5" title="{{\'Editar\' | translate}}" \nmd-font-icon="icon-pencil"></md-icon><span class="pt-5" data-translate>Editar</span></md-button></div></div></div>\n</div></div><dir-pagination-controls class="bottomFixed"></dir-pagination-controls></div></md-content></div></div>\n</div>'),e.put("app/main/dashboard/dashboard.html",'<div id="dashboard" class="page-layout simple tabbed" id="diary"><div class="content"><md-tabs md-dynamic-height>\n<md-tab ng-repeat="concessionaire in vm.concessionaires" ng-if="concessionaire.iframe_content" \nlabel="{{ concessionaire.name }}"><div ng-bind-html="vm.trustAsHtml(concessionaire.iframe_content)"></div></md-tab>\n</md-tabs></div></div>'),e.put("app/main/concessionaires/concessionaires.html",'<div id="concessionaires" class="page-layout carded fullwidth" data-layout="row"><div class="top-bg md-accent-bg">\n</div><div class="center" data-layout="column" data-flex><div class="header" layout="row" \nlayout-align="space-between center"><div class="white-fg" layout="column" layout-align="start start"><div class="h1" \nlayout="row" layout-align="start center"><md-icon md-font-icon="icon-car"></md-icon><span data-translate>Concesionarios\n</span></div><div class="count secondary-text"><span data-translate>Número de concesionarios:</span> <span>\n{{vm.concessionaires.count}}</span></div></div><div data-layout="row" data-layout-align="space-between center" \ndata-layout-wrap><div class="actions" data-layout="row" data-layout-align="end center" data-ng-if="vm.user.is_admin">\n<md-button class="md-raised" aria-label="{{\'Nuevo concesionario\' | translate}}" \ndata-ng-click="vm.openConcessionaireDialog($event)"><md-icon md-font-icon="icon-plus-circle-outline"></md-icon><span \ndata-translate>Nuevo concesionario</span></md-button></div></div></div><div class="content-card" data-layout="column" \ndata-flex><md-content class="content p-20" flex ms-scroll><div layout="column" layout-align="space-between start"><div \nclass="no-results text-center" ng-if="vm.concessionaires.count == 0"><div class="message"><md-icon \nclass="message-icon s96" md-font-icon="icon-car"></md-icon><div class="message-text" translate>Sin concesionarios</div>\n</div></div><div class="todo-item" layout="row" layout-align="start center" \ndata-dir-paginate="concessionaire in vm.concessionaires.data | itemsPerPage: 10 | orderBy:\'order\'" \ndata-total-items="vm.concessionaires.count" data-current-page="vm.concessionaires.filters.page"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><div><div class="title">\n<span>{{concessionaire.name}}</span></div></div></div><div layout="row" layout-align="end center"><md-button \ndata-layout="column" class="md-accent" data-layout-align="start center" \ndata-ng-if="vm.user.is_admin || vm.user.is_concession_admin" \ndata-ui-sref="app.users.list({concessionaire:\'{{ concessionaire.id }}\'})"><md-icon class="pt-5 purple-700-fg" \ntitle="{{\'Usuarios\' | translate}}" md-font-icon="icon-account"></md-icon><span class="pt-5 purple-700-fg" \ndata-translate>Usuarios</span></md-button><md-button data-layout="column" class="md-accent" \ndata-layout-align="start center" data-ng-if="hasPermission(\'concessionaires\',\'PATCH\')" \ndata-ng-click="vm.openConcessionaireNotesDialog($event, concessionaire)"><md-icon class="pt-5 green-700-fg" \ntitle="{{\'Notas\' | translate}}" md-font-icon="icon-document"></md-icon><span class="pt-5 green-700-fg" data-translate>\nNotas</span></md-button><md-button data-layout="column" class="md-accent" data-layout-align="start center" \ndata-ng-if="hasPermission(\'concessionaires\',\'PATCH\')" \ndata-ng-click="vm.openConcessionaireCalendarDialog($event, concessionaire)"><md-icon class="pt-5 brown-700-fg" \ntitle="{{\'Calendario\' | translate}}" md-font-icon="icon-calendar"></md-icon><span class="pt-5 brown-700-fg" \ndata-translate>Calendario</span></md-button><md-button data-layout="column" class="md-accent" \ndata-layout-align="start center" data-ng-if="hasPermission(\'concessionaires\',\'PATCH\')" \ndata-ng-click="vm.openConcessionaireDialog($event, concessionaire)"><md-icon class="pt-5" \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-pencil"></md-icon><span class="pt-5" data-translate>Editar</span>\n</md-button></div></div></div></div></div><dir-pagination-controls class="bottomFixed"></dir-pagination-controls></div>\n</md-content></div></div></div>'),e.put("app/main/imports/imports-view.html",'<div id="imports" class="md-accent-bg" layout="column" flex><div id="import-selector" layout="column" \nlayout-align="start center" flex><h1 translate>IMPORTADOR/EXPORTADOR DE LEADS</h1><div class="import-list" \nlayout="row" layout-align="center center" layout-wrap><div class="import-list-item add-new-import" layout="column" \nlayout-align="center center" ng-click="vm.getDocument()"><md-icon md-font-icon="icon-download" \nclass="icon s64 white-fg"></md-icon><div class="import-name" translate>Descargar plantilla</div></div><div \nclass="import-list-item add-new-import" layout="column" layout-align="center center" ng-click="vm.openFiles()" \ndata-ng-disabled="vm.loadingImport"><md-icon ng-show="!vm.loadingImport" md-font-icon="icon-upload" \nclass="icon s64 white-fg"></md-icon><md-progress-circular ng-show="vm.loadingImport" class="for-button" \nmd-diameter="16" md-mode="indeterminate"></md-progress-circular><div class="import-name" translate>Importar leads</div>\n</div><input type="file" id="file-uploader" ng-show="false"><div class="import-list-item add-new-import" \nlayout="column" layout-align="center center" ng-click="vm.openExportLeadDialog($event)"><md-icon \nmd-font-icon="icon-export" class="icon s64 white-fg"></md-icon><div class="import-name" translate>Exportar Leads</div>\n</div></div></div></div>'),e.put("app/main/metrics/metrics.html",'<div id="metrics" class="page-layout carded fullwidth" data-layout="column"><div class="header"><div \nclass="header-content" layout="column" layout-align="space-between"><div class="header-top" layout="row" \nlayout-align="center center" layout-xs="column"><div class="toolbar" layout="row" layout-align="start center">\n<md-button class="md-icon-button" ng-click="vm.calendar.today()" aria-label="Hoy"><md-icon \nmd-font-icon="icon-calendar-today"></md-icon><md-tooltip><span translate>Hoy</span></md-tooltip></md-button><md-button \nclass="md-icon-button" ng-click="vm.calendar.changeView(\'agendaDay\')"><md-icon md-font-icon="icon-view-day"></md-icon>\n<md-tooltip><span translate>Dia</span></md-tooltip></md-button><md-button class="md-icon-button" \nng-click="vm.calendar.changeView(\'agendaWeek\')"><md-icon md-font-icon="icon-view-week"></md-icon><md-tooltip><span \ntranslate>Semana</span></md-tooltip></md-button><md-button class="md-icon-button" \nng-click="vm.calendar.changeView(\'month\')"><md-icon md-font-icon="icon-view-module"></md-icon><md-tooltip><span \ntranslate>Mes</span></md-tooltip></md-button></div></div><div class="header-bottom" layout="row" \nlayout-align="center center"><md-button class="md-icon-button arrow" ng-click="vm.calendar.prev()" \naria-label="Anterior"><md-icon md-font-icon="icon-chevron-left"></md-icon></md-button><div class="font-size-20">\n{{vm.calendarView.title}}</div><md-button class="md-icon-button arrow" ng-click="vm.calendar.next()" \naria-label="Siguiente"><md-icon md-font-icon="icon-chevron-right"></md-icon></md-button></div></div><div \nclass="w-0 h-0 overflow-hidden"><div id="calendarView" ui-calendar="vm.calendarUiConfig.calendar" \nng-model="vm.calendarModel" calendar="main"></div></div></div><div class="filters"><div data-layout="row" \ndata-layout-wrap><div data-flex class="mb-25" style="min-width: 220px"><md-chips \nng-model="vm.metrics.filters.user_data" md-autocomplete-snap md-require-match="true"><md-autocomplete \nplaceholder="{{\'Usuario\' | translate }}" md-delay="300" md-input-name="user" md-no-cache="true" md-min-length="0" \nmd-dropdown-items="50" md-search-text="vm.searchTextUser" md-items="user in vm.getUsers(vm.searchTextUser)" \nmd-item-text="vm.copySearch(\'searchTextUser\')"><md-item-template><span md-highlight-text="vm.searchTextUser">\n{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ningun usuario con ese nombre</span></md-not-found></md-autocomplete><md-chip-template><span>\n{{vm.getFullUserName($chip)}}</span></md-chip-template></md-chips></div><div data-flex class="pt-20 text-right" \nstyle="min-width: 220px"><md-checkbox ng-model="vm.metrics.filters.useful" aria-label="{{\'Solo útiles\' | translate}}" \nclass="md-align-top-left no-margin" flex><span data-translate>Solo útiles</span></md-checkbox></div></div></div><div \nclass="fullwidth mb-20" ng-include="\'app/main/metrics/views/benchmark/benchmark.html\'"></div><div \nclass="fullwidth mb-20" ng-include="\'app/main/metrics/views/servicelevel/servicelevel.html\'"></div><div \nclass="fullwidth mb-20" ng-include="\'app/main/metrics/views/voiceservice/voiceservice.html\'"></div><div \nclass="fullwidth mb-20" ng-include="\'app/main/metrics/views/digitalservice/digitalservice.html\'"></div></div>'),e.put("app/main/origins/origins.html",'<div id="origins" class="page-layout carded fullwidth" data-layout="row"><div class="top-bg md-accent-bg"></div><div \nclass="center" data-layout="column" data-flex><div class="header" layout="row" layout-align="space-between center"><div\n class="white-fg" layout="column" layout-align="start start"><div class="h1" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-voicemail"></md-icon><span data-translate>Orígenes</span></div><div \nclass="count secondary-text"><span data-translate>Número de orígenes:</span> <span>{{vm.origins.count}}</span></div>\n</div><div data-layout="row" data-layout-align="space-between center" data-layout-wrap><div class="actions" \ndata-layout="row" data-layout-align="end center" data-ng-if="hasPermission(\'origins\',\'POST\')"><md-button \nclass="md-raised" aria-label="{{\'Nuevo origen\' | translate}}" data-ng-click="vm.openOriginDialog($event)"><md-icon \nmd-font-icon="icon-plus-circle-outline"></md-icon><span data-translate>Nuevo origen</span></md-button></div></div>\n</div><div class="content-card" data-layout="column" data-flex><md-content class="content p-20" flex ms-scroll><div \nlayout="column" layout-align="space-between start"><div class="no-results text-center" ng-if="vm.origins.count == 0">\n<div class="message"><md-icon class="message-icon s96" md-font-icon="icon-voicemail"></md-icon><div \nclass="message-text" translate>Sin orígenes</div></div></div><div class="todo-item" layout="row" \nlayout-align="start center" data-dir-paginate="origin in vm.origins.data | itemsPerPage: 10 | orderBy:\'order\'" \ndata-total-items="vm.origins.count" data-current-page="vm.origins.filters.page"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><div><div class="title">\n<span>{{origin.name}}</span></div></div></div><div layout="row" layout-align="end center"><md-button \ndata-layout="column" class="md-accent" data-layout-align="start center" data-ng-if="hasPermission(\'origins\',\'PATCH\')" \ndata-ng-click="vm.openOriginDialog($event, origin)"><md-icon class="pt-5" title="{{\'Editar\' | translate}}" \nmd-font-icon="icon-pencil"></md-icon><span class="pt-5" data-translate>Editar</span></md-button></div></div></div>\n</div></div><dir-pagination-controls class="bottomFixed"></dir-pagination-controls></div></md-content></div></div>\n</div>'),e.put("app/main/tasks/tasks.html",'<div layout="column" layout-align="space-between start" class="container-tasks"><div class="no-results text-center" \nng-if="filtered.length == 0"><div class="message"><md-icon class="message-icon s96" md-font-icon="icon-document">\n</md-icon><div class="message-text" translate>Sin solicitudes</div></div></div><div class="fullwidth" layout="row" \nlayout-align="start center" layout-margin \nng-repeat="task in filtered = (vm.tasks.data | filter:{is_traking_task: tracing})"><div layout="row" \nlayout-align="start center" flex id="task-{{task.id}}" class="item-task"><div class="info" flex="auto"><div>\n<md-input-container data-layout="column" flex="50" class="mt-0"><md-checkbox ng-model="task.realization_date_check" \naria-label="{{\'Marcar como realizada\' | translate}}" class="realization_date_check" \nclass="md-align-top-left no-margin" ng-change="vm.saveTask(task)" flex data-ng-disabled="task.realization_date_check">\n<span class="font-size-12" data-translate>Marcar como realizada</span></md-checkbox></md-input-container></div><div \nlayout="row" data-layout-xs="column" layout-align="start end"><div data-layout="row" layout-align="start center" \nclass="mb-20 w-165 mr-15"><div flex><label class="input-label" data-translate>Fecha programada</label><div class="bb">\n<md-icon md-font-icon="icon-calendar"></md-icon><span class="planified_realization_date" \nng-if="task.planified_realization_date">{{ task.planified_realization_date | date:\'dd/MM/yyyy HH:mm\' }}</span> <span \nclass="planified_realization_date" ng-if="!task.planified_realization_date" translate>Sin definir</span></div><span \nclass="error">{{ vm.serverErrors.date[$index] }}</span></div></div><div data-layout="row" layout-align="start center" \nclass="mb-20 w-165 mr-15"><div flex><label class="input-label" data-translate>Medio</label><div class="bb"><md-icon \nmd-font-icon="icon-whatsapp" ng-if="task.media===\'Whatsapp\'"></md-icon><md-icon md-font-icon="icon-phone" \nng-if="task.media===\'Phone\'"></md-icon><md-icon md-font-icon="icon-message-text-outline" ng-if="task.media===\'SMS\'">\n</md-icon><md-icon md-font-icon="icon-email" ng-if="task.media===\'E-mail\'"></md-icon><md-icon \nmd-font-icon="icon-account-multiple" ng-if="task.media===\'face\'"></md-icon><span class="media" \nng-if="task.media===\'Phone\'" data-translate>Teléfono</span> <span class="media" ng-if="task.media===\'face\'" \ndata-translate>Presencial</span> <span class="media" ng-if="task.media!==\'Phone\' && task.media!==\'face\'">\n{{ task.media }}</span></div></div></div><div data-layout="row" layout-align="start center" class="mb-20 w-165 mr-15">\n<div flex><label class="input-label" data-translate>Tipo de tarea</label><div class="bb"><span class="type" \nng-repeat="type in vm.taskTypes" ng-if="type.key===task.type">{{ type.name }}</span></div></div></div><div \ndata-layout="row" layout-align="start center" class="mb-20 w-165 mr-15"><div flex><label class="input-label" \ndata-translate>Categoría</label><div class="bb"><span class="subtype" ng-repeat="type in vm.taskTypes" \nng-if="type.key===task.type">{{ type.subtype }}</span></div></div></div><div data-layout="row" \nlayout-align="start center" class="mb-20 mr-15" flex><div flex><label class="input-label" data-translate>Descripción\n</label><div class="bb"><span class="description">{{ task.description || "-"}}</span></div></div></div><div \ndata-layout="row" layout-align="start center" class="mb-20 mr-15" ng-if="task.realization_date"><div flex><label \nclass="input-label" data-translate>Realizada</label><div class="bb realization_date" data-translate>\n{{ task.realization_date | date:\'dd/MM/yyyy HH:mm\' }}</div></div></div></div></div><div layout="row" \nlayout-align="end center" ng-hide="vm.isDisabled()"><md-button data-layout="column" class="md-icon-button md-accent" \ndata-layout-align="start center" data-ng-if="hasPermission(\'tasks\',\'PATCH\')" \ndata-ng-click="vm.openTaskDialog($event, tracing, task)"><md-icon title="{{ \'Editar\' | translate }}" \nmd-font-icon="icon-pencil"></md-icon></md-button><md-button data-layout="column" class="md-icon-button md-warn" \ndata-layout-align="start center" data-ng-if="hasPermission(\'tasks\',\'DELETE\')" \ndata-ng-click="vm.removeTask($event, task)"><md-icon title="{{ \'Eliminar\' | translate }}" md-font-icon="icon-delete">\n</md-icon></md-button></div></div></div></div>'),e.put("app/main/videos/videos.html",'<div id="videos" class="page-layout carded fullwidth" data-layout="row"><div class="top-bg md-accent-bg"></div><div \nclass="center" data-layout="column" data-flex><div class="header" layout="row" layout-align="space-between center"><div\n class="white-fg" layout="column" layout-align="start start"><div class="h1" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-video"></md-icon><span data-translate>Tutoriales</span></div></div></div><div \nclass="content-card" data-layout="column" data-flex><md-content class="content p-20" flex ms-scroll><div layout="row" \nlayout-align="space-between start" layout-wrap><div flex="45" flex-xs="100" class="mb-40"><div class="title" translate>\nBreve recorrido SML</div><video src="assets/movies/breve_recorrido_sml.webm" controls></video></div><div flex="45" \nflex-xs="100" class="mb-40"><div class="title" translate>Crear lead</div><video src="assets/movies/crear_lead.webm" \ncontrols></video></div><div flex="45" flex-xs="100" class="mb-40"><div class="title" translate>Vista rápida SML</div>\n<video src="assets/movies/vista_rapida_sml.webm" controls></video></div></div></md-content></div></div></div>'),e.put("app/utils/templates/dirPagination.tpl.html",'<div class="pagination" ng-if="1 < pages.length || !autoHide"><md-button class="md-icon-button first" \nng-if="boundaryLinks" ng-disabled="pagination.current == 1" ng-click="setCurrent(1)" aria-label="Ir al inicio"><md-icon\n md-font-icon="icon-chevron-double-left"></md-icon></md-button><md-button class="md-icon-button prev" \nng-if="directionLinks" ng-disabled="pagination.current == 1" ng-click="setCurrent(pagination.current - 1)" \naria-label="Anterior"><md-icon md-font-icon="icon-chevron-left"></md-icon></md-button><md-button \nclass="md-icon-button number" ng-repeat="pageNumber in pages track by tracker(pageNumber, $index)" \nng-class="{ \'md-accent\' : pagination.current == pageNumber, \'md-disabled\' : pageNumber == \'...\'}" \nng-click="setCurrent(pageNumber)">{{pageNumber}}</md-button><md-button class="md-icon-button next" \nng-if="directionLinks" ng-disabled="pagination.current == pagination.last" \nng-click="setCurrent(pagination.current + 1)" aria-label="Siguiente"><md-icon md-font-icon="icon-chevron-right">\n</md-icon></md-button><md-button class="md-icon-button last" ng-if="boundaryLinks" \nng-disabled="pagination.current == pagination.last" ng-click="setCurrent(pagination.last)" aria-label="Último"><md-icon\n md-font-icon="icon-chevron-double-right"></md-icon></md-button></div>'),e.put("app/core/directives/ms-info-bar/ms-info-bar.html",'<div id="ms-info-bar" layout="row" layout-align="start center" flex><div id="ms-info-bar-message" ng-transclude flex>\n</div><md-button id="ms-info-bar-close" class="md-icon-button" aria-label="Close" ng-click="removeInfoBar()"><md-icon \nmd-font-icon="icon-close s24"></md-icon></md-button></div>'),e.put("app/core/directives/ms-material-color-picker/ms-material-color-picker.html",'<md-menu md-position-mode="target-right target"><div ng-click="$mdOpenMenu($event)"><ms-color-picker-button><md-button \naria-label="Row Color" md-menu-origin ng-click="$mdOpenMenu($event)" ng-class="vm.selectedColor.class"><span \nng-show="vm.selectedColor.palette">{{vm.selectedColor.palette}} {{vm.selectedColor.hue}} </span><span \nng-show="!vm.selectedColor.palette">Select Color</span></md-button></ms-color-picker-button></div><md-menu-content \nclass="ms-material-color-picker-menu-content" layout-column><header \nng-class="vm.selectedColor.class || \'md-accent-bg\'" class="md-whiteframe-4dp" layout="row" \nlayout-align="space-between center"><md-button md-prevent-menu-close ng-click="vm.activateHueSelection(false,false)" \nclass="md-icon-button" ng-class="{\'hidden\':!vm.selectedPalette}" aria-label="Palette"><md-icon \nmd-font-icon="icon-arrow-left" class="s20"></md-icon></md-button><span ng-if="vm.selectedColor.palette">\n{{vm.selectedColor.palette}} {{vm.selectedColor.hue}} </span><span ng-if="!vm.selectedColor.palette">Select Color\n</span><md-button class="remove-color-button md-icon-button" ng-click="vm.removeColor()" aria-label="Remove Color">\n<md-icon md-font-icon="icon-delete" class="s20"></md-icon></md-button></header><div class="colors" ms-scroll><div \nng-show="!vm.selectedPalette" layout="row" layout-wrap><div class="color" ng-class="\'md-\'+palette+\'-500-bg\'" \nng-repeat="(palette, hues) in vm.palettes" ng-click="vm.activateHueSelection(palette,hues)" layout="row" \nlayout-align="start end" md-prevent-menu-close md-ink-ripple><span class="label">{{palette}}</span></div></div><div \nng-show="vm.selectedPalette" layout="row" layout-wrap><div class="color" \nng-class="\'md-\'+vm.selectedPalette+\'-\'+hue+\'-bg\'" ng-repeat="(hue, values) in vm.selectedHues" \nng-click="vm.selectColor(vm.selectedPalette,hue)" layout="row" layout-align="start end" md-ink-ripple><span \nclass="label">{{hue}} </span><i ng-if="vm.selectedPalette == vm.selectedColor.palette && hue == vm.selectedColor.hue" \nclass="s16 icon-check"></i></div></div></div></md-menu-content></md-menu>'),e.put("app/core/directives/ms-search-bar/ms-search-bar.html",'<div flex layout="row" layout-align="start center"><label for="ms-search-bar-input"><md-button \nclass="ms-search-bar-expander md-icon-button" aria-label="Expand Search Bar" ng-click="MsSearchBar.expand()" \nng-if="!MsSearchBar.resultsLoading || MsSearchBar.collapsed"><md-icon md-font-icon="icon-magnify" class="icon s24">\n</md-icon></md-button><div class="ms-search-bar-loader" layout="row" layout-align="center center" \nng-if="MsSearchBar.resultsLoading && !MsSearchBar.collapsed"><md-progress-circular class="md-accent" md-diameter="32" \nmd-mode="indeterminate"></md-progress-circular></div></label><input id="ms-search-bar-input" type="text" \nplaceholder="Search" flex ng-model="MsSearchBar.query" ng-model-options="MsSearchBar.queryOptions" \nng-blur="MsSearchBar.collapse()" ng-keydown="MsSearchBar.handleKeydown($event)"><md-button \nclass="ms-search-bar-collapser md-icon-button" ng-click="MsSearchBar.collapse()" aria-label="Collapse Search Bar">\n<md-icon md-font-icon="icon-close" class="icon s24"></md-icon></md-button><div class="ms-search-bar-results" \nng-if="MsSearchBar.results" ms-scroll><div class="no-results" ng-if="MsSearchBar.results.length === 0">No Results!\n</div><div class="result" ng-repeat="result in MsSearchBar.results" ng-click="MsSearchBar.handleResultClick(result)" \nng-mouseenter="MsSearchBar.handleMouseenter($index)" ng-mousedown="MsSearchBar.absorbEvent($event)" \nng-class="{\'selected\': $index == MsSearchBar.selectedResultIndex}" md-ink-ripple><div layout="row" \nlayout-align="start center"><div class="icon-container" layout="row" layout-align="center center"><i \nng-if="result.icon" class="icon {{result.icon}}"></i><div ng-if="!result.icon" class="square md-accent-bg"></div></div>\n<div><div class="title">{{result.title}}</div><div class="description" ng-if="result.description">\n{{result.description}}</div></div></div></div></div></div>'),
e.put("app/core/directives/ms-shortcuts/ms-shortcuts.html",'<div class="shortcuts-container" layout="row" layout-align="space-between center" flex \nng-class="{\'mobile-bar-active\': MsShortcuts.mobileBarActive}"><div class="flex-noshrink" layout="row" \nlayout-align="start center" flex><div class="shortcuts hide show-gt-xs" layout="row" layout-align="start center" \nms-scroll ng-if="MsShortcuts.shortcuts.length > 0" ng-sortable="MsShortcuts.sortableOptions"><div \nng-repeat="shortcut in MsShortcuts.shortcuts" layout="row" layout-align="center center"><md-button \nclass="md-icon-button shortcut" aria-label="{{shortcut.title}}" ui-sref="{{shortcut.uisref}}"><md-icon \nng-if="shortcut.icon" md-font-icon="{{shortcut.icon}}" class="icon s24"></md-icon><div ng-if="!shortcut.icon" \nclass="first-letter">{{shortcut.title.charAt(0)}}</div><md-tooltip md-direction="bottom">{{shortcut.title}}\n</md-tooltip></md-button></div></div><md-menu md-offset="8 56" class="shortcut-menu hide show-gt-xs"><md-button \nclass="md-icon-button add-shortcut-button" aria-label="Add shortcut" ng-click="$mdOpenMenu($event)"><md-icon \nmd-menu-origin md-font-icon="icon-star" class="icon amber-600-fg s24"></md-icon><md-tooltip md-direction="bottom">\nClick to add/remove shortcut</md-tooltip></md-button><md-menu-content><div id="ms-shortcut-add-menu"><div \nclass="shortcut-search" layout="row" layout-align="start center"><div class="search-icon" layout="row" \nlayout-align="center center" ng-if="!MsShortcuts.resultsLoading"><md-icon md-menu-align-target \nmd-font-icon="icon-magnify" class="icon s24"></md-icon></div><div class="shortcut-loader" layout="row" \nlayout-align="center center" ng-if="MsShortcuts.resultsLoading"><md-progress-circular class="md-accent" \nmd-diameter="20" md-mode="indeterminate"></md-progress-circular></div><input type="text" placeholder="Search" flex \nng-model="MsShortcuts.query" ng-model-options="MsShortcuts.queryOptions" \nng-keydown="MsShortcuts.handleKeydown($event)"></div><div class="results" ng-if="MsShortcuts.results" ms-scroll><div \nclass="no-results" ng-if="MsShortcuts.results.length === 0">No Results!</div><div class="result" \nng-repeat="result in MsShortcuts.results" ng-click="MsShortcuts.handleResultClick(result)" \nng-mouseenter="MsShortcuts.handleMouseenter($index)" ng-mousedown="MsShortcuts.absorbEvent($event)" \nng-class="{\'selected\': $index == MsShortcuts.selectedResultIndex}" md-prevent-menu-close="md-prevent-menu-close" \nmd-ink-ripple><div layout="row" layout-align="start space-between"><div layout="row" layout-align="start center" flex>\n<div class="icon icon-container" layout="row" layout-align="center center"><i ng-if="result.icon" \nclass="{{result.icon}}"></i><div ng-if="!result.icon" class="square md-accent-bg"></div></div><div><div class="title">\n{{result.title}}</div></div></div><md-icon md-font-icon="icon-pin" class="icon s18" \nng-class="{\'fade-text\': !result.hasShortcut}"></md-icon></div></div></div></div></md-menu-content></md-menu></div>\n<md-button class="md-icon-button toggle-mobile-menu hide-gt-xs" aria-label="Add shortcut" \nng-click="MsShortcuts.toggleMobileBar()"><md-icon md-menu-origin md-font-icon="icon-star" \nclass="icon amber-600-fg s24" ng-hide="MsShortcuts.mobileBarActive"></md-icon><md-icon md-menu-origin \nmd-font-icon="icon-close" class="icon s24" ng-hide="!MsShortcuts.mobileBarActive"></md-icon></md-button></div>'),e.put("app/toolbar/layouts/vertical-navigation-fullwidth-toolbar/toolbar.html",'<div layout="row" layout-align="start center"><div layout="row" layout-align="start center" flex><md-button \nid="navigation-toggle" class="md-icon-button" ng-click="vm.toggleSidenav(\'navigation\')" hide-gt-sm \naria-label="Toggle navigation"><md-icon md-font-icon="icon-menu" class="icon"></md-icon></md-button><ms-search-bar \non-search="vm.search(query)" on-result-click="vm.searchResultClick(item)" debounce="300"></ms-search-bar><div \nclass="toolbar-separator"></div><ms-shortcuts></ms-shortcuts><div class="toolbar-separator"></div></div><div \nlayout="row" layout-align="start center"><md-progress-circular id="toolbar-progress" ng-if="$root.loadingProgress" \nclass="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular><md-menu-bar id="user-menu"><md-menu \nmd-position-mode="left bottom"><md-button class="user-button" ng-click="$mdOpenMenu()" aria-label="User settings"><div \nlayout="row" layout-align="space-between center"><div class="avatar-wrapper"><img md-menu-align-target class="avatar" \nsrc="assets/images/avatars/profile.jpg"></div><span class="username" hide-sm>{{ vm.user.first_name }}</span><md-icon \nmd-font-icon="icon-chevron-down" class="icon s16" hide-sm></md-icon></div></md-button><md-menu-content width="3">\n<md-menu-item class="md-indent" ui-sref="app.users"><md-icon md-font-icon="icon-account" class="icon"></md-icon>\n<md-button>Mi perfil</md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item class="md-indent">\n<md-icon md-font-icon="icon-logout" class="icon"></md-icon><md-button ng-click="vm.logout()">Cerrar sesión</md-button>\n</md-menu-item></md-menu-content></md-menu></md-menu-bar><div class="toolbar-separator"></div><md-menu \nid="language-menu" md-offset="0 72" md-position-mode="target-right target"><md-button class="language-button" \nng-click="$mdOpenMenu()" aria-label="Language" md-menu-origin md-menu-align-target><div layout="row" \nlayout-align="center center"><img class="flag" ng-src="assets/images/flags/{{vm.selectedLanguage.flag}}.png"> <span \nclass="iso">{{vm.selectedLanguage.code}}</span></div></md-button><md-menu-content width="3" id="language-menu-content">\n<md-menu-item ng-repeat="(iso, lang) in vm.languages"><md-button ng-click="vm.changeLanguage(lang)" \naria-label="{{lang.title}}"><span layout="row" layout-align="start center"><img class="flag" \nng-src="assets/images/flags/{{lang.flag}}.png"> <span>{{lang.title}}</span></span></md-button></md-menu-item>\n</md-menu-content></md-menu><div class="toolbar-separator"></div><md-button id="quick-panel-toggle" \nclass="md-icon-button" ng-click="vm.toggleSidenav(\'quick-panel\')" aria-label="Toggle quick panel"><md-icon \nmd-font-icon="icon-format-list-bulleted" class="icon"></md-icon></md-button></div></div>'),e.put("app/toolbar/layouts/horizontal-navigation/toolbar.html",'<div class="top-row" layout="row" layout-align="space-between center"><div layout="row" layout-align="start center">\n<div class="navigation-toggle" hide-gt-sm><md-button class="md-icon-button" ng-click="vm.toggleHorizontalMobileMenu()" \naria-label="Toggle Mobile Navigation"><md-icon md-font-icon="icon-menu"></md-icon></md-button></div><div class="logo" \nlayout="row" layout-align="start center"><span class="logo-image">I</span> <span class="logo-text">Infoauto</span>\n</div></div><div layout="row" layout-align="start center"><md-progress-circular id="toolbar-progress" \nng-if="$root.loadingProgress" class="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular>\n<md-button aria-label="Emails" ui-sref="app.notifications"><span class="badge" \nstyle="background: {{getEmailsBadge().color}}">{{vm.notifications.unread_messages}}</span><md-icon \nmd-font-icon="icon-bell" class="icon"></md-icon></md-button><div class="toolbar-separator"></div><md-menu-bar \nid="user-menu"><md-menu data-md-position-mode="left bottom"><md-button class="user-button" \ndata-ng-click="$mdOpenMenu()" aria-label="User settings"><span data-layout="row" \ndata-layout-align="space-between center"><span class="avatar-wrapper"><img data-md-menu-align-target class="avatar" \nsrc="assets/images/avatars/profile.jpg" alt="Imágen de perfil"></span><md-icon md-font-icon="icon-chevron-down" \nclass="icon s16" data-hide-xs></md-icon></span></md-button><md-menu-content width="3"><md-menu-item class="md-indent">\n<md-icon md-font-icon="icon-logout" class="icon"></md-icon><md-button data-ng-click="vm.logout()" data-translate>\nCerrar sesión</md-button></md-menu-item></md-menu-content></md-menu></md-menu-bar></div></div>'),e.put("app/toolbar/layouts/content-with-toolbar/toolbar.html",'<div layout="row" layout-align="space-between center"><div layout="row" layout-align="start center"><div class="logo" \nlayout="row" layout-align="start center"><span class="logo-image">F</span> <span class="logo-text">FUSE</span></div>\n<div class="toolbar-separator"></div><ms-shortcuts></ms-shortcuts><div class="toolbar-separator"></div></div><div \nlayout="row" layout-align="start center"><md-progress-circular id="toolbar-progress" ng-if="$root.loadingProgress" \nclass="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular><div class="toolbar-separator"></div>\n<md-menu-bar id="user-menu"><md-menu md-position-mode="left bottom"><md-button class="user-button" \nng-click="$mdOpenMenu()" aria-label="User settings"><div layout="row" layout-align="space-between center"><div \nclass="avatar-wrapper"><img md-menu-align-target class="avatar" src="assets/images/avatars/profile.jpg"></div><span \nclass="username" hide-sm>{{ vm.user.first_name }}</span><md-icon md-font-icon="icon-chevron-down" class="icon s16" \nhide-sm></md-icon></div></md-button><md-menu-content width="3"><md-menu-item class="md-indent" ui-sref="app.users">\n<md-icon md-font-icon="icon-account" class="icon"></md-icon><md-button>Mi perfil</md-button></md-menu-item>\n<md-menu-divider></md-menu-divider><md-menu-item class="md-indent"><md-icon md-font-icon="icon-logout" class="icon">\n</md-icon><md-button ng-click="vm.logout()">Cerrar sesión</md-button></md-menu-item></md-menu-content></md-menu>\n</md-menu-bar><div class="toolbar-separator"></div><ms-search-bar on-search="vm.search(query)" \non-result-click="vm.searchResultClick(item)" debounce="300"></ms-search-bar><div class="toolbar-separator"></div>\n<md-menu id="language-menu" md-offset="0 72" md-position-mode="target-right target"><md-button class="language-button" \nng-click="$mdOpenMenu()" aria-label="Language" md-menu-origin md-menu-align-target><div layout="row" \nlayout-align="center center"><img class="flag" ng-src="assets/images/flags/{{vm.selectedLanguage.flag}}.png"> <span \nclass="iso">{{vm.selectedLanguage.code}}</span></div></md-button><md-menu-content width="3" id="language-menu-content">\n<md-menu-item ng-repeat="(iso, lang) in vm.languages"><md-button ng-click="vm.changeLanguage(lang)" \naria-label="{{lang.title}}"><span layout="row" layout-align="start center"><img class="flag" \nng-src="assets/images/flags/{{lang.flag}}.png"> <span>{{lang.title}}</span></span></md-button></md-menu-item>\n</md-menu-content></md-menu><div class="toolbar-separator"></div><md-button id="quick-panel-toggle" \nclass="md-icon-button" ng-click="vm.toggleSidenav(\'quick-panel\')" aria-label="Toggle quick panel"><md-icon \nmd-font-icon="icon-format-list-bulleted" class="icon"></md-icon></md-button></div></div>'),e.put("app/toolbar/layouts/vertical-navigation/toolbar.html",'<div data-layout="row" data-layout-align="start center"><div data-layout="row" data-layout-align="start center" \ndata-flex><md-button id="navigation-toggle" class="md-icon-button" data-ng-click="vm.toggleSidenav(\'navigation\')" \ndata-hide-gt-sm aria-label="Toggle navigation"><md-icon md-font-icon="icon-menu" class="icon"></md-icon></md-button>\n<div class="toolbar-separator"></div><md-menu-bar id="user-menu"><md-menu data-md-position-mode="left bottom">\n<md-button class="user-button" data-ng-click="$mdOpenMenu()" aria-label="User settings"><span data-layout="row" \ndata-layout-align="space-between center"><span class="avatar-wrapper"><div class="user-asign" \nng-if="vm.user.first_name"><span>{{vm.user.first_name[0]}}{{vm.user.last_name[0]}}</span></div><img \nng-if="!vm.user.first_name" data-md-menu-align-target class="avatar" src="assets/images/avatars/profile.jpg" \nalt="Imágen de perfil"> </span><span class="username" data-hide data-show-gt-sm>{{ vm.getFullNameUser(vm.user) }}\n</span><md-icon md-font-icon="icon-chevron-down" class="icon s16" data-hide-xs></md-icon></span></md-button>\n<md-menu-content width="3"><md-menu-divider></md-menu-divider><md-menu-item class="md-indent"><md-icon \nmd-font-icon="icon-logout" class="icon"></md-icon><md-button data-ng-click="vm.logout()">Cerrar sesión</md-button>\n</md-menu-item></md-menu-content></md-menu></md-menu-bar><div class="toolbar-separator"></div><md-button \ndata-ng-click="vm.toggleAvailable(true)" ng-class="(vm.user.is_available) ? \'md-green-700-bg\':\'grey-300-bg\'" \nclass="md-raised white-fg available" data-debouce-click aria-label="{{\'Disponible\' | translate}}"><span data-translate \nhide-xs>Disponible</span> <span data-translate hide-gt-xs>Disp.</span></md-button><md-button \ndata-ng-click="vm.toggleAvailable(false)" ng-class="(!vm.user.is_available) ? \'md-warn\':\'grey-300-bg\'" \nclass="md-raised available" data-debouce-click aria-label="{{\'No disponible\' | translate}}"><span data-translate \nhide-xs>No disponible</span> <span data-translate hide-gt-xs>No Disp.</span></md-button><div hide-xs><span \ndata-translate ng-if="vm.user.is_available">Disponible para gestionar leads </span><span data-translate \nng-if="!vm.user.is_available">Por favor conectate para recibir leads</span></div></div><div data-layout="row" \ndata-layout-align="start center"><md-progress-circular id="toolbar-progress" data-ng-disabled="!$root.loadingProgress" \nclass="md-accent" data-md-diameter="32"></md-progress-circular><md-menu id="info-lead" \ndata-md-position-mode="left bottom" ng-show-start="vm.lead.data.id && vm.showInfo()"><md-button \nng-click="$mdOpenMenu()" aria-label="lead" md-menu-origin md-menu-align-target><md-icon \nmd-font-icon="icon-information" class="icon blue-700-fg"></md-icon></md-button><md-menu-content width="3" \nid="lead-menu-content"><md-menu-item><md-icon md-font-icon="icon-calendar"></md-icon><span data-translate>Alta lead\n</span> <span>{{ vm.lead.data.created | date:\'dd/MM/yyyy\'}}</span></md-menu-item><md-menu-item><md-icon \nmd-font-icon="icon-trending-up"></md-icon><span data-translate>Score</span> <span data-ng-repeat="score in vm.scores" \nng-if="score.id===vm.lead.data.score">{{ score.name }}</span></md-menu-item><md-menu-item ng-if="vm.lead.data.result">\n<md-icon md-font-icon="icon-car"></md-icon><span data-translate>Resultado</span> <span \nng-if="vm.lead.data.result===\'positive\'" data-translate>Positivo</span> <span ng-if="vm.lead.data.result===\'negative\'" \ndata-translate>Negativo</span></md-menu-item><md-menu-item><md-icon md-font-icon="icon-tag"></md-icon><span \ndata-translate>Nuevo estado</span> <span ng-repeat="status in vm.leadStatus" ng-if="status.id===vm.lead.data.status">\n{{status.name}}</span></md-menu-item></md-menu-content></md-menu><div class="toolbar-separator" ng-show-end></div>\n<md-menu id="language-menu" md-offset="0 72" md-position-mode="target-right target"><md-button class="language-button" \nng-click="$mdOpenMenu()" aria-label="Language" md-menu-origin md-menu-align-target><div data-layout="row" \ndata-layout-align="center center"><img class="flag" data-ng-src="assets/images/flags/{{languageSelected}}.png" \nalt="{{languageSelected}}"> <span class="iso">{{languageSelected}}</span></div></md-button><md-menu-content width="3" \nid="language-menu-content"><md-menu-item ng-repeat="language in languages"><md-button \nng-click="changeLanguage(language.code)" aria-label="{{language.name}}"><span data-layout="row" \ndata-layout-align="start center"><img class="flag" data-ng-src="assets/images/flags/{{language.code}}.png" \nalt="{{language.name}}"> <span>{{language.name}}</span></span></md-button></md-menu-item></md-menu-content></md-menu>\n</div></div>'),e.put("app/toolbar/layouts/vertical-navigation-fullwidth-toolbar-2/toolbar.html",'<div layout="row" layout-align="start center"><div layout="row" layout-align="start center" flex><div class="logo" \nlayout="row" layout-align="start center"><span class="logo-image">F</span> <span class="logo-text">FUSE</span></div>\n<div class="toolbar-separator"></div><md-button id="navigation-toggle" class="md-icon-button" \nng-click="vm.toggleSidenav(\'navigation\')" hide-gt-sm aria-label="Toggle navigation"><md-icon md-font-icon="icon-menu" \nclass="icon"></md-icon></md-button><md-button class="md-icon-button navigation-fold-toggle" hide show-gt-sm \naria-label="Toggle navigation fold" ng-click="vm.toggleMsNavigationFolded()"><md-icon class="s18" \nmd-font-icon="icon-backburger"></md-icon></md-button><ms-shortcuts></ms-shortcuts><div class="toolbar-separator"></div>\n</div><div layout="row" layout-align="start center"><md-progress-circular id="toolbar-progress" \nng-if="$root.loadingProgress" class="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular>\n<md-menu-bar id="user-menu"><md-menu md-position-mode="left bottom"><md-button class="user-button" \nng-click="$mdOpenMenu()" aria-label="User settings"><div layout="row" layout-align="space-between center"><div \nclass="avatar-wrapper"><img md-menu-align-target class="avatar" src="assets/images/avatars/profile.jpg"></div><span \nclass="username" hide-sm>{{ vm.user.first_name }}</span><md-icon md-font-icon="icon-chevron-down" class="icon s16" \nhide-sm></md-icon></div></md-button><md-menu-content width="3"><md-menu-item class="md-indent" ui-sref="app.users">\n<md-icon md-font-icon="icon-account" class="icon"></md-icon><md-button>Mi perfil</md-button></md-menu-item>\n<md-menu-divider></md-menu-divider><md-menu-item class="md-indent"><md-icon md-font-icon="icon-logout" class="icon">\n</md-icon><md-button ng-click="vm.logout()">Cerrar sesión</md-button></md-menu-item></md-menu-content></md-menu>\n</md-menu-bar><div class="toolbar-separator"></div><ms-search-bar on-search="vm.search(query)" \non-result-click="vm.searchResultClick(item)" debounce="300"></ms-search-bar><div class="toolbar-separator"></div>\n<md-menu id="language-menu" md-offset="0 72" md-position-mode="target-right target"><md-button class="language-button" \nng-click="$mdOpenMenu()" aria-label="Language" md-menu-origin md-menu-align-target><div layout="row" \nlayout-align="center center"><img class="flag" ng-src="assets/images/flags/{{vm.selectedLanguage.flag}}.png"> <span \nclass="iso">{{vm.selectedLanguage.code}}</span></div></md-button><md-menu-content width="3" id="language-menu-content">\n<md-menu-item ng-repeat="(iso, lang) in vm.languages"><md-button ng-click="vm.changeLanguage(lang)" \naria-label="{{lang.title}}"><span layout="row" layout-align="start center"><img class="flag" \nng-src="assets/images/flags/{{lang.flag}}.png"> <span>{{lang.title}}</span></span></md-button></md-menu-item>\n</md-menu-content></md-menu><div class="toolbar-separator"></div><md-button id="quick-panel-toggle" \nclass="md-icon-button" ng-click="vm.toggleSidenav(\'quick-panel\')" aria-label="Toggle quick panel"><md-icon \nmd-font-icon="icon-format-list-bulleted" class="icon"></md-icon></md-button></div></div>'),e.put("app/navigation/layouts/horizontal-navigation/navigation.html",'<div layout="row" layout-align="start center"><ms-navigation-horizontal></ms-navigation-horizontal></div>'),e.put("app/navigation/layouts/vertical-navigation/navigation.html",'<md-toolbar class="navigation-header md-whiteframe-1dp" data-layout="row" data-layout-align="space-between center"><a \ndata-ui-sref="app.leads.board" class="logo" data-layout="row" data-layout-align="start center"><h1 data-hide-xs \ndata-hide-gt-xs data-translate>Infoauto</h1><img class="open-navigation" src="assets/logo/logo{{domain}}.png" \nalt="{{\'Configuración del sitio\' | translate}}" title="{{\'Inicio\' | translate}}"> <img class="close-navigation" \nsrc="assets/logo/logowhite{{domain}}.png" alt="{{\'Configuración del sitio\' | translate}}" \ntitle="{{\'Inicio\' | translate}}"></a><md-icon class="fold-toggle s18" data-md-font-icon="icon-backburger" hide \nshow-gt-sm ng-click="vm.toggleMsNavigationFolded()"></md-icon></md-toolbar><ms-navigation class="scrollable" \nfolded="vm.folded" ms-scroll="vm.msScrollOptions"></ms-navigation>'),e.put("app/core/directives/ms-navigation/templates/horizontal.html",'<div class="navigation-toggle" hide-gt-sm><md-button class="md-icon-button" ng-click="vm.toggleHorizontalMobileMenu()" \naria-label="Toggle Mobile Navigation"><md-icon md-font-icon="icon-menu"></md-icon></md-button></div><ul \nclass="horizontal"><li ng-repeat="node in vm.navigation" ms-navigation-horizontal-node="node" \nng-class="{\'has-children\': vm.hasChildren}" ng-include="\'navigation-horizontal-nested.html\'"></li></ul><script \ntype="text/ng-template" id="navigation-horizontal-nested.html">\n<div ms-navigation-horizontal-item layout="row" ng-if="!vm.isHidden()">\r\n\r\n        <div class="ms-navigation-horizontal-button" ng-if="!node.uisref && node.title"\r\n             ng-class="{\'active md-accent-bg md-accent-fg\': vm.isActive}">\r\n            <i class="icon s18 {{node.icon}}" ng-if="node.icon"></i>\r\n            <span class="title" flex>{{node.title}}</span>\r\n            <span class="badge white-fg" style="background: {{node.badge.color}}" ng-if="node.badge">{{node.badge.content}}</span>\r\n            <i class="icon-chevron-right s18 arrow" ng-if="vm.hasChildren"></i>\r\n        </div>\r\n\r\n        <a class="ms-navigation-horizontal-button" ui-sref="{{node.uisref}}" ui-sref-active="active md-accent-bg"\r\n           ng-class="{\'active md-accent-bg md-accent-fg\': vm.isActive}"\r\n           ng-if="node.uisref && node.title">\r\n            <i class="icon s18 {{node.icon}}" ng-if="node.icon"></i>\r\n            <span class="title" flex>{{node.title}}</span>\r\n            <span class="badge white-fg" style="background: {{node.badge.color}}" ng-if="node.badge">{{node.badge.content}}</span>\r\n            <i class="icon-chevron-right s18 arrow" ng-if="vm.hasChildren"></i>\r\n        </a>\r\n\r\n    </div>\r\n\r\n    <ul ng-if="vm.hasChildren && !vm.isHidden()">\r\n        <li ng-repeat="node in node.children" ms-navigation-horizontal-node="node"\r\n            ng-class="{\'has-children\': vm.hasChildren}"\r\n            ng-include="\'navigation-horizontal-nested.html\'"></li>\r\n    </ul>\n</script>'),e.put("app/core/directives/ms-navigation/templates/vertical.html",'<ul><li data-ng-repeat="node in vm.navigation" data-ms-navigation-node="node" \ndata-ng-class="{\'collapsed\': vm.collapsed, \'has-children\': vm.hasChildren}" data-ng-include="\'navigation-nested.html\'">\n</li></ul><script type="text/ng-template" id="navigation-nested.html">\n<div data-ms-navigation-item data-layout="row" data-ng-if="!vm.isHidden()">\r\n\r\n        <div class="ms-navigation-button" data-ng-if="!node.uisref && node.title && !node.href && !node.click">\r\n            <i class="icon s16 {{node.icon}}" data-ng-if="node.icon"></i>\r\n            <span class="title" data-flex>{{node.title}}</span>\r\n            <span class="badge white-fg" data-ng-style="{\'background\': node.badge.color}" data-ng-if="node.badge">{{node.badge.content}}</span>\r\n            <i class="icon-chevron-right s16 arrow" data-ng-if="vm.collapsable && vm.hasChildren"></i>\r\n        </div>\r\n\r\n        <a class="ms-navigation-button" data-ui-sref="{{node.uisref}}" data-ui-sref-active="active md-accent-bg"\r\n           data-ng-if="node.uisref && node.title && !node.href">\r\n            <i class="icon s16 {{node.icon}}" data-ng-if="node.icon"></i>\r\n            <span class="title" data-flex>{{node.title}}</span>\r\n            <span class="badge white-fg" data-ng-style="{\'background\': node.badge.color}" data-ng-if="node.badge">{{node.badge.content}}</span>\r\n            <i class="icon-chevron-right s16 arrow" data-ng-if="vm.collapsable && vm.hasChildren"></i>\r\n        </a>\r\n\r\n        <a class="ms-navigation-button" href="{{node.href}}" target="_blank"\r\n           data-ng-if="node.href && node.title">\r\n            <i class="icon s16 {{node.icon}}" data-ng-if="node.icon"></i>\r\n            <span class="title" data-flex>{{node.title}}</span>\r\n            <span class="badge white-fg" data-ng-style="{\'background\': node.badge.color}" data-ng-if="node.badge">{{node.badge.content}}</span>\r\n            <i class="icon-chevron-right s16 arrow" data-ng-if="vm.collapsable && vm.hasChildren"></i>\r\n        </a>\r\n\r\n        <a class="ms-navigation-button" ng-click="node.click()"\r\n           data-ng-if="node.click && node.title">\r\n            <i class="icon s16 {{node.icon}}" data-ng-if="node.icon"></i>\r\n            <span class="title" data-flex>{{node.title}}</span>\r\n            <span class="badge white-fg" data-ng-style="{\'background\': node.badge.color}" data-ng-if="node.badge">{{node.badge.content}}</span>\r\n            <i class="icon-chevron-right s16 arrow" data-ng-if="vm.collapsable && vm.hasChildren"></i>\r\n        </a>\r\n\r\n    </div>\r\n\r\n    <ul data-ng-if="vm.hasChildren && !vm.isHidden()">\r\n        <li data-ng-repeat="node in node.children" data-ms-navigation-node="node"\r\n            data-ng-class="{\'collapsed\': vm.collapsed, \'has-children\': vm.hasChildren}"\r\n            data-ng-include="\'navigation-nested.html\'"></li>\r\n    </ul>\n</script>'),e.put("app/main/auth/views/register/register.html",'<div id="register" class="flex-scrollable" data-layout="column" ms-scroll><div id="register-form-wrapper" \ndata-layout="column" data-layout-align="center center"><div id="register-form" class="md-whiteframe-8dp"><img \nsrc="assets/logo/logo-color{{domain}}.png" alt="Lantia"><h1 class="title" data-translate>Registrar nuevo usuario</h1>\n<form name="registerForm" novalidate><div data-layout="row" data-layout-align="space-between start"><md-input-container\n flex="100"><label data-translate>Nombre</label><input name="first_name" data-ng-model="vm.form.first_name" required>\n<error-messages field="registerForm.first_name" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div><div data-layout="row" data-layout-align="space-between start"><md-input-container \nflex="100"><label data-translate>Apellidos</label><input name="last_name" data-ng-model="vm.form.last_name" required>\n<error-messages field="registerForm.last_name" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div><div data-layout="row" data-layout-align="space-between start"><md-input-container \nflex="100"><label data-translate>Email</label><input name="email" data-ng-model="vm.form.email" required>\n<error-messages field="registerForm.email" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div><div data-layout="row" data-layout-align="space-between start"><md-input-container \nflex="50"><label data-translate>Contraseña</label><input type="password" name="password" \ndata-ng-model="vm.form.password" required><error-messages field="registerForm.password" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container><md-input-container flex="50"><input \nmatch-password="password" type="password" name="password2" ng-model="vm.form.repeat_password" \nplaceholder="Repite la contraseña"><error-messages field="registerForm.password2" server-errors="vm.serverErrors" \npassword-match></error-messages></md-input-container></div><md-button data-debouce-click data-ng-click="vm.register()" \ntype="submit" class="md-raised md-accent submit-button" aria-label="RESET MY PASSWORD" \ndata-ng-disabled="registerForm.$invalid || registerForm.$pristine"><span data-translate>Crear</span></md-button></form>\n<div class="login" data-layout="row" data-layout-align="center center"><a class="link" data-ui-sref="app.auth.login" \ndata-translate>Volver</a></div></div></div></div>'),e.put("app/main/auth/views/login/login.html",'<div id="login" class="flex-scrollable" data-layout="column" ms-scroll><div id="login-form-wrapper" \ndata-layout="column" data-layout-align="center center"><div id="login-form" class="md-whiteframe-8dp"><img \nsrc="assets/logo/logo-color{{domain}}.png" alt="Info auto"><form name="loginForm" novalidate><md-input-container \nclass="md-block" md-no-float><input name="username" data-ng-model="vm.username" \nplaceholder="{{\'Email o nombre de usario\' | translate}}" required><div ng-messages="loginForm.username.$error" \nrole="alert" multiple="multiple"><div ng-message="required"><span data-translate>Este campo es obligatorio</span></div>\n</div></md-input-container><md-input-container class="md-block" md-no-float><input type="password" name="password" \ndata-ng-model="vm.password" placeholder="{{\'Contraseña\' | translate}}" required><div \nng-messages="loginForm.password.$error" role="alert"><div ng-message="required"><span data-translate>\nEste campo es obligatorio</span></div></div></md-input-container><md-button data-debouce-click \ndata-ng-click="vm.login()" type="submit" class="md-raised md-accent submit-button" aria-label="LOG IN" \ndata-ng-disabled="loginForm.$invalid || loginForm.$pristine"><span data-translate>Entrar</span></md-button></form>\n</div></div></div>'),e.put("app/main/acds/dialogs/acd/acd-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="acdForm" class="md-inline-form" novalidate><md-toolbar\n class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" data-layout-align="space-between center">\n<span class="title">{{vm.title}}</span><md-button class="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon \nmd-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button></div></md-toolbar><md-dialog-content \nms-scroll><div data-layout="column"><md-input-container flex="30" flex-xs="100"><label data-translate>Lead</label>\n<md-select name="lead" data-ng-model="vm.acd.lead"><md-option data-ng-repeat="lead in vm.acd.possible_leads" \ndata-ng-value="lead.id">{{lead.vehicle_name}} - {{lead.client_name}}</md-option></md-select><error-messages \nfield="acdForm.lead" server-errors="vm.serverErrors"></error-messages></md-input-container></div></md-dialog-content>\n<md-dialog-actions data-layout="row" data-layout-align="space-between center"><div data-layout="row" \ndata-layout-align="start center"><md-button data-debouce-click type="submit" data-ng-click="vm.saveAcd()" \nclass="send-button md-accent md-raised" data-ng-disabled="acdForm.$invalid || acdForm.$pristine" \naria-label="{{\'Guardar\' | translate}}"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\n</md-dialog>'),e.put("app/main/channels/dialogs/channel/channel-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="channelForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><md-input-container flex="100"><input \ntype="text" name="name" data-ng-model="vm.channel.name" placeholder="{{\'Nombre\' | translate}}" required md-autofocus>\n<error-messages field="channelForm.name" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div></md-dialog-content><md-dialog-actions data-layout="row" \ndata-layout-align="space-between center"><div data-layout="row" data-layout-align="start center"><md-button \ndata-debouce-click type="submit" data-ng-click="vm.saveChannel()" class="send-button md-accent md-raised" \ndata-ng-disabled="channelForm.$invalid || channelForm.$pristine" aria-label="{{\'Guardar\' | translate}}"><span \ndata-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/concessionaires/dialogs/concessionaireNotes/concessionaireNotes-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="concessionaireForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><div class="no-results text-center" \nng-if="vm.concessionaire.notes_data.length == 0"><div class="message"><md-icon class="message-icon s96" \nmd-font-icon="icon-document"></md-icon><div class="message-text" translate>Sin notas añadidas</div></div></div><div \nng-repeat="note in vm.concessionaire.notes_data" layout="row" layout-wrap class="fullwidth" \nng-init="note.historyShow=false"><div flex="80"><div class="mb-10"><md-icon md-font-icon="icon-calendar"></md-icon>\n<span>{{ note.modified | date:\'dd/MM/yyyy HH:mm\' }}</span></div><md-input-container flex="100" \nng-init="name=\'notes_data___\'+$index+\'___content\'" class="fullwidth"><label data-translate>Nota</label><input \ntype="text" data-ng-model="vm.concessionaire.notes_data[$index].content" name="{{ name }}" \nng-disabled="vm.isDisabled()"><error-messages field="concessionaireForm[name]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><div class="pl-50" ng-show="note.historyShow"><div \nng-repeat="history in note.history"><div class="mb-10"><md-icon md-font-icon="icon-calendar"></md-icon><span>\n{{ history.modified | date:\'dd/MM/yyyy HH:mm\' }}</span></div><div class="mb-20">{{ history.content }}</div></div></div>\n</div><div flex="20"><md-button ng-click="note.historyShow=!note.historyShow" ng-if="note.history.length>0" \nclass="md-fab md-mini md-accent" aria-label="{{\'Ver historial\' | translate}}"><md-icon md-font-icon="icon-history">\n</md-icon><md-tooltip><span data-translate>Ver historial</span></md-tooltip></md-button><md-button \nng-click="vm.deleteNote(note)" ng-hide="vm.isDisabled()" ng-if="!note.id" class="md-fab md-mini md-warn" \naria-label="{{\'Borrar nota\' | translate}}"><md-icon md-font-icon="icon-delete"></md-icon></md-button></div></div><div \nclass="mt-20"><md-button ng-click="vm.addNote()" class="md-accent md-raised" \naria-label="{{\'Añadir nota\' | translate}}"><span data-translate>Añadir nota</span></md-button></div></div>\n</md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="space-between center"><div \ndata-layout="row" data-layout-align="start center"><md-button data-debouce-click type="submit" \ndata-ng-click="vm.saveConcessionaire()" class="send-button md-accent md-raised" \ndata-ng-disabled="concessionaireForm.$invalid || concessionaireForm.$pristine" aria-label="{{\'Guardar\' | translate}}">\n<span data-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>'),
e.put("app/main/concessionaires/dialogs/concessionaire/concessionaire-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="concessionaireForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><md-input-container flex="100"><input \ntype="text" name="name" data-ng-model="vm.concessionaire.name" placeholder="{{\'Nombre\' | translate}}" required \nmd-autofocus><error-messages field="concessionaireForm.name" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container><md-input-container flex="100"><input type="text" name="address" \ndata-ng-model="vm.concessionaire.address" placeholder="{{\'Dirección\' | translate}}"><error-messages \nfield="concessionaireForm.address" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container flex="100"><input type="text" name="web" data-ng-model="vm.concessionaire.web" \nplaceholder="{{\'Web\' | translate}}"><error-messages field="concessionaireForm.web" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container flex="100"><input type="text" name="web_coches_net" \ndata-ng-model="vm.concessionaire.web_coches_net" placeholder="{{\'Url coches.net\' | translate}}"><error-messages \nfield="concessionaireForm.web_coches_net" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container flex="100"><input type="text" name="schedule" data-ng-model="vm.concessionaire.schedule" \nplaceholder="{{\'Dashboard\' | translate}}"><error-messages field="concessionaireForm.schedule" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container flex="100"><input \ntype="text" name="mask_c2c" data-ng-model="vm.concessionaire.mask_c2c" placeholder="{{\'Id llamada c2c\' | translate}}">\n<error-messages field="concessionaireForm.mask_c2c" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container flex="100"><input type="text" name="concession_phone" \ndata-ng-model="vm.concessionaire.concession_phone" placeholder="{{\'Teléfono de concesión oficial\' | translate}}">\n<error-messages field="concessionaireForm.concession_phone" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container flex="100"><input type="text" name="hubspot_api_key" \ndata-ng-model="vm.concessionaire.hubspot_api_key" placeholder="{{\'Hubspot Api Key\' | translate}}"><error-messages \nfield="concessionaireForm.hubspot_api_key" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container flex="100"><input type="text" name="concession_phhubspot_idone" \ndata-ng-model="vm.concessionaire.hubspot_id" placeholder="{{\'Hubspot ID\' | translate}}"><error-messages \nfield="concessionaireForm.hubspot_id" server-errors="vm.serverErrors"></error-messages></md-input-container><p \ndata-translate>Fuentes:</p><div ng-repeat="source in vm.concessionaire.sources" layout="row" layout-wrap>\n<md-input-container flex="30" ng-init="name=\'sources___\'+$index+\'___data\'"><input type="text" name="{{ name }}" \ndata-ng-model="source.data" placeholder="{{\'Fuente\' | translate}} {{ $index+1 }}"><error-messages \nfield="concessionaireForm[name]" server-errors="vm.serverErrors"></error-messages></md-input-container><div \nng-init="nameOrigin=\'sources___\'+$index+\'___origin\'" flex="30"><md-autocomplete \nmd-floating-label="{{\'Origen\' | translate }}" md-delay="300" md-input-name="{{ nameOrigin }}" md-no-cache="true" \nmd-min-length="0" md-selected-item="source.origin_data" md-search-text="searchTextOrigin" \nmd-items="origin in vm.getOrigins(searchTextOrigin)" md-item-text="origin.name"><md-item-template><span \nmd-highlight-text="searchTextOrigin">{{origin.name}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex="100" \nclass="no-margin" ng-show="vm.serverErrors"><error-messages field="concessionaireForm[nameOrigin]" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><div \nng-init="nameChannel=\'sources___\'+$index+\'___channel\'" flex="30"><md-autocomplete \nmd-floating-label="{{\'Canal\' | translate }}" md-delay="300" md-input-name="{{ nameChannel }}" md-no-cache="true" \nmd-min-length="0" ng-disabled="!source.origin_data" md-selected-item="source.channel_data" \nmd-search-text="searchTextChannel" md-items="channel in vm.getChannels(searchTextChannel,source.origin_data)" \nmd-item-text="channel.name"><md-item-template><span md-highlight-text="searchTextChannel">{{channel.name}}</span>\n</md-item-template><md-not-found><span data-translate>No hay ningún canal con ese nombre</span></md-not-found>\n</md-autocomplete><md-input-container flex="100" class="no-margin" ng-show="vm.serverErrors"><error-messages \nfield="concessionaireForm[nameChannel]" server-errors="vm.serverErrors" required></error-messages></md-input-container>\n</div><div flex="10"><md-button ng-click="vm.removeSource($index,concessionaireForm, source)" \nclass="md-fab md-mini md-warn" aria-label="{{\'Borrar\' | translate}}"><md-icon md-font-icon="icon-delete"></md-icon>\n</md-button></div></div><div><md-button ng-click="vm.addSource()" class="md-accent md-raised" \naria-label="{{\'Añadir fuente\' | translate}}"><span data-translate>Añadir fuente</span></md-button></div></div>\n</md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="space-between center"><div \ndata-layout="row" data-layout-align="start center"><md-button data-debouce-click type="submit" \ndata-ng-click="vm.saveConcessionaire()" class="send-button md-accent md-raised" \ndata-ng-disabled="concessionaireForm.$invalid || concessionaireForm.$pristine" aria-label="{{\'Guardar\' | translate}}">\n<span data-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/concessionaires/dialogs/concessionaireCalendar/concessionaireCalendar-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="concessionaireForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><div><div \nng-repeat="(day,work_calendar) in vm.concessionaire.work_calendar" ng-if="vm.week[day]" layout="row" \nlayout-align="space-between center" class="bb"><div class="mr-40">{{ vm.week[day] }}</div><div layout="row" \nclass="date-row"><md-input-container class="md-block mr-40" layout="column" layout-align="center center" \nng-init="nameDate=\'work_calendar___\'+day+\'___working_day\'"><div data-translate>Día laborable</div><div class="ml-35">\n<md-checkbox name="{{ nameDate }}" ng-model="work_calendar.working_day" aria-label="{{\'Día laborable\' | translate}}">\n</md-checkbox></div><error-messages field="concessionaireForm[nameDate]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container ng-show="work_calendar.working_day" \nclass="no-errors-spacer mr-40" flex md-no-float ng-init="nameDate=\'work_calendar___\'+day+\'___start_hour\'"><span>\nHora de apertura</span> <input name="{{ nameDate }}" type="time" ng-model="work_calendar.start_hour"><error-messages \nfield="concessionaireForm[nameDate]" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container ng-show="work_calendar.working_day" class="no-errors-spacer" flex md-no-float \nng-init="nameDate=\'work_calendar___\'+day+\'___end_hour\'"><span>Hora de cierre</span> <input name="{{ nameDate }}" \ntype="time" ng-model="work_calendar.end_hour"><error-messages field="concessionaireForm[nameDate]" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div></div></div></div></md-dialog-content>\n<md-dialog-actions data-layout="row" data-layout-align="space-between center"><div data-layout="row" \ndata-layout-align="start center"><md-button data-debouce-click type="submit" data-ng-click="vm.saveConcessionaire()" \nclass="send-button md-accent md-raised" data-ng-disabled="concessionaireForm.$invalid || concessionaireForm.$pristine" \naria-label="{{\'Guardar\' | translate}}"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\n</md-dialog>'),e.put("app/main/leads/dialogs/duplicateLeads/duplicateLeads-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="duplicateLeadsForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><p data-translate>\nPuede que esté dando de alta un lead ya creado en el sistema, compruebe si alguno de estos leads es el que usted está creando\n</p><md-input-container flex="30" flex-xs="100"><label data-translate>Lead</label><md-select name="lead" \ndata-ng-model="vm.lead"><md-option data-ng-repeat="lead in vm.duplicateLeads" data-ng-value="lead.id"><span>\n{{lead.client.name}}</span> <span>- </span><span>{{lead.concessionaire_data.name}}</span> <span>- </span><span>\n{{lead.created | date:\'dd/MM/yyyy\'}}</span> <span>- </span><span ng-repeat="status in vm.status" \nng-if="status.id===lead.status">{{status.name}}</span></md-option></md-select><error-messages \nfield="duplicateLeadsForm.lead" server-errors="vm.serverErrors"></error-messages></md-input-container></div>\n</md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="space-between center"><div \ndata-layout="row" data-layout-align="start center"><md-button type="submit" data-ng-click="vm.goToLead()" \nclass="send-button md-accent md-raised" data-ng-disabled="duplicateLeadsForm.$invalid || duplicateLeadsForm.$pristine" \naria-label="{{\'Guardar\' | translate}}"><span data-translate>Abrir lead</span></md-button><md-button \ndata-ng-click="vm.closeDialog()" class="md-accent md-raised" aria-label="{{\'Nuevo lead\' | translate}}"><span \ndata-translate>Nuevo lead</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/leads/dialogs/finishLead/finishLead-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task" style="max-width: 900px; width: 900px"><form name="leadForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button \nclass="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog">\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column" data-translate \nng-if="!vm.actionError">Selecciona un resultado de la gestión</div><div data-layout="column" data-translate \nng-if="vm.actionError">Indique por favor el motivo del cierre del lead</div></md-dialog-content><md-dialog-actions \ndata-layout="row" data-layout-align="space-between center" ng-if="!vm.actionError"><div data-layout="row" \ndata-layout-align="start center"><md-button data-debouce-click data-ng-click="vm.saveLead(\'negative\')" \nclass="md-warn md-raised" data-ng-disabled="leadForm.$invalid" aria-label="{{\'Negativo\' | translate}}"><span \ndata-translate>Negativo</span></md-button><md-button data-debouce-click \ndata-ng-click="vm.saveLead(\'reserved_vehicle\')" class="green-700-bg white-fg md-raised" \ndata-ng-disabled="leadForm.$invalid" aria-label="{{\'Vehículo reservado\' | translate}}"><span data-translate>\nVehículo reservado</span></md-button><md-button data-debouce-click data-ng-click="vm.saveLead(\'unreachable\')" \nclass="md-accent md-raised" data-ng-disabled="leadForm.$invalid" aria-label="{{\'Ilocalizable\' | translate}}"><span \ndata-translate>Ilocalizable</span></md-button><md-button data-debouce-click data-ng-click="vm.saveLead(\'wrong\')" \nclass="md-primary md-raised" data-ng-disabled="leadForm.$invalid" aria-label="{{\'Duplicado\' | translate}}"><span \ndata-translate>Duplicado</span></md-button><md-button data-debouce-click data-ng-click="vm.saveLead(\'not_available\')" \nclass="yellow-700-bg white-fg md-raised" data-ng-disabled="leadForm.$invalid" \naria-label="{{\'No disponible\' | translate}}"><span data-translate>No disponible</span></md-button><md-button \ndata-debouce-click data-ng-click="vm.saveLead(\'error\')" class="purple-700-bg white-fg md-raised" \ndata-ng-disabled="leadForm.$invalid" aria-label="{{\'Error\' | translate}}"><span data-translate>Error</span></md-button>\n</div></md-dialog-actions><md-dialog-actions data-layout="row" data-layout-align="space-between center" \nng-if="vm.actionError"><div data-layout="row" data-layout-align="start center"><md-button \nng-repeat="button in vm.buttonErros" ng-if="button.status===vm.lead.result" data-debouce-click \ndata-ng-click="vm.saveLeadError(button.id)" class="md-primary md-raised" data-ng-disabled="leadForm.$invalid" \naria-label="{{button.name}}"><span>{{button.name}}</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/leads/dialogs/exportLeads/exportLeads-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="exportLeadForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><md-input-container flex="30" flex-xs="100">\n<label data-translate>Concesión</label><md-select name="concessionaire__in" \ndata-ng-model="vm.exportLead.concessionaire__in" multiple="multiple"><md-option \ndata-ng-repeat="concessionaire in vm.concessionaires" data-ng-value="concessionaire.id">{{ concessionaire.name }}\n</md-option></md-select><error-messages field="exportLeadForm.concessionaire__in" server-errors="vm.serverErrors" \nrequired></error-messages></md-input-container><div><label class="font-size-12 secondary-text" data-translate>\nCreados desde</label><md-datepicker name="created_start_date" data-ng-model="vm.exportLead.created_start_date" \nmd-placeholder="{{\'Creados desde\' | translate}}"></md-datepicker><error-messages \nfield="exportLeadForm.created_start_date" server-errors="vm.serverErrors" required></error-messages></div><div><label \nclass="font-size-12 secondary-text" data-translate>Creados hasta</label><md-datepicker name="created_end_date" \ndata-ng-model="vm.exportLead.created_end_date" md-placeholder="{{\'Creados hasta\' | translate}}"></md-datepicker>\n<error-messages field="exportLeadForm.created_end_date" server-errors="vm.serverErrors" required></error-messages>\n</div></div></md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="space-between center"><div \ndata-layout="row" data-layout-align="start center"><md-button data-debouce-click type="submit" \ndata-ng-click="vm.getDocument()" class="send-button md-accent md-raised" data-ng-disabled="exportLeadForm.$invalid" \naria-label="{{\'Exportar\' | translate}}"><span data-translate>Exportar</span></md-button></div></md-dialog-actions>\n</form></md-dialog>'),e.put("app/main/leads/dialogs/lead/lead-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task" style="width: 1000px; max-width: 1000px"><form name="leadForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button \nclass="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog">\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><table><thead><tr><th \ndata-translate>Comercial</th><th data-translate>Activo/Inactivo</th><th data-translate>Leads asignados hoy</th><th \ndata-translate>Leads no atendidos</th><th data-translate>Tareas atrasadas</th><th data-translate>Seguimientos atrasados\n</th><th data-translate>Acciones</th></tr></thead><tbody><tr data-ng-repeat="user in vm.users"><td><span>\n{{vm.getFullUserName(user)}}</span> <span ng-if="user.emails_received"><md-icon md-font-icon="icon-email"></md-icon>\n</span><span ng-if="user.lost_calls"><md-icon md-font-icon="icon-phone"></md-icon></span></td><td class="text-center">\n<span ng-if="user.is_online" class="green-fg">Activo</span> <span ng-if="!user.is_online" class="red-fg">Inactivo\n</span></td><td class="text-center">{{user.today_lead_number}}</td><td class="text-center">{{user.unattended_leads}}\n</td><td class="text-center">{{user.delayed_tasks}}</td><td class="text-center">{{user.delayed_trackings}}</td><td><div\n data-layout="row" data-layout-align="start center"><md-button data-debouce-click type="submit" \ndata-ng-click="vm.saveLead(user)" class="send-button md-accent md-raised" aria-label="{{\'Asignar\' | translate}}"><span \ndata-translate>Asignar</span></md-button></div></td></tr></tbody></table></div></md-dialog-content><md-dialog-actions \ndata-layout="row" data-layout-align="space-between center"><div data-layout="row" data-layout-align="start center">\n<md-button data-ng-click="vm.closeDialog()" class="md-raised" aria-label="{{\'Cancelar\' | translate}}"><span \ndata-translate>Cancelar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/leads/dialogs/leadActivity/leadActivity-dialog.html",'<md-dialog id="leadActivities" class="task-dialog" aria-label="New Task"><form name="leadActivityForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button \nclass="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog">\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><div class="todo-item" \nlayout="row" layout-align="start center" ng-repeat="activity in vm.leadActivities.data"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><div><div class="title mb-5">\n<md-icon md-font-icon="icon-account"></md-icon><span>{{activity.user_data.username}}</span></div><div \nclass="title mb-5"><md-icon md-font-icon="icon-calendar"></md-icon><span>{{activity.date | date:\'dd/MM/yyyy\'}}</span>\n</div><div layout="row" layout-align="start center" layout-wrap><span ng-repeat="status in vm.activityStatus" \nng-if="status.id===activity.lead_status_planing">{{status.name}}</span></div></div></div><div \nng-if="activity.status===\'done\'"><md-icon class="green-700-fg" md-font-icon="icon-check-circle"></md-icon></div></div>\n</div></div></div></div></md-dialog-content><md-dialog-actions data-layout="row" \ndata-layout-align="space-between center"><div data-layout="row" data-layout-align="start center"><md-button \ndata-ng-click="vm.closeDialog()" class="md-accent md-raised" aria-label="{{\'Cerrar\' | translate}}"><span \ndata-translate>Cerrar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/leads/dialogs/leadHistory/leadHistory-dialog.html",'<md-dialog id="leadHistories" class="task-dialog" aria-label="New Task"><form name="leadHistoryForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button \nclass="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog">\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><div class="todo-item" \nlayout="row" layout-align="start center" ng-repeat="history in vm.leadHistories.data"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><div><div class="title mb-5">\n<md-icon md-font-icon="icon-account"></md-icon><span>{{history.history_user}}</span></div><div class="title mb-5">\n<md-icon md-font-icon="icon-calendar"></md-icon><span>{{history.history_date | date:\'dd/MM/yyyy\'}}</span></div><div \nlayout="row" layout-align="start center" layout-wrap><div ng-bind-html="history.history_change_reason"></div></div>\n</div></div></div></div></div></div></div></md-dialog-content><md-dialog-actions data-layout="row" \ndata-layout-align="space-between center"><div data-layout="row" data-layout-align="start center"><md-button \ndata-ng-click="vm.closeDialog()" class="md-accent md-raised" aria-label="{{\'Cerrar\' | translate}}"><span \ndata-translate>Cerrar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/leads/dialogs/leadContact/leadContact-dialog.html",'<md-dialog id="leadContacts" class="task-dialog" aria-label="New Task"><form name="leadContactForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button \nclass="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog">\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><div class="todo-item" \nlayout="row" layout-align="start center" ng-repeat="acd in vm.leadContacts"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><div><div class="title mb-5">\n<md-icon md-font-icon="icon-phone-outgoing"></md-icon><span>{{acd.orig_phone}}</span></div><div class="title mb-5">\n<md-icon md-font-icon="icon-phone-incoming"></md-icon><span>{{acd.concession.name}}</span> <span>({{acd.dest_phone}})\n</span></div><div class="tags" layout="row" layout-align="start center" layout-wrap><div class="tag" layout="row" \nlayout-align="start center" ng-if="acd.date_contact"><md-icon md-font-icon="icon-calendar" class="s16"></md-icon><div \nclass="ml-10 tag-label">{{acd.date_contact | date:\'dd/MM/yyyy HH:mm\'}}</div></div><div class="tag" layout="row" \nlayout-align="start center" ng-if="acd.duration"><md-icon md-font-icon="icon-clock" class="s16"></md-icon><div \nclass="ml-10 tag-label">{{acd.duration}}</div></div><div class="tag" layout="row" layout-align="start center"><span \ndata-translate>LLamada respondida:</span><div class="ml-10 tag-label" ng-if="acd.answered_call" data-translate>Si</div>\n<div class="ml-10 tag-label" ng-if="!acd.answered_call" data-translate>No</div></div></div></div></div></div></div>\n</div></div></div></md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="space-between center">\n<div data-layout="row" data-layout-align="start center"><md-button data-ng-click="vm.closeDialog()" \nclass="md-accent md-raised" aria-label="{{\'Cerrar\' | translate}}"><span data-translate>Cerrar</span></md-button></div>\n</md-dialog-actions></form></md-dialog>'),e.put("app/main/leads/dialogs/leadStatus/leadStatus-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="leadStatusForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><md-input-container><label data-translate>\nEstado</label><md-select name="status" data-ng-model="vm.lead.status"><md-option data-ng-repeat="status in vm.status" \ndata-ng-value="status.id">{{status.name}}</md-option></md-select><error-messages field="leadStatusForm.status" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div></md-dialog-content><md-dialog-actions \ndata-layout="row" data-layout-align="space-between center"><div data-layout="row" data-layout-align="start center">\n<md-button data-debouce-click type="submit" data-ng-click="vm.saveLeadStatus()" \nclass="send-button md-accent md-raised" data-ng-disabled="leadStatusForm.$invalid" \naria-label="{{\'Guardar\' | translate}}"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\n</md-dialog>'),e.put("app/main/leads/dialogs/leadStatusDate/leadStatusDate-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="leadStatusForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div layout="row" layout-align="start end"><md-input-container>\n<md-datepicker name="{{vm.field}}" data-ng-model="vm.lead[vm.field]" md-placeholder="dd/mm/yyyy"></md-datepicker>\n<error-messages field="saveLeadForm[vm.field]" server-errors="vm.serverErrors" forcechange></error-messages>\n</md-input-container><md-input-container class="ml-20"><input class="mb-10" type="time" \ndata-ng-model="vm.lead[vm.field]" md-placeholder="hh:mm" step="60"></md-input-container></div></md-dialog-content>\n<md-dialog-actions data-layout="row" data-layout-align="space-between center"><div data-layout="row" \ndata-layout-align="start center"><md-button data-debouce-click type="submit" data-ng-click="vm.saveLeadStatus()" \nclass="send-button md-accent md-raised" data-ng-disabled="leadStatusForm.$invalid" \naria-label="{{\'Guardar\' | translate}}"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\n</md-dialog>'),e.put("app/main/leads/dialogs/saveLead/saveLead-dialog.html",'<md-dialog id="lead-edit-dialog" class="task-dialog" aria-label="New Task"><form name="saveLeadForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title" data-translate>Siguientes pasos</span>\n<md-button class="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" \naria-label="Close dialog"></md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div \ndata-layout="column"><label data-translate>Por favor valora el lead</label><md-input-container><div \nclass="mt-10 tag pointer" layout="row" layout-align="start center"><md-icon style="margin: 0" \nng-click="vm.lead.score=1" class="amber-fg" md-font-icon="{{ vm.lead.score >0 ? \'icon-star\' : \'icon-star-outline\'}}">\n</md-icon><md-icon style="margin: 0" ng-click="vm.lead.score=2" class="amber-fg" \nmd-font-icon="{{ vm.lead.score >1 ? \'icon-star\' : \'icon-star-outline\'}}"></md-icon><md-icon style="margin: 0" \nng-click="vm.lead.score=3" class="amber-fg" md-font-icon="{{ vm.lead.score >2 ? \'icon-star\' : \'icon-star-outline\'}}">\n</md-icon><md-icon style="margin: 0" ng-click="vm.lead.score=4" class="amber-fg" \nmd-font-icon="{{ vm.lead.score >3 ? \'icon-star\' : \'icon-star-outline\'}}"></md-icon></div><input type="hidden" \nname="score" ng-model="vm.lead.score"><error-messages field="saveLeadForm.score" server-errors="vm.serverErrors">\n</error-messages></md-input-container><div class="fullwidth" layout="row" layout-align="start center" layout-margin \nng-repeat="task in vm.tasks.data" ng-if="!task.realization_date"><div layout="row" layout-align="start center" flex>\n<div class="info" flex="auto"><div layout="row" data-layout-xs="column" layout-align="start end"><div \ndata-layout="row" layout-align="start center" class="mb-20 w-165 mr-15"><div flex><label class="input-label" \ndata-translate>Fecha</label><div class="bb"><md-icon md-font-icon="icon-calendar"></md-icon><span \nng-if="vm.lead.last_lead_action.date">{{ vm.lead.last_lead_action.date | date:\'dd/MM/yyyy HH:mm\' }}</span> <span \nng-if="!vm.lead.last_lead_action.date" translate>Sin definir</span></div></div></div><div data-layout="row" \nlayout-align="start center" class="mb-20 w-165 mr-15"><div flex><label class="input-label" data-translate>Medio</label>\n<div class="bb"><md-icon md-font-icon="icon-whatsapp" ng-if="task.media===\'Whatsapp\'"></md-icon><md-icon \nmd-font-icon="icon-phone" ng-if="task.media===\'Phone\'"></md-icon><md-icon md-font-icon="icon-message-text-outline" \nng-if="task.media===\'SMS\'"></md-icon><md-icon md-font-icon="icon-email" ng-if="task.media===\'E-mail\'"></md-icon>\n<md-icon md-font-icon="icon-account-multiple" ng-if="task.media===\'face\'"></md-icon><span ng-if="task.media===\'Phone\'" \ndata-translate>Teléfono</span> <span ng-if="task.media===\'face\'" data-translate>Presencial</span> <span \nng-if="task.media!==\'Phone\' && task.media!==\'face\'">{{ task.media }}</span></div></div></div><div data-layout="row" \nlayout-align="start center" class="mb-20 w-165 mr-15"><div flex><label class="input-label" data-translate>Tipo de tarea\n</label><div class="bb"><span ng-repeat="type in vm.taskTypes" ng-if="type.id===task.type">{{ type.name }}</span></div>\n</div></div></div></div></div></div><div layout="row" layout-align="start end"><md-input-container><h4 data-translate>\nPrograma la fecha de la siguiente gestión:</h4><md-datepicker name="date" data-ng-model="vm.leadAction.date" \nmd-placeholder="dd/mm/yyyy"></md-datepicker><error-messages field="saveLeadForm.date" server-errors="vm.serverErrors" \nforcechange></error-messages></md-input-container><md-input-container class="mr-20" style="margin-left: -40px"><input \nclass="mb-10" type="time" data-ng-model="vm.leadAction.date" md-placeholder="hh:mm" step="60"></md-input-container><div\n class="mb-30"><md-button data-ng-click="vm.setDate(1)" class="md-raised" aria-label="{{ \'1 DIA\' | translate }}"><span \ndata-translate>1 DIA</span></md-button><md-button data-ng-click="vm.setDate(2)" class="md-raised" \naria-label="{{ \'2 DIAS\' | translate }}"><span data-translate>2 DIAS</span></md-button><md-button \ndata-ng-click="vm.setDate(7)" class="md-raised" aria-label="{{ \'1 SEMANA\' | translate }}"><span data-translate>1 SEMANA\n</span></md-button></div></div><div class="content-status-lead"><div class="step step-new" \nng-class="{\'active\': vm.leadAction.lead_status_planing===\'new\'}"><div class="content-circle"><div \nclass="circle pointer" ng-click="vm.leadAction.lead_status_planing=\'new\'"><md-icon md-font-icon="icon-chevron-right">\n</md-icon></div><div class="line"></div></div><div class="text" layout="column" hide-xs><span translate>Alta</span>\n</div></div><div class="step step-pending" \nng-class="{\'active\': vm.leadAction.lead_status_planing===\'commercial_management\'}"><div class="content-circle"><div \nclass="circle pointer" ng-click="vm.leadAction.lead_status_planing=\'commercial_management\'"><md-icon \nmd-font-icon="icon-chevron-right"></md-icon></div><div class="line"></div></div><div class="text" layout="column"><span\n translate>Tareas pendientes</span></div></div><div class="step step-tracing" \nng-class="{\'active\': vm.leadAction.lead_status_planing===\'tracing\'}"><div class="content-circle"><div \nclass="circle pointer" ng-click="vm.leadAction.lead_status_planing=\'tracing\'"><md-icon \nmd-font-icon="icon-chevron-right"></md-icon></div><div class="line"></div></div><div class="text" layout="column"><span\n translate>Seguimiento</span></div></div><div class="step step-end" \nng-class="{\'active\': vm.leadAction.lead_status_planing===\'end\'}"><div class="content-circle"><div class="circle" \nng-click="vm.leadAction.lead_status_planing=\'end\';vm.finishLead()"><md-icon md-font-icon="icon-close"></md-icon></div>\n<div class="line"></div></div><div class="text" layout="column" hide-xs><span translate>Finalizar</span></div></div>\n</div><md-input-container><input type="hidden" name="lead_status_planing" ng-model="vm.leadAction.lead_status_planing">\n<error-messages field="saveLeadForm.lead_status_planing" server-errors="vm.serverErrors"></error-messages>\n</md-input-container></div></md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="end center"><div\n data-layout="row" data-layout-align="end center" class="fullwidth"><md-button data-debouce-click type="submit" \ndata-ng-click="vm.closeDialog()" class="send-button md-raised" aria-label="{{ \'Cancelar\' | translate }}"><span \ndata-translate>Cancelar</span></md-button><md-button data-debouce-click type="submit" \ndata-ng-click="vm.saveSaveLead()" class="send-button md-accent md-raised" aria-label="{{ \'Confirmar\' | translate }}">\n<span data-translate>Confirmar</span></md-button></div></md-dialog-actions></form></md-dialog>'),
e.put("app/main/leads/dialogs/sendWhatsapp/sendWhatsapp-dialog.html",'<md-dialog id="lead-edit-dialog" class="task-dialog" aria-label="New Task"><form name="sendWhatsappForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title" data-translate \nng-if="!vm.manageTemplates">Enviar whatsapp</span> <span class="title" data-translate ng-if="vm.manageTemplates">\nGestión de plantillas de Whatsapp</span><md-button class="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon \nmd-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button></div></md-toolbar><md-dialog-content \nms-scroll><div data-layout="column" ng-if="!vm.manageTemplates"><div data-layout="row" \ndata-layout-align="start center" class="fullwidth"><md-input-container \nng-if="vm.lead.user_data.whatsapp_templates.length" class="w-400"><label data-translate>Plantillas</label><md-select \nng-change="vm.updateTemplate()" ng-model="vm.templateSelected"><md-option \nng-repeat="template in vm.lead.user_data.whatsapp_templates" ng-value="template.text">{{template.alias}}</md-option>\n</md-select></md-input-container><md-button data-debouce-click data-ng-click="vm.startManageTemplates()" \nclass="send-button md-raised" aria-label="{{ \'Gestionar plantillas\' | translate }}"><span data-translate>\nGestionar plantillas</span></md-button></div><md-input-container><label data-translate>Mensaje de Whatsapp</label>\n<textarea class="dynamic" data-ng-model="vm.whatsappMsg"></textarea></md-input-container></div><div \ndata-layout="column" ng-if="vm.manageTemplates"><div class="md-grey-300-bg grey-600-fg" \nstyle="padding: 12px;margin-bottom: 24px"><p>Puede usar las siguientes variables de sustitución</p><ul><li><strong>\n[Nombre vendedor]</strong>: Su propio nombre y apellido</li><li><strong>[Telefono del vendedor]</strong>\n: Su propio teléfono</li><li><strong>[Vehículo solicitado]</strong>: El vehículo solicitado por el cliente</li><li>\n<strong>[Url anuncio]</strong>: La URL del anuncio de este vehículo</li><li><strong>[Origen del lead]</strong>\n: El origen de captación de este lead</li><li><strong>[Nombre del concesionario]</strong>\n: El nombre del concesionario vinculado al lead</li></ul><p><strong>Ejemplo:</strong>\n Hola! Soy [Nombre vendedor] y le ayudaré en el proceso de compra del vehículo [Vehículo solicitado] en el concesionario [Nombre del concesionario]. Para cualquier duda puede llamarme al [Telefono del vendedor]\n</p></div><div data-layout="row" data-layout-align="start start" class="fullwidth" \nng-repeat="template in vm.templates"><md-input-container><label data-translate>Alias de la plantilla</label><input \ntype="text" data-ng-model="template.alias"></md-input-container><md-input-container class="w-400"><label \ndata-translate>Mensaje de Whatsapp</label><textarea class="dynamic" data-ng-model="template.text"></textarea>\n</md-input-container></div></div></md-dialog-content><md-dialog-actions data-layout="row" \ndata-layout-align="end center"><div data-layout="row" data-layout-align="end center" class="fullwidth" \nng-if="!vm.manageTemplates"><md-button data-debouce-click type="submit" data-ng-click="vm.closeDialog()" \nclass="send-button md-raised" aria-label="{{ \'Cancelar\' | translate }}"><span data-translate>Cancelar</span>\n</md-button><md-button class="md-raised md-accent" aria-label="{{\'Enviar\' | translate}}" \ndata-ng-click="vm.sendWhatsapp()"><span data-translate>Enviar</span></md-button></div><div data-layout="row" \ndata-layout-align="end center" class="fullwidth" ng-if="vm.manageTemplates"><md-button data-debouce-click \ntype="submit" data-ng-click="vm.manageTemplates = false" class="send-button md-raised" \naria-label="{{ \'Cancelar\' | translate }}"><span data-translate>Cancelar</span></md-button><md-button \ndata-debouce-click type="submit" data-ng-click="vm.templates.push({alias: \'\',text: \'\'})" class="send-button md-raised" \naria-label="{{ \'Añadir plantilla\' | translate }}"><span data-translate>Añadir plantilla</span></md-button><md-button \nclass="md-raised md-accent" aria-label="{{\'Enviar\' | translate}}" data-ng-click="vm.sendWhatsappTemplates()"><span \ndata-translate>Guardar plantillas</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/leads/views/detail/lead-company.html",'<div class="mb-20 detail-company" data-ng-if="!hasPermission(\'companyList\',\'GET\')"><md-icon md-font-icon="icon-domain">\n</md-icon><span class="ml-20">{{vm.lead.offer.company.business_name}}</span></div><div \nui-sref="app.company.detail({id:\'{{vm.lead.offer.company.id}}\'})" class="mb-20 detail-company pointer" \ndata-ng-if="hasPermission(\'companyList\',\'GET\')"><md-icon md-font-icon="icon-domain"></md-icon><span class="ml-20">\n{{vm.lead.offer.company.business_name}}</span></div><div data-layout="column" data-layout-align="start start" \nlayout-wrap><div class="border-bottom fullwidth"><h2 data-translate>Centro de trabajo</h2><span>\n{{vm.lead.seat_data.name}} {{vm.lead.seat_data.address}}</span></div><div class="pl-20 mb-20 mt-20" \nng-if="vm.lead.seat_data"><div class="secondary-text" data-ng-if="vm.lead.seat_data.address"><md-icon \nmd-font-icon="icon-map-marker" class="icon"></md-icon><span>{{vm.lead.seat_data.address}}</span></div><div \nclass="secondary-text" data-ng-if="vm.lead.seat_data.email"><md-icon md-font-icon="icon-email" class="icon"></md-icon>\n<span>{{vm.lead.seat_data.email}}</span></div><div class="secondary-text" data-ng-if="vm.lead.seat_data.phone"><md-icon\n md-font-icon="icon-phone" class="icon"></md-icon><span>{{vm.lead.seat_data.phone}}</span></div></div></div><div \nclass="border-bottom fullwidth"><h4 data-translate>Departamento / Área</h4><span>{{vm.lead.department}}</span></div>\n<div data-layout="column" data-layout-align="start start" layout-wrap><h2 data-translate>Contactos</h2><div \nclass="border-bottom fullwidth" ng-if="vm.lead.professional_tutor_data"><h4 data-translate>Tutor profesional</h4><span>\n{{vm.lead.professional_tutor_data.name}} {{vm.lead.professional_tutor_data.surname}} {{vm.lead.professional_tutor_data.second_surname}}\n</span></div><div class="pl-20 mb-20 mt-20" ng-if="vm.lead.professional_tutor_data"><div class="secondary-text" \ndata-ng-if="vm.lead.professional_tutor_data.user.email"><md-icon md-font-icon="icon-email" class="icon"></md-icon>\n<span>{{vm.lead.professional_tutor_data.user.email}}</span></div><div class="secondary-text" \ndata-ng-if="vm.lead.professional_tutor_data.phone"><md-icon md-font-icon="icon-phone" class="icon"></md-icon><span>\n{{vm.lead.professional_tutor_data.phone}}</span></div><div class="secondary-text" \ndata-ng-if="vm.lead.professional_tutor_data.mobile"><md-icon md-font-icon="icon-cellphone-iphone" class="icon">\n</md-icon><span>{{vm.lead.professional_tutor_data.mobile}}</span></div></div><div class="border-bottom fullwidth" \nng-if="vm.lead.academic_tutor_data"><h4 data-translate>Tutor académico</h4><span>\n{{vm.lead.academic_tutor_data.name}} {{vm.lead.academic_tutor_data.surname}} {{vm.lead.academic_tutor_data.second_surname}}\n</span></div><div class="pl-20 mb-20 mt-20" ng-if="vm.lead.academic_tutor_data"><div class="secondary-text" \ndata-ng-if="vm.lead.academic_tutor_data.email"><md-icon md-font-icon="icon-email" class="icon"></md-icon><span>\n{{vm.lead.academic_tutor_data.email}}</span></div><div class="secondary-text" \ndata-ng-if="vm.lead.academic_tutor_data.phone"><md-icon md-font-icon="icon-phone" class="icon"></md-icon><span>\n{{vm.lead.academic_tutor_data.phone}}</span></div><div class="secondary-text" \ndata-ng-if="vm.lead.academic_tutor_data.mobile"><md-icon md-font-icon="icon-cellphone-iphone" class="icon"></md-icon>\n<span>{{vm.lead.academic_tutor_data.mobile}}</span></div></div></div>'),e.put("app/main/leads/views/detail/lead.html",'<div id="lead-detail" class="page-layout carded left-sidenav" layout="row"></div>'),e.put("app/main/leads/views/board/board-columns.html",'<div id="board" layout="row"><div class="list-wrapper" ng-repeat="list in vm.board.lists" ng-show="list.show"><div \nclass="list md-whiteframe-1dp" layout="column"><div class="list-header" layout="row" \nlayout-align="space-between center"><div class="list-header-name"><span>{{list.name}}</span></div><div class="p-20">\n{{ vm.leads[list.id].count }}</div></div><div class="list-content" layout="column"><div class="list-cards" ms-scroll><a\n class="list-card md-whiteframe-2dp" ng-repeat="lead in vm.leads[list.id].data" \ndata-ui-sref="app.leads.get.edit({\'lead\':\'{{ lead.id }}\'})" target="_blank"><div class="list-card-details mb-10"><div \nclass="list-card-labels" layout="row" layout-align="space-between center" layout-wrap><div class="mb-10"><stars \nscore="lead.score"></stars></div><span ng-if="list.id===\'end\'"><span class="list-card-label white-fg result-info" \nng-repeat="result in vm.leadResults" ng-if="result.id===lead.result" style="background: {{ result.color }}"><span \nng-if="lead.result!==\'negative\' && lead.result!==\'not_available\' && lead.result!==\'error\' && lead.result!==\'positive\'">\n{{ result.name }}</span> <span \nng-if="(lead.result===\'negative\' || lead.result===\'not_available\' || lead.result===\'error\' || lead.result===\'positive\') &&\r\n                                        result_reason.id===lead.result_reason" \nng-repeat="result_reason in vm.leadResultsErrors">{{result_reason.name}} </span><span \nng-if="(lead.result===\'negative\' || lead.result===\'not_available\' || lead.result===\'error\' || lead.result===\'positive\') &&\r\n                                        !lead.result_reason">\n{{result.name}}</span></span></span><div class="user-asign"><span ng-if="lead.user_data.first_name">\n{{lead.user_data.first_name[0]}}{{lead.user_data.last_name[0]}} </span><span ng-if="!lead.user_data.first_name">-\n</span></div></div><div layout="row" layout-align="space-between start"><div><div><i class="icon-account s16"></i> \n<span ng-if="lead.client_name">{{lead.client_name}} {{lead.client_surname}}</span> <span ng-if="!lead.client_name">\n{{\'No definido\' | translate}}</span></div><div ng-if="lead.client_business_name"><i class="icon-domain s16"></i> <span>\n{{lead.client_business_name}}</span></div><div ng-if="lead.client_phone"><i class="icon-phone s16"></i> <span>\n{{lead.client_phone | limitTo:5}}xxxx</span></div></div><div><div layout="row" layout-align="start center"><div \nlayout="row" layout-align="start center" ng-show="lead.channel"><span class="list-card-footer-item" layout="row" \nlayout-align="start center" data-translate>Canal:</span> <span class="list-card-footer-item" \nng-if="lead.channel===\'email\' || lead.channel===\'both\'" layout="row" layout-align="start center"><i \nclass="icon-email s18"></i> </span><span class="list-card-footer-item" \nng-if="lead.channel===\'phone\' || lead.channel===\'both\'" layout="row" layout-align="start center"><i \nclass="icon-phone s18"></i> </span><span class="list-card-footer-item" \nng-if="lead.channel===\'chat\' || lead.channel===\'both\'" layout="row" layout-align="start center"><i \nclass="icon-comment s18"></i> </span><span class="list-card-footer-item" \nng-if="lead.channel===\'exposition\' || lead.channel===\'both\'" layout="row" layout-align="start center"><i \nclass="icon-map-marker s18"></i> </span><span class="list-card-footer-item" \nng-if="lead.channel===\'web_home\' || lead.channel===\'both\'" layout="row" layout-align="start center"><i \nclass="icon-web s18"></i></span></div><div class="origin-icon ml-10"><img ng-src="{{ lead.origin }}"></div></div></div>\n</div></div><div class="list-card-footer" ng-if="lead.last_lead_action.last_task.type"><div><div \nng-init="task=lead.last_lead_action.last_task" layout="row" layout-align="start center" class="tags mt-10 mb-10">\n<strong class="mr-20" ng-repeat="type in vm.taskTypes" ng-if="task.type===type.id && task.type">{{ type.name }}\n</strong> <strong ng-if="!task.type" class="mr-20" translate>Sin solicitudes</strong><div layout="row" \nlayout-align="start start"><div class="ml-10 tag-label"><span>\n{{ lead.last_lead_action.date | date:\'dd/MM/yyyy HH:mm\' }}</span></div></div></div></div></div><div \nclass="list-card-footer"><div class="list-card-name pt-10 pb-10" ng-repeat="vehicle in lead.vehicles_names"><i \nclass="icon-car s16"></i> <span>{{vehicle | vehicle}}</span></div></div><div class="list-card-footer"><div \nclass="pt-10 pb-10"><div data-translate>Lead managements:</div><div \nng-repeat="lead_management in lead.lead_managements_data"><div class="mt-5"><strong class="title">\n{{lead_management.message}}</strong></div><div class="tags" layout="row" layout-align="start center" layout-wrap><div \nclass="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-calendar" class="s16"></md-icon><div \nclass="ml-10 tag-label"><span translate>Fecha:</span> {{lead_management.created | date:\'dd/MM/yyyy\'}}</div></div><div \nclass="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-calendar" class="s16"></md-icon><div \nclass="ml-10 tag-label"><span translate>Hora:</span> {{lead_management.created | date:\'HH:mm\'}}</div></div></div></div>\n</div></div></a><div class="p-5 text-right pointer"><a ng-show="vm.leads[list.id].data.length<vm.leads[list.id].count" \nng-click="vm.showMore(list.id)" data-translate>Ver más</a></div></div></div></div></div></div>'),e.put("app/main/leads/views/board/board-view.html",'<div id="scrumboard" class="page-layout simple fullwidth center" layout="column"><div class="header bb" \nlayout="column"><div class="header-content" layout="row" layout-align="space-between" layout-wrap flex><div \nlayout="row" layout-align="center center" flex-order="1" flex-order-xs="2"><form name="search" layout="row" \nlayout-xs="column" layout-wrap novalidate class="mr-40"><div layout="row"><label class="search" data-layout="row" \ndata-layout-align="start center" data-flex><span data-hide-xs data-hide-gt-xs data-translate>Buscar</span><input \nclass="search-input-black" type="text" placeholder="{{\'Buscar\' | translate }}" data-ng-model="vm.filters.search" \ndata-flex></label><md-button type="submit" class="md-raised search-button" \nng-click="vm.changeFilter(\'search\',vm.filters.search)"><md-icon md-font-icon="icon-magnify" class="icon"></md-icon>\n</md-button></div></form><div ng-if="vm.user.is_admin || vm.user.is_concession_admin"><md-button \nclass="md-raised md-hue-2 header-boards-button mr-40" ng-class="{\'md-accent\':!vm.leads.new.filters.with_concession}" \nng-click="vm.changeFilter(\'with_concession\', null); vm.filters.user_data=[vm.user]" aria-label="Mis leads"><span \ndata-translate>Mis leads</span></md-button><md-button class="md-raised md-hue-2 header-boards-button" \nng-class="{\'md-accent\':vm.leads.new.filters.with_concession}" \nng-click="vm.changeFilter(\'with_concession\', true); vm.filters.user_data=[]" aria-label="Todos"><span data-translate>\nTodos</span></md-button></div></div><div class="toolbar" layout="row" layout-align="space-between center" \nflex-order="3"><p ng-if="vm.hasFilterAdvance" class="orange-700-fg mr-40"><md-icon md-font-icon="icon-alert" \nclass="icon orange-700-fg"></md-icon><span translate>Filtros avanzados aplicados</span></p><md-button \nclass="md-accent md-raised md-hue-2 header-boards-button" ng-click="vm.toggleSidenav(\'filters-sidenav\')" \naria-label="Filtrar"><md-icon md-font-icon="icon-filter-variant" class="icon"></md-icon><span data-translate>Filtrar\n</span></md-button><md-button class="md-raised md-hue-2 header-boards-button" ng-click="vm.getDocument()" \ndata-debouce-click aria-label="Exportar"><md-icon md-font-icon="icon-export" class="icon"></md-icon><span \ndata-translate>Exportar</span></md-button></div></div></div><md-content class="content" flex layout="column"><div \nclass="fullwidth" ng-include="\'app/main/leads/views/board/board-columns.html\'"></div></md-content><md-sidenav \nclass="filters-sidenav md-sidenav-right" md-component-id="filters-sidenav" \nng-include="\'app/main/leads/sidenavs/filters/filters-sidenav.html\'" ms-sidenav-helper></md-sidenav></div>'),e.put("app/main/leads/views/edit/appraisals.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-car" class="black-fg no-margin"></md-icon><span \ndata-translate>Vehículos actuales</span></h2><md-icon ng-hide="vm.isDisabled()" ng-click="vm.addAppraisal()" \nmd-font-icon="icon-plus-circle-outline" class="pointer black-fg no-margin"></md-icon></div></md-toolbar><md-content \nclass="fullwidth"><div ng-repeat="appraisal in vm.lead.appraisals" flex layout-padding data-layout-xs="column" \ndata-layout="row" data-layout-align="space-between start" layout-wrap class="fullwidth" ng-init="appraisal.field={}">\n<div layout-margin-lg flex="80" data-layout-xs="column" data-layout="row" layout-wrap><div class="h-30" \ndata-layout="column" data-layout-align="center start" \nng-init="appraisal.field[\'brand\']=\'appraisals___\'+$index+\'___brand\'"><md-autocomplete \nmd-floating-label="{{\'Marca\' | translate }}" md-delay="300" md-input-name="{{appraisal.field[\'brand\']}}" \nmd-no-cache="true" ng-disabled="vm.isDisabled()" required md-selected-item="appraisal.brand_data" \nmd-search-text="searchTextBrand" md-items="brand in vm.getBrands(searchTextBrand)" md-min-length="0" \nmd-item-text="brand.name"><md-item-template><span md-highlight-text="searchTextBrand">{{brand.name}}</span>\n</md-item-template><md-not-found><span data-translate>No hay ninguna marca con ese nombre</span></md-not-found>\n</md-autocomplete><md-input-container flex="100" class="no-margin"><error-messages \nfield="leadForm[appraisal.field[\'brand\']]" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div><div class="h-30" data-layout="column" data-layout-align="center start" \nng-init="appraisal.field[\'model\']=\'appraisals___\'+$index+\'___model\'"><md-autocomplete \nmd-floating-label="{{\'Modelo\' | translate }}" md-delay="300" md-input-name="{{appraisal.field[\'model\']}}" \nmd-no-cache="true" ng-disabled="vm.isDisabled() || !appraisal.brand_data" md-selected-item="appraisal.model_data" \nmd-search-text="searchTextModel" md-items="model in vm.getModels(appraisal.brand_data.id, searchTextModel)" \nmd-min-length="0" md-item-text="model.model_name"><md-item-template><span md-highlight-text="searchTextModel">\n{{model.model_name}}</span></md-item-template><md-not-found><span data-translate>No hay ningun modelo con ese nombre\n</span></md-not-found></md-autocomplete><md-input-container flex="100" class="no-margin"><error-messages \nfield="leadForm[appraisal.field[\'model\']]" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div><div class="h-30" data-layout="column" data-layout-align="center start" \nng-init="appraisal.field[\'version\']=\'appraisals___\'+$index+\'___version\'"><md-autocomplete \nmd-floating-label="{{\'Version\' | translate }}" md-delay="300" md-input-name="{{appraisal.field[\'version\']}}" \nmd-no-cache="true" ng-disabled="vm.isDisabled() || !appraisal.model_data" \nmd-selected-item-change="vm.changeVehicleVersion(appraisal,\'cv\',\'gas\')" md-selected-item="appraisal.version_data" \nmd-search-text="searchTextVersion" md-items="version in vm.getVersions(appraisal.model_data.id, searchTextVersion)" \nmd-min-length="0" md-item-text="vm.getFullNameVersion(version)"><md-item-template><span \nmd-highlight-text="searchTextVersion">{{vm.getFullNameVersion(version)}}</span></md-item-template><md-not-found><span \ndata-translate>No hay ninguna versión con ese nombre</span></md-not-found></md-autocomplete><md-input-container \nflex="100" class="no-margin"><error-messages field="leadForm[appraisal.field[\'version\']]" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><md-input-container \nng-init="appraisal.field[\'km\']=\'appraisals___\'+$index+\'___km\'"><label data-translate>Km</label><input type="text" \nname="{{appraisal.field[\'km\']}}" data-ng-model="appraisal.km" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[appraisal.field[\'km\']]" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container ng-init="appraisal.field[\'cv\']=\'appraisals___\'+$index+\'___cv\'"><label data-translate>CV</label>\n<input type="text" name="{{appraisal.field[\'cv\']}}" data-ng-model="appraisal.cv" ng-disabled="vm.isDisabled()">\n<error-messages field="leadForm[appraisal.field[\'cv\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><div class="w-205" \nng-init="appraisal.field[\'circulation_date\']=\'appraisals___\'+$index+\'___circulation_date\'"><label \nclass="font-size-12 secondary-text" data-translate>Fecha de circulación</label><md-datepicker \nname="{{appraisal.field[\'circulation_date\']}}" data-ng-model="appraisal.circulation_date" \nmd-placeholder="{{\'Fecha de circulación\' | translate}}"></md-datepicker><error-messages \nfield="leadForm[appraisal.field[\'circulation_date\']]" server-errors="vm.serverErrors"></error-messages></div><div \nclass="w-205" ng-init="appraisal.field[\'buy_date\']=\'appraisals___\'+$index+\'___buy_date\'"><label \nclass="font-size-12 secondary-text" data-translate>Fecha de compra</label><md-datepicker \nname="{{appraisal.field[\'buy_date\']}}" data-ng-model="appraisal.buy_date" \nmd-placeholder="{{\'Fecha de compra\' | translate}}"></md-datepicker><error-messages \nfield="leadForm[appraisal.field[\'buy_date\']]" server-errors="vm.serverErrors"></error-messages></div><div \nclass="w-205" ng-init="appraisal.field[\'registration_date\']=\'appraisals___\'+$index+\'___registration_date\'"><label \nclass="font-size-12 secondary-text" data-translate>Fecha de matriculación</label><md-datepicker \nname="{{appraisal.field[\'registration_date\']}}" data-ng-model="appraisal.registration_date" \nmd-placeholder="{{\'Fecha de matriculación\' | translate}}"></md-datepicker><error-messages \nfield="leadForm[appraisal.field[\'registration_date\']]" server-errors="vm.serverErrors"></error-messages></div><div \nclass="w-205" ng-init="appraisal.field[\'last_mechanic_date\']=\'appraisals___\'+$index+\'___last_mechanic_date\'"><label \nclass="font-size-12 secondary-text" data-translate>Última visita taller</label><md-datepicker \nname="{{appraisal.field[\'last_mechanic_date\']}}" data-ng-model="appraisal.last_mechanic_date" \nmd-placeholder="{{\'Última visita taller\' | translate}}"></md-datepicker><error-messages \nfield="leadForm[appraisal.field[\'last_mechanic_date\']]" server-errors="vm.serverErrors"></error-messages></div>\n<md-input-container class="w-200" ng-init="appraisal.field[\'is_finance\']=\'appraisals___\'+$index+\'___is_finance\'">\n<md-checkbox data-ng-model="appraisal.is_finance" class="md-align-top-left no-margin" flex><span data-translate>\nFinanciado</span></md-checkbox><error-messages field="leadForm[appraisal.field[\'is_finance\']]" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container \nng-init="appraisal.field[\'status\']=\'appraisals___\'+$index+\'___status\'"><label data-translate>Estado</label><input \ntype="text" name="{{appraisal.field[\'status\']}}" data-ng-model="appraisal.status" ng-disabled="vm.isDisabled()">\n<error-messages field="leadForm[appraisal.field[\'status\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container ng-init="appraisal.field[\'features\']=\'appraisals___\'+$index+\'___features\'">\n<label data-translate>Acabado del Vehiculo</label><input type="text" name="{{appraisal.field[\'features\']}}" \ndata-ng-model="appraisal.features" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[appraisal.field[\'features\']]" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container ng-init="appraisal.field[\'license_plate\']=\'appraisals___\'+$index+\'___license_plate\'"><label \ndata-translate>Matrícula</label><input type="text" name="{{appraisal.field[\'license_plate\']}}" \ndata-ng-model="appraisal.license_plate" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[appraisal.field[\'license_plate\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container \nng-init="appraisal.field[\'evaluation_vo_price\']=\'appraisals___\'+$index+\'___evaluation_vo_price\'"><label data-translate>\nPrecio de evaluación para VO</label><input type="text" name="{{appraisal.field[\'evaluation_vo_price\']}}" \ndata-ng-model="appraisal.evaluation_vo_price" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[appraisal.field[\'evaluation_vo_price\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container \nng-init="appraisal.field[\'total_vehicles\']=\'appraisals___\'+$index+\'___total_vehicles\'"><label data-translate>\nNº de vehículos</label><input type="text" name="{{appraisal.field[\'total_vehicles\']}}" \ndata-ng-model="appraisal.total_vehicles" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[appraisal.field[\'total_vehicles\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container \nng-init="appraisal.field[\'total_comercial_vehicles\']=\'appraisals___\'+$index+\'___total_comercial_vehicles\'"><label \ndata-translate>Nº de vehículos comerciales</label><input type="text" \nname="{{appraisal.field[\'total_comercial_vehicles\']}}" data-ng-model="appraisal.total_comercial_vehicles" \nng-disabled="vm.isDisabled()"><error-messages field="leadForm[appraisal.field[\'total_comercial_vehicles\']]" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container \nng-init="appraisal.field[\'total_tourism_vehicles\']=\'appraisals___\'+$index+\'___total_tourism_vehicles\'"><label \ndata-translate>Nº de vehículos turismos</label><input type="text" name="{{appraisal.field[\'total_tourism_vehicles\']}}" \ndata-ng-model="appraisal.total_tourism_vehicles" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[appraisal.field[\'total_tourism_vehicles\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container class="input-long" flex \nng-init="appraisal.field[\'fleet_notes\']=\'appraisals___\'+$index+\'___fleet_notes\'"><label data-translate>\nNotas de la flota</label><input type="text" name="{{appraisal.field[\'fleet_notes\']}}" \ndata-ng-model="appraisal.fleet_notes" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[appraisal.field[\'fleet_notes\']]" server-errors="vm.serverErrors"></error-messages></md-input-container>\n</div><div layout="row" layout-align="end center" ng-hide="vm.isDisabled()"><md-button data-layout="column" \nclass="md-icon-button md-warn" data-layout-align="start center" ng-if="vm.lead.appraisals.length>1" \ndata-ng-click="vm.deleteAppraisal($index,appraisal)"><md-icon title="{{\'Eliminar\' | translate}}" \nmd-font-icon="icon-delete"></md-icon></md-button></div></div><div data-layout-xs="column" data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth" ng-if="vm.serverErrors"><md-input-container \nflex="100" class="no-margin"><input type="hidden" name="appraisals___non_field_errors" \ndata-ng-model="vm.lead.appraisals.non_field_errors"><error-messages field="leadForm.appraisals___non_field_errors" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div></md-content></div>'),e.put("app/main/leads/views/edit/asign-user.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-account" class="black-fg no-margin"></md-icon><span \ndata-translate>Asignado a</span></h2><md-icon \nng-if="(vm.lead.cur_user_can_assign || !vm.lead.id) && vm.selectedTab===0" \ndata-ng-click="vm.openLeadDialog($event,vm.lead,\'tracing\')" md-font-icon="icon-pencil" \nclass="pointer white-fg no-margin"></md-icon></div></md-toolbar><md-content flex layout-padding data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth"><div>{{vm.getFullUserName(vm.lead.user_data)}}\n</div></md-content></div>'),e.put("app/main/leads/views/edit/client.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-account" class="black-fg no-margin"></md-icon><span \ndata-translate>Cliente</span></h2></div></md-toolbar><md-content flex data-layout-xs="column" data-layout="row" \ndata-layout-align="start start" layout-wrap class="fullwidth"><div style="max-width: 250px" layout-margin \nlayout-padding><div data-layout="row" data-layout-align="center center"><md-input-container ng-if="!vm.isDisabled()">\n<div class="mt-10 tag pointer" layout="row" layout-align="start center"><md-icon ng-click="vm.lead.score=1" \nclass="amber-fg" md-font-icon="{{vm.lead.score >0 ? \'icon-star\' : \'icon-star-outline\'}}"></md-icon><md-icon \nng-click="vm.lead.score=2" class="amber-fg" md-font-icon="{{vm.lead.score >1 ? \'icon-star\' : \'icon-star-outline\'}}">\n</md-icon><md-icon ng-click="vm.lead.score=3" class="amber-fg" \nmd-font-icon="{{vm.lead.score >2 ? \'icon-star\' : \'icon-star-outline\'}}"></md-icon><md-icon ng-click="vm.lead.score=4" \nclass="amber-fg" md-font-icon="{{vm.lead.score >3 ? \'icon-star\' : \'icon-star-outline\'}}"></md-icon></div><input \ntype="hidden" name="score" ng-model="vm.lead.score"><error-messages field="leadForm.score" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><div ng-if="vm.isDisabled()"><stars \nscore="vm.lead.score"></stars></div></div><div id="extra-button"></div><div id="has-changes" ng-show="false">\n{{leadForm.$dirty}}</div><input type="text" id="psa-id" name="psa_id" data-ng-model="vm.lead.psa_id" ng-show="false">\n</div><div flex layout-padding data-layout-xs="column" data-layout="row" data-layout-align="start end" \ndata-layout-align-xs="start start" layout-wrap layout-margin><div class="m-0 p-0" layout-padding \ndata-layout-xs="column" data-layout="row" data-layout-align="start end" data-layout-align-xs="start start" layout-wrap \nlayout-margin class="fullwidth"><div class="h-60" data-layout="column" data-layout-align="center start">\n<md-input-container><label data-translate>Tipo</label><md-select data-ng-model="vm.lead.client.client_type" \nname="client___client_type" class="w-200"><md-option data-ng-repeat="type in vm.clientTypes" data-ng-value="type.id">\n{{ type.name }}</md-option></md-select><error-messages field="leadForm.client___client_type" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div><div class="h-60" data-layout="column" \ndata-layout-align="center start"><md-input-container><label data-translate>CIF/NIF/DNI/PASAPORTE</label><input \ntype="text" name="client___identification" data-ng-model="vm.lead.client.identification" ng-disabled="vm.isDisabled()">\n<error-messages field="leadForm.client___identification" server-errors="vm.serverErrors"></error-messages>\n</md-input-container></div><div class="h-60" data-layout="column" data-layout-align="center start"><md-input-container>\n<label data-translate>Nombre de empresa</label><input type="text" name="client___business_name" \ndata-ng-model="vm.lead.client.business_name" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm.client___business_name" server-errors="vm.serverErrors"></error-messages></md-input-container></div>\n<div class="h-60" data-layout="column" data-layout-align="center start"><md-input-container><label data-translate>Cargo\n</label><input type="text" name="client___position" data-ng-model="vm.lead.client.position" \nng-disabled="vm.isDisabled()"><error-messages field="leadForm.client___position" server-errors="vm.serverErrors">\n</error-messages></md-input-container></div><div class="h-60" data-layout="column" data-layout-align="center start">\n<md-autocomplete md-floating-label="{{\'Sector\' | translate }}" md-delay="300" md-input-name="sector" \nmd-no-cache="true" ng-disabled="vm.isDisabled()" md-selected-item="vm.lead.client.sector_data" \nmd-search-text="searchTextSector" md-items="sector in vm.getSectors(searchTextSector)" md-min-length="0" \nmd-item-text="sector.name"><md-item-template><span md-highlight-text="searchTextSector">{{sector.name}}</span>\n</md-item-template><md-not-found><span data-translate>No hay ningun sector con ese nombre</span></md-not-found>\n</md-autocomplete><md-input-container flex="100" class="no-margin"><error-messages field="leadForm.client___sector" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><div class="h-60" \ndata-layout="column" data-layout-align="center start"><md-autocomplete \nmd-floating-label="{{\'Actividad\' | translate }}" md-delay="300" md-input-name="business_activity" md-no-cache="true" \nng-disabled="vm.isDisabled() || !vm.lead.client.sector_data.id" \nmd-selected-item="vm.lead.client.business_activity_data" md-search-text="searchTextActivity" \nmd-items="activity in vm.getBusinessActivity(vm.lead.client.sector_data.id, searchTextActivity)" md-min-length="0" \nmd-item-text="activity.activity"><md-item-template><span md-highlight-text="searchTextActivity">{{activity.activity}}\n</span></md-item-template><md-not-found><span data-translate>No hay ninguna actividad con ese nombre</span>\n</md-not-found></md-autocomplete><md-input-container flex="100" class="no-margin"><error-messages \nfield="leadForm.client___business_activity" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div></div><div class="m-0 p-0" layout-padding data-layout-xs="column" data-layout="row" \ndata-layout-align="start end" data-layout-align-xs="start start" layout-wrap layout-margin class="fullwidth"><div \nclass="h-60" data-layout="column" data-layout-align="center start"><md-input-container><label data-translate>Nombre\n</label><input id="client-name" type="text" name="client___name" data-ng-model="vm.lead.client.name" \nng-disabled="vm.isDisabled()"><error-messages field="leadForm.client___name" server-errors="vm.serverErrors">\n</error-messages></md-input-container></div><div class="h-60" data-layout="column" data-layout-align="center start">\n<md-input-container><label data-translate>Apellidos</label><input id="client-surname" type="text" \nname="client___surname" data-ng-model="vm.lead.client.surname" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm.client___surname" server-errors="vm.serverErrors"></error-messages></md-input-container></div><div \nclass="h-60" data-layout="column" data-layout-align="center start"><div id="client-phone" data-layout="row" \nlayout-align="start center" layout-margin><md-input-container><label data-translate>Teléfono</label><input type="text" \nng-focus="vm.setExtension()" ng-blur="vm.eventClientBlur()" name="client___phone" data-ng-model="vm.lead.client.phone" \nng-disabled="vm.isDisabled()"><error-messages field="leadForm.client___phone" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-button data-layout="column" class="md-icon-button md-accent" \ndata-layout-align="start center" data-ng-if="vm.lead.id && vm.lead.client.phone" data-ng-click="vm.call(vm.lead)">\n<md-icon title="{{\'LLamar\' | translate}}" md-font-icon="icon-phone"></md-icon></md-button><md-button \ndata-layout="column" class="md-icon-button md-accent" data-layout-align="start center" \ndata-ng-if="vm.lead.id && vm.lead.client.phone" data-ng-click="vm.sendWhatsapp($event)"><md-icon class="green-400-fg" \ntitle="{{\'Whatsapp\' | translate}}" md-font-icon="icon-whatsapp"></md-icon></md-button></div><error-messages \nfield="leadForm.client___phone" server-errors="vm.serverErrors"></error-messages></div><div data-layout="row" \nlayout-align="start center" layout-margin class="h-60"><md-input-container><label data-translate>Email</label><input \nid="client-email" type="text" name="client___email" data-ng-model="vm.lead.client.email" ng-disabled="vm.isDisabled()" \nng-blur="vm.eventClientEmailBlur()"><error-messages field="leadForm.client___email" server-errors="vm.serverErrors">\n</error-messages></md-input-container><div><a \nng-href="mailto:{{vm.lead.client.email}}?bcc=vomotorscoring@info-auto.es" ng-click="vm.sendMail(vm.lead)" \ndata-ng-if="vm.lead.id && vm.lead.client.email" class="md-raised md-accent" data-debouce-click \naria-label="{{\'Enviar\' | translate}}"><md-icon title="{{\'Enviar email\' | translate}}" class="md-warn" \nmd-font-icon="icon-gmail"></md-icon></a></div></div><div class="h-60" data-layout="column" \ndata-layout-align="center start"><md-input-container><label data-translate>Teléfono alternativo</label><input \ntype="text" name="client___desk_phone" data-ng-model="vm.lead.client.desk_phone" ng-disabled="vm.isDisabled()">\n<error-messages field="leadForm.client___desk_phone" server-errors="vm.serverErrors"></error-messages>\n</md-input-container></div></div><div class="m-0 p-0" layout-padding data-layout-xs="column" data-layout="row" \ndata-layout-align="start end" data-layout-align-xs="start start" layout-wrap layout-margin class="fullwidth"><div \nclass="h-60" data-layout="column" data-layout-align="center start"><md-input-container><label data-translate>\nCódigo postal</label><input id="client-postal-code" type="text" name="client___postal_code" \nng-blur="vm.completeAddress()" data-ng-model="vm.lead.client.postal_code" ng-disabled="vm.isDisabled()"><error-messages\n field="leadForm.client___postal_code" server-errors="vm.serverErrors"></error-messages></md-input-container></div><div\n class="h-60" data-layout="column" data-layout-align="center start" id="client-province"><md-autocomplete \nmd-floating-label="{{\'Provincia\' | translate }}" md-delay="300" md-input-name="province" md-no-cache="true" \nng-disabled="vm.isDisabled()" md-selected-item="vm.lead.client.province_data" md-search-text="searchTextProvince" \nmd-items="province in vm.getProvinces(searchTextProvince)" md-min-length="0" md-item-text="province.name">\n<md-item-template><span md-highlight-text="searchTextProvince">{{province.name}}</span></md-item-template>\n<md-not-found><span data-translate>No hay ningun provincia con ese nombre</span></md-not-found></md-autocomplete>\n<md-input-container flex="100" class="no-margin"><error-messages field="leadForm.client___province" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><div class="h-60" \ndata-layout="column" data-layout-align="center start" id="client-location"><md-autocomplete \nmd-floating-label="{{\'Localidad\' | translate }}" md-delay="300" md-input-name="location" md-no-cache="true" \nng-disabled="vm.isDisabled()" md-selected-item="vm.lead.client.location_data" md-search-text="searchTextLocation" \nmd-items="location in vm.getLocalities(searchTextLocation)" md-min-length="0" md-item-text="location.name">\n<md-item-template><span md-highlight-text="searchTextLocation">{{location.name}}</span></md-item-template>\n<md-not-found><span data-translate>No hay ninguna localidad</span></md-not-found></md-autocomplete><md-input-container \nflex="100" class="no-margin"><error-messages field="leadForm.client___location" server-errors="vm.serverErrors" \nrequired></error-messages></md-input-container></div><div class="h-60" data-layout="column" \ndata-layout-align="center start"><md-input-container><label data-translate>Dirección</label><input type="text" \nname="client___address1" data-ng-model="vm.lead.client.address1" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm.client___address1" server-errors="vm.serverErrors"></error-messages></md-input-container></div><div \nclass="h-60" data-layout="column" data-layout-align="center start"><md-input-container><label data-translate>\nDirección 2</label><input type="text" name="client___address2" data-ng-model="vm.lead.client.address2" \nng-disabled="vm.isDisabled()"><error-messages field="leadForm.client___address2" server-errors="vm.serverErrors">\n</error-messages></md-input-container></div></div><div class="m-0 p-0" layout-padding data-layout-xs="column" \ndata-layout="row" data-layout-align="start start" data-layout-align-xs="start start" layout-wrap layout-margin \nclass="fullwidth"><div data-layout="row" layout-align="start center" class="mb-25 h-60" layout-margin><div flex \nstyle="min-width: 150px" class="mr-0"><label class="input-label" data-translate>Usuario</label><div class="bb" \nid="client-seller">{{vm.getFullUserName(vm.lead.user_data)}}</div></div><div class="ml-0"><md-button \ndata-layout="column" class="md-icon-button md-accent" data-layout-align="start center" \nng-if="vm.lead.cur_user_can_assign || !vm.lead.id" data-ng-click="vm.openLeadDialog($event,vm.lead,\'tracing\')"><md-icon\n title="{{\'Editar\' | translate}}" md-font-icon="icon-account-box"></md-icon></md-button></div></div><div \ndata-layout="column" data-layout-align="center start"><div layout="row"><div class="mr-30"><md-autocomplete \nmd-floating-label="{{\'Concesionario\' | translate }}" md-delay="300" md-input-name="concessionaire" md-no-cache="true" \nmd-min-length="0" flex="100" \nmd-selected-item-change="vm.lead.source_data_prov=null;vm.lead.source_data.origin_data=null" \nmd-selected-item="vm.lead.concessionaire_data" md-search-text="searchTextConcessionaire" \nmd-items="concessionaire in vm.getConcessionaires(searchTextConcessionaire)" md-item-text="concessionaire.name">\n<md-item-template><span md-highlight-text="searchTextConcessionaire">{{concessionaire.name}}</span></md-item-template>\n<md-not-found><span data-translate>No hay ningún concesionario con ese nombre</span></md-not-found></md-autocomplete>\n<md-input-container flex="100" class="no-margin" ng-if="vm.serverErrors"><error-messages \nfield="leadForm.concessionaire" server-errors="vm.serverErrors" required></error-messages></md-input-container></div>\n<div class="mr-30"><md-autocomplete md-floating-label="{{\'Origen\' | translate }}" md-delay="300" \nmd-input-name="origin" md-no-cache="true" md-min-length="0" ng-disabled="!vm.lead.concessionaire_data.id" \nmd-selected-item-change="vm.lead.source_data_prov=null;vm.lead.source_data.channel_data=null" \nmd-selected-item="vm.lead.source_data.origin_data" md-search-text="searchTextOrigin" \nmd-items="origin in vm.getOrigins(searchTextOrigin, vm.lead.concessionaire_data)" md-item-text="origin.name">\n<md-item-template><span md-highlight-text="searchTextOrigin">{{origin.name}}</span></md-item-template><md-not-found>\n<span data-translate>No hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-input-container \nflex="100" class="no-margin" ng-if="vm.serverErrors"><error-messages field="leadForm.origin" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><div class="mr-30">\n<md-autocomplete md-floating-label="{{\'Canal\' | translate }}" md-delay="300" md-input-name="channel" \nmd-no-cache="true" md-min-length="0" ng-disabled="!vm.lead.source_data.origin_data.id" \nmd-selected-item-change="vm.lead.source_data_prov=null;vm.lead.source=null;vm.changeChannel(vm.lead.concessionaire_data,vm.lead.source_data.origin_data, vm.lead.source_data.channel_data)" \nmd-selected-item="vm.lead.source_data.channel_data" md-search-text="searchTextChannel" \nmd-items="channel in vm.getChannels(searchTextChannel, vm.lead.concessionaire_data,vm.lead.source_data.origin_data)" \nmd-item-text="channel.name"><md-item-template><span md-highlight-text="searchTextChannel">{{channel.name}}</span>\n</md-item-template><md-not-found><span data-translate>No hay ningún canal con ese nombre</span></md-not-found>\n</md-autocomplete><md-input-container flex="100" class="no-margin" ng-if="vm.serverErrors"><error-messages \nfield="leadForm.channel" server-errors="vm.serverErrors" required></error-messages></md-input-container></div><div \nclass="mr-30" data-layout="column"><md-autocomplete ng-if="vm.lead.source_data.channel_data.id" \nmd-floating-label="{{\'Fuente\' | translate }}" md-delay="300" md-input-name="source" md-no-cache="true" \nmd-min-length="0" ng-disabled="!vm.lead.source_data.channel_data.id" md-selected-item="vm.lead.source_data_prov" \nmd-search-text="searchTextSource" \nmd-items="source in vm.getSources(searchTextSource, vm.lead.concessionaire_data ,vm.lead.source_data.origin_data, vm.lead.source_data.channel_data)" \nmd-item-text="source.data"><md-item-template><span md-highlight-text="searchTextSource">{{source.data}}</span>\n</md-item-template><md-not-found><span data-translate>No hay ninguna fuente con ese nombre</span></md-not-found>\n</md-autocomplete><md-input-container ng-if="!vm.lead.source_data.channel_data.id"><label data-translate>Fuente</label>\n<input type="text" name="source" ng-model="vm.lead.source" ng-disabled="!vm.lead.source_data.channel_data.id">\n</md-input-container><md-input-container flex="100" class="no-margin" ng-if="vm.serverErrors"><error-messages \nfield="leadForm.source" server-errors="vm.serverErrors" required></error-messages></md-input-container></div></div>\n</div><div class="h-60 mr-100" data-layout="row" data-layout-align="center start"><div class="mr-30"><md-autocomplete \nmd-floating-label="{{\'Origen publicidad\' | translate }}" md-delay="300" md-input-name="origin2" md-no-cache="true" \nmd-min-length="0" md-selected-item="vm.lead.origin2_data" md-search-text="searchTextAllOrigin" \nmd-items="origin in vm.getAllOrigins(searchTextAllOrigin)" md-item-text="origin.name"><md-item-template><span \nmd-highlight-text="searchTextAllOrigin">{{origin.name}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex="100" \nclass="no-margin" ng-if="vm.serverErrors"><error-messages field="leadForm.origin2" server-errors="vm.serverErrors" \nrequired></error-messages></md-input-container></div><div><md-button data-debouce-click \nng-if="vm.lead.channel2_data.id!==vm.getExposicion().id" data-ng-click="vm.lead.channel2_data=vm.getExposicion()" \nclass="md-raised" aria-label="{{\'Exposición\' | translate}}"><md-icon md-font-icon="icon-map-marker" class="mr-4">\n</md-icon><span data-translate>Exposición</span></md-button><div class="green-700-bg white-fg p-5" \nng-if="vm.lead.channel2_data.id===vm.getExposicion().id"><md-icon md-font-icon="icon-check" class="white-fg mr-4">\n</md-icon><span data-translate>Exposición</span></div></div></div></div><div data-layout-xs="column" data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth" ng-if="vm.serverErrors"><md-input-container \nflex="100" class="no-margin"><input type="hidden" name="client___non_field_errors" \ndata-ng-model="vm.lead.client.non_field_errors"><error-messages field="leadForm.client___non_field_errors" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div></div></md-content></div>'),
e.put("app/main/leads/views/edit/concession-basic.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-document" class="black-fg no-margin"></md-icon><span \ndata-translate>Datos básicos</span></h2></div></md-toolbar><div data-layout="column" data-layout-align="start start" \nlayout-wrap class="fullwidth"><div class="p-20 fullwidth" layout="row" layout-align="space-between start" layout-wrap>\n<div flex="40" flex-xs="100"><div class="bb p-10"><span><md-icon md-font-icon="icon-web"></md-icon></span><span>\n{{ concessionaire.web || (\'Web no especificada\' | translate)}}</span></div><div class="bb p-10"><span><md-icon \nmd-font-icon="icon-map-marker"></md-icon></span><span>\n{{ concessionaire.address || (\'Dirección no especificada\' | translate)}}</span></div><div class="mt-20"><strong \ndata-translate>Orígenes</strong><div class="bb p-10" ng-repeat="source in concessionaire.sources | unique : \'origin\'" \nlayout="row" layout-align="start center"><span><img class="img-origin" ng-src="{{source.origin_data.icon}}"> </span>\n<span>{{ source.origin_data.name }}</span></div></div></div><div flex="40" flex-xs="100"><strong data-translate>\nCalendario de trabajo</strong><div><div ng-repeat="(day,work_calendar) in concessionaire.work_calendar" \nng-if="vm.week[day]" layout="row" layout-align="space-between center" class="bb p-10"><div class="mr-40">\n{{ vm.week[day] }}</div><div layout="row" class="date-row"><div><span ng-if="work_calendar.start_hour">\n{{ work_calendar.start_hour | formatTime }}</span> <span ng-if="!work_calendar.start_hour" data-translate>Sin definir\n</span></div><div class="ml-20 mr-20"><span>-</span></div><div><span ng-if="work_calendar.end_hour">\n{{ work_calendar.end_hour | formatTime }}</span> <span ng-if="!work_calendar.end_hour" data-translate>Sin definir\n</span></div></div></div></div></div></div></div></div>'),e.put("app/main/leads/views/edit/concession-notes.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-document" class="black-fg no-margin"></md-icon><span \ndata-translate>Notas</span></h2></div></md-toolbar><div data-layout="column" data-layout-align="start start" \nlayout-wrap class="fullwidth"><div layout="column" layout-align="space-between start" class="fullwidth p-20"><div \nclass="no-results text-center" ng-if="concessionaire.notes_data.length == 0"><div class="message"><md-icon \nclass="message-icon s96" md-font-icon="icon-document"></md-icon><div class="message-text" translate>Sin notas añadidas\n</div></div></div><div ng-repeat="note in concessionaire.notes_data" layout="row" layout-wrap class="fullwidth" \nng-init="note.historyShow=false"><div flex="80"><div class="fullwidth"><div class="mb-10"><md-icon \nmd-font-icon="icon-calendar"></md-icon><span>{{ note.modified | date:\'dd/MM/yyyy HH:mm\' }}</span></div><div \nclass="mb-20">{{ note.content }}</div></div><div class="pl-50" ng-show="note.historyShow"><div \nng-repeat="history in note.history"><div class="mb-10"><md-icon md-font-icon="icon-calendar"></md-icon><span>\n{{ history.modified | date:\'dd/MM/yyyy HH:mm\' }}</span></div><div class="mb-20">{{ history.content }}</div></div></div>\n</div><div flex="20"><md-button ng-click="note.historyShow=!note.historyShow" ng-if="note.history.length>0" \nclass="md-fab md-mini md-accent" aria-label="{{\'Ver historial\' | translate}}"><md-icon md-font-icon="icon-history">\n</md-icon><md-tooltip><span data-translate>Ver historial</span></md-tooltip></md-button><md-button \nng-click="vm.deleteNote(note)" ng-hide="vm.isDisabled()" ng-if="!note.id" class="md-fab md-mini md-warn" \naria-label="{{\'Borrar nota\' | translate}}"><md-icon md-font-icon="icon-delete"></md-icon></md-button></div></div></div>\n</div></div>'),e.put("app/main/leads/views/edit/concession-users.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-account" class="black-fg no-margin"></md-icon><span \ndata-translate>Usuarios conectados</span></h2></div></md-toolbar><div data-layout="column" \ndata-layout-align="start start" layout-wrap class="fullwidth"><div layout="column" layout-align="space-between start" \nclass="fullwidth pt-10 pb-10"><div class="no-results text-center" ng-if="filtered.length == 0"><div class="message">\n<md-icon class="message-icon s96" md-font-icon="icon-account"></md-icon><div class="message-text" translate>\nSin usuarios</div></div></div><div class="todo-item" layout="row" layout-align="start center" \nng-repeat="user in concessionaire.related_users | filter:{user_data:{online:true}} as filtered"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><span \nclass="avatar-wrapper mr-20"><img data-md-menu-align-target class="avatar" src="assets/images/avatars/profile.jpg" \nalt="Imágen de perfil"><md-icon ng-if="user.user_data.online" md-font-icon ng-style="{\'color\': \'#4CAF50\' }" \nclass="icon icon-checkbox-marked-circle status s16"></md-icon><md-icon ng-if="!user.user_data.online" md-font-icon \nng-style="{\'color\': \'#F44336\' }" class="icon icon-minus-circle status s16"></md-icon></span><div><div class="mb-5">\n<span class="title">{{user.user_data.first_name}} {{user.user_data.last_name}}</span> <span class="ml-10"><span \nclass="text-boxed m-0 green-bg white-fg" ng-show="user.is_admin" data-translate>Super Administrador</span> <span \nclass="text-boxed m-0 green-bg white-fg" ng-show="user.is_concession_admin" data-translate>\nAdministrador de concesionario</span> <span class="text-boxed m-0 green-bg white-fg" \nng-show="user.is_business_manager" data-translate>Gestor comercial</span></span></div><div class="tags" layout="row" \nlayout-align="start center" layout-wrap><div class="tag" layout="row" layout-align="start center"><md-icon \nmd-font-icon="icon-email" class="s16"></md-icon><div class="ml-10 tag-label">{{user.user_data.email}}</div></div></div>\n<div class="tags" layout="row" layout-align="start center" layout-wrap><div class="tag" layout="row" \nlayout-align="start center" ng-repeat="concessionaire in user.user_data.related_concessionaires"><md-icon \nmd-font-icon="icon-car" class="s16"></md-icon><div class="ml-10 tag-label">{{concessionaire.concessionaire_data.name}}\n</div></div></div></div></div></div></div></div></div></div></div></div>'),e.put("app/main/leads/views/edit/finish-lead.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-account" class="black-fg no-margin"></md-icon><span \ndata-translate>Lead cerrado</span></h2></div></md-toolbar><md-content flex data-layout-xs="column" data-layout="row" \ndata-layout-align="start start" layout-wrap class="fullwidth"><div flex layout-padding data-layout-xs="column" \ndata-layout="row" data-layout-align="start end" data-layout-align-xs="start start" layout-wrap layout-margin><div \nclass="m-0 p-0" layout-padding data-layout-xs="column" data-layout="row" data-layout-align="start end" \ndata-layout-align-xs="start start" layout-wrap layout-margin class="fullwidth"><div class="h-60" data-layout="column" \ndata-layout-align="center start"><md-input-container><label data-translate>Resultado</label><md-select \ndata-ng-model="vm.lead.result" name="result" class="w-200" ng-disabled="vm.isDisabled()"><md-option \ndata-ng-repeat="result in vm.results" data-ng-value="result.id">{{ result.name }}</md-option></md-select>\n<error-messages field="leadForm.result" server-errors="vm.serverErrors"></error-messages></md-input-container></div>\n<div class="h-60" data-layout="column" data-layout-align="center start"><md-input-container><label data-translate>\nMotivo</label><md-select data-ng-model="vm.lead.result_reason" name="result_reason" class="w-200" \nng-disabled="vm.isDisabled()"><md-option data-ng-repeat="reason in vm.resultReasons[vm.lead.result] | orderBy:\'name\'" \ndata-ng-value="reason.id">{{ reason.name }}</md-option></md-select><error-messages field="leadForm.result_reason" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div><div data-layout="column" \ndata-layout-align="center start" flex="100"><md-input-container class="w-500"><label data-translate>Comentarios</label>\n<textarea class="dynamic" name="result_comments" data-ng-model="vm.lead.result_comments" ng-disabled="vm.isDisabled()">\n</textarea><error-messages field="leadForm.result_comments" server-errors="vm.serverErrors"></error-messages>\n</md-input-container></div></div></div></md-content></div>'),e.put("app/main/leads/views/edit/lead.html",'<div id="lead-edit" class="page-layout simple" layout="row"><div class="center" flex ms-scroll><div \nclass="content white-bg"><md-tabs md-dynamic-height md-selected="vm.selectedTab"><md-tab \nlabel="{{ \'Datos de lead\' | translate }}"><div layout="column" flex><form name="leadForm" \nclass="md-inline-form ms-form-wizard-form full-width p-20" novalidate><div layout="row" layout-align="start center">\n<div class="fullwidth" ng-include="\'app/main/leads/views/edit/status.html\'"></div><div layout="row" \nlayout-align="end end" class="mb-50"><div layout="row" layout-align="start center"><md-button \nng-click="vm.openSaveLeadDialog()" data-debouce-click ng-hide="vm.isDisabled()" \ndata-ng-if="hasPermission(\'leads\',\'PATCH\') && vm.canEdit()" aria-label="{{\'Guardar\' | translate}}" class="md-fab">\n<md-icon md-font-icon="icon-content-save"></md-icon></md-button></div></div></div><div layout="row" \nlayout-align="space-between start" layout-wrap><div flex="100" flex-xs="100" data-layout="column" \ndata-layout-align="start start"><div class="fullwidth mb-20" \nng-if="vm.isOpenFinishLeadBox || vm.lead.status_end_datetime" \nng-include="\'app/main/leads/views/edit/finish-lead.html\'"></div><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/client.html\'"></div><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/vehicle.html\'"></div><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/appraisals.html\'"></div><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/tags.html\'"></div><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/request.html\'"></div><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/tracing.html\'"></div><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/notes.html\'"></div><div class="fullwidth mb-20" \nng-if="vm.lead.lead_managements.length>0" ng-include="\'app/main/leads/views/edit/lead_managements.html\'"></div></div>\n</div></form></div></md-tab><md-tab ng-if="vm.lead.id && vm.lead.vehicles && vm.lead.vehicles[0]"><md-tab-label><span \ndata-translate>Anuncio</span></md-tab-label><md-tab-body><form class="p-20"><div class="fullwidth mb-20" \nng-include="\'app/main/leads/views/edit/vehicle.html\'"></div><iframe id="iframe-ad-link" ng-if="vm.iframeAdLink" \nsrc="{{vm.trustSrc(vm.iframeAdLink)}}"></iframe></form></md-tab-body></md-tab><md-tab \nng-if="((vm.lead.client.phone && vm.lead.client.phone.length > 8) || (vm.lead.client.email && vm.lead.client.email.length > 5)) &&\r\n                        (vm.leads.new.count>0 || vm.leads.attended.count>0 || vm.leads.commercial_management.count>0 || vm.leads.tracing.count>0 || vm.leads.end.count>0)">\n<md-tab-label><span data-translate>Coincidentes</span></md-tab-label><md-tab-body><div class="p-20" id="scrumboard">\n<div class="fullwidth" style="height: 80vh" ng-include="\'app/main/leads/views/board/board-columns.html\'"></div></div>\n</md-tab-body></md-tab><md-tab ng-if="vm.leadsActivity.count>0"><md-tab-label><span data-translate>Actividades</span> \n<span class="badge">{{ vm.leadsActivity.count }}</span></md-tab-label><md-tab-body><div class="p-20"><div \nclass="fullwidth" ng-include="\'app/main/leads/views/edit/activity/timeline-right.html\'"></div></div></md-tab-body>\n</md-tab><md-tab \nng-if="vm.lead.id && vm.lead.concessionaire_data.hubspot_api_key && vm.lead.concessionaire_data.hubspot_id">\n<md-tab-label><span data-translate>Hubspot</span></md-tab-label><md-tab-body><div class="p-20"><md-button \nclass="md-raised md-accent mt-10" aria-label="{{\'Sincronizar\' | translate}}" data-debouce-click \ndata-ng-click="vm.hubspot()"><md-icon md-font-icon="icon-sync"></md-icon><span data-translate>Sincronizar</span>\n</md-button></div></md-tab-body></md-tab></md-tabs></div></div></div>'),e.put("app/main/leads/views/edit/lead_managements.html",'<div layout="column" layout-align="space-between start" class="mb-20 md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><span>Lead managements</span></h2></div></md-toolbar><md-content flex layout-padding \ndata-layout-xs="column" data-layout="row" data-layout-align="space-between center" layout-wrap class="fullwidth"><div \nclass="todo-item" layout="row" layout-align="start center" ng-repeat="lead_management in vm.lead.lead_managements"><div\n layout="row" layout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><div><div class="mb-5"><span \nclass="title">{{lead_management.message}}</span></div><div class="tags" layout="row" layout-align="start center" \nlayout-wrap><div class="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-account" class="s16">\n</md-icon><div class="ml-10 tag-label">{{lead_management.user_data.first_name}} {{lead_management.user_data.last_name}}\n</div></div><div class="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-calendar" \nclass="s16"></md-icon><div class="ml-10 tag-label"><span translate>Fecha:</span>\n {{lead_management.created | date:\'dd/MM/yyyy\'}}</div></div><div class="tag" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-calendar" class="s16"></md-icon><div class="ml-10 tag-label"><span translate>Hora:</span>\n {{lead_management.created | date:\'HH:mm\'}}</div></div><div class="tag white-fg" layout="row" \nlayout-align="start center" style="background:{{status.color}}" ng-repeat="status in vm.leadStatus" \nng-if="status.id===lead_management.status"><md-icon md-font-icon="icon-tag" class="s16"></md-icon><div \nclass="ml-10 tag-label"><span>{{status.name}}</span></div></div></div></div></div></div></div></div></div></md-content>\n</div>'),e.put("app/main/leads/views/edit/notes.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-document" class="black-fg no-margin"></md-icon><span \ndata-translate>Comentarios</span></h2><md-icon ng-hide="vm.isDisabled()" ng-click="vm.addNote()" \nmd-font-icon="icon-plus-circle-outline" class="pointer black-fg no-margin"></md-icon></div></md-toolbar><md-content \nflex layout-padding data-layout-xs="column" data-layout="row" data-layout-align="space-between center" layout-wrap \nclass="fullwidth"><div class="no-results text-center" ng-if="vm.lead.note.length == 0"><div class="message"><md-icon \nclass="message-icon s96" md-font-icon="icon-document"></md-icon><div class="message-text" translate>\nSin comentarios añadidos</div></div></div><div ng-repeat="note in vm.lead.note" layout="row" layout-wrap \nclass="fullwidth" ng-init="note.historyShow=false"><div flex="80" layout="row"><div data-layout="row" \nlayout-align="start center" class="mb-20 w-165 mr-15"><div flex><label class="input-label" data-translate>Fecha</label>\n<div class="bb"><md-icon md-font-icon="icon-calendar"></md-icon><span>{{ note.modified | date:\'dd/MM/yyyy HH:mm\' }}\n</span></div></div></div><div data-layout="row" layout-align="start center" class="mb-20 w-165 mr-15"><div flex><label \nclass="input-label" data-translate>Usuario</label><div class="bb"><md-icon md-font-icon="icon-account"></md-icon><span \nng-if="note.user">{{ note.user.first_name }} {{ note.user.last_name }}</span> <span ng-if="!note.user">\n{{ vm.user.first_name }} {{ vm.user.last_name }}</span></div></div></div><md-input-container flex="100" \nng-init="name=\'note___\'+$index+\'___content\'" class="fullwidth"><label data-translate>Comentario</label><textarea \nclass="dynamic" data-ng-model="vm.lead.note[$index].content" name="{{ name }}" ng-disabled="vm.isDisabled()">\n</textarea><error-messages field="leadForm[name]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container></div><div flex="20"><md-button ng-click="vm.deleteNote(note)" ng-hide="vm.isDisabled()" \nng-if="!note.id" class="md-fab md-mini md-warn" aria-label="{{\'Borrar comentario\' | translate}}"><md-icon \nmd-font-icon="icon-delete"></md-icon></md-button></div></div></md-content></div>'),e.put("app/main/leads/views/edit/request.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1" ng-init="tracing=false">\n<md-toolbar class="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" \nlayout-align="space-between center"><h2 class="md-flex text-uppercase"><md-icon md-font-icon="icon-document" \nclass="black-fg no-margin"></md-icon><span data-translate>Tareas programadas</span></h2><md-icon \nng-click="vm.openTaskDialog($event, tracing)" md-font-icon="icon-plus-circle-outline" \nclass="pointer black-fg no-margin"></md-icon></div></md-toolbar><div data-layout="column" \ndata-layout-align="start start" layout-wrap class="fullwidth" ng-init="form=leadForm"><div class="fullwidth" \nng-include="\'app/main/tasks/tasks.html\'"></div><div data-layout-xs="column" data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth"><md-input-container flex="100" \nclass="no-margin"><input type="hidden" name="request___non_field_errors" \ndata-ng-model="vm.lead.request.non_field_errors"><error-messages field="leadForm.request___non_field_errors" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div></div></div>'),e.put("app/main/leads/views/edit/score.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools"><h2 class="md-flex text-uppercase"><md-icon \nmd-font-icon="icon-trending-up" class="black-fg no-margin"></md-icon><span data-translate>Score</span></h2></div>\n</md-toolbar><md-content flex layout-padding data-layout-xs="column" data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth" ng-if="!vm.lead.id || vm.user.is_admin || true">\n</md-content></div>'),e.put("app/main/leads/views/edit/status.html",'<div class="content-status-lead"><div class="step step-new" ng-class="{\'active\': vm.lead.status_new_datetime }"><div \nclass="content-circle"><div class="circle" ng-click="vm.changeStatus(vm.lead,\'new\')"><md-icon \nmd-font-icon="icon-chevron-right"></md-icon></div><div class="line"></div></div><div class="text" layout="column" \ndata-layout-align="start center" hide-xs><span translate>Lead no atendido</span><div data-layout="row" \ndata-layout-align="center center"><md-button data-layout="column" class="md-icon-button" \ndata-layout-align="start center" ng-if="vm.lead.status_new_datetime" \nng-click="vm.openLeadStatusDateDialog($event, vm.lead, \'status_new_datetime\')"><md-icon \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-calendar"></md-icon></md-button><span>\n{{vm.lead.status_new_datetime | date:\'dd/MM/yyyy HH:mm\'}}</span></div></div></div><div class="step step-attended" \nng-class="{\'active\': vm.lead.status_attended_datetime }"><div class="content-circle"><div class="circle" \nng-click="vm.changeStatus(vm.lead,\'attended\')"><md-icon md-font-icon="icon-chevron-right"></md-icon></div><div \nclass="line"></div></div><div class="text" layout="column" data-layout-align="start center" hide-xs><span translate>\nLead atendido por comercial</span><div data-layout="row" data-layout-align="center center"><md-button \ndata-layout="column" class="md-icon-button" data-layout-align="start center" ng-if="vm.lead.status_attended_datetime" \nng-click="vm.openLeadStatusDateDialog($event, vm.lead, \'status_attended_datetime\')"><md-icon \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-calendar"></md-icon></md-button><span>\n{{vm.lead.status_attended_datetime | date:\'dd/MM/yyyy HH:mm\'}}</span></div></div></div><div class="step step-pending" \nng-class="{\'active\': vm.lead.status_pending_datetime}"><div class="content-circle"><div class="circle" \nng-click="vm.changeStatus(vm.lead,\'commercial_management\')"><md-icon md-font-icon="icon-chevron-right"></md-icon></div>\n<div class="line"></div></div><div class="text" layout="column" data-layout-align="start center" hide-xs><span \ntranslate>Tareas pendientes</span><div data-layout="row" data-layout-align="center center"><md-button \ndata-layout="column" class="md-icon-button" data-layout-align="start center" ng-if="vm.lead.status_pending_datetime" \nng-click="vm.openLeadStatusDateDialog($event, vm.lead, \'status_pending_datetime\')"><md-icon \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-calendar"></md-icon></md-button><span>\n{{vm.lead.status_pending_datetime | date:\'dd/MM/yyyy HH:mm\'}}</span></div></div></div><div class="step step-tracing" \nng-class="{\'active\': vm.lead.status_tracing_datetime}"><div class="content-circle"><div class="circle" \nng-click="vm.changeStatus(vm.lead,\'tracing\')"><md-icon md-font-icon="icon-chevron-right"></md-icon></div><div \nclass="line"></div></div><div class="text" layout="column" data-layout-align="start center" hide-xs><span translate>\nSeguimiento</span><div data-layout="row" data-layout-align="center center"><md-button data-layout="column" \nclass="md-icon-button" data-layout-align="start center" ng-if="vm.lead.status_tracing_datetime" \nng-click="vm.openLeadStatusDateDialog($event, vm.lead, \'status_tracing_datetime\')"><md-icon \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-calendar"></md-icon></md-button><span>\n{{vm.lead.status_tracing_datetime | date:\'dd/MM/yyyy HH:mm\'}}</span></div></div></div><div class="step step-end" \nng-class="{\'active\': vm.lead.status_end_datetime}"><div class="content-circle"><div class="circle" \nng-click="vm.changeStatus(vm.lead,\'end\')" ng-class="{\'pointer\': vm.lead.id}"><md-icon md-font-icon="icon-close">\n</md-icon></div><div class="line"></div></div><div class="text" layout="column" data-layout-align="start center" \nhide-xs><span translate>Lead cerrado</span><div data-layout="row" data-layout-align="center center"><md-button \ndata-layout="column" class="md-icon-button" data-layout-align="start center" ng-if="vm.lead.status_end_datetime" \nng-click="vm.openLeadStatusDateDialog($event, vm.lead, \'status_end_datetime\')"><md-icon \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-calendar"></md-icon></md-button><span>\n{{vm.lead.status_end_datetime | date:\'dd/MM/yyyy HH:mm\'}}</span></div></div></div></div>'),e.put("app/main/leads/views/edit/tags.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-tag" class="black-fg no-margin"></md-icon><span \ndata-translate>Solicitudes</span></h2></div></md-toolbar><md-content flex layout-padding data-layout-xs="column" \ndata-layout="column" data-layout-align="start start" layout-wrap class="fullwidth"><div class="mt-10" layout="row" \nlayout-wrap><div ng-repeat="tag in vm.getNumber(5) track by $index" layout-margin><md-input-container flex="100" \nng-init="name=\'tags___\'+$index+\'___content\'"><label data-translate>Tag</label><input type="text" \ndata-ng-model="vm.lead.tags[$index].content" name="{{ name }}" ng-disabled="vm.isDisabled()"><error-messages \nfield="leadForm[name]" server-errors="vm.serverErrors"></error-messages></md-input-container></div></div><div \nlayout="row" class="w-100-p"><div layout-margin class="w-100-p"><md-input-container class="w-100-p"><label \ndata-translate>Comentarios del cliente</label><textarea class="dynamic" name="request_notes" \ndata-ng-model="vm.lead.request_notes" ng-disabled="vm.isDisabled()"></textarea><error-messages \nfield="leadForm.request_notes" server-errors="vm.serverErrors"></error-messages></md-input-container></div></div>\n</md-content></div>'),e.put("app/main/leads/views/edit/tracing.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1" ng-init="tracing=true">\n<md-toolbar class="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" \nlayout-align="space-between center"><h2 class="md-flex text-uppercase"><md-icon md-font-icon="icon-document" \nclass="black-fg no-margin"></md-icon><span data-translate>Seguimiento programado</span></h2><md-icon \nng-click="vm.openTaskDialog($event, tracing)" md-font-icon="icon-plus-circle-outline" \nclass="pointer black-fg no-margin"></md-icon></div></md-toolbar><div data-layout="column" \ndata-layout-align="start start" layout-wrap class="fullwidth" ng-init="form=leadForm"><div class="fullwidth" \nng-include="\'app/main/tasks/tasks.html\'"></div><div data-layout-xs="column" data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth"><md-input-container flex="100" \nclass="no-margin"><input type="hidden" name="request___non_field_errors" \ndata-ng-model="vm.lead.request.non_field_errors"><error-messages field="leadForm.request___non_field_errors" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div></div></div>'),e.put("app/main/leads/views/edit/vehicle.html",'<div data-layout="column" data-layout-align="start start" flex="100" class="md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-car" class="black-fg no-margin"></md-icon><span \ndata-translate>Producto</span></h2><md-icon ng-hide="vm.isDisabled()" ng-click="vm.addVehicle()" \nmd-font-icon="icon-plus-circle-outline" class="pointer black-fg no-margin"></md-icon></div></md-toolbar><md-content \nclass="fullwidth"><div ng-repeat="vehicle in vm.lead.vehicles" flex layout-padding data-layout-xs="column" \ndata-layout="row" data-layout-align="space-between start" layout-wrap class="fullwidth" ng-init="vehicle.field={}"><div\n layout-margin-lg flex="80" data-layout="row" layout-wrap><div class="h-30" data-layout="column" \ndata-layout-align="center start" ng-init="vehicle.field[\'brand_model\']=\'vehicles___\'+$index+\'___brand_model\'">\n<md-autocomplete md-floating-label="{{\'Marca\' | translate }}" md-delay="300" \nmd-input-name="{{vehicle.field[\'brand_model\']}}" md-no-cache="true" ng-disabled="vm.isDisabled()" required \nmd-selected-item="vehicle.brand_model_data" md-search-text="searchTextBrand" \nmd-items="brand in vm.getBrands(searchTextBrand)" md-min-length="0" md-item-text="brand.name"><md-item-template><span \nmd-highlight-text="searchTextBrand">{{brand.name}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ninguna marca con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex="100" \nclass="no-margin"><error-messages field="leadForm[vehicle.field[\'brand_model\']]" server-errors="vm.serverErrors" \nrequired></error-messages></md-input-container></div><div class="h-30" data-layout="column" \ndata-layout-align="center start" ng-init="vehicle.field[\'model\']=\'vehicles___\'+$index+\'___model\'"><md-autocomplete \nmd-floating-label="{{\'Modelo\' | translate }}" md-delay="300" md-input-name="{{vehicle.field[\'model\']}}" \nmd-no-cache="true" ng-disabled="vm.isDisabled() || !vehicle.brand_model_data" md-selected-item="vehicle.model_data" \nmd-search-text="searchTextModel" md-items="model in vm.getModels(vehicle.brand_model_data.id, searchTextModel)" \nmd-min-length="0" md-item-text="model.model_name"><md-item-template><span md-highlight-text="searchTextModel">\n{{model.model_name}}</span></md-item-template><md-not-found><span data-translate>No hay ningun modelo con ese nombre\n</span></md-not-found></md-autocomplete><md-input-container flex="100" class="no-margin"><error-messages \nfield="leadForm[vehicle.field[\'model\']]" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div><div class="h-30" data-layout="column" data-layout-align="center start" \nng-init="vehicle.field[\'version\']=\'vehicles___\'+$index+\'___version\'"><md-autocomplete \nmd-floating-label="{{\'Version\' | translate }}" md-delay="300" md-input-name="{{vehicle.field[\'version\']}}" \nmd-no-cache="true" ng-disabled="vm.isDisabled() || !vehicle.model_data" \nmd-selected-item-change="vm.changeVehicleVersion(vehicle,\'power\',\'gas\')" md-selected-item="vehicle.version_data" \nmd-search-text="searchTextVersion" md-items="version in vm.getVersions(vehicle.model_data.id, searchTextVersion)" \nmd-min-length="0" md-item-text="vm.getFullNameVersion(version)"><md-item-template><span \nmd-highlight-text="searchTextVersion">{{vm.getFullNameVersion(version)}}</span></md-item-template><md-not-found><span \ndata-translate>No hay ninguna versión con ese nombre</span></md-not-found></md-autocomplete><md-input-container \nflex="100" class="no-margin"><error-messages field="leadForm[vehicle.field[\'version\']]" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><md-input-container \nng-init="vehicle.field[\'price\']=\'vehicles___\'+$index+\'___price\'"><label data-translate>Precio</label><input \ntype="text" name="{{vehicle.field[\'price\']}}" data-ng-model="vehicle.price" ng-disabled="vm.isDisabled()">\n<error-messages field="leadForm[vehicle.field[\'price\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container ng-init="vehicle.field[\'km\']=\'vehicles___\'+$index+\'___km\'"><label \ndata-translate>Km</label><input type="text" name="{{vehicle.field[\'km\']}}" data-ng-model="vehicle.km" \nng-disabled="vm.isDisabled()"><error-messages field="leadForm[vehicle.field[\'km\']]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container \nng-init="vehicle.field[\'power\']=\'vehicles___\'+$index+\'___power\'"><label data-translate>Potencia</label><input \ntype="text" name="{{vehicle.field[\'power\']}}" data-ng-model="vehicle.power" ng-disabled="vm.isDisabled()">\n<error-messages field="leadForm[vehicle.field[\'power\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container ng-init="vehicle.field[\'year\']=\'vehicles___\'+$index+\'___year\'"><label \ndata-translate>Año</label><input type="text" name="{{vehicle.field[\'year\']}}" data-ng-model="vehicle.year" \nng-disabled="vm.isDisabled()"><error-messages field="leadForm[vehicle.field[\'year\']]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container ng-init="vehicle.field[\'gas\']=\'vehicles___\'+$index+\'___gas\'">\n<label data-translate>Combustible</label><md-select name="{{vehicle.field[\'gas\']}}" data-ng-model="vehicle.gas" \nng-disabled="vm.isDisabled()"><md-option data-ng-repeat="gas in vm.gasTypes.data" data-ng-value="gas.id">{{gas.name}}\n</md-option></md-select><error-messages field="leadForm[vehicle.field[\'gas\']]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container \nng-init="vehicle.field[\'vehicle_type\']=\'vehicles___\'+$index+\'___vehicle_type\'"><label data-translate>Tipo</label>\n<md-select name="{{vehicle.field[\'vehicle_type\']}}" data-ng-model="vehicle.vehicle_type" ng-disabled="vm.isDisabled()" \nng-change="leadForm[vehicle.field[\'vehicle_type\']].$setValidity(\'serverError\', true);"><md-option \ndata-ng-repeat="type in vm.vehicleTypes" data-ng-value="type.id">{{type.name}}</md-option></md-select><error-messages \nfield="leadForm[vehicle.field[\'vehicle_type\']]" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container ng-init="vehicle.field[\'comercial_category\']=\'vehicles___\'+$index+\'___comercial_category\'"><label \ndata-translate>Categoría comercial</label><md-select name="{{vehicle.field[\'comercial_category\']}}" \ndata-ng-model="vehicle.comercial_category" ng-disabled="vm.isDisabled()"><md-option \ndata-ng-repeat="category in vm.comercialCategories" data-ng-value="category.id">{{category.name}}</md-option>\n</md-select><error-messages field="leadForm[vehicle.field[\'comercial_category\']]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container \nng-init="vehicle.field[\'gear_shift\']=\'vehicles___\'+$index+\'___gear_shift\'"><label data-translate>Cambio</label>\n<md-select name="{{vehicle.field[\'gear_shift\']}}" data-ng-model="vehicle.gear_shift" ng-disabled="vm.isDisabled()">\n<md-option data-ng-repeat="gearShift in vm.gearShifts" data-ng-value="gearShift.id">{{gearShift.name}}</md-option>\n</md-select><error-messages field="leadForm[vehicle.field[\'gear_shift\']]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container \nng-init="vehicle.field[\'note\']=\'vehicles___\'+$index+\'___note\'" class="w-400"><label data-translate>Descripción</label>\n<textarea class="dynamic" name="{{vehicle.field[\'note\']}}" data-ng-model="vehicle.note" ng-disabled="vm.isDisabled()">\n</textarea><error-messages field="leadForm[vehicle.field[\'note\']]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container ng-init="vehicle.field[\'ad_link\']=\'vehicles___\'+$index+\'___ad_link\'" \nclass="w-400 md-icon-float md-icon-right"><label data-translate>Link anuncio</label><input type="text" \nname="{{vehicle.field[\'ad_link\']}}" data-ng-model="vehicle.ad_link" ng-disabled="vm.isDisabled()"><md-icon \nng-if="vehicle.ad_link && vm.selectedTab===1" title="{{\'Ir al anuncio\' | translate}}" md-font-icon="icon-open-in-new" \nclass="md-accent pointer" data-ng-click="vm.iframeAdLink=vehicle.ad_link"></md-icon><error-messages \nfield="leadForm[vehicle.field[\'ad_link\']]" server-errors="vm.serverErrors"></error-messages></md-input-container></div>\n<div layout="row" layout-align="end center" ng-hide="vm.isDisabled()"><md-button data-layout="column" \nclass="md-icon-button md-warn" data-layout-align="start center" ng-if="vm.lead.vehicles.length>1" \ndata-ng-click="vm.deleteVehicle($index,vehicle)"><md-icon title="{{\'Eliminar\' | translate}}" \nmd-font-icon="icon-delete"></md-icon></md-button></div></div><div data-layout-xs="column" data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth" ng-if="vm.serverErrors"><md-input-container \nflex="100" class="no-margin"><input type="hidden" name="vehicles___non_field_errors" \ndata-ng-model="vm.lead.vehicles.non_field_errors"><error-messages field="leadForm.vehicles___non_field_errors" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div></md-content></div>'),
e.put("app/main/leads/views/list/kpis.html",'<div id="kpis" class="fullwidth"><md-tabs md-dynamic-height md-selected="vm.selectedTabIndex"><md-tab \nlabel="{{kpi.name}}" ng-repeat="kpi in vm.kpis.data" md-on-select="vm.togglePositive()"><div class="widget-group" \nlayout="row" flex="100" layout-wrap><ms-widget layout="column" flex="100" flex-gt-xs="50" flex-gt-md="20" \nclass="pointer" ng-repeat="k in kpi.kpis" ng-click="vm.toggleKpi(k)" title="{{\'Filtrar\' | translate}}"><ms-widget-front\n class="white-bg" ng-class="{\'active\':k.active}"><div class="ph-8 pv-16 h-55" layout="row" \nlayout-align="space-between center"><span>{{k.name}}</span></div><div class="pt-8 pb-32" layout="column" \nlayout-align="center center"><div class="font-size-72 line-height-72" ng-class="(k.danger ? \'red-fg\':\'light-blue-fg\')">\n{{k.value}}</div></div><div class="p-16 grey-50-bg border-top" layout="row" layout-align="start center"><span \nclass="h4 secondary-text text-truncate">{{k.second_name}}:</span> <span class="h4 ml-8">{{k.done}}</span></div>\n</ms-widget-front></ms-widget></div></md-tab><md-tab label="{{\'Ganado\' | translate}}" \nng-repeat="kpi in vm.kpisPositive.data" md-on-select="vm.togglePositive()"><div class="widget-group" layout="row" \nflex="100" layout-wrap><ms-widget layout="column" flex="100" flex-gt-xs="50" flex-gt-md="20" class="pointer" \nng-repeat="k in kpi.kpis" ng-click="vm.toggleKpiPositive(k)" title="{{\'Filtrar\' | translate}}"><ms-widget-front \nclass="white-bg" ng-class="{\'active\':k.active}"><div class="ph-8 pv-16 h-55" layout="row" \nlayout-align="space-between center"><span>{{k.name}}</span></div><div class="pt-8 pb-32" layout="column" \nlayout-align="center center"><div class="font-size-72 line-height-72" ng-class="(k.danger ? \'red-fg\':\'light-blue-fg\')">\n{{k.value}}</div></div><div class="p-16 grey-50-bg border-top" layout="row" layout-align="start center"><span \nclass="h4 secondary-text text-truncate">{{k.second_name}}:</span> <span class="h4 ml-8">{{k.done}}</span></div>\n</ms-widget-front></ms-widget></div></md-tab></md-tabs></div>'),e.put("app/main/leads/views/list/leads.html",'<div id="leads" class="page-layout carded left-sidenav" data-layout="row"><div class="top-bg md-accent-bg"></div><div \nclass="center" data-layout="column" data-flex><div class="header" layout="row" layout-align="space-between center"><div\n class="white-fg" layout="column" layout-align="start start"><div class="h1" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-document"></md-icon><span>LEADS</span></div><div class="count secondary-text"><span \ndata-translate>Número de leads:</span> <span>{{ vm.leads.count }}</span></div></div><div><md-button \nclass="md-raised md-hue-2 header-boards-button" ng-click="vm.toggleSidenav(\'filters-sidenav\')" aria-label="Filtrar">\n<md-icon md-font-icon="icon-filter-variant" class="icon"></md-icon><span data-translate>Filtrar</span></md-button>\n<md-button class="md-raised md-hue-2 header-boards-button" ng-click="vm.getDocument()" data-debouce-click \naria-label="Exportar"><md-icon md-font-icon="icon-export" class="icon"></md-icon><span data-translate>Exportar</span>\n</md-button></div></div><div class="content-card" data-layout="column" data-flex><div class="toolbar" layout="row" \nlayout-align="start center" hide-gt-md><md-button class="md-icon-button sidenav-toggle" \nng-click="vm.toggleSidenav(\'filters-sidenav\')" aria-label="Toggle left sidenav"><md-icon \nmd-font-icon="icon-filter-variant" class="icon"></md-icon></md-button></div><md-content class="content no-padding" \nflex ms-scroll><div layout="column" layout-align="space-between start"><div class="fullwidth" data-layout="column" \ndata-flex><div style="overflow-x:auto"><div table-fixed-header ms-scroll class="dataTables_scroll"><table \nclass="dataTable row-border hover"><thead><tr><th class="pointer" ng-click="vm.changeOrder(\'created\')"><span \ndata-translate>Fecha de alta</span><md-icon ng-if="vm.leads.filters.ordering===\'created\'" \nmd-font-icon="icon-sort-ascending" class="icon"></md-icon><md-icon ng-if="vm.leads.filters.ordering===\'-created\'" \nmd-font-icon="icon-sort-descending" class="icon"></md-icon></th><th class="pointer" \nng-click="vm.changeOrder(\'modified\')"><span data-translate>Última modificación</span><md-icon \nng-if="vm.leads.filters.ordering===\'modified\'" md-font-icon="icon-sort-ascending" class="icon"></md-icon><md-icon \nng-if="vm.leads.filters.ordering===\'-modified\'" md-font-icon="icon-sort-descending" class="icon"></md-icon></th><th \nclass="pointer" ng-click="vm.changeOrder(\'client__name\')"><span data-translate>Nombre</span><md-icon \nng-if="vm.leads.filters.ordering===\'client__name\'" md-font-icon="icon-sort-ascending" class="icon"></md-icon><md-icon \nng-if="vm.leads.filters.ordering===\'-client__name\'" md-font-icon="icon-sort-descending" class="icon"></md-icon></th><th\n class="pointer" ng-click="vm.changeOrder(\'status\')"><span data-translate>Estado</span><md-icon \nng-if="vm.leads.filters.ordering===\'status\'" md-font-icon="icon-sort-ascending" class="icon"></md-icon><md-icon \nng-if="vm.leads.filters.ordering===\'-status\'" md-font-icon="icon-sort-descending" class="icon"></md-icon></th><th \ndata-translate>Nº de llamadas realizadas</th><th data-translate>Nº de mails enviados</th><th data-translate>\nNº de whatsapps</th><th data-translate>Nº de tareas realizadas</th><th data-translate>Nº de seguimientos realizados\n</th><th data-translate>Asignado a</th></tr></thead><tbody><tr data-ng-show="vm.leads.count === 0"><td colspan="9" \nclass="text-center" data-translate>No se han encontrado leads</td></tr><tr \ndata-dir-paginate="lead in vm.leads.data | itemsPerPage: 10" ng-click="vm.goLead(lead)" class="pointer" \ndata-total-items="vm.leads.count" data-current-page="vm.leads.filters.page"><td>\n{{ lead.created | date:\'dd/MM/yyyy HH:mm\'}}</td><td>{{ lead.modified | date:\'dd/MM/yyyy HH:mm\'}}</td><td>\n{{ lead.client.name }} {{ lead.client.surname }}</td><td><span ng-repeat="status in vm.leadStatus" \nng-if="status.id===lead.status">{{ status.name }}</span></td><td>{{ lead.sent_phone_call_count }}</td><td>\n{{ lead.sent_emails_count }}</td><td>{{ lead.sent_whatsapp_count }}</td><td>{{ lead.task_count }}</td><td>\n{{ lead.tracking_count }}</td><td>{{ lead.user_data.first_name }} {{ lead.user_data.last_name }}</td></tr></tbody>\n</table></div></div><dir-pagination-controls max-size="5" class="bottomFixed"></dir-pagination-controls></div></div>\n</md-content></div></div><md-sidenav class="filters-sidenav md-sidenav-right" md-component-id="filters-sidenav" \nng-include="\'app/main/leads/sidenavs/filters/filters-sidenav.html\'" ms-sidenav-helper></md-sidenav></div>'),e.put("app/main/leads/sidenavs/filters/filters-sidenav.html",'<md-toolbar class="md-accent" ng-class="\'md-\'+vm.board.settings.color+\'-bg\'"><div class="md-toolbar-tools"><span flex \nclass="menu-title" data-translate>Filtro avanzado</span></div></md-toolbar><md-content class="" ms-scroll><md-list>\n<md-subheader class="md-no-sticky" data-translate>Filtrar por fecha de alta</md-subheader><md-list-item class="label">\n<label class="mb-20" data-layout="row" data-layout-align="start center" data-flex><md-datepicker \ndata-ng-model="vm.filters.created_start_date" md-max-date="vm.filters.created_end_date" \nmd-placeholder="{{\'Desde\' | translate}}"></md-datepicker></label><label class="mb-20" data-layout="row" \ndata-layout-align="start center" data-flex><md-datepicker data-ng-model="vm.filters.created_end_date" \nmd-min-date="vm.filters.created_start_date" md-placeholder="{{\'Hasta\' | translate}}"></md-datepicker></label>\n</md-list-item><md-subheader class="md-no-sticky" data-translate>Filtrar por fecha de última modificación\n</md-subheader><md-list-item class="label"><label class="mb-20" data-layout="row" data-layout-align="start center" \ndata-flex><md-datepicker data-ng-model="vm.filters.date_start" md-min-date="vm.minDate" \nmd-max-date="vm.filters.date_end" md-placeholder="{{\'Desde\' | translate}}"></md-datepicker></label><label \nclass="mb-20" data-layout="row" data-layout-align="start center" data-flex><md-datepicker \ndata-ng-model="vm.filters.date_end" md-min-date="vm.filters.date_start" md-max-date="vm.maxDate" \nmd-placeholder="{{\'Hasta\' | translate}}"></md-datepicker></label></md-list-item><md-list-item class="label"><div \nclass="mb-10 mr-40"><div translate>Rating</div><div class="mt-10 tag" layout="row" layout-align="start center"><md-icon\n ng-click="vm.setScore(1)" md-font-icon="{{vm.filters.score >0 ? \'icon-star\' : \'icon-star-outline\'}}" class="amber-fg">\n</md-icon><md-icon ng-click="vm.setScore(2)" \nmd-font-icon="{{vm.filters.score >1 ? \'icon-star\' : \'icon-star-outline\'}}" class="amber-fg"></md-icon><md-icon \nng-click="vm.setScore(3)" md-font-icon="{{vm.filters.score >2 ? \'icon-star\' : \'icon-star-outline\'}}" class="amber-fg">\n</md-icon><md-icon ng-click="vm.setScore(4)" \nmd-font-icon="{{vm.filters.score >3 ? \'icon-star\' : \'icon-star-outline\'}}" class="amber-fg"></md-icon></div></div><div>\n<md-chips ng-model="vm.filters.status_data" md-autocomplete-snap md-require-match="true"><md-autocomplete \nplaceholder="{{\'Estado\' | translate }}" md-delay="300" md-input-name="status" md-no-cache="true" md-min-length="0" \nmd-search-text="vm.searchTextStatus" md-items="s in vm.getStatusLead()" \nmd-item-text="vm.copySearch(\'searchTextStatus\')"><md-item-template><span md-highlight-text="vm.searchTextStatus">\n{{s.name}}</span></md-item-template></md-autocomplete><md-chip-template><span>{{$chip.name}}</span></md-chip-template>\n</md-chips></div></md-list-item><md-list-item ng-if="vm.user.is_admin || vm.user.is_concession_admin"><div \nclass="mt-20"><md-button class="md-raised md-hue-2 header-boards-button" \nng-class="{\'md-accent\':!vm.filters.with_concession}" \nng-click="vm.filters.with_concession=null; vm.filters.user_data=[vm.user]" aria-label="Mis leads"><span data-translate>\nMis leads</span></md-button><md-button class="md-raised md-hue-2 header-boards-button" \nng-class="{\'md-accent\':vm.filters.with_concession}" \nng-click="vm.filters.with_concession=true; vm.filters.user_data=[]" aria-label="Todos"><span data-translate>Todos\n</span></md-button></div></md-list-item><md-list-item><md-chips ng-model="vm.filters.user_data" md-autocomplete-snap \nmd-require-match="true" readonly="!vm.filters.with_concession"><md-autocomplete \nplaceholder="{{\'Usuario\' | translate }}" md-delay="300" md-input-name="user" md-no-cache="true" \nmd-min-length="vm.filters.user_data.length>0 ? 0:1" md-search-text="vm.searchTextUser" \nmd-items="user in vm.getUsers(vm.searchTextUser)" md-item-text="vm.copySearch(\'searchTextUser\')"><md-item-template>\n<span md-highlight-text="vm.searchTextUser">{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span \ndata-translate>No hay ningun usuario con ese nombre</span></md-not-found></md-autocomplete><md-chip-template><span>\n{{vm.getFullUserName($chip)}}</span></md-chip-template></md-chips></md-list-item><md-list-item><md-chips \nng-model="vm.filters.concessionaire__in_data" md-autocomplete-snap md-require-match="true"><md-autocomplete \nmd-no-cache="true" md-delay="300" md-min-length="vm.filters.concessionaire__in_data.length>0 ? 0:1" \nmd-search-text="vm.searchTextConcessionaire" \nmd-items="concessionaire in vm.getConcessionaires(vm.searchTextConcessionaire)" \nmd-item-text="vm.copySearch(\'searchTextConcessionaire\')" placeholder="{{\'Concesionario\' | translate }}">\n<md-item-template><span md-highlight-text="vm.searchTextConcessionaire">{{concessionaire.name}}</span>\n</md-item-template><md-not-found><span data-translate>No hay ningún concesionario con ese nombre</span></md-not-found>\n</md-autocomplete><md-chip-template><span>{{$chip.name}}</span></md-chip-template></md-chips></md-list-item>\n<md-list-item><md-chips ng-model="vm.filters.origin_data" md-autocomplete-snap md-require-match="true"><md-autocomplete\n placeholder="{{\'Origen\' | translate }}" md-delay="300" md-input-name="origin" md-no-cache="true" \nmd-min-length="vm.filters.origin_data.length>0 ? 0:1" md-search-text="vm.searchTextOrigin" \nmd-items="origin in vm.getOrigins(vm.searchTextOrigin)" md-item-text="vm.copySearch(\'searchTextOrigin\')">\n<md-item-template><span md-highlight-text="vm.searchTextOrigin">{{origin.name}}</span></md-item-template><md-not-found>\n<span data-translate>No hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-chip-template>\n<span>{{$chip.name}}</span></md-chip-template></md-chips></md-list-item><md-list-item><md-chips \nng-model="vm.filters.channel_data" md-autocomplete-snap md-require-match="true"><md-autocomplete \nplaceholder="{{\'Canal\' | translate }}" md-delay="300" md-input-name="channel" md-no-cache="true" \nmd-min-length="vm.filters.channel_data.length>0 ? 0:1" md-search-text="vm.searchTextChannel" \nmd-items="channel in vm.getChannels(vm.searchTextChannel)" md-item-text="vm.copySearch(\'searchTextChannel\')">\n<md-item-template><span md-highlight-text="vm.searchTextChannel">{{channel.name}}</span></md-item-template>\n<md-not-found><span data-translate>No hay ningún canal con ese nombre</span></md-not-found></md-autocomplete>\n<md-chip-template><span>{{$chip.name}}</span></md-chip-template></md-chips></md-list-item><md-list-item><md-chips \nng-model="vm.filters.tasks_media_data" md-autocomplete-snap md-require-match="true"><md-autocomplete \nplaceholder="{{\'Medio\' | translate }}" md-delay="300" md-input-name="media" md-no-cache="true" \nmd-min-length="vm.filters.tasks_media_data.length>0 ? 0:1" md-search-text="searchTextMedia" \nmd-items="media in vm.getTaskMedia(searchTextMedia)" md-item-text="media.name"><md-item-template><span \nmd-highlight-text="searchTextMedia">{{media.name}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ningún medio con ese nombre</span></md-not-found></md-autocomplete><md-chip-template><span>{{$chip.name}}</span>\n</md-chip-template></md-chips></md-list-item><md-list-item><md-chips ng-model="vm.filters.brand_data" \nmd-autocomplete-snap md-require-match="true"><md-autocomplete placeholder="{{\'Marca\' | translate }}" md-delay="300" \nmd-input-name="brand" md-no-cache="true" md-min-length="vm.filters.brand_data.length>0 ? 0:1" \nmd-search-text="vm.searchTextBrand" md-items="brand in vm.getBrands(vm.searchTextBrand)" \nmd-item-text="vm.copySearch(\'searchTextBrand\')"><md-item-template><span md-highlight-text="vm.searchTextBrand">\n{{brand.name}}</span></md-item-template><md-not-found><span data-translate>No hay ninguna marca con ese nombre</span>\n</md-not-found></md-autocomplete><md-chip-template><span>{{$chip.name}}</span></md-chip-template></md-chips>\n</md-list-item><md-list-item><md-input-container><label data-translate>Modelo</label><input type="text" name="model" \ndata-ng-model="vm.filters.model"></md-input-container></md-list-item><md-list-item><md-input-container><label \ndata-translate>Versión</label><input type="text" name="version" data-ng-model="vm.filters.version">\n</md-input-container></md-list-item><md-list-item><div class="content-task"><md-autocomplete \nmd-floating-label="{{\'Tipo de solicitud\' | translate }}" md-delay="300" md-input-name="task" \nmd-selected-item-change="vm.filters.tasks_tracing_data=[];vm.filters.tasks_type_data=[];vm.filters.overdue=null" \nmd-no-cache="true" md-min-length="0" md-selected-item="vm.filters.tasktype" md-items="t in vm.getRequestTypes()" \nmd-item-text="t.name"><md-item-template><span>{{t.name}}</span></md-item-template></md-autocomplete></div>\n</md-list-item><md-list-item ng-if="vm.filters.tasktype.id===\'tarea\'"><div class="content-task"><md-chips \nng-model="vm.filters.tasks_type_data" md-autocomplete-snap md-require-match="true"><md-autocomplete \nplaceholder="{{\'Tarea\' | translate }}" md-delay="300" md-input-name="task" md-no-cache="true" \nmd-min-length="vm.filters.tasks_type_data.length>0 ? 0:1" md-search-text="vm.searchTextTask" \nmd-items="task in vm.getTaskTypes(false, vm.searchTextTask)" md-item-text="vm.copySearch(\'searchTextTask\')">\n<md-item-template><span md-highlight-text="vm.searchTextTask">{{task.name}}</span></md-item-template><md-not-found>\n<span data-translate>No hay ninguna tarea con ese nombre</span></md-not-found></md-autocomplete><md-chip-template>\n<span>{{$chip.name}}</span></md-chip-template></md-chips></div></md-list-item><md-list-item \nng-if="vm.filters.tasktype.id===\'seguimiento\'"><div class="content-task"><md-chips \nng-model="vm.filters.tasks_tracing_data" md-autocomplete-snap md-require-match="true"><md-autocomplete \nplaceholder="{{\'Seguimiento\' | translate }}" md-delay="300" md-input-name="task" md-no-cache="true" \nmd-min-length="vm.filters.tasks_tracing_data.length>0 ? 0:1" md-search-text="vm.searchTextTask" \nmd-items="task in vm.getTaskTypes(true,vm.searchTextTask)" md-item-text="vm.copySearch(\'searchTextTask\')">\n<md-item-template><span md-highlight-text="vm.searchTextTask">{{task.name}}</span></md-item-template><md-not-found>\n<span data-translate>No hay ningún seguimiento con ese nombre</span></md-not-found></md-autocomplete><md-chip-template>\n<span>{{$chip.name}}</span></md-chip-template></md-chips></div></md-list-item><md-list-item \nng-if="vm.filters.tasktype.id"><div class="content-task"><md-autocomplete \nmd-floating-label="{{\'Vencida\' | translate }}" md-delay="300" md-input-name="overdue" md-no-cache="true" \nmd-min-length="0" md-selected-item="vm.filters.overdue" md-items="b in vm.getBooleans()" md-item-text="b.name">\n<md-item-template><span>{{b.name}}</span></md-item-template></md-autocomplete></div></md-list-item><md-list-item \nng-if="vm.filters"><md-input-container><label data-translate>Resultado</label><md-select \ndata-ng-model="vm.filters.result" name="result" ng-change="vm.filters.result_reason=null"><md-option \ndata-ng-value="null" data-translate>Ver todos</md-option><md-option data-ng-repeat="result in vm.results" \ndata-ng-value="result.id">{{ result.name }}</md-option></md-select></md-input-container></md-list-item><md-list-item \nng-if="vm.filters && vm.filters.result"><md-input-container><label data-translate>Motivo</label><md-select \ndata-ng-model="vm.filters.result_reason" name="result_reason"><md-option data-ng-value="null" data-translate>Ver todos\n</md-option><md-option data-ng-repeat="reason in vm.resultReasons[vm.filters.result]" data-ng-value="reason.id">\n{{ reason.name }}</md-option></md-select></md-input-container></md-list-item><md-list-item class="mt-20"><md-button \nclass="md-accent md-raised md-hue-2 header-boards-button" ng-click="vm.setFilters()" aria-label="search"><md-icon \nmd-font-icon="icon-magnify" class="icon"></md-icon><span data-translate>Buscar</span></md-button><md-button \nclass="md-accent md-raised md-hue-2 header-boards-button" ng-click="vm.getDocument()" data-debouce-click \naria-label="Exportar"><md-icon md-font-icon="icon-export" class="icon"></md-icon><span data-translate>Exportar</span>\n</md-button></md-list-item></md-list></md-content>'),e.put("app/main/metrics/views/voiceservice/voiceservice.html",'<div id="voiceService"><h2>Niveles de servicio de voz</h2><div><p class="text-bold secondary-text" translate>Llamadas\n</p><div><div class="md-accent-fg font-size-26 pl-40">{{vm.voiceService.data.totales.total}}</div><div><p \nclass="pl-40 secondary-text"><span translate>No atendidas:</span>{{vm.voiceService.data.totales.no_atendidas}}</p>\n</div></div></div><div class="llamdas-recibidas mt-40"><div layout="row" layout-align="space-between center"><div><p \nclass="text-bold secondary-text" translate>LLamadas Recibidas</p></div><div><md-button \nui-sref="app.leads.list(vm.concatFilters({source__channel_id__in:1, with_concession:true},vm.metrics.filters))" \ntarget="_blank" class="md-icon-button md-primary" aria-label="Percentage"><md-tooltip md-delay="300">Ver llamadas\n</md-tooltip><md-icon md-font-icon="icon-eye"></md-icon></md-button></div></div><div \nng-if="!vm.metrics.loading && vm.voiceService.data.llamadas.labels.length>0"><div class="card" ng-init="vm.getChart()">\n<chartist class="ct-chart ct-golden-section" chartist-data="vm.stackedBarChart.data" chartist-chart-type="Bar" \nchartist-chart-options="vm.stackedBarChart.options" chartist-events="vm.stackedBarChart.events"></chartist><div \nclass="foot"><div class="item"><div class="box atendidas"></div><div translate>Atendidas</div></div><div class="item">\n<div class="box no-atendidas"></div><div translate>No atendidas</div></div></div></div></div><md-progress-circular \nng-if="vm.metrics.loading" class="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular></div><div\n class="no-atendidas mt-40"><p class="text-bold secondary-text" translate>No atendidas</p><div \nng-if="!vm.metrics.loading && vm.voiceService.data.no_atendidos"><div class="card" ng-init="vm.getChart()"><div \nng-if="vm.voiceService.data.no_atendidos.con_llamadas>0 || vm.voiceService.data.no_atendidos.sin_llamadas>0"><chartist \nclass="ct-chart ct-golden-section" chartist-data="vm.donutChart.data" chartist-chart-type="Pie" \nchartist-events="vm.donutChart.events" chartist-chart-options="vm.donutChart.options"></chartist></div><div \nclass="foot"><div class="item"><div class="box emitidas"></div><div translate class="mr-40">LLamadas emitidas</div><div\n class="mr-40">{{vm.voiceService.data.no_atendidos.con_llamadas}}</div><div \nng-if="vm.voiceService.data.no_atendidos.con_llamadas">{{vm.voiceService.data.no_atendidos.con_llamadas_percentage}}%\n</div></div><div class="item"><div class="box sin-llamadas"></div><div translate class="w-110 mr-40">Sin llamadas</div>\n<div class="mr-40">{{vm.voiceService.data.no_atendidos.sin_llamadas}}</div><div \nng-if="vm.voiceService.data.no_atendidos.sin_llamadas">{{vm.voiceService.data.no_atendidos.sin_llamadas_percentage}}%\n</div></div></div></div></div><md-progress-circular ng-if="vm.metrics.loading" class="md-accent" \nmd-mode="indeterminate" md-diameter="32"></md-progress-circular></div><div class="mt-40"><p \nclass="text-bold secondary-text" translate>ASA llamadas perdidas</p><div ng-if="!vm.metrics.loading"><div \nclass="md-accent-fg font-size-26 pl-40"><div>{{vm.voiceService.data.asa.tiempo.hour}} Horas</div><div>\n{{vm.voiceService.data.asa.tiempo.minute}} Minutos</div><div>{{vm.voiceService.data.asa.tiempo.second}} Segundos</div>\n</div></div><md-progress-circular ng-if="vm.metrics.loading" class="md-accent" md-mode="indeterminate" \nmd-diameter="32"></md-progress-circular></div><div class="mt-40"><p class="text-bold secondary-text" translate>\nLeads atendidos en menos de una hora</p><div ng-if="!vm.metrics.loading"><div class="md-accent-fg font-size-26 pl-40">\n<div>{{vm.voiceService.data.asa.menos_una_hora_percentage}}%</div></div></div><md-progress-circular \nng-if="vm.metrics.loading" class="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular></div><div\n class="users mt-40"><table class="dataTable row-border hover"><thead><tr><th>No atendidas asignadas a</th><th><a \nui-sref="app.leads.list(vm.concatFilters({lead_managements__event:\'outcomming_all\', source__channel_id__in:1, with_concession:true},vm.metrics.filters))" \ntarget="_blank">Llamadas emitidas</a></th><th><a \nui-sref="app.leads.list(vm.concatFilters({without_outgoing_calls:true, source__channel_id__in:1, with_concession:true},vm.metrics.filters))" \ntarget="_blank">Sin llamadas</a></th></tr></thead><tbody><tr ng-repeat="user in vm.voiceService.data.asignados"><td>\n{{user.asignado}}</td><td><span>{{user.con_llamadas}}</span></td><td><span>{{user.sin_llamadas}}</span></td></tr>\n</tbody></table></div></div>'),e.put("app/main/metrics/views/digitalservice/digitalservice.html",'<div id="digitalService"><h2>Niveles de servicio digital</h2><div><p class="text-bold secondary-text" translate>\nLeads digitales</p><div><div class="md-accent-fg font-size-26 pl-40">{{vm.digitalService.data.totales.total}}</div>\n<div><p class="pl-40 secondary-text"><span translate>No contactados:</span>\n{{vm.digitalService.data.totales.no_atendidas}}</p></div></div></div><div class="no-atendidas mt-40"><p \nclass="text-bold secondary-text" translate>Leads canal digital con teléfono</p><div \nng-if="!vm.metrics.loading && vm.digitalService.data.con_telefono"><div class="card" ng-init="vm.getChart()"><div \nng-if="vm.digitalService.data.con_telefono.con_llamadas>0 || vm.digitalService.data.con_telefono.sin_llamadas>0">\n<chartist class="ct-chart ct-golden-section" chartist-data="vm.donutChartDigital.data" chartist-chart-type="Pie" \nchartist-events="vm.donutChartDigital.events" chartist-chart-options="vm.donutChartDigital.options"></chartist></div>\n<div class="foot"><div class="item"><div class="box emitidas"></div><div translate class="mr-40">LLamadas emitidas\n</div><div class="mr-40">{{vm.digitalService.data.con_telefono.con_llamadas}}</div><div \nng-if="vm.digitalService.data.con_telefono.con_llamadas>0">\n{{vm.digitalService.data.con_telefono.con_llamadas_percentage}}%</div></div><div class="item"><div \nclass="box sin-llamadas"></div><div translate class="w-110 mr-40">Sin llamadas</div><div class="mr-40">\n{{vm.digitalService.data.con_telefono.sin_llamadas}}</div><div \nng-if="vm.digitalService.data.con_telefono.sin_llamadas>0">\n{{vm.digitalService.data.con_telefono.sin_llamadas_percentage}}%</div></div></div></div></div><md-progress-circular \nng-if="vm.metrics.loading" class="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular></div><div\n class="mt-40"><p class="text-bold secondary-text" translate>ASA leads contactados telefónicamente</p><div \nng-if="!vm.metrics.loading"><div class="md-accent-fg font-size-26 pl-40"><div>\n{{vm.digitalService.data.asa.tiempo.hour}} Horas</div><div>{{vm.digitalService.data.asa.tiempo.minute}} Minutos</div>\n<div>{{vm.digitalService.data.asa.tiempo.second}} Segundos</div></div></div><md-progress-circular \nng-if="vm.metrics.loading" class="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular></div><div\n class="mt-40"><p class="text-bold secondary-text" translate>Leads atendidos en menos de una hora</p><div \nng-if="!vm.metrics.loading"><div class="md-accent-fg font-size-26 pl-40"><div>\n{{vm.digitalService.data.asa.menos_una_hora_percentage}}%</div></div></div><md-progress-circular \nng-if="vm.metrics.loading" class="md-accent" md-mode="indeterminate" md-diameter="32"></md-progress-circular></div><div\n class="users mt-40"><table class="dataTable row-border hover"><thead><tr><th>Asignado a</th><th><a \nui-sref="app.leads.list(vm.concatFilters({without_outgoing_calls:false, client__phone__isnull:false, source__channel_id__in:\'2,3,7,5,9,10,11,8\', with_concession:true},vm.metrics.filters))" \ntarget="_blank">Llamadas emitidas</a></th><th><a \nui-sref="app.leads.list(vm.concatFilters({without_outgoing_calls:true, client__phone__isnull:false, source__channel_id__in:\'2,3,7,5,9,10,11,8\', with_concession:true},vm.metrics.filters))" \ntarget="_blank">Sin llamadas</a></th></tr></thead><tbody><tr ng-repeat="user in vm.digitalService.data.asignados"><td>\n{{user.asignado}}</td><td><span>{{user.con_llamadas}}</span></td><td><span>{{user.sin_llamadas}}</span></td></tr>\n</tbody></table></div></div>'),e.put("app/main/metrics/views/servicelevel/servicelevel.html",'<div id="servicelevel"><h2>Niveles de servicio</h2><div class="services mt-40 mb-40"><p \nclass="text-bold secondary-text" translate>Niveles de servicio</p><div data-layout="row" data-layout-wrap \nlayout-margin="20px"><div class="box" ng-class="vm.getColor($index)" ng-repeat="kpi in vm.servicelevel.data.kpis" \nng-if="kpi.title"><div layout="row" layout-align="end end"><md-button \nui-sref="app.leads.list(vm.concatFilters(kpi.filters,vm.metrics.filters))" target="_blank" class="md-icon-button" \naria-label="Ver leads"><md-tooltip md-delay="300">Ver leads</md-tooltip><md-icon md-font-icon="icon-eye" \nclass="secondary-text"></md-icon></md-button></div><div class="pr-20"><div><span class="number">{{kpi.number}}</span> \n<span class="percentage" ng-if="kpi.number>0">({{kpi.percentage}}%)</span></div><div class="title">{{kpi.title}}</div>\n</div></div></div></div></div>'),e.put("app/main/metrics/views/benchmark/benchmark.html",'<div id="benchmark"><h2>Benchmark</h2><div class="funnel" data-layout="row"><div class="w-150"><p \nclass="text-bold secondary-text" translate>LEAD RECIBIDO</p><p class="text-bold secondary-text" translate>LEAD UTIL</p>\n<p class="text-bold secondary-text" translate>LEAD GANADOS</p></div><div class="chart" flex="100"><div><p \nclass="md-accent-bg white-fg text-center"><strong>{{vm.benchmark.data.funnel.lead_recibido}}</strong></p></div><div \nclass="text-center"><p style="width: {{vm.benchmark.data.funnel.lead_util_percentage}}%; display: inline-block" \nclass="mt-0 text-center" ng-class="{\'white-fg md-accent-bg\': vm.benchmark.data.funnel.lead_util>0}"><strong>\n{{vm.benchmark.data.funnel.lead_util}}</strong> <span ng-if="vm.benchmark.data.funnel.lead_util>0">\n({{vm.benchmark.data.funnel.lead_util_percentage}}%)</span></p></div><div class="text-center"><p \nstyle="width: {{vm.benchmark.data.funnel.ganados_percentage}}%; display: inline-block" class="mt-0 text-center" \nng-class="{\'white-fg md-accent-bg\': vm.benchmark.data.funnel.ganados>0}"><strong>{{vm.benchmark.data.funnel.ganados}}\n</strong></p><span ng-if="vm.benchmark.data.funnel.ganados>0">({{vm.benchmark.data.funnel.ganados_percentage}}%)</span>\n</div></div></div><div class="origins mt-40 mb-40"><div layout="row" layout-align="end end"><md-button \nng-if="vm.data_origins===\'numbers\'" ng-click="vm.data_origins=\'percentage\'" class="md-fab md-mini md-primary" \naria-label="Percentage"><md-tooltip md-delay="300">Datos porcentuales</md-tooltip><md-icon md-font-icon="icon-percent" \nclass="white-fg"></md-icon></md-button><md-button ng-if="vm.data_origins!==\'numbers\'" \nng-click="vm.data_origins=\'numbers\'" class="md-fab md-mini md-primary" aria-label="Number"><md-tooltip md-delay="300">\nDatos decimales</md-tooltip><md-icon md-font-icon="icon-numeric" class="white-fg"></md-icon></md-button></div><table \nclass="dataTable row-border hover"><thead><tr><th>Origen</th><th><a \nui-sref="app.leads.list(vm.concatFilters({result__isnull:true, with_concession:true},vm.metrics.filters))" \ntarget="_blank">Abiertos</a></th><th><a \nui-sref="app.leads.list(vm.concatFilters({result:\'negative\', with_concession:true},vm.metrics.filters))" \ntarget="_blank">Descartado</a></th><th><a \nui-sref="app.leads.list(vm.concatFilters({result:\'positive\', with_concession:true},vm.metrics.filters))" \ntarget="_blank">Ganado</a></th><th>Total</th></tr></thead><tbody><tr ng-repeat="origin in vm.benchmark.data.origins">\n<td>{{origin.origen}}</td><td><span ng-if="vm.data_origins===\'numbers\'">{{origin.abiertos}}</span> <span \nng-if="vm.data_origins!==\'numbers\'">{{origin.abiertos_percentage}}%</span></td><td><span \nng-if="vm.data_origins===\'numbers\'">{{origin.descartados}}</span> <span ng-if="vm.data_origins!==\'numbers\'">\n{{origin.descartados_percentage}}%</span></td><td><span ng-if="vm.data_origins===\'numbers\'">{{origin.ganados}}</span> \n<span ng-if="vm.data_origins!==\'numbers\'">{{origin.ganados_percentage}}%</span></td><td class="total">{{origin.total}}\n</td></tr><tr><th class="total">Total</th><th><span ng-if="vm.data_origins===\'numbers\'">\n{{vm.benchmark.data.total_origins.abiertos}}</span> <span ng-if="vm.data_origins!==\'numbers\'">\n{{vm.benchmark.data.total_origins.abiertos_percentage}}%</span></th><th><span ng-if="vm.data_origins===\'numbers\'">\n{{vm.benchmark.data.total_origins.descartados}}</span> <span ng-if="vm.data_origins!==\'numbers\'">\n{{vm.benchmark.data.total_origins.descartados_percentage}}%</span></th><th><span ng-if="vm.data_origins===\'numbers\'">\n{{vm.benchmark.data.total_origins.ganados}}</span> <span ng-if="vm.data_origins!==\'numbers\'">\n{{vm.benchmark.data.total_origins.ganados_percentage}}%</span></th><th>{{vm.benchmark.data.funnel.lead_recibido}}</th>\n</tr></tbody></table></div><div class="users"><div layout="row" layout-align="end end"><md-button \nng-if="vm.data_users===\'numbers\'" ng-click="vm.data_users=\'percentage\'" class="md-fab md-mini md-primary" \naria-label="Percentage"><md-tooltip md-delay="300">Datos porcentuales</md-tooltip><md-icon md-font-icon="icon-percent" \nclass="white-fg"></md-icon></md-button><md-button ng-if="vm.data_users!==\'numbers\'" ng-click="vm.data_users=\'numbers\'" \nclass="md-fab md-mini md-primary" aria-label="Number"><md-tooltip md-delay="300">Datos decimales</md-tooltip><md-icon \nmd-font-icon="icon-numeric" class="white-fg"></md-icon></md-button></div><table class="dataTable row-border hover">\n<thead><tr><th>Asignado a</th><th><a \nui-sref="app.leads.list(vm.concatFilters({result__isnull:true, with_concession:true},vm.metrics.filters))" \ntarget="_blank">Abiertos</a></th><th><a \nui-sref="app.leads.list(vm.concatFilters({result:\'negative\', with_concession:true},vm.metrics.filters))" \ntarget="_blank">Descartado</a></th><th><a \nui-sref="app.leads.list(vm.concatFilters({result:\'positive\', with_concession:true},vm.metrics.filters))" \ntarget="_blank">Ganado</a></th><th>Total</th></tr></thead><tbody><tr ng-repeat="user in vm.benchmark.data.users"><td>\n{{user.asignado}}</td><td><span ng-if="vm.data_users===\'numbers\'">{{user.abiertos}}</span> <span \nng-if="vm.data_users!==\'numbers\'">{{user.abiertos_percentage}}%</span></td><td><span ng-if="vm.data_users===\'numbers\'">\n{{user.descartados}}</span> <span ng-if="vm.data_users!==\'numbers\'">{{user.descartados_percentage}}%</span></td><td>\n<span ng-if="vm.data_users===\'numbers\'">{{user.ganados}}</span> <span ng-if="vm.data_users!==\'numbers\'">\n{{user.ganados_percentage}}%</span></td><td class="total">{{user.total}}</td></tr><tr><th class="total">Total</th><th>\n<span ng-if="vm.data_users===\'numbers\'">{{vm.benchmark.data.total_users.abiertos}}</span> <span \nng-if="vm.data_users!==\'numbers\'">{{vm.benchmark.data.total_users.abiertos_percentage}}%</span></th><th><span \nng-if="vm.data_users===\'numbers\'">{{vm.benchmark.data.total_users.descartados}}</span> <span \nng-if="vm.data_users!==\'numbers\'">{{vm.benchmark.data.total_users.descartados_percentage}}%</span></th><th><span \nng-if="vm.data_users===\'numbers\'">{{vm.benchmark.data.total_users.ganados}}</span> <span \nng-if="vm.data_users!==\'numbers\'">{{vm.benchmark.data.total_users.ganados_percentage}}%</span></th><th>\n{{vm.benchmark.data.funnel.lead_recibido}}</th></tr></tbody></table></div></div>'),
e.put("app/main/sfas/views/list/sfas.html",'<div id="sfas" class="page-layout carded fullwidth" data-layout="row"><div class="top-bg md-accent-bg"></div><div \nclass="center" data-layout="column" data-flex><div class="header" layout="row" layout-align="space-between center"><div\n class="white-fg" layout="column" layout-align="start start"><div class="h1" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-arrange-bring-to-front"></md-icon><span data-translate>Mis automatismos</span></div><div \nclass="count secondary-text"><span data-translate>Número de automatismos:</span> <span>{{vm.sfas.length}}</span></div>\n</div><div data-layout="row" data-layout-align="space-between center" data-layout-wrap><div data-layout="row" \ndata-layout-xs="column" data-layout-align="space-between center" data-layout-wrap></div><div class="actions" \ndata-layout="row" data-layout-align="end center" data-ng-if="hasPermission(\'sfas\',\'POST\')"><md-button \nclass="md-raised" aria-label="{{\'Nuevo automatísmo\' | translate}}" data-ng-click="vm.openSfaDialog($event)"><md-icon \nmd-font-icon="icon-plus-circle-outline"></md-icon><span data-translate>Nuevo automatismo</span></md-button></div></div>\n</div><div class="content-card" data-layout="column" data-flex><md-content class="content p-20" flex ms-scroll><div \nlayout="column" layout-align="space-between start"><div class="no-results text-center" ng-if="vm.sfas.length == 0"><div\n class="message"><md-icon class="message-icon s96" md-font-icon="icon-arrange-bring-to-front"></md-icon><div \nclass="message-text" translate>Sin automatismos</div></div></div><div class="todo-item" layout="row" \nlayout-align="start center" ng-repeat="sfa in vm.sfas"><div layout="row" layout-align="start center" flex><div \nclass="info" flex="auto"><div layout="row" data-layout-xs="column" layout-align="space-between center"><div \nlayout="row" layout-align="space-between center"><div><div class="title"><span ng-repeat="c in vm.channels" \nng-if="c.id===sfa.channel">Canal: {{c.name}}</span></div><div class="title"><span ng-repeat="e in vm.events" \nng-if="e.id===sfa.event">Evento: {{e.name}}</span></div><div><p>{{sfa.text}}</p></div></div></div><div layout="row" \nlayout-align="end center"><md-button data-layout="column" class="md-warn" data-layout-align="start center" \ndata-ng-if="hasPermission(\'sfas\',\'DELETE\')" ng-click="vm.removeSfa($index, sfa)"><md-icon class="pt-5" \ntitle="{{\'Eliminar\' | translate}}" md-font-icon="icon-delete"></md-icon><span class="pt-5" data-translate>Eliminar\n</span></md-button></div></div></div></div></div></div></md-content></div></div></div>'),e.put("app/main/sfas/dialogs/sfa/sfa-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="userForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><div \nng-repeat="item in vm.user.sfa_configurations" ng-if="!item.id" class="bb mb-20" layout="row" \nlayout-align="space-between center"><div flex="80" layout="column"><md-input-container \nng-init="name=\'sfa_configurations___\'+$index+\'___channel\'"><label data-translate>Canal</label><md-select \nng-model="item.channel" name="{{name}}" required><md-option ng-repeat="channel in vm.channels" ng-value="channel.id">\n{{channel.name}}</md-option></md-select><error-messages field="userForm[name]" server-errors="vm.serverErrors" \nrequired></error-messages></md-input-container><md-input-container \nng-init="name=\'sfa_configurations___\'+$index+\'___event\'"><label data-translate>Evento</label><md-select \nng-model="item.event" name="{{name}}" required><md-option ng-repeat="event in vm.events" ng-value="event.id">\n{{event.name}}</md-option></md-select><error-messages field="userForm[name]" server-errors="vm.serverErrors" required>\n</error-messages></md-input-container><md-input-container ng-init="name=\'sfa_configurations___\'+$index+\'___text\'">\n<input type="text" name="{{name}}" data-ng-model="item.text" placeholder="{{\'Comunicado\' | translate}}" required>\n<error-messages field="userForm[name]" server-errors="vm.serverErrors"></error-messages></md-input-container></div>\n</div></div></md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="space-between center"><div \ndata-layout="row" data-layout-align="start center"><md-button data-debouce-click type="submit" \ndata-ng-click="vm.saveUser()" class="send-button md-accent md-raised" \ndata-ng-disabled="userForm.$invalid || userForm.$pristine" aria-label="{{\'Guardar\' | translate}}"><span data-translate>\nGuardar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/origins/dialogs/origin/origin-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="originForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><md-input-container flex="100"><input \ntype="text" name="name" data-ng-model="vm.origin.name" placeholder="{{\'Nombre\' | translate}}" required md-autofocus>\n<error-messages field="originForm.name" server-errors="vm.serverErrors" required></error-messages></md-input-container>\n<md-input-container><label data-translate>Canales permitidos</label><md-select ng-model="vm.origin.available_channels" \nmultiple="multiple"><md-option ng-repeat="channel in vm.channels" ng-value="channel.id">{{channel.name}}</md-option>\n</md-select></md-input-container><p data-translate>Icono:</p><md-input-container flex="100" class="mt-0"><md-button \nng-click="vm.openFiles(originForm)" class="md-accent md-raised" aria-label="{{\'Añadir icono\' | translate}}"><span \nng-if="!vm.origin.icon" data-translate>Añadir icono</span> <span ng-if="vm.origin.icon" data-translate>Editar icono\n</span></md-button><input type="file" id="image-uploader" name="icon" data-ng-model="vm.origin.icon" ng-show="false">\n<error-messages field="originForm.icon" server-errors="vm.serverErrors" required></error-messages></md-input-container>\n<div><img ng-if="vm.origin.icon" ng-src="{{ vm.origin.icon }}"></div></div></md-dialog-content><md-dialog-actions \ndata-layout="row" data-layout-align="space-between center"><div data-layout="row" data-layout-align="start center">\n<md-button data-debouce-click type="submit" data-ng-click="vm.saveOrigin()" class="send-button md-accent md-raised" \ndata-ng-disabled="originForm.$invalid || originForm.$pristine" aria-label="{{\'Guardar\' | translate}}"><span \ndata-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/tasks/dialogs/task/appraisal.html",'<div layout="column"><md-input-container ng-init="nameBrand_model=\'appraisal___brand_model\'"><label data-translate>\nMarca/Modelo</label><input type="text" name="{{ nameBrand_model }}" data-ng-model="vm.task.appraisal.brand_model">\n<error-messages field="taskForm[nameBrand_model]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container ng-init="nameLicense_plate=\'appraisal___license_plate\'"><label data-translate>\nMatrícula</label><input type="text" name="{{ nameLicense_plate }}" data-ng-model="vm.task.appraisal.license_plate">\n<error-messages field="taskForm[nameLicense_plate]" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container ng-init="nameKm=\'appraisal___km\'"><label data-translate>Km</label><input \ntype="text" name="{{ nameKm }}" data-ng-model="vm.task.appraisal.km"><error-messages field="taskForm[nameKm]" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container \nng-init="nameYear=\'appraisal___year\'"><label data-translate>Año</label><input type="text" name="{{ nameYear }}" \ndata-ng-model="vm.task.appraisal.year"><error-messages field="taskForm[nameYear]" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container ng-init="nameGas=\'appraisal___gas\'"><label data-translate>\nCombustible</label><md-select name="{{ nameGas }}" data-ng-model="vm.task.appraisal.gas"><md-option \ndata-ng-repeat="gas in vm.gasTypes.data" data-ng-value="gas.id">{{gas.name}}</md-option></md-select><error-messages \nfield="taskForm[nameGas]" server-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container \nng-init="nameExtras=\'appraisal___extras\'"><label data-translate>Extras</label><input type="text" \nname="{{ nameExtras }}" data-ng-model="vm.task.appraisal.extras"><error-messages field="taskForm[nameExtras]" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container \nng-init="nameOrigin=\'appraisal___origin\'"><label data-translate>Origen</label><md-select \ndata-ng-model="vm.task.appraisal.origin" name="{{ nameOrigin }}"><md-option data-ng-repeat="origin in vm.origins" \ndata-ng-value="origin.id">{{origin.name}}</md-option></md-select><error-messages field="form[nameOrigin]" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><div data-layout-xs="column" data-layout="row" \ndata-layout-align="space-between center" layout-wrap class="fullwidth"><md-input-container flex="100" \nng-init="nameAppraisal=\'appraisal\'"><input type="hidden" name="{{ nameAppraisal }}" data-ng-model="vm.task.appraisal">\n<error-messages field="form[nameAppraisal]" server-errors="vm.serverErrors"></error-messages></md-input-container>\n</div></div>'),e.put("app/main/tasks/dialogs/task/task-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="taskForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{ vm.title }}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><label data-translate \nstyle="color: rgba(0, 0, 0, 0.54);font-size: 13px">Fecha</label><div><md-datepicker name="date" \ndata-ng-model="vm.task.planified_realization_date" style="margin-bottom: 14px" md-placeholder="dd/mm/yyyy">\n</md-datepicker><md-icon md-font-icon="icon-clock" class="s16"></md-icon><input class="mb-10" type="time" \ndata-ng-model="vm.task.datetime" md-placeholder="hh:mm" step="60"><error-messages field="taskForm.date" \nserver-errors="vm.serverErrors" forcechange></error-messages></div><md-input-container><label data-translate>Tipo\n</label><md-select data-ng-model="vm.task.type" name="type" required><md-option \ndata-ng-repeat="taskType in vm.taskTypes" data-ng-value="taskType.key">{{ taskType.name }}</md-option></md-select>\n<error-messages field="taskForm.type" server-errors="vm.serverErrors" required></error-messages></md-input-container>\n<md-input-container><label data-translate>Descripción</label><input type="text" data-ng-model="vm.task.description" \nname="description"><error-messages field="taskForm.description" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container><label class="md-container-ignore md-no-float" data-translate>Medio</label>\n<div layout="row"><div class="p-10 pointer w-70 h-70" layout="column" layout-align="center center" \nng-class="{\'border\':vm.task.media===\'Whatsapp\'}" ng-click="vm.task.media=\'Whatsapp\'"><md-icon \nmd-font-icon="icon-whatsapp s40"></md-icon></div><div class="p-10 pointer w-70 h-70" layout="column" \nlayout-align="center center" ng-class="{\'border\':vm.task.media===\'Phone\'}" ng-click="vm.task.media=\'Phone\'"><md-icon \nmd-font-icon="icon-phone s40"></md-icon></div><div class="p-10 pointer w-70 h-70" layout="column" \nlayout-align="center center" ng-class="{\'border\':vm.task.media===\'SMS\'}" ng-click="vm.task.media=\'SMS\'"><md-icon \nmd-font-icon="icon-message-text-outline s30"></md-icon><span class="font-size-12">SMS</span></div><div \nclass="p-10 pointer w-70 h-70" layout="column" layout-align="center center" \nng-class="{\'border\':vm.task.media===\'E-mail\'}" ng-click="vm.task.media=\'E-mail\'"><md-icon \nmd-font-icon="icon-email s40"></md-icon></div><div class="p-10 pointer w-70 h-70" layout="column" \nlayout-align="center center" ng-class="{\'border\':vm.task.media===\'face\'}" ng-click="vm.task.media=\'face\'"><md-icon \nmd-font-icon="icon-account-multiple s40"></md-icon></div></div><input type="hidden" data-ng-model="vm.task.media" \nname="media"><error-messages field="taskForm.media" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><div class="fullwidth" ng-if="vm.task.type===\'appraisal\' && false" \nng-include="\'app/main/tasks/dialogs/task/appraisal.html\'"></div></div></md-dialog-content><md-dialog-actions \ndata-layout="row" data-layout-align="space-between center"><div data-layout="row" data-layout-align="start center">\n<md-button data-debouce-click type="submit" data-ng-click="vm.saveTask()" class="send-button md-accent md-raised" \ndata-ng-disabled="taskForm.$invalid" aria-label="{{ \'Guardar\' | translate }}"><span data-translate>Guardar</span>\n</md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/users/dialogs/available/available-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="availableForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><md-input-container><label data-translate>\nMotivo</label><md-select data-ng-model="vm.form.unavailable_reason" name="unavailable_reason" required><md-option \ndata-ng-repeat="reason in vm.reasons" data-ng-value="reason.id">{{ reason.name }}</md-option></md-select>\n<error-messages field="taskForm.unavailable_reason" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div></md-dialog-content><md-dialog-actions data-layout="row" \ndata-layout-align="space-between center"><div data-layout="row" data-layout-align="start center"><md-button \ndata-debouce-click type="submit" data-ng-click="vm.saveAvailable()" class="send-button md-accent md-raised" \ndata-ng-disabled="availableForm.$invalid || availableForm.$pristine" aria-label="{{\'Guardar\' | translate}}"><span \ndata-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/users/dialogs/user/user-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task"><form name="userForm" class="md-inline-form" novalidate>\n<md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" data-layout="row" \ndata-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button class="md-icon-button" \ndata-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog"></md-icon></md-button>\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><div data-layout="row" \ndata-layout-align="space-between start"><md-input-container flex="45"><input type="text" name="first_name" \ndata-ng-model="vm.user.first_name" placeholder="{{\'Nombre\' | translate}}" required md-autofocus><error-messages \nfield="userForm.first_name" server-errors="vm.serverErrors" required></error-messages></md-input-container>\n<md-input-container flex="45"><input type="text" name="last_name" data-ng-model="vm.user.last_name" \nplaceholder="{{\'Apellidos\' | translate}}"><error-messages field="userForm.last_name" server-errors="vm.serverErrors">\n</error-messages></md-input-container></div><div><span translate>Asignar por defecto</span><div layout="row">\n<md-input-container data-layout="column" flex="50" class="mt-0"><md-checkbox ng-model="vm.user.lost_calls" \naria-label="{{\'Llamadas perdidas\' | translate}}" class="md-align-top-left no-margin" flex><span data-translate>\nLlamadas perdidas</span></md-checkbox></md-input-container><md-input-container data-layout="column" flex="50" \nclass="mt-0"><md-checkbox ng-model="vm.user.emails_received" aria-label="{{\'Mails recibidos\' | translate}}" \nclass="md-align-top-left no-margin" flex><span data-translate>Mails recibidos</span></md-checkbox></md-input-container>\n</div></div><div data-layout="row" data-layout-align="space-between start"><md-input-container flex="45"><label \ndata-translate>Contraseña</label><input type="password" name="password" data-ng-model="vm.user.password">\n<error-messages field="userForm.password" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container flex="45"><input match-password="password" type="password" name="repeat_password" \nng-model="vm.user.repeat_password" placeholder="Repite la contraseña"><error-messages field="userForm.repeat_password" \nserver-errors="vm.serverErrors" password-match></error-messages></md-input-container></div><md-input-container \nflex="100"><input type="text" name="email" data-ng-model="vm.user.email" placeholder="{{\'Email\' | translate}}" \nrequired> <span class="hint" data-translate>Se usará para acceder al sistema</span><error-messages \nfield="userForm.email" server-errors="vm.serverErrors" required></error-messages></md-input-container>\n<md-input-container flex="100"><input type="text" name="phone" data-ng-model="vm.user.phone" \nplaceholder="{{\'Teléfono\' | translate}}"><error-messages field="userForm.phone" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container flex="100"><input type="text" name="ddi_whatsapp_business" \ndata-ng-model="vm.user.ddi_whatsapp_business" placeholder="{{\'DDis WhatsApp Business\' | translate}}"><error-messages \nfield="userForm.ddi_whatsapp_business" server-errors="vm.serverErrors"></error-messages></md-input-container>\n<md-input-container flex="100"><input type="text" name="ubunet_company" data-ng-model="vm.user.ubunet_company" \nplaceholder="{{\'PBX Empresa\' | translate}}"><error-messages field="userForm.ubunet_company" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container flex="100"><input \ntype="text" name="ubunet_extension" data-ng-model="vm.user.ubunet_extension" \nplaceholder="{{\'PBX Extension\' | translate}}"><error-messages field="userForm.ubunet_extension" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container flex="100"><input \ntype="text" name="ubunet_agent" data-ng-model="vm.user.ubunet_agent" placeholder="{{\'PBX Agente\' | translate}}">\n<error-messages field="userForm.ubunet_agent" server-errors="vm.serverErrors"></error-messages></md-input-container><p \ndata-translate>Concesionarios a los que pertenece:</p><div ng-repeat="item in vm.user.related_concessionaires" \nng-init="name=\'related_concessionaires___\'+$index+\'___concessionaire\'" layout="row" \nlayout-align="space-between center"><div flex="80"><div><md-autocomplete \nmd-floating-label="{{\'Concesionario\' | translate }}" md-delay="300" md-input-name="{{ name }}" md-no-cache="true" \nmd-min-length="0" flex="100" md-selected-item="item.concessionaire_data" md-search-text="searchTextConcessionaire" \nmd-items="concessionaire in vm.getConcessionaires(searchTextConcessionaire)" md-item-text="concessionaire.name">\n<md-item-template><span md-highlight-text="searchTextConcessionaire">{{concessionaire.name}}</span></md-item-template>\n<md-not-found><span data-translate>No hay ningún concesionario con ese nombre</span></md-not-found></md-autocomplete>\n<md-input-container flex="100" class="no-margin" ng-show="vm.serverErrors"><error-messages field="userForm[name]" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><div layout="row" class="mb-20">\n<md-input-container data-layout="column" flex="50" class="mt-0"><md-checkbox ng-model="item.is_concessionaire_admin" \naria-label="{{\'Es administrador del concesionario\' | translate}}" class="md-align-top-left no-margin" flex><span \ndata-translate>Es administrador del concesionario</span></md-checkbox></md-input-container><md-input-container \ndata-layout="column" flex="50" class="mt-0"><md-checkbox ng-model="item.is_business_manager" \naria-label="{{\'Es gestor del concesionario\' | translate}}" class="md-align-top-left no-margin" flex><span \ndata-translate>Es gestor del concesionario</span></md-checkbox></md-input-container></div></div><div flex="20" \nlayout="row" layout-align="center center"><md-button ng-click="vm.removeConcessionaire($index,userForm, item)" \ndata-debouce-click class="md-fab md-mini md-warn" aria-label="{{\'Borrar\' | translate}}"><md-icon \nmd-font-icon="icon-delete"></md-icon></md-button></div></div><div><md-button ng-click="vm.addConcessionaire()" \nclass="md-accent md-raised" aria-label="{{\'Añadir concesionario\' | translate}}"><span data-translate>\nAñadir concesionario</span></md-button></div><p data-translate>SFA</p><div \nng-repeat="item in vm.user.sfa_configurations" class="bb mb-20" layout="row" layout-align="space-between center"><div \nflex="80" layout="column"><md-input-container ng-init="name=\'sfa_configurations___\'+$index+\'___channel\'"><label \ndata-translate>Canal</label><md-select ng-model="item.channel" name="{{name}}" required><md-option \nng-repeat="channel in vm.channels" ng-value="channel.id">{{channel.name}}</md-option></md-select><error-messages \nfield="userForm[name]" server-errors="vm.serverErrors" required></error-messages></md-input-container>\n<md-input-container ng-init="name=\'sfa_configurations___\'+$index+\'___event\'"><label data-translate>Evento</label>\n<md-select ng-model="item.event" name="{{name}}" required><md-option ng-repeat="event in vm.events" \nng-value="event.id">{{event.name}}</md-option></md-select><error-messages field="userForm[name]" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container><md-input-container \nng-init="name=\'sfa_configurations___\'+$index+\'___text\'"><input type="text" name="{{name}}" data-ng-model="item.text" \nplaceholder="{{\'Comunicado\' | translate}}" required><error-messages field="userForm[name]" \nserver-errors="vm.serverErrors"></error-messages></md-input-container></div><div flex="20" layout="row" \nlayout-align="center center"><md-button ng-click="vm.removeSFA($index,userForm, item)" data-debouce-click \nclass="md-fab md-mini md-warn" aria-label="{{\'Borrar\' | translate}}"><md-icon md-font-icon="icon-delete"></md-icon>\n</md-button></div></div><div><md-button ng-click="vm.addSFA()" class="md-accent md-raised" \naria-label="{{\'Añadir SFA\' | translate}}"><span data-translate>Añadir SFA</span></md-button></div></div>\n</md-dialog-content><md-dialog-actions data-layout="row" data-layout-align="space-between center"><div \ndata-layout="row" data-layout-align="start center"><md-button data-debouce-click type="submit" \ndata-ng-click="vm.saveUser()" class="send-button md-accent md-raised" \ndata-ng-disabled="userForm.$invalid || userForm.$pristine" aria-label="{{\'Guardar\' | translate}}"><span data-translate>\nGuardar</span></md-button></div></md-dialog-actions></form></md-dialog>'),e.put("app/main/users/dialogs/leadByUser/leadByUser-dialog.html",'<md-dialog class="task-dialog" aria-label="New Task" id="leadByUser"><form name="leadByUserForm" \nclass="md-inline-form" novalidate><md-toolbar class="md-accent md-hue-2"><div class="md-toolbar-tools" \ndata-layout="row" data-layout-align="space-between center"><span class="title">{{vm.title}}</span><md-button \nclass="md-icon-button" data-ng-click="vm.closeDialog()"><md-icon md-font-icon="icon-close" aria-label="Close dialog">\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout="column"><md-content><md-tabs \nmd-dynamic-height md-border-bottom><md-tab label="{{ concessionaire.name }}" \nng-repeat="concessionaire in vm.concessionaires"><md-content class="md-padding"><div class="todo-item" layout="row" \nlayout-align="start center" ng-repeat="lead in concessionaire.leads"><div layout="row" layout-align="start center" \nflex><div class="info" flex="auto"><div layout="row"><div><div class="title"><md-icon md-font-icon="icon-car" \nclass="s16"></md-icon>{{lead.vehicle_name}}</div><div class="tags" layout="column" layout-align="start start" \nlayout-wrap><div layout="column" layout-align="start start"><div layout="row" layout-align="start center" class="mb-5" \nng-if="lead.client_name"><md-icon md-font-icon="icon-account" class="s16"></md-icon><div class="tag-label"><span>\n<strong translate>Cliente:</strong> {{lead.client_name}}</span></div></div><div layout="row" \nlayout-align="start center" ng-if="lead.client_phone"><md-icon md-font-icon="icon-phone" class="s16"></md-icon><div \nclass="tag-label"><span><strong translate>Teléfono:</strong> {{lead.client_phone}}</span></div></div></div></div></div>\n</div></div></div></div><div class="mt-20"><md-autocomplete md-floating-label="{{\'Comercial\' | translate }}" \nmd-delay="300" md-input-name="user" md-no-cache="true" required md-selected-item="concessionaire.user_data" \nmd-search-text="searchTextUser" md-items="user in vm.getUsers(searchTextUser,concessionaire.id)" md-min-length="3" \nmd-item-text="vm.getFullUserName(user)"><md-item-template><span md-highlight-text="searchTextUser">\n{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ningun comercial con ese nombre</span></md-not-found></md-autocomplete><md-button data-debouce-click \ndata-ng-click="vm.reasign(concessionaire)" class="send-button md-accent md-raised" \ndata-ng-disabled="!concessionaire.user_data" aria-label="{{\'Reasignar\' | translate}}"><span data-translate>Reasignar\n</span></md-button></div></md-content></md-tab></md-tabs><div data-ng-show="!vm.isFormDisabled()"><p translate>\nYa puede realizar la baja del usuario</p></div></md-content></div></md-dialog-content><md-dialog-actions \ndata-layout="row" data-layout-align="space-between center"><div data-layout="row" data-layout-align="start center">\n<md-button data-debouce-click type="submit" data-ng-click="vm.toggleActive(vm.user)" \nclass="send-button md-accent md-raised" data-ng-disabled="vm.isFormDisabled()" \naria-label="{{\'Dar de baja\' | translate}}"><span data-translate>Dar de baja</span></md-button></div>\n</md-dialog-actions></form></md-dialog>'),e.put("app/main/users/views/list/users.html",'<div id="users" class="page-layout carded fullwidth" data-layout="row"><div class="top-bg md-accent-bg"></div><div \nclass="center" data-layout="column" data-flex><div class="header" layout="row" layout-align="space-between center"><div\n class="white-fg" layout="column" layout-align="start start"><div class="h1" layout="row" layout-align="start center">\n<md-icon md-font-icon="icon-account"></md-icon><span data-translate>Usuarios</span></div><div \nclass="count secondary-text"><span data-translate>Número de usuarios:</span> <span>{{vm.users.count}}</span></div>\n</div><div data-layout="row" data-layout-align="space-between center" data-layout-wrap><div data-layout="row" \ndata-layout-xs="column" data-layout-align="space-between center" data-layout-wrap><label class="search" \ndata-layout="row" data-layout-align="start center" data-flex><span data-hide-xs data-hide-gt-xs data-translate>Buscar\n</span><md-icon md-font-icon="icon-magnify" class="white-text icon search-icon"></md-icon><input class="search-input" \ntype="text" placeholder="{{\'Buscar\' | translate }}" data-ng-model="vm.users.filters.search" data-flex></label><div \nclass="search-autocomplete" data-layout="row" data-layout-align="start center"><md-autocomplete \nmd-floating-label="{{\'Concesión\' | translate }}" md-delay="300" md-input-name="concessionaire" md-no-cache="true" \nng-disabled="vm.isDisabled()" flex="90" md-selected-item="vm.users.filters.concessionaire_data" \nmd-search-text="searchTextConcessionaire" md-items="concessionaire in vm.getConcessionaires(searchTextConcessionaire)" \nmd-min-length="3" md-item-text="concessionaire.name"><md-item-template><span \nmd-highlight-text="searchTextConcessionaire">{{concessionaire.name}}</span></md-item-template><md-not-found><span \ndata-translate>No hay ningún concesionario con ese teléfono</span></md-not-found></md-autocomplete></div><div \nclass="search pt-20 mr-20"><md-select data-ng-model="vm.users.filters.online" \nplaceholder="{{ \'Conexión\' | translate }}"><md-option data-ng-value=""><span data-translate>Indiferente</span>\n</md-option><md-option data-ng-value="true"><span data-translate>Conectados</span></md-option><md-option \ndata-ng-value="false"><span data-translate>Desconectados</span></md-option></md-select></div><div \nclass="search pt-20 mr-20"><md-select data-ng-model="vm.users.filters.is_active" \nplaceholder="{{ \'Estado\' | translate }}"><md-option data-ng-value=""><span data-translate>Indiferente</span>\n</md-option><md-option data-ng-value="true"><span data-translate>Activos</span></md-option><md-option \ndata-ng-value="false"><span data-translate>Dados de baja</span></md-option></md-select></div></div><div \nclass="actions" data-layout="row" data-layout-align="end center" data-ng-if="hasPermission(\'users\',\'POST\')"><md-button \nclass="md-raised" aria-label="{{\'Nuevo concesionario\' | translate}}" data-ng-click="vm.openUserDialog($event)"><md-icon\n md-font-icon="icon-plus-circle-outline"></md-icon><span data-translate>Nuevo usuario</span></md-button></div></div>\n</div><div class="content-card" data-layout="column" data-flex><md-content class="content p-20" flex ms-scroll><div \nlayout="column" layout-align="space-between start"><div class="no-results text-center" ng-if="vm.users.count == 0"><div\n class="message"><md-icon class="message-icon s96" md-font-icon="icon-account"></md-icon><div class="message-text" \ntranslate>Sin usuarios</div></div></div><div class="todo-item" layout="row" layout-align="start center" \ndata-dir-paginate="user in vm.users.data | itemsPerPage: 10 | orderBy:\'order\'" data-total-items="vm.users.count" \ndata-current-page="vm.users.filters.page" ng-class="{\'red-100-bg\':!user.is_active}"><div layout="row" \nlayout-align="start center" flex><div class="info" flex="auto"><div layout="row" data-layout-xs="column" \nlayout-align="space-between center"><div layout="row" layout-align="space-between center"><span \nclass="avatar-wrapper mr-20"><img data-md-menu-align-target class="avatar" src="assets/images/avatars/profile.jpg" \nalt="Imágen de perfil"><md-icon ng-if="user.session.online" md-font-icon ng-style="{\'color\': \'#4CAF50\' }" \nclass="icon icon-checkbox-marked-circle status s16"></md-icon><md-icon ng-if="!user.session.online" md-font-icon \nng-style="{\'color\': \'#F44336\' }" class="icon icon-minus-circle status s16"></md-icon></span><div><div class="mb-5">\n<span class="title">{{user.first_name}} {{user.last_name}}</span> <span class="ml-10"><span \nclass="text-boxed m-0 green-bg white-fg" ng-show="user.is_admin" data-translate>Super Administrador</span> <span \nclass="text-boxed m-0 green-bg white-fg" ng-show="user.is_concession_admin" data-translate>\nAdministrador de concesionario</span> <span class="text-boxed m-0 green-bg white-fg" \nng-show="user.is_business_manager" data-translate>Gestor comercial</span></span></div><div class="tags" layout="row" \nlayout-align="start center" layout-wrap><div class="tag" layout="row" layout-align="start center"><md-icon \nmd-font-icon="icon-email" class="s16"></md-icon><div class="ml-10 tag-label">{{user.email}}</div></div></div><div \nclass="tags" layout="row" layout-align="start center" layout-wrap><div class="tag" layout="row" \nlayout-align="start center" ng-repeat="concessionaire in user.related_concessionaires"><md-icon \nmd-font-icon="icon-car" class="s16"></md-icon><div class="ml-10 tag-label">{{concessionaire.concessionaire_data.name}}\n</div></div></div><div class="mt-10"><span class="text-boxed m-0 green-bg white-fg" ng-if="user.user_activation_date" \ndata-translate>Activado el {{ user.user_activation_date | date:\'dd/MM/yyyy\' }} </span><span \nclass="text-boxed m-0 red-bg white-fg" ng-if="user.user_deactivation_date" data-translate>\nDesactivado el {{ user.user_deactivation_date | date:\'dd/MM/yyyy\' }}</span></div></div></div><div layout="row" \nlayout-align="end center"><md-button data-layout="column" class="md-accent" data-layout-align="start center" \ndata-ng-if="hasPermission(\'users\',\'PATCH\')" data-ng-click="vm.openUserDialog($event, user)"><md-icon class="pt-5" \ntitle="{{\'Editar\' | translate}}" md-font-icon="icon-pencil"></md-icon><span class="pt-5" data-translate>Editar</span>\n</md-button><md-button data-layout="column" class="md-warn" data-layout-align="start center" data-debouce-click \ndata-ng-if="user.is_active && (vm.user.is_concession_admin || vm.user.is_admin)" data-ng-click="vm.toggleActive(user)">\n<md-icon class="pt-5" title="{{\'Dar de baja\' | translate}}" md-font-icon="icon-arrow-down-bold"></md-icon><span \nclass="pt-5" data-translate>Dar de baja</span></md-button><md-button data-layout="column" \ndata-layout-align="start center" data-debouce-click data-ng-if="!user.is_active && vm.user.is_admin" \ndata-ng-click="vm.toggleActive(user)"><md-icon class="pt-5 green-700-fg" title="{{\'Dar de alta\' | translate}}" \nmd-font-icon="icon-arrow-up-bold"></md-icon><span class="pt-5 green-700-fg" data-translate>Dar de alta</span>\n</md-button></div></div></div></div></div><dir-pagination-controls class="bottomFixed"></dir-pagination-controls></div>\n</md-content></div></div></div>'),
e.put("app/main/users/views/detail/user.html",'<div id="user-detail" class="white-bg"><div class="header" \nstyle="background-image: url({{vm.user.header_image || \'assets/images/headers/header.jpg\'}})" layout="row" \nlayout-align="start end"></div><div class="white-bg pt-30 pb-50"><div class="container-krart"><div layout="row" \nlayout-wrap><div flex="33" flex-xs="100" class="pr-40 white-bg negative-mt-130 p-20"><div layout="row" \nlayout-align="start end"><div class="border pb-20 container-image" \nstyle="background-image: url({{vm.user.photo || \'assets/images/avatars/profile.jpg\'}})"></div><div layout="column" \nclass="text-uppercase pl-20"><span class="font-size-16 grey-600-fg font-weight-300">{{ vm.user.first_name }}</span> \n<span class="font-size-12 font-weight-700">{{ vm.user.last_name }}</span><div class="font-size-10 mt-30"><span \nclass="bt border-krart color-krart pt-10 mr-5" ng-repeat="professional_profile in vm.professional_profiles" \nng-if="vm.user.professional_profile===professional_profile.id">{{ professional_profile.name }} </span><span \nclass="grey-600-fg mr-5">/</span> <span class="grey-600-fg">{{ vm.user.country_data.name }}</span></div></div></div>\n<div layout="row" layout-align="space-between center" class="mt-50 border p-20"><span data-translate \nclass="font-size-12 grey-600-fg">Valoración media</span><stars average="vm.user.average_rating"></stars></div><div \nclass="mt-50"><span class="font-size-12 font-weight-700 color-krart text-uppercase mr-5" data-translate>Biografía\n</span> <span class="font-size-12 font-weight-700 color-krart mr-5">/</span> <span \nclass="font-size-14 font-weight-300 grey-600-fg">{{ vm.user.biography }}</span></div><div class="mt-50">\n<intelli-social-share text="vm.user.alias"></intelli-social-share></div></div><div flex="66" flex-xs="100">\n<slider-products page-size="2" profile="vm.user.id"></slider-products><slider-projects page-size="2" \nprofile="vm.user.id"></slider-projects></div></div></div></div></div>'),e.put("app/main/users/views/edit/user.html",'<div id="user-edit" class="page-layout carded left-sidenav" layout="row"><div class="top-bg md-lantia-bg"></div><div \nclass="center" layout="column" flex><div class="header" layout="row" layout-align="space-between center" layout-wrap>\n<div class="white-fg" layout="column" layout-align="start start"><div class="h1 mb-20 pointer" layout="row" \nlayout-align="start center" ng-click="historyBack()"><md-icon md-font-icon="icon-keyboard-backspace"></md-icon><span \ndata-translate>Volver</span></div><div class="h1" layout="row" layout-align="start center"><md-icon \nmd-font-icon="icon-account"></md-icon><span data-translate>Administrar perfil</span></div></div></div><div \nclass="content-card" layout="column" flex><md-content class="content p-20" flex ms-scroll><div layout="row" \nlayout-xs="column" layout-align="space-between start" flex><form name="userForm" novalidate data-layout="row" \ndata-layout-align="center start" class="fullwidth"><div data-layout="row" layout-xs="column" \ndata-layout-align="start start" flex="60" flex-xs="100"><div layout="column" flex="50" flex-xs="100" class="pr-40">\n<md-input-container flex="100" layout="column" class="bb pb-20 w-250"><div class="pb-20 container-image"><img \nng-src="{{vm.user.image}}" alt="Imagen principal" ng-if="vm.user.image"> <img src="assets/images/avatars/profile.jpg" \nalt="Imagen principal" ng-if="!vm.user.image"></div><div flow-init="vm.ngFlowOptions" \nflow-name="vm.formFlow.imageFlow" flow-drop flow-file-error="vm.imageError($file, $message, $flow)" \nflow-file-success="vm.reloadImage($file, $message, $flow)" flow-files-submitted="$flow.upload()" \nflow-drag-enter="vm.dropping=true" flow-drag-leave="vm.dropping=false" ng-class="{\'dropping\':vm.dropping}"><div \nlayout="row" layout-align="space-between center" layout-wrap><md-button flow-btn aria-label="upload imagen" \nclass="md-raised grey-200-bg pl-10 pr-10 pt-5 pb-5 font-weight-700 line-height-16 no-margin"><span \nclass="font-size-10 grey-600-fg" data-translate>Cambiar foto</span></md-button><md-button aria-label="delete imagen" \nng-click="vm.removeImage()" \nclass="md-raised grey-200-bg pl-10 pr-10 pt-5 pb-5 font-weight-700 line-height-16 no-margin"><span \nclass="font-size-10 grey-600-fg" data-translate>Eliminar</span></md-button></div></div></md-input-container>\n<md-input-container><label data-translate>Nombre</label><input name="first_name" data-ng-model="vm.user.first_name" \nrequired><error-messages field="userForm.first_name" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container><md-input-container><label data-translate>Apellidos</label><input name="last_name" \ndata-ng-model="vm.user.last_name" required><error-messages field="userForm.last_name" server-errors="vm.serverErrors" \nrequired></error-messages></md-input-container><md-input-container flex="100"><label data-translate>Email</label><input\n name="email" data-ng-model="vm.user.email" required><error-messages field="userForm.email" \nserver-errors="vm.serverErrors" required></error-messages></md-input-container></div><div layout="column" flex="50" \nflex-xs="100"><div><md-autocomplete md-floating-label="{{\'Escuela\' | translate }}" md-delay="300" \nmd-input-name="school" md-selected-item="vm.user.school_data" md-search-text="searchTextSchool" \nmd-items="school in vm.getSchools(searchTextSchool)" md-min-length="3" md-item-text="school.name"><md-item-template>\n<span md-highlight-text="searchTextSchool">{{school.name}}</span></md-item-template><md-not-found><span data-translate>\nNo hay ninguna escuela con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex="100" \nclass="no-margin"><error-messages field="userForm.school" server-errors="vm.serverErrors" required></error-messages>\n</md-input-container></div><md-input-container><label data-translate>Curso</label><md-select \ndata-ng-model="vm.user.course" name="course"><md-option data-ng-repeat="course in vm.courses.data" \ndata-ng-value="course.id">{{course.name}}</md-option></md-select><error-messages field="userForm.course" \nserver-errors="vm.serverErrors"></error-messages></md-input-container><md-input-container><label data-translate>\nEspecialidad</label><md-select data-ng-model="vm.user.speciality" name="speciality" multiple="multiple"><md-option \ndata-ng-repeat="speciality in vm.specialities.data" data-ng-value="speciality.id">{{speciality.name}}</md-option>\n</md-select><error-messages field="userForm.speciality" server-errors="vm.serverErrors"></error-messages>\n</md-input-container><md-input-container><label data-translate>Sexo</label><md-select data-ng-model="vm.user.sex" \nname="sex"><md-option value="V"><span data-translate>Varón</span></md-option><md-option value="M"><span data-translate>\nMujer</span></md-option></md-select><error-messages field="userForm.sex" server-errors="vm.serverErrors">\n</error-messages></md-input-container><md-input-container class="mt-50"><label class="md-no-float" data-translate>\nFecha en la que comenzó como profesor</label><md-datepicker name="hire_date" data-ng-model="vm.user.hire_date" \nmd-placeholder="dd/mm/yyyy"></md-datepicker><error-messages field="userForm.hire_date" server-errors="vm.serverErrors" \nforcechange></error-messages></md-input-container><md-input-container class="mt-20"><label class="md-no-float" \ndata-translate>Fecha de nacimiento</label><md-datepicker name="born_date" data-ng-model="vm.user.born_date" \nmd-placeholder="dd/mm/yyyy"></md-datepicker><error-messages field="userForm.born_date" server-errors="vm.serverErrors" \nforcechange></error-messages></md-input-container><div layout="row" layout-align="end end" class="fullwidth"><md-button\n ng-click="vm.saveUser(vm.user)" class="send-button md-accent md-raised" data-debouce-click \ndata-ng-if="hasPermission(\'users\',\'PATCH\')" ng-disabled="userForm.$invalid || userForm.$pristine" \naria-label="{{\'Guardar\' | translate}}"><span data-translate>Guardar</span></md-button></div></div></div></form></div>\n</md-content></div></div></div>'),e.put("app/core/directives/ms-card/templates/template-2/template-2.html",'<div class="template-2"><div class="header p-16" layout="row" layout-align="start center"><div ng-if="card.avatar"><img\n class="avatar mr-16" ng-src="{{card.avatar.src}}" alt="{{card.avatar.alt}}"></div><div class="info"><div \nclass="title" ng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">\n{{card.subtitle}}</div></div></div><div class="media"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div><div class="text p-16" ng-if="card.text">{{card.text}}\n</div></div>'),e.put("app/core/directives/ms-card/templates/template-1/template-1.html",'<div class="template-1"><div class="media"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div><div class="content pv-24 ph-16"><div class="title h1" \nng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">{{card.subtitle}}\n</div><div class="text pt-16" ng-if="card.text">{{card.text}}</div></div></div>'),e.put("app/core/directives/ms-card/templates/template-10/template-10.html",'<div class="template-10 p-16"><div class="pb-16" layout="row" layout-align="space-between center"><div class="info">\n<div class="title secondary-text" ng-if="card.title">{{card.title}}</div><div class="subtitle h2" \nng-if="card.subtitle">{{card.subtitle}}</div></div><div class="media ml-16"><img class="image" \nng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div><div \nclass="text">{{card.text}}</div></div>'),e.put("app/core/directives/ms-card/templates/template-3/template-3.html",'<div class="template-3 p-16 teal-bg white-fg" layout="row" layout-align="space-between"><div layout="column" \nlayout-align="space-between"><div class="info"><div class="title h1" ng-if="card.title">{{card.title}}</div><div \nclass="subtitle h3 secondary-text" ng-if="card.subtitle">{{card.subtitle}}</div></div><div class="cta"><md-button \nclass="m-0">{{card.cta}}</md-button></div></div><div class="media pl-16"><img class="image" \nng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-4/template-4.html",'<div class="template-4"><div class="info white-fg ph-16 pv-24"><div class="title h1" ng-if="card.title">{{card.title}}\n</div><div class="text" ng-if="card.text">{{card.text}}</div></div><div class="media"><img class="image" \nng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-5/template-5.html",'<div class="template-5 p-16" layout="row" layout-align="space-between start"><div class="info"><div \nclass="title secondary-text" ng-if="card.title">{{card.title}}</div><div class="event h2" ng-if="card.event">\n{{card.event}}</div></div><div class="media ml-16"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-7/template-7.html",'<div class="template-7" layout="row" layout-align="space-between"><div class="info" layout="column" \nlayout-align="space-between" layout-fill flex><div class="p-16"><div class="title h1" ng-if="card.title">{{card.title}}\n</div><div class="subtitle h4 secondary-text" ng-if="card.subtitle">{{card.subtitle}}</div><div class="text h4 pt-8" \nng-if="card.text">{{card.text}}</div></div><div><md-divider></md-divider><div class="p-8" layout="row"><md-icon \nmd-font-icon="icon-star-outline" class="mh-5"></md-icon><md-icon md-font-icon="icon-star-outline" class="mh-5">\n</md-icon><md-icon md-font-icon="icon-star-outline" class="mh-5"></md-icon><md-icon md-font-icon="icon-star-outline" \nclass="mh-5"></md-icon><md-icon md-font-icon="icon-star-outline" class="mh-5"></md-icon></div></div></div><div \nclass="media"><img class="image" ng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" \nng-show="card.media.image"></div></div>'),e.put("app/core/directives/ms-card/templates/template-6/template-6.html",'<div class="template-6"><div class="content pv-24 ph-16"><div class="subtitle secondary-text" ng-if="card.subtitle">\n{{card.subtitle}}</div><div class="title h2" ng-if="card.title">{{card.title}}</div><div class="text pt-8" \nng-if="card.text">{{card.text}}</div></div></div>'),e.put("app/core/directives/ms-card/templates/template-8/template-8.html",'<div class="template-8"><div class="media"><img class="image" ng-src="{{card.media.image.src}}" \nalt="{{card.media.image.alt}}" ng-show="card.media.image"></div><div class="content pv-24 ph-16"><div class="title h1" \nng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">{{card.subtitle}}\n</div><div class="buttons pt-16"><md-button class="m-0">{{card.button1}}</md-button><md-button class="m-0 md-accent">\n{{card.button2}}</md-button></div><div class="text pt-16" ng-if="card.text">{{card.text}}</div></div></div>'),e.put("app/core/directives/ms-card/templates/template-9/template-9.html",'<div class="template-9"><div class="header p-16" layout="row" layout-align="start center"><div ng-if="card.avatar"><img\n class="avatar mr-16" ng-src="{{card.avatar.src}}" alt="{{card.avatar.alt}}"></div><div class="info"><div \nclass="title" ng-if="card.title">{{card.title}}</div><div class="subtitle secondary-text" ng-if="card.subtitle">\n{{card.subtitle}}</div></div></div><div class="text ph-16 pb-16" ng-if="card.text">{{card.text}}</div><div \nclass="media"><img class="image" ng-src="{{card.media.image.src}}" alt="{{card.media.image.alt}}" \nng-show="card.media.image"></div><div class="buttons m-8"><md-button class="md-icon-button mr-16" \naria-label="Favorite"><md-icon md-font-icon="icon-heart-outline" class="s24"></md-icon></md-button><md-button \nclass="md-icon-button" aria-label="Share"><md-icon md-font-icon="icon-share" class="s24"></md-icon></md-button></div>\n</div>'),e.put("app/core/directives/ms-stepper/templates/vertical/vertical.html",'<div class="ms-stepper-vertical"><div class="ms-stepper-vertical-line"></div><div class="ms-stepper-steps" \nng-transclude></div></div>'),e.put("app/core/directives/ms-stepper/templates/horizontal/horizontal.html",'<div class="ms-stepper-horizontal"><div class="ms-stepper-navigation-wrapper"><div class="ms-stepper-navigation" \nlayout="row" layout-align="center center"><md-button class="ms-stepper-navigation-item" \nng-class="{\'current\': MsStepper.isStepCurrent(step.stepNumber), \'valid\': MsStepper.isStepValid(step.stepNumber), \'disabled\': MsStepper.isStepDisabled(step.stepNumber), \'optional\': MsStepper.isStepOptional(step.stepNumber)}" \nng-click="MsStepper.gotoStep(step.stepNumber)" ng-disabled="MsStepper.isStepDisabled(step.stepNumber)" \nng-repeat="step in MsStepper.steps | filter:MsStepper.filterHiddenStep" layout="row" layout-align="start center"><div \nclass="step md-accent-bg" layout="row" layout-align="center center"><span \nng-if="!MsStepper.isStepValid(step.stepNumber) || MsStepper.isStepOptional(step.stepNumber)">{{$index + 1}} </span>\n<span ng-if="MsStepper.isStepValid(step.stepNumber) && !MsStepper.isStepOptional(step.stepNumber)"><i \nclass="icon icon-check s18"></i></span></div><div layout="column" layout-align="start start"><div class="title">\n{{step.stepTitle}}</div><div class="subtitle" ng-if="MsStepper.isStepOptional(step.stepNumber)">Optional</div></div>\n</md-button></div></div><div class="ms-stepper-steps" ng-transclude></div><div class="ms-stepper-controls" \nlayout="row" layout-align="center center"><md-button class="md-accent md-raised" ng-disabled="MsStepper.isFirstStep()" \nng-click="MsStepper.gotoPreviousStep()">Back</md-button><div class="ms-stepper-dots"><span \nng-repeat="step in MsStepper.steps" ng-hide="MsStepper.isStepHidden(step.stepNumber)" \nng-class="{\'selected md-accent-bg\':MsStepper.currentStepNumber === $index + 1}"></span></div><md-button \nclass="md-accent md-raised" ng-if="!MsStepper.isLastStep()" \nng-disabled="!MsStepper.isStepValid(MsStepper.currentStepNumber)" ng-click="MsStepper.gotoNextStep()">Next</md-button>\n<md-button type="submit" class="md-accent md-raised" ng-click="MsStepper.resetForm()" ng-if="MsStepper.isLastStep()" \nng-disabled="!MsStepper.isFormValid()">Submit</md-button></div></div>'),e.put("app/main/leads/views/edit/click2call/timeline-right.html",'<div id="timeline-incoming" class="timeline-right" flex="50" flex-xs="100"><div layout-align="center center" \nlayout="row" layout-align-gt-md="center start" class="ms-timeline-item" ng-repeat="call in vm.leadsIncomingCalls.data">\n<div class="timeline-point md-accent-bg md-whiteframe-2dp"><md-icon md-font-icon="icon-phone-incoming"></md-icon></div>\n<div class="timeline-detail" flex="50"><div class="time" ng-if="call.startcall">\n{{call.startcall | date:\'dd/MM/yyyy HH:mm\'}}</div><div class="time" ng-if="call.durationcallanswered"><md-icon \nmd-font-icon="icon-timer"></md-icon>{{call.durationcallanswered}}</div></div><div class="timeline-card" layout="row" \nflex="50"></div></div></div><div id="timeline-outgoing" class="timeline-right" flex="50" flex-xs="100"><div \nlayout-align="center center" layout="row" layout-align-gt-md="center start" class="ms-timeline-item" \nng-repeat="call in vm.leadsOutgoingCalls.data"><div class="timeline-point md-accent-bg md-whiteframe-2dp"><md-icon \nmd-font-icon="icon-phone-outgoing"></md-icon></div><div class="timeline-detail" flex="50"><div class="time" \nng-if="call.startcall">{{call.startcall | date:\'dd/MM/yyyy HH:mm\'}}</div><div class="time" \nng-if="call.durationcallanswered"><md-icon md-font-icon="icon-timer"></md-icon>{{call.durationcallanswered}}</div>\n</div><div class="timeline-card" layout="row" flex="50"></div></div></div>'),e.put("app/main/leads/views/edit/activity/activity-by-date.html",'<div layout="column" layout-align="space-between start" class="mb-20 md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-calendar" class="black-fg no-margin"></md-icon><span>\n{{activity.title}}</span></h2></div></md-toolbar><md-content flex layout-padding data-layout-xs="column" \ndata-layout="row" data-layout-align="space-between center" layout-wrap class="fullwidth"><div \nclass="no-results text-center" ng-if="vm.objectSize(vm.leadsActivity[activity.key]) == 0"><div class="message"><md-icon\n class="message-icon s96" md-font-icon="icon-history"></md-icon><div class="message-text" translate>Sin resultados\n</div></div></div><div class="todo-item" layout="row" layout-align="start center" \nng-repeat="activity in vm.leadsActivity[activity.key]"><div layout="row" layout-align="start center" flex><div \nclass="info" flex="auto"><div layout="row" data-layout-xs="column" layout-align="space-between center"><div \nlayout="row" layout-align="space-between center"><div><div class="mb-5"><span class="title">\n{{activity.activity_user.username}}</span></div><div class="tags" layout="row" layout-align="start center" layout-wrap>\n<div class="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-format-list-numbers" class="s16">\n</md-icon><div class="ml-10 tag-label"><span translate>Nº de actividades:</span> {{activity.count}}</div></div><div \nclass="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-calendar" class="s16"></md-icon><div \nclass="ml-10 tag-label"><span translate>Comienzo:</span> {{activity.activity_date_start | date:\'dd/MM/yyyy\'}}</div>\n</div><div class="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-calendar" class="s16">\n</md-icon><div class="ml-10 tag-label"><span translate>Fin:</span> {{activity.activity_date_end | date:\'dd/MM/yyyy\'}}\n</div></div></div></div></div><div layout="row" layout-align="end center"><md-button data-layout="column" \nclass="md-accent" data-layout-align="start center" data-ng-click="vm.openLeadActivityDialog($event, activity)"><md-icon\n class="pt-5" title="{{\'Consultar\' | translate}}" md-font-icon="icon-eye"></md-icon><span class="pt-5" data-translate>\nConsultar</span></md-button></div></div></div></div></div></md-content></div>'),e.put("app/main/leads/views/edit/activity/timeline-right.html",'<div layout="column" layout-align="space-between start"><div ng-repeat="activity in vm.activities" class="fullwidth">\n<div class="fullwidth" ng-include="\'app/main/leads/views/edit/activity/activity-by-date.html\'"></div></div></div>'),e.put("app/main/leads/views/edit/history/history-by-date.html",'<div layout="column" layout-align="space-between start" class="mb-20 md-whiteframe-z1"><md-toolbar \nclass="md-grey-300-bg black-fg"><div class="md-toolbar-tools" layout="row" layout-align="space-between center"><h2 \nclass="md-flex text-uppercase"><md-icon md-font-icon="icon-calendar" class="black-fg no-margin"></md-icon><span>\n{{activity.title}}</span></h2></div></md-toolbar><md-content flex layout-padding data-layout-xs="column" \ndata-layout="row" data-layout-align="space-between center" layout-wrap class="fullwidth"><div \nclass="no-results text-center" ng-if="vm.objectSize(vm.leadsHistory[activity.key]) == 0"><div class="message"><md-icon \nclass="message-icon s96" md-font-icon="icon-history"></md-icon><div class="message-text" translate>Sin resultados</div>\n</div></div><div class="todo-item" layout="row" layout-align="start center" \nng-repeat="history in vm.leadsHistory[activity.key]"><div layout="row" layout-align="start center" flex><div \nclass="info" flex="auto"><div layout="row" data-layout-xs="column" layout-align="space-between center"><div \nlayout="row" layout-align="space-between center"><div><div class="mb-5"><span class="title">{{history.history_user}}\n</span></div><div class="tags" layout="row" layout-align="start center" layout-wrap><div class="tag" layout="row" \nlayout-align="start center"><md-icon md-font-icon="icon-format-list-numbers" class="s16"></md-icon><div \nclass="ml-10 tag-label"><span translate>Nº de actividades:</span> {{history.count}}</div></div><div class="tag" \nlayout="row" layout-align="start center"><md-icon md-font-icon="icon-calendar" class="s16"></md-icon><div \nclass="ml-10 tag-label"><span translate>Comienzo:</span> {{history.history_date_start | date:\'dd/MM/yyyy\'}}</div></div>\n<div class="tag" layout="row" layout-align="start center"><md-icon md-font-icon="icon-calendar" class="s16"></md-icon>\n<div class="ml-10 tag-label"><span translate>Fin:</span> {{history.history_date_end | date:\'dd/MM/yyyy\'}}</div></div>\n</div></div></div><div layout="row" layout-align="end center"><md-button data-layout="column" class="md-accent" \ndata-layout-align="start center" data-ng-click="vm.openLeadHistoryDialog($event, history)"><md-icon class="pt-5" \ntitle="{{\'Consultar\' | translate}}" md-font-icon="icon-eye"></md-icon><span class="pt-5" data-translate>Consultar\n</span></md-button></div></div></div></div></div></md-content></div>'),e.put("app/main/leads/views/edit/history/timeline-right.html",'<div layout="column" layout-align="space-between start"><div ng-repeat="activity in vm.activities" class="fullwidth">\n<div class="fullwidth" ng-include="\'app/main/leads/views/edit/history/history-by-date.html\'"></div></div></div>'),e.put("app/core/directives/ms-stepper/templates/vertical/step/vertical-step.html",'<md-button class="ms-stepper-navigation-item" \nng-class="{\'current\': MsStepper.isStepCurrent(stepInfo.stepNumber), \'valid\': MsStepper.isStepValid(stepInfo.stepNumber), \'disabled\': MsStepper.isStepDisabled(stepInfo.stepNumber), \'optional\': MsStepper.isStepOptional(stepInfo.stepNumber)}" \nng-click="MsStepper.gotoStep(stepInfo.stepNumber)" ng-disabled="MsStepper.isStepDisabled(stepInfo.stepNumber)" \nng-hide="MsStepper.isStepHidden(stepInfo.stepNumber)" aria-label="Stepper navigation button" layout="row" \nlayout-align="start center"><div class="step" layout="row" layout-align="center center"><span \nng-if="!MsStepper.isStepValid(stepInfo.stepNumber) || MsStepper.isStepOptional(stepInfo.stepNumber)"><i \nclass="icon icon-checkbox-blank-circle-outline s18 md-accent-fg"></i> </span><span \nng-if="MsStepper.isStepValid(stepInfo.stepNumber) && !MsStepper.isStepOptional(stepInfo.stepNumber)"><i \nclass="icon icon-check-circle s18 md-accent-fg"></i></span></div><div layout="column" layout-align="start start"><div \nclass="title" ng-if="stepInfo.stepTitleTranslate">{{stepInfo.stepTitleTranslate | translate }}</div><div class="title" \nng-if="!stepInfo.stepTitleTranslate">{{stepInfo.stepTitle}}</div><div class="subtitle" \nng-if="MsStepper.isStepOptional(stepInfo.stepNumber)">Optional</div></div></md-button><div \nclass="ms-stepper-step-content" ng-transclude></div><div class="ms-stepper-controls" layout="row" \nlayout-align="start center" ng-show="MsStepper.isStepCurrent(stepInfo.stepNumber)"><md-button \nclass="md-accent md-raised" ng-disabled="MsStepper.isFirstStep()" ng-click="MsStepper.gotoPreviousStep()">Back\n</md-button><md-button class="md-accent md-raised" ng-if="!MsStepper.isLastStep()" \nng-disabled="!MsStepper.isStepValid(MsStepper.currentStepNumber)" ng-click="MsStepper.gotoNextStep()">Next</md-button>\n<md-button type="submit" class="md-accent md-raised" ng-click="MsStepper.resetForm()" ng-if="MsStepper.isLastStep()" \nng-disabled="!MsStepper.isFormValid()">Submit</md-button></div>')}]);
//# sourceMappingURL=../maps/scripts/app-8fb60af99a.js.map
