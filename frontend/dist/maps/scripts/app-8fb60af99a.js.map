{"version":3,"sources":["scripts/app.js"],"names":["config","$stateProvider","$inject","angular","module","TaskDialogController","$mdDialog","Task","Request","Lead","Tracing","tasksService","NotifyService","taskTypesService","usersService","originsCarService","GasTypes","$q","gettextCatalog","init","getTaskTypes","then","res","vm","taskTypes","task","date","Date","moment","format","planified_realization_date","realization_date","planified_tracking_date","tracking_date","saveTask","setHours","datetime","getHours","getMinutes","id","copy","successMessage","getString","closeDialog","push","error","serverErrors","data","errorMessage","non_field_errors","i","tasks","count","addTaskNote","note","content","essential","modified","deleteTaskNote","length","splice","hide","this","title","origins","gasTypes","now","getEmptyTask","controller","state","abstract","url","resolve","currentUser","AuthService","getCurrentUser","response","views","content@app","templateUrl","Concessionaire","concessionairesService","$stateParams","concessionaire","getConcessionaire","Users","$rootScope","users","filters","online","is_active","concessionaire_data","getUsers","bodyClass","User","getUser","user","Schools","schoolsService","schools","page_size","getSchools","Courses","coursesService","courses","getCourses","Specialities","specialitiesService","specialities","getSpecialities","UsersController","$scope","DebounceService","leadsService","$document","openUserDialog","ev","show","controllerAs","parent","element","body","targetEvent","clickOutsideToClose","locals","event","removeUser","confirm","name","textContent","ariaLabel","document","ok","cancel","detail","getConcessionaires","searchText","deferred","defer","getAllConcessionaires","concessionaires","promise","toggleActive","is_concession_admin","related_concessionaires","sw","existConcessionaire","getLeadsByUser","obj","saveUser","openLeadByUserDialog","j","$watch","checkStatus","Sfas","sfa_configurations","SfasController","openSfaDialog","sfas","removeSfa","$index","sfa","removeSFA","channels","events","UserController","professionalProfilesService","professional_profiles","professionalProfiles","AvailableDialogController","saveAvailable","form","is_available","reasons","UserEditController","$state","api","hire_date","toDate","born_date","go","image","removeImage","imageError","$file","$message","$flow","JSON","parse","msg","reloadImage","file","flow","ngFlowOptions","target","URLs","replace","uploadMethod","fileParameterName","SfaDialogController","channelsService","item","$setDirty","msApiProvider","Origins","originsService","getOrigins","OriginDialogController","Origin","Channels","$timeout","saveOrigin","origin","readURL","input","files","reader","FileReader","onload","e","icon","result","$$phase","$digest","readAsDataURL","openFiles","$","click","getEmptyOrigin","change","UserDialogController","addConcessionaire","removeConcessionaire","addSFA","start_date","end_date","getEmptyUser","LeadByUserDialogController","c","leads","concession_id","concession_name","user_data","getAllUsersConcessionaire","getFullUserName","first_name","last_name","reasign","setLeadsByUser","isFormDisabled","Leads","created_start_date","user_id__in","getLeads","Kpis","eventsService","kpis","getKpis","Today","d","PageSize","LeadsNews","leadsNews","page","ordering","with_concession","getLeadsNews","LeadsAttended","leadsAttended","getLeadsAttended","LeadsCommercialManagements","leadsCommercialManagements","getLeadsCommercialManagements","LeadsTracings","leadsTracings","getLeadsTracings","LeadsEnds","leadsEnds","getLeadsEnds","Actions","leadActionsService","getLeadActionsColumn","lead","getLead","getEmptyLead","Tasks","request","gasTypesService","getGasTypes","client","client__phone__icontains","phone","client__email__icontains","email","id_excluded","Source","sourcesService","source","getSource","LeadsIncomingCalls","getLeadsIncomingCalls","LeadsOutgoingCalls","getLeadsOutgoingCalls","LeadsHistory","getLeadsHistory","LeadsActivity","getLeadsActivity","StartCall","LeadsController","leadStatusService","$mdSidenav","vehiclesService","mediaTypesService","cacheFactory","leadResultsService","parseISOString","s","b","split","UTC","goLead","href","window","open","toggleKpi","kpi","k","active","kpi_filter","filter_key","changeOrder","field","toggleSidenav","sidenavId","toggle","changeFilter","key","value","minDateFilter","maxDateFilter","date_end","minDate","subtract","date_start","maxDate","add","setScore","score","get","excludeArr","search","is_complex","put","concessionaire__in_data","origin_data","getAllOrigins","getChannels","channel_data","getAllChannels","getTaskMedia","t","tasks_media_data","getBrands","brands","brand_data","tracing","tasks_tracing_data","tasks_type_data","getBooleans","getRequestTypes","getStatusLead","status","status_data","setFilters","map","toString","f","created_end_date","result_reason","status__in","concessionaire__in","source__origin_id__in","source__channel_id__in","tasks__media__in","vehicles__brand_model__in","vehicles__model__icontains","model","vehicles__version__icontains","version","tasks__type__in","overdue","tasks__planified_realization_date__lt","tasks__planified_realization_date__gt","tasks__realization_date_check","tasks__tracking_date_check","copySearch","a","arr1","arr2","getDocument","downloadFile","type","blob","Blob","navigator","msSaveOrOpenBlob","link","createElement","URL","createObjectURL","download","appendChild","removeChild","results","newLeadResults","resultReasons","Object","assign","leadStatus","BoardViewController","$window","msUtils","scoresService","hasClass","calculateListContentHeight","onresize","getKeyActivity","current_lead_status","last_task","leadsActivityCommercialManagement","leadsActivityTracing","activity","today","yesterday","validate_fechaMayorQue","fechaInicial","fechaFinal","valuesStart","valuesEnd","dateStart","dateEnd","showMore","boardEl","boardElHeight","height","find","each","index","el","listWrapperEl","listHeaderElHeight","listFooterElHeight","maxHeight","css","max-height","toggleInArray","collection","idx","indexOf","board","lists","hasFilterAdvance","new","attended","commercial_management","end","mediaTypes","leadResults","leadResultsErrors","showColumn","tabs","dataFuture","dataToday","dataYesterday","dataOthers","activities","LeadEditController","provincesService","localitiesService","temperaturesService","phonesService","qualificationsService","clientsService","emailsService","acdsService","click2callsService","appraisalsService","$sce","getKeyHistory","leadsHistory","history_user","history_date_start","history_date","history_date_end","leadsActivity","activity_date_start","activity_date_end","activity_user","reloadOrigins","call","source__concession","reloadLead","history","objectSize","size","hasOwnProperty","canEdit","is_admin","isDisabled","source_data_prov","source_data","vehicles","selectOrigin","brand_model","brand_model_data","model_data","model_name","version_data","version_name","appraisals","brand","ad_link","iframeAdLink","circulation_date","buy_date","registration_date","last_mechanic_date","openSaveLeadDialog","leadAction","undefined","saveLead","leadForm","$setPristine","lead_status_planing","saveLeadAction","redirect","err","channel","reject","origin2_data","origin2","channel2_data","channel2","acd","call_control","saveAcd","loadingProgress","console","log","changeStatus","oldStatus","status_dates","status_new_datetime","status_pending_datetime","status_attended_datetime","status_tracing_datetime","status_end_datetime","finishLead","pending_tasks","openFinishLeadBox","saveAndfinishLead","isOpenFinishLeadBox","addNote","deleteNote","addTag","tags","deleteTag","tag","openTaskDialog","removeTask","createFilterFor","query","lowercaseQuery","getCleanedString","q","includes","getProvinces","provinces","filter","getLocalities","province","province_data","localities","getModels","models","getVersions","versions","getFullNameVersion","motor","engine_power","changeVehicleVersion","vehicle","power","gas","gas_type_data","sendWhatsapp","getSectors","sectors","getBusinessActivity","sector","completeAddress","getLocalitiesByCodPostal","postal_code","location_data","related_concessionaire","originsIds","Array","from","Set","sources","channelsIds","available_channels_data","changeChannel","sourcesIds","getExposicion","slug","getSources","getFullNamceSource","spaces","concession_data__name","concession_data","getClients","clients","cadena","toLowerCase","openLeadDialog","cur_user_can_assign","userconcession__concessionaire__id","is_superuser","is_staff","getAllUsers","openLeadStatusDialog","openLeadStatusDateDialog","Field","openLeadContactDialog","LeadContacts","contact_history","getLastRealizationDate","newDate","datediff","first","second","Math","ceil","eventClientBlur","eventClientEmailBlur","setExtension","openDuplicateLeadsDialog","alert","multiple","saveClick2call","leadsOutgoingCalls","finishLeadAfterCall","openLeadHistoryDialog","histories","LeadHistories","openLeadActivityDialog","LeadActivities","addVehicle","addAppraisal","deleteVehicle","removeVehicle","deleteAppraisal","appraisal","removeAppraisal","changeSource","media","concession","channelOptions","getNumber","num","realization_date_check","reactivate","reactivateLead","sendMail","trustSrc","src","trustAsResourceUrl","hubspot","clientTypes","getEmptyLeadAction","leadsIncomingCalls","temperatures","qualifications","scores","concat","vehicleTypes","comercialCategories","requestTypes","gearShifts","week","monday","tuesday","wednesday","thursday","friday","saturday","sunday","$on","toState","toParams","fromState","fromParams","$dirty","preventDefault","n","o","LeadController","SendWhatsappDialogController","message","whatsappMsg","encodeURIComponent","startManageTemplates","templates","whatsapp_templates","alias","text","manageTemplates","sendWhatsappTemplates","newTemplates","updateTemplate","templateSelected","replaceAll","v","price","newAlias","newText","SaveLeadDialogController","saveSaveLead","saveKO","openFinishLeadDialog","setDate","days","getFullYear","getMonth","getDate","LeadStatusDateDialogController","saveLeadStatus","LeadStatusDialogController","LeadHistoryDialogController","leadHistories","LeadActivityDialogController","leadActivities","activityStatus","LeadContactDialogController","leadContacts","ExportLeadDialogController","Concessionaires","exportLead","startOf","DuplicateLeadsDialogController","DuplicateLeads","goToLead","duplicateLeads","LeadDialogController","FinishLeadDialogController","actionError","saveLeadError","buttonErros","getConcessionairesConfig","ConcessionaireDialogController","saveConcessionaire","work_calendar","addSource","removeSource","getEmptyConcessionaire","ConcessionaireCalendarDialogController","start_hour","end_hour","working_day","ConcessionaireNotesDialogController","notes_data","ChannelDialogController","Channel","saveChannel","getEmptyChannel","Acds","acds","getAcds","AcdDialogController","Acd","main@","content@app.auth.login","content@app.auth.register","setBaseUrl","register","LoginController","login","username","password","loginSelected","action","RegisterController","getOK","service","getKO","getAllAdmins","admins","createOK","updateOK","update","create","userRemoveOK","removeKO","remove","factory","getTasks","getAllTasks","getTask","is_traking_task","taskRemoveOK","$http","getOrigin","phone_set","email_set","removeOrigin","originRemoveOK","Metrics","metricsService","metrics","Benchmark","benchmark","Servicelevel","servicelevel","VoiceService","voiceservice","DigitalService","digitalservice","getMetrics","loading","all","getBenchmark","getServicelevel","getVoiceService","getDigitalService","processDataBenchmark","useful","funnel","lead_util","lead_recibido","ganados","lead_util_percentage","toFixed","ganados_percentage","total_origins","abiertos","descartados","total_users","forEach","abiertos_percentage","total","descartados_percentage","u","processDataServicelevel","number","percentage","join","tasks__is_traking_task","without_pending_tasks","toISOString","tasks__realization_date__isnull","without_pending_trackings","processDataVoiceService","voiceService","llamadas","labels","llamada","hour","atendidas","no_atendidas","no_atendidos","con_llamadas_percentage","con_llamadas","totales","sin_llamadas_percentage","sin_llamadas","asa","tiempo","secondsToString","menos_una_hora_percentage","menos_una_hora","processDataDigitalService","digitalService","con_telefono","seconds","floor","minute","country","codPostal","countriesService","getCountries","countries","Dashboards","dashboardService","dashboards","getDashboards","getDashboard","vehicleRemoveOK","brand__id","vehicle_model__id","leadsByUser","queryAll","getAllLeads","location","business_activity_data","business_activity","sector_data","leadsStatus","leadsHubspot","clone","removeLead","leadRemoveOK","leadActions","leadsReactivate","leadsMail","baseUrl","responseType","timeout","importLeads","file_data","$fileUploader","prop","formData","FormData","append","post","transformRequest","identity","headers","Content-Type","getLeadActions","getAllLeadActions","leadActionsColumn","getLeadAction","last_lead_action","removeLeadAction","leadActionRemoveOK","appraisalRemoveOK","phones","emails","concessionaireRemoveOK","removeOK","params","method","getChannel","removeChannel","channelRemoveOK","phone__icontains","whatsapp","businessActivity","sector__id","socketAcds","callback","addSocket","mask_c2c","socket","ReconnectingWebSocket","wsAcds","onopen","onmessage","readyState","WebSocket","OPEN","sockets","getAllAcds","getAcd","getEmptyAcd","removeAcd","acdRemoveOK","getAudio","getStatusCall","color","getOriginsCall","KpisPositive","kpisPositive","localStorageService","getUrl","calendar","getEvents","beforeSend","urlParams","URLSearchParams","start","str","setRequestHeader","reloadKpis","getKpisPositive","reloadKpisPositive","authSettings","msApi","profiles","profile","type_user","profile_type","loggedIn","token","changeProfile","set","ON_LOGIN_BROADCAST","$broadcast","reload","noevent","logout","ON_LOGOUT_BROADCAST","passwordResetRequest","passwordResetConfirm","passwordChange","oldPassword","newPassword","newPasswordRepeat","current_password","password_repeat","toggleOnline","session","forced_online_status","sessionStatus","resetRequest","resetConfirm","interceptor","$provide","$httpProvider","AuthServiceProvider","Authorization","ImpersonateAuthorization","languageSelected","when","responseError","rejection","ON_UNAUTHORIZED_REQUEST","$get","interceptors","constant","LOGIN_STATE","LOGIN_STATE_SUCCESS","getAllSources","saveSource","getEmptySource","sourceRemoveOK","getPhones","getAllPhones","getPhone","savePhone","getEmptyPhone","removePhone","phoneRemoveOK","getAllGasTypes","getGasType","saveGasType","gasType","getEmptyGasType","removeGasType","gasTypeRemoveOK","positive","negative","getEmails","getAllEmails","getEmail","saveEmail","getEmptyEmail","removeEmail","emailRemoveOK","getClick2calls","click2calls","getAllClick2calls","getClick2call","click2call","getEmptyClick2call","removeClick2call","click2callRemoveOK","MsWidgetController","$element","flip","isFlippable","flipped","toggleClass","isDefined","flippable","msWidgetDirective","restrict","scope","transclude","compile","tElement","addClass","iElement","iAttrs","MsWidgetCtrl","transcludeFn","empty","msWidgetFrontDirective","require","flipWidget","msWidgetBackDirective","directive","MsTimelineController","setScrollEl","scrollEl","getScrollEl","msTimelineDirective","msTimeline","loadMore","MsTimelineCtrl","onScroll","scrollTop","threshold","loadMoreEl","position","top","unregisterOnScroll","removeClass","registerOnScroll","on","off","extend","msTimelineItemDirective","args","cardEl","testForImage","itemLoaded","testForVisibility","imgEl","itemInViewport","itemReadyWatcher","current","old","equals","MsStepperController","setOrientation","orientation","registerMainForm","mainForm","registerStep","step","stepNumber","steps","stepTitle","stepTitleTranslate","sort","setupSteps","setCurrentStep","currentStepNumber","resetForm","x","$setUntouched","gotoFirstStep","isStepNumberValid","gotoStep","isStepHidden","gotoPreviousStep","gotoNextStep","gotoLastStep","isFirstStep","isLastStep","isStepCurrent","isStepDisabled","disabled","isStepValid","isStepOptional","optionalStep","hideStep","filterHiddenStep","$valid","isUndefined","isFormValid","currentStep","msHorizontalStepperDirective","priority","bindToController","ctrls","FormCtrl","MsStepperCtrl","msHorizontalStepperStepDirective","msVerticalStepperDirective","msVerticalStepperStepDirective","stepInfo","MsStepper","msSplashScreenDirective","$animate","splashScreenRemoveEvent","leave","MsShortcutsController","$cookies","msNavigationService","loadShortcuts","shortcuts","resultsLoading","populateResults","flatNavigation","getFlatNavigation","uisref","lowercase","hasShortcut","y","_id","selectedResultIndex","fromJson","weight","children","_path","toJson","saveShortcuts","success","addShortcut","removeShortcut","handleResultClick","absorbEvent","handleKeydown","keyCode","keys","ensureSelectedResultIsVisible","handleMouseenter","ignoreMouseEvents","temporarilyIgnoreMouseEvents","mouseEventIgnoreTimeout","resultsEl","selectedItemEl","bottom","outerHeight","toggleMobileBar","mobileBarActive","queryOptions","debounce","sortableOptions","ghostClass","forceFallback","fallbackClass","onSort","msShortcutsDirective","msSidenavHelperDirective","MdSidenavCtrl","isOpen","isLockedOpen","MsSearchBarController","collapsed","onSearchEvaluated","$parent","$eval","onSearch","isArray","isPromise","isNull","expand","onExpand","isFunction","collapse","onCollapse","onResultClick","msSearchBarDirective","inputEl","bodyEl","focus","msScrollConfigProvider","configuration","defaultConfiguration","wheelSpeed","wheelPropagation","swipePropagation","minScrollbarLength","maxScrollbarLength","useBothWheelAxes","useKeyboard","suppressScrollX","suppressScrollY","scrollXMarginOffset","scrollYMarginOffset","stopPropagationOnClick","getConfig","msScrollDirective","msScrollConfig","fuseConfig","isMobile","updateScrollbar","PerfectScrollbar","options","msScroll","initialize","destroy","provider","msResponsiveTableDirective","wrapper","after","msRandomClassDirective","msRandomClass","randomClass","random","msNavigationServiceProvider","saveItem","path","isString","$log","parts","_findOrCreateParent","updateItem","_getUiSref","isNumber","deleteItem","navigation","p","sortByWeight","_byWeight","pop","createParent","parseInt","stateParams","isObject","injector","clearNavigation","navigationScope","setActiveItem","node","activeItem","getActiveItem","getNavigation","root","_flattenNavigation","setNavigationScope","setFolded","folded","getFolded","setFoldedOpen","foldedOpen","getFoldedOpen","toggleFolded","flatNav","navToPush","MsNavigationController","toggleHorizontalMobileMenu","msNavigationDirective","setFoldExpander","$emit","removeFoldCollapser","foldExpanderEl","onFoldExpanderHover","setFoldCollapser","foldCollapserEl","onFoldCollapserHover","sidenav","close","MsNavigationNodeController","hasChildren","group","collapsable","$evalAsync","givenPathParts","activePathParts","toggleCollapsed","collapseEl","offsetHeight","animate","display","animateHeightClass","expandEl","visibility","getClass","isHidden","hidden","msNavigationNodeDirective","MsNavigationNodeCtrl","msNavigationItemDirective","msNavigationHorizontalDirective","MsNavigationHorizontalNodeController","isActive","msNavigationHorizontalNodeDirective","MsNavigationHorizontalNodeCtrl","msNavigationHorizontalItemDirective","$mdMedia","onClick","msNavFoldService","setFoldable","foldable","isNavFoldedOpen","toggleFold","openFolded","closeFolded","msNavIsFoldedDirective","isFoldedOpen","isFolded","fold","unfold","sidenavEl","openOverlay","closeOverlay","msNavIsFolded","MsNavController","disable","enable","setToggleItem","toggleItems","getLockedItems","lockedItems","setLockedItem","clearLockedItems","msNavDirective","$mdComponentRegistry","stateChangeSuccessEvent","msNavTitleDirective","msNavButtonDirective","msNavToggleDirective","tAttrs","attr","MsNavCtrl","isCollapsed","isExpanded","elementToExpand","classes","expandAnimation","expanded","elementToCollapse","collapseAnimation","links","states","regExp","locked","lockedItem","currentState","shouldExpand","msInfoBarDirective","removeInfoBar","$destroy","msMaterialColorPickerController","$mdColorPalette","$mdMenu","fuseGenerator","activateHueSelection","palette","hues","selectedPalette","selectedHues","selectColor","hue","updateSelectedColor","updateModel","removeColor","selectedColor","class","setSelectedColor","modelCtrl","$viewValue","msModelType","bgColorValue","rgba","palettes","fgColorValue","contrast","$selectedColor","$setViewValue","msMaterialColorPicker","ngModel","attrs","controllers","ctrl","nodeType","replaceWith","msMasonryController","defaultOpts","watchContainerResize","waitImagesLoaded","imagesLoaded","imgLoad","container","width","newValue","oldValue","reLayout","containerPos","getBoundingClientRect","updateColumnOptions","items","referenceArr","apply","columnCount","xPos","yPos","column","refTop","columnWidth","respectItemOrder","min","round","transform","reLayoutTimeout","reLayoutDebounce","responsive","md","sm","xs","msMasonry","attributes","pre","msMasonryItem","newVal","oldVal","msCardDirective","templatePath","card","template","cardTemplateLoaded","msDatepickerFixConfigProvider","defaultConfig","formatter","val","parser","utcOffset","msDatepickerFix","msDatepickerFixConfig","elem","$formatters","$parsers","MsFormWizardController","registerForm","forms","previousStep","selectedIndex","nextStep","firstStep","lastStep","totalSteps","currentStepInvalid","$invalid","previousStepInvalid","formsIncomplete","msFormWizardDirective","msFormWizardFormDirective","formCtrl","MsFormWizardCtrl","$mdToast","showErrorMessage","time","simple","theme","hideDelay","showSuccessMessage","interval","arguments","formatTime","$filter","arr","unique","keyname","output","syntaxHighlight","json","charAt","stringify","match","cls","test","promiseStatus","inProgress","resolved","rejected","level","findBodyHtml","html","strVal","pattern","array_matches","exec","durationHumanize","duration","currency6","currencyFilter","amount","utils","filtersAndOrdering","itemOrdering","filtered","$watchCollection","listFiltered","list","$cacheFactory","cache","tableAjax","$compile","collect","ret","len","closest","host","fn","dataTableExt","sErrMode","oSettings","iLevel","sMesg","numPage","table_tableTools","clear","draw","rows","columns","adjust","pos","trunc","ajax","$dt_tableTools","lengthMenu","language","sProcessing","sLengthMenu","sZeroRecords","sEmptyTable","sInfo","sInfoEmpty","sInfoFiltered","sInfoPostFix","sSearch","sUrl","sInfoThousands","sLoadingRecords","oPaginate","sFirst","sLast","sNext","sPrevious","oAria","sSortAscending","sSortDescending","DataTable","createButtons","tt","dataTable","TableTools","sSwfPath","aButtons","sExtends","sButtonClass","sButtonText","fnCellRender","sValue","iColumn","nTr","iDataIndex","sFileName","fnContainer","uniqueEmail","$asyncValidators","modelValue","viewValue","emailCheck","exists","tableFixedHeader","table","original","z-index","cells","header","getCells","prototype","cell","updateCells","style","getComputedStyle","setWidth","minWidth","maxWidth","getWidth","listener","addEventListener","removeEventListener","before","StarsController","$attrs","starsDirective","ParametersController","addToBreadcrumb","load","selectedParameter","breadcrumb","human_name","parameters","addValueParemeter","resetParameters","showMenu","notEmpty","parametersDirective","iframeAuthentication","iframe","p1","p2","slice","server","formTranslate","formTranslateTemplates","varTranslate","bindTranslate","mdAutocompleteTranslate","ErrorMessagesController","required","messages","mdRequireMatch","passwordMatch","getValueObject","serverMessages","$name","errors","parents","$setTouched","$setValidity","forcechange","errorMessagesDirective","VideosController","videos","OriginsController","openOriginDialog","MetricsController","getChart","donutChartDigital","series","donut","stackedBarChart","stackBars","axisY","labelInterpolationFnc","plugins","Chartist","tooltip","seriesIndex","donutChart","getColor","colors","concatFilters","o1","o2","data_origins","data_users","calendarModel","calendarUiConfig","defaultView","locale","lang","viewRender","view","calendarView","intervalStart","_d","intervalEnd","agendaDay","titleFormat","ImportsViewController","trigger","loadingImport","openExportLeadDialog","DashboardController","trustAsHtml","ConcessionairesController","openConcessionaireDialog","openConcessionaireCalendarDialog","openConcessionaireNotesDialog","ChannelsController","openChannelDialog","AcdsController","reloadAcds","lastAcds","received_call","ID","createLead","openAcdDialog","possible_leads","CalendarController","reloadCalendar","fullCalendar","select","next","prev","eventRender","setTimeout","description","togglePositive","selectedTabIndex","toggleKpiPositive","editable","eventLimit","handleWindowResize","aspectRatio","slotDuration","minTime","maxTime","slotLabelFormat","allDayText","currentMonthShort","currentDate","lazyFetching","eventClick","selectable","selectHelper","timeFormat","fuseThemingService","$mdTheming","getRegisteredPalettes","PALETTES","getRegisteredThemes","THEMES","setActiveTheme","themeName","themes","warn","setThemesList","themeList","$mdThemingProvider","fusePalettes","fuseThemes","invoke","_$cookies","customTheme","getObject","alwaysWatchTheme","definePalette","primaryPalette","primary","accentPalette","accent","warnPalette","backgroundPalette","background","default","hue-1","hue-2","hue-3","pinkTheme","tealTheme","sail","50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700","contrastDefaultColor","contrastDarkColors","contrastStrongLightColors","fuseGeneratorService","fuseTheming","generate","registeredThemes","registeredPalettes","registeredTheme","colorType","colorTypeName","levels","contrast1","contrast2","contrast3","contrast4","hue1","hue2","hue3","processAndStoreThemes","styleVars","colorTypes","colorLevelName","colorName","ucfirst","render","_themes","selectedTheme","cssTemplate","regex","RegExp","matched","headEl","styleEl","_contrastLevel","contrastLevel","applyContrast","contrastLevels","white","1","2","3","4","black","string","toUpperCase","MsThemeOptionsController","getActiveTheme","updateLayoutMode","layoutMode","updateLayoutStyle","layoutStyle","layoutModes","label","layoutStyles","figure","msThemeOptions","toggleOptionsSidenav","detectBrowser","searchString","dataString","dataProp","versionSearchString","versionSearch","subString","searchVersion","substring","browserInfo","browserData","userAgent","vendor","opera","osData","platform","browser","appVersion","os","guidGenerator","S4","mobileDetect","mobile","array","MobileDetect","getBaseUrl","getApiObject","resource","paramDefaults","actions","$resource","actionParts","apiObject","resourceObject","apiResolverService","resourceParts","l","filterByTags","every","tagExists","itemTag","filterSingleByTags","itemTags","filterByPropIds","parameter","ids","filterByIds","toTrustedFilter","htmlToPlainTextFilter","String","nospaceFilter","humanizeDocFilter","doc","$1","altDate","diff","fromNow","fuseConfigProvider","fuseConfiguration","disableCustomScrollbars","disableMdInkRippleOnMobile","disableCustomScrollbarsOnMobile","configName","setConfig","configValue","hljsDirective","$interpolate","code","contents","codeElement","lines","line","trim","firstLineWhitespace","startingWhitespaceRegex","highlightedCode","hljs","highlight","shouldInterpolate","contentParent","ToolbarController","showInfo","toggleMsNavigationFolded","getFullNameUser","toggleAvailable","unavailable_reason","openAvailableDialog","authService","MainController","createMenu","hasPermission","createMenuSail","domain","targetScope","$id","NavigationController","msScrollOptions","runBlock","htmlClass","run","$ariaProvider","$logProvider","debugEnabled","tabindex","setStrings","Abandonar","Abrir lead","Acción realizada correctamente","Activado el {{ user.user_activation_date | date:'dd/MM/yyyy' }}","Activos","Administrador de concesionario","Administrar perfil","Alta","Alta lead","Alto","Apellidos","Asignación","Asignar","Asignar Lead","Asignar comercial","Avanzado","Ayer","Añadir concesionario","Añadir fuente","Añadir icono","Añadir nota","Añadir solicitud","Año","Bajo","Biografía","Borrar","Borrar canal","Borrar concesionario","Borrar leada","Borrar nota","Borrar solicitud","Borrar tag","Buscar","Calendario","Calendario de trabajo","Calendario guardado correctamente","Cambiar foto","Cambios realizados correctamente","Canal","Canal borrado correctamente.","Canal guardado correctamente","Canal:","Canales","Canales permitidos","Cancelar","Centro de recursos","Centro de trabajo","Cerrar","Cerrar sesión","Cliente","Cliente:","Combustible","Comercial","Concesionario","Concesionario borrado correctamente.","Concesionario guardado correctamente","Concesionarios","Concesionarios a los que pertenece:","Concesión","Conectados","Conexión","Configuración","Configuración del sitio","Confirmar","Contactos","Contactos comerciales:","Continuar","Contraseña","Crear","Crear Lead","Curso","Dados de baja","Dar de alta","Dar de baja","Dashboard","Datos básicos","Datos de lead","Debe seleccionar un comercial existente.","Debe seleccionar una opción de la lista","Departamento / Área","Desactivado el {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}","Descargar audio","Desconectados","Descripción","Dirección","Domingo","Duplicado","Día laborable","Editar","Editar canal","Editar concesionario","Editar icono","Editar origen","Editar solicitud","Editar usuario","El email indicado ya existe","El sistema ha detectado un seguimiento de este lead ¿Desea finalizar el lead?","Eliminar","Eliminar canal","Eliminar concesionario","Eliminar leada","Eliminar solicitud","Email","Email o nombre de usario","Entrar","Error al borrar concesionario.","Error al borrar la fuente.","Error al dar de alta a este usuario.","Error al dar de baja a este usuario.","Error al exportar leads","Error al finalizar lead.","Error al guardar el calendario.","Error al guardar el canal.","Error al guardar el concesionario.","Error al guardar el estado.","Error al guardar el infome.","Error al guardar el informe.","Error al guardar el origen.","Error al guardar el usuario.","Error al guardar la solicitud.","Error al guardar los datos básicos.","Error al modificar foto.","Error al obtener audio","Error al realizar el registro","Error al realizar la acción.","Error al reasignar leads.","Es administrador del concesionario","Es gestor del concesionario","Escuela","Español","Especialidad","Esta semana","Estado","Estado guardado correctamente","Este campo es obligatorio","Este lead no tiene ninguna solicitud adjunta. ¿Desea continuar?","Este mes","Exportar","Exportar Leads","Exportar leads","Extranjero","Extras","Fecha","Fecha de alta:","Fecha de nacimiento","Fecha de realización:","Fecha de seguimiento:","Fecha en la que comenzó como profesor","Filtrar","Filtrar por score","Filtrar por solicitudes","Finalidazo","Finalizar","Finalizar lead","Financiación","Foto modificada correctamente","Francés","Fuente","Fuentes:","Garantía","Gestión comercial","Gestor comercial","Guardar","Guardar lead","Guía desarrollador SML​","Historial de contactos","Histórico","Histórico de llamadas","Hoy","Icono:","Id click2call","Id llamada c2c","Identificador click2call","Ilocalizable","Indiferente","Infoauto","Infome guardado correctamente","Información del vehículo","Informe guardado correctamente","Inglés","Inicial","Inicio","Jueves","Km","LLamada respondida:","La dirección web debe ser de la forma http://...","Las contraseñas no coinciden","Lead finalizado correctamente","Lead no atendido","Leada borrado correctamente.","Leads cerrados","Leads no atendidos","Leads reasignados correctamente","Listado de solicitudes","Llamadas entrantes","Llamar","Localidad","Lunes","Marca/Modelo","Martes","Matrícula","Medio","Menos de 30","Mis leads","Miércoles","Mujer","Muy bajo","NSA:","Nacional","Negativa","Negativo","No","No disponible","No eres competente para realizar esta acción. Por favor contacte con atención al cliente.","No hay ningun comercial con ese nombre","No hay ningun provincia con ese nombre","No hay ninguna escuela con ese nombre","No hay ninguna fuente para esta búsqueda","No hay ninguna localidad","No hay ningún canal con ese nombre","No hay ningún concesionario con ese nombre","No hay ningún concesionario con ese teléfono","No hay ningún origen con ese nombre","Nombre","Nota","Notas","Nueva alta","Nueva solicitud","Nuevo canal","Nuevo concesionario","Nuevo estado","Nuevo lead","Nuevo origen","Nuevo usuario","Número de canales:","Número de concesionarios:","Número de leads:","Número de llamadas entrantes:","Número de orígenes:","Número de usuarios:","Origen","Origen guardado correctamente","Orígenes","Otro","Pendiente de asignación","Posible lead duplicado","Positiva","Positivo","Precio","Presupuesto","Provincia","Puede que esté dando de alta un lead ya creado en el sistema, compruebe si alguno de estos leads es el que usted está creando","Realizado","Reasignación de leads","Reasignar","Registrar nuevo usuario","Registro realizado correctamente","Reservado","Respuesta a solicitud vía Email","Resultado","Score","Score:","Scoring","Se ha producido un error.","Se han detectado cambios","Se usará para acceder al sistema","Seguimiento","Seguimiento programado el:","Selecciona un resultado de la gestión","Sexo","Si","Si abandona esta pantalla perderá los cambios, ¿Desea guardar los cambios?","Sin canales","Sin concesionarios","Sin definir","Sin informes","Sin llamadas entrantes","Sin notas añadidas","Sin orígenes","Sin solicitudes","Sin tags añadidos","Sin usuarios","Solicitud borrada correctamente.","Solicitud guardada correctamente","Solicitudes","Super Administrador","Sábado","Tag","Tags","Tarea programada el:","Tareas pendientes","Tasación","Teléfono","Teléfono de concesión oficial","Teléfono:","Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?","Tipo","Todas","Tutor académico","Tutor profesional","Url coches.net","Usuario dado de alta correctamente","Usuario dado de baja correctamente","Usuario guardado correctamente","Usuarios","Usuarios conectados","Valoración media","Varón","Vehiculo reservado","Vehículo","Vehículo reservado","Ver Lead","Ver historial","Ver más","Ver todos","Viernes","Visible para empresas","Visita / Test Drive","Volver","Web","Ya puede realizar la baja del usuario","a las:","¿Deseas dar de alta un vehículo de interés alternativo?","¿Seguro que quieres eliminar el canal?","¿Seguro que quieres eliminar el concesionario?","¿Seguro que quieres eliminar el leada?","¿Seguro que quieres eliminar la solicitud?","MimeType","ez","aw","atom","atomcat","atomsvc","ccxml","cu","davmount","ecma","emma","epub","pfr","stk","jar","ser","js","lostxml","hqx","cpt","mrc","ma","nb","mb","mathml","mbox","mscml","mp4s","dot","mxf","oda","opf","ogx","xer","pdf","pgp","prf","p10","p7s","cer","crl","pkipath","pki","pls","cww","rdf","rif","rnc","rl","rld","rs","rsd","rss","rtf","sbml","scq","scs","spq","spp","sdp","setpay","setreg","shf","rq","srx","gram","grxml","ssml","plb","psb","pvb","tcap","pwn","aso","imp","acu","air","xdp","xfdf","azf","azs","azw","acc","ami","apk","cii","fti","atx","mpkg","swi","aep","mpm","bmi","rep","cdxml","mmd","cdy","cla","csp","cdbcmsg","cmc","clkx","clkk","clkp","clkt","clkw","wbs","pml","ppd","car","pcurl","rdz","fe_launch","dna","mlp","dpg","dfac","geo","mag","nml","esf","msf","qam","slt","ssf","ez2","ez3","fdf","mseed","gph","ftc","fnc","ltf","fsc","oas","oa2","oa3","fg5","bh2","ddd","xdw","xbd","fzs","txd","ggb","ggt","gmx","kml","kmz","gac","ghf","gim","grv","gtm","tpl","vcg","zmm","hbci","les","hpgl","hpid","hps","jlt","pcl","pclxl","x3d","mpy","irm","sc","igl","ivp","ivu","qbo","qfx","rcprofile","irp","xpr","jam","rms","jisp","joda","karbon","chrt","kfo","flw","kon","ksp","htke","kia","sse","lbd","lbe","apr","nsf","org","scm","lwp","portpkg","mcd","mc1","cdkey","mwf","mfm","flo","igx","mif","daf","dis","mbk","mqy","msl","plc","txf","mpn","mpc","xul","cil","cab","xls","xlm","xla","xlc","xlt","xlw","xlam","xlsb","xlsm","xltm","eot","chm","ims","lrm","cat","stl","ppt","pps","pot","ppam","pptm","sldm","ppsm","potm","docm","dotm","wpl","xps","mseq","mus","msty","nlu","nnd","nns","nnw","ngdat","rpst","rpss","edm","edx","ext","odc","otc","odb","odf","odft","odg","otg","odi","oti","odp","ods","ots","odt","otm","ott","oth","xo","dd2","oxt","pptx","sldx","ppsx","potx","xlsx","xltx","docx","dotx","dp","ei6","efif","plf","pbd","box","mgz","qps","ptid","mxl","musicxml","cod","rm","link66","see","sema","semd","semf","ifm","itp","iif","ipk","mmf","teacher","dxp","sfs","sdc","sda","sdd","smf","sdw","vor","sgl","sxc","stc","sxd","std","sxi","sti","sxm","sxw","sxg","stw","svd","xsm","bdm","xdm","tao","tmo","tpt","mxs","tra","utz","umj","unityweb","uoml","vcx","vis","vsf","wbxml","wmlc","wmlsc","wtb","wpd","wqd","stf","xar","xfdl","hvd","hvs","hvp","osf","osfpvg","saf","spf","cmp","zaz","vxml","hlp","wsdl","wspolicy","abw","ace","aam","aas","bcpio","torrent","bz","vcd","chat","pgn","cpio","csh","wad","ncx","dtb","dvi","bdf","gsf","psf","otf","pcf","snf","ttf","ttc","woff","spl","gnumeric","gtar","hdf","jnlp","latex","application","wmd","wmz","xbap","mdb","obd","crd","clp","exe","dll","com","bat","msi","wmf","mny","pub","scd","trm","wri","p7r","rar","sh","shar","swf","xap","sit","sitx","sv4cpio","sv4crc","tar","tcl","tex","tfm","texinfo","texi","ustar","fig","xpi","xenc","xhtml","xht","xml","xsl","dtd","xop","xslt","xspf","zip","adp","mp4a","m4a","m4p","mpga","mp2","mp2a","mp3","m2a","m3a","oga","ogg","spx","eol","dts","dtshd","lvp","pya","ecelp4800","ecelp7470","ecelp9600","aac","m3u","wax","wma","rmp","wav","cdx","cif","cmdf","cml","csml","xyz","bmp","cgm","g3","gif","ief","jp2","jpeg","jpg","jpe","png","btif","svg","svgz","tiff","tif","psd","dwg","dxf","fbs","fpx","fst","mmr","rlc","mdi","npx","wbmp","xif","ras","cmx","ico","pcx","pnm","pbm","pgm","ppm","rgb","xbm","xpm","xwd","dwf","gdl","gtw","mts","vtu","csv","htm","txt","dsc","rtx","tsv","curl","dcurl","scurl","mcurl","fly","flx","gv","spot","jad","wml","wmls","java","etx","uu","vcs","vcf","h261","h263","h264","jpgv","mp4","mp4v","mpg4","m4v","webm","mpeg","mpg","mpe","m1v","m2v","ogv","qt","mov","fvt","pyv","viv","f4v","fli","flv","wm","wmv","wmx","wvx","avi","movie","ice","indd","dat","gz","tgz","ln","localStorage","browserLanguage","languageDefault","currentLanguage","languages","changeLanguage","urlPermissions","urlPermission","showError","stateChangeStartEvent","routeConfig","$urlRouterProvider","$locationProvider","html5Mode","otherwise","$injector","layouts","verticalNavigation","main","toolbar","verticalNavigationFullwidthToolbar","verticalNavigationFullwidthToolbar2","horizontalNavigation","contentOnly","contentWithToolbar","toolbar@app","navigation@app","IndexController","$resourceProvider","$mdDateLocaleProvider","paginationTemplateProvider","localStorageServiceProvider","flowFactoryProvider","NotifyServiceProvider","utf8Encode","unicodeString","TypeError","utf8String","cc","charCodeAt","fromCharCode","defaults","xsrfHeaderName","xsrfCookieName","setPrefix","stripTrailingSlashes","months","shortMonths","shortDays","firstDayOfWeek","weekNumberFormatter","weekNumber","msgCalendar","msgOpenCalendar","parseDate","dateString","m","isValid","NaN","formatDate","setPath","decorator","$delegate","getTemplate","debouceClick","oldTemplate","varName","ngClick","ngDisabledString","ngDisabled","btnType","layout","layoutAlign","$apply","$directiveElement","taOptions","focussed","toolbarGroup","toolbarButton","toolbarButtonActive","textEditor","htmlEditor","taTools","quote","iconclass","bold","italics","underline","strikeThrough","ul","ol","redo","undo","justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent","insertImage","insertLink","insertVideo","chunk","isTest","testChunks","chunkSize","apiService","queryAllObj","defaultObj","usersComplexCreate","usersComplexUpdate","leadsClone","concessionairesConfig","netelip","ws_scheme","protocol","$templateCache"],"mappings":"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ACb5c,SAAS6c,MAAM,mBACf7c,SAAS8c,IAAI,yBACb9c,SAAS+c,IAAI,mCACb/c,SAASgd,UAAU,4BACnBhd,SAASid,UAAU,4BACnBjd,SAASkd,UAAU,4BACnBld,SAASmd,IAAI,cACbnd,SAASod,IAAI,kBACbpd,SAASqd,IAAI,iBACbrd,SAASsd,IAAI,iBACbtd,SAASud,IAAI,8BACbvd,SAASwd,IAAI,cACbxd,SAASyd,IAAI,iBACbzd,SAAS0d,IAAI,iBACb1d,SAAS2d,KAAK,kBACd3d,SAAS4d,IAAI,iBACb5d,SAAS6d,KAAK,kBACd7d,SAAS8d,IAAI,iBACb9d,SAAS+d,IAAI,YACb/d,SAASge,IAAI,YACbhe,SAASie,GAAG,cACZje,SAASke,IAAI,YACble,SAASme,IAAI,YACbne,SAASoe,IAAI,YACbpe,SAASqe,KAAK,aACdre,SAASse,IAAI,aACbte,SAASue,IAAI,aACbve,SAASwe,IAAI,YACbxe,SAASye,KAAK,iBACdze,SAAS0e,IAAI,gBACb1e,SAAS2e,KAAK,gBACd3e,SAAS4e,KAAK,aACd5e,SAAS6e,IAAI,aACb7e,SAAS8e,IAAI,4BACb9e,SAAS+e,IAAI,gBACb/e,SAASgf,IAAI,gBACbhf,SAASif,IAAI,yBACbjf,SAASkf,IAAI,gBACblf,SAASmf,IAAI,gBACbnf,SAASof,IAAI,iCACbpf,SAASqf,IAAI,iCACbrf,SAASsf,IAAI,oBACbtf,SAASuf,IAAI,oBACbvf,SAASwf,KAAK,qBACdxf,SAASyf,IAAI,iBACbzf,SAAS0f,IAAI,qBACb1f,SAAS2f,IAAI,cACb3f,SAAS4f,IAAI,eACb5f,SAAS6f,IAAI,cAEb7f,SAAS8f,IAAI,0BACb9f,SAAS+f,IAAI,0BACb/f,SAASggB,IAAI,2BACbhgB,SAASigB,IAAI,0BACbjgB,SAASkgB,IAAI,cACblgB,SAASmgB,IAAI,kBACbngB,SAASogB,IAAI,kBACbpgB,SAASqgB,IAAI,sBACbrgB,SAASsgB,IAAI,gBACbtgB,SAASugB,IAAI,gBACbvgB,SAASwgB,IAAI,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","file":"scripts/app-8fb60af99a.js","sourcesContent":["(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.tasks',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.tasks')\r\n        .controller('TaskDialogController', TaskDialogController);\r\n\r\n    /** @ngInject */\r\n    function TaskDialogController($mdDialog, Task, Request, Lead, Tracing, tasksService, NotifyService, taskTypesService, usersService,\r\n                                  originsCarService, GasTypes, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Editar tarea');\r\n        vm.taskTypes=[];\r\n        vm.origins=originsCarService.origins;\r\n        vm.gasTypes=GasTypes;\r\n        vm.now=new Date();\r\n\r\n        if (!Task) {\r\n            vm.title = gettextCatalog.getString('Nueva tarea');\r\n            vm.task = tasksService.getEmptyTask(Lead, Request, Tracing);\r\n        } else {\r\n            vm.task = angular.copy(Task); // Copiamos para no modificar el original hasta guardar\r\n        }\r\n        init();\r\n\r\n\r\n        // Methods\r\n        vm.saveTask = saveTask;\r\n        vm.addTaskNote = addTaskNote;\r\n        vm.deleteTaskNote = deleteTaskNote;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        function init() {\r\n            taskTypesService.getTaskTypes(Tracing).then(function(res){\r\n                vm.taskTypes=res;\r\n            });\r\n\r\n            vm.task.date=vm.task.date ? new Date(moment(vm.task.date).format()) : null;\r\n            vm.task.planified_realization_date=vm.task.planified_realization_date ? new Date(moment(vm.task.planified_realization_date).format()) : null;\r\n            vm.task.realization_date=vm.task.realization_date ? new Date(moment(vm.task.realization_date).format()) : null;\r\n            vm.task.planified_tracking_date=vm.task.planified_tracking_date ? new Date(moment(vm.task.planified_tracking_date).format()) : null;\r\n            vm.task.tracking_date=vm.task.tracking_date ? new Date(moment(vm.task.tracking_date).format()) : null;\r\n        }\r\n\r\n        /**\r\n         * Guardar informe\r\n         */\r\n        function saveTask() {\r\n\r\n            if(vm.task.planified_realization_date)\r\n                vm.task.planified_realization_date.setHours(vm.task.datetime.getHours(),vm.task.datetime.getMinutes())\r\n\r\n            if(Request.id){\r\n                return tasksService.saveTask(angular.copy(vm.task)).then(function(res){\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Solicitud guardada correctamente\"));\r\n                    closeDialog();\r\n                    if(!vm.task.id){\r\n                        Request.task.push(vm.task);\r\n                    }\r\n                }, function(error){\r\n                    vm.serverErrors = error.data;\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar la solicitud.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                });\r\n            }else{\r\n                if(!Task){\r\n                    // vm.task.planified_realization_date.setHours(vm.task.datetime.getHours(),vm.task.datetime.getMinutes())\r\n                    Request.task.push(vm.task);\r\n                    tasksService.tasks.data.push(vm.task);\r\n                    tasksService.tasks.count++;\r\n                }else{\r\n                    for(var i in vm.task){\r\n                        Task[i]=vm.task[i];\r\n                    }\r\n                }\r\n                closeDialog();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Añade una nota a la tarea\r\n         */\r\n        function addTaskNote(task){\r\n            vm.task.note.push({content: '', essential: false, modified:new Date()});\r\n        }\r\n\r\n        /**\r\n         * borra una nota de la tarea\r\n         */\r\n        function deleteTaskNote(note){\r\n            if (note.id) {\r\n                //buscamos por id\r\n                for (var i = 0; i < vm.task.note.length; i++) {\r\n                    if (vm.task.note[i].id === note.id) {\r\n                        vm.task.note.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                //buscamos por contenido\r\n                for (var i = 0; i < vm.task.note.length; i++) {\r\n                    if (vm.task.note[i].content === note.content && !note.id) {\r\n                        vm.task.note.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n        $stateProvider\r\n            .state('app.users', {\r\n                abstract: true,\r\n                url: '/users',\r\n                resolve:{\r\n                    currentUser: function (AuthService){\r\n                        return AuthService.getCurrentUser().then(function (response) {\r\n                            if (response) {\r\n                                return response;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            })\r\n            .state('app.users.list', {\r\n                url: '/?concessionaire',\r\n                views: {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/users/views/list/users.html',\r\n                        controller: 'UsersController as vm'\r\n                    }\r\n                },\r\n                resolve: {\r\n                    Concessionaire: function (currentUser, concessionairesService, $stateParams) {\r\n                        if($stateParams.concessionaire) {\r\n                            return concessionairesService.getConcessionaire($stateParams.concessionaire);\r\n                        }\r\n                        return null;\r\n                    },\r\n                    Users: function (currentUser, $rootScope, usersService, Concessionaire) {\r\n                        usersService.users.filters={};\r\n                        usersService.users.filters.online=true;\r\n                        usersService.users.filters.is_active=true;\r\n                        if(Concessionaire) {\r\n                            usersService.users.filters.concessionaire_data = Concessionaire;\r\n                        }\r\n                        return usersService.getUsers();\r\n                    }\r\n                },\r\n                bodyClass: 'users'\r\n            })\r\n            .state('app.users.get', {\r\n                abstract: true,\r\n                url: '/:user/',\r\n                resolve:{\r\n                    User: function (usersService,$stateParams) {\r\n                        return usersService.getUser($stateParams.user);\r\n                    },\r\n                    Schools: function (schoolsService) {\r\n                        schoolsService.schools.filters={};\r\n                        schoolsService.schools.filters.page_size=\"all\";\r\n                        return schoolsService.getSchools();\r\n                    },\r\n                    Courses: function (coursesService) {\r\n                        coursesService.courses.filters={};\r\n                        coursesService.courses.filters.page_size=\"all\";\r\n                        return coursesService.getCourses();\r\n                    },\r\n                    Specialities: function (specialitiesService) {\r\n                        specialitiesService.specialities.filters={};\r\n                        specialitiesService.specialities.filters.page_size=\"all\";\r\n                        return specialitiesService.getSpecialities();\r\n                    },\r\n                }\r\n            })\r\n            .state('app.users.get.detail', {\r\n                url      : 'detail',\r\n                views    : {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/users/views/detail/user.html',\r\n                        controller : 'UserController as vm'\r\n                    }\r\n                },\r\n                bodyClass: 'todo'\r\n            })\r\n            .state('app.users.get.edit', {\r\n                url      : 'edit',\r\n                views    : {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/users/views/edit/user.html',\r\n                        controller : 'UserEditController as vm'\r\n                    }\r\n                },\r\n                bodyClass: 'todo'\r\n            });\r\n\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.users')\r\n        .controller('UsersController', UsersController);\r\n    /** @ngInject */\r\n    function UsersController($scope, currentUser, usersService, Users, NotifyService, $rootScope, DebounceService,\r\n                             leadsService, Concessionaire, $mdDialog, $document, concessionairesService, $q, gettextCatalog)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.users=Users;\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.users.filters', DebounceService(usersService.getUsers, 300), true);\r\n\r\n        // Methods\r\n        vm.openUserDialog = openUserDialog;\r\n        vm.removeUser = removeUser;\r\n        vm.getConcessionaires = getConcessionaires;\r\n        vm.toggleActive = toggleActive;\r\n\r\n        //////////\r\n        /**\r\n         * Abre el dialogo para crear/editar una user\r\n         *\r\n         * @param ev\r\n         * @param user\r\n         */\r\n        function openUserDialog(ev, user) {\r\n            $mdDialog.show({\r\n                controller: 'UserDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/users/dialogs/user/user-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    User:user,\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n      \r\n        /**\r\n         * Abre el dialogo para eliminar una user\r\n         *\r\n         * @param ev\r\n         * @param user\r\n         */\r\n        function removeUser(ev, user) {\r\n            var confirm = $mdDialog.confirm()\r\n                .title(gettextCatalog.getString('Eliminar concesionario')+' \"'+user.name+'\"')\r\n                .textContent(gettextCatalog.getString('¿Seguro que quieres eliminar el concesionario?'))\r\n                .ariaLabel(gettextCatalog.getString('Eliminar concesionario'))\r\n                .clickOutsideToClose(true)\r\n                .parent(angular.element(document.body))\r\n                .ok(gettextCatalog.getString('Borrar concesionario'))\r\n                .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n            $mdDialog.show(confirm).then(function() {\r\n                usersService.removeUser(user).then(function(){\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Concesionario borrado correctamente.\"));\r\n                }, function(error){\r\n                    NotifyService.errorMessage(\"Error al borrar el concesionario.\" +\" \"+ (error.data.detail || \"\"));\r\n                });\r\n            });\r\n\r\n        }\r\n\r\n        /* Concesionarios */\r\n        function getConcessionaires(searchText) {\r\n            var deferred = $q.defer();\r\n            /*phonesService.getAllPhones(searchText).then(function(concessionaires){\r\n                deferred.resolve(concessionaires);\r\n            });*/\r\n            concessionairesService.getAllConcessionaires(searchText).then(function(concessionaires){\r\n                deferred.resolve(concessionaires);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* toggle */\r\n        function toggleActive(user) {\r\n            var deferred = $q.defer();\r\n            //Comprobamos que tenemos permiso para realizar esta acción\r\n            if(vm.user.is_concession_admin){\r\n                for(var i in user.related_concessionaires){\r\n                    var sw=existConcessionaire(user.related_concessionaires[i].concessionaire, vm.user.related_concessionaires);\r\n                    if(!sw){\r\n                        NotifyService.errorMessage(gettextCatalog.getString(\"No eres competente para realizar esta acción. Por favor contacte con atención al cliente.\"));\r\n                        deferred.resolve(false);\r\n                        return deferred.promise;\r\n                    }\r\n                }\r\n            }\r\n\r\n            //Una vez que tenemos permiso comprobamos si hay leads para modificar su asiganación\r\n            leadsService.getLeadsByUser(user.id).then(function (res) {\r\n                if(res.count){\r\n                    //abrimos modal\r\n                    openLeadByUserDialog(user);\r\n                    deferred.resolve(true);\r\n                }else{\r\n                    //realizamos la baja/alta\r\n                    var obj={\r\n                        id:user.id,\r\n                        is_active:!user.is_active\r\n                    };\r\n                    return usersService.saveUser(obj).then(function(res){\r\n                        if(res.is_active){\r\n                            NotifyService.successMessage(gettextCatalog.getString(\"Usuario dado de alta correctamente\"));\r\n                        }else{\r\n                            NotifyService.successMessage(gettextCatalog.getString(\"Usuario dado de baja correctamente\"));\r\n                        }\r\n                        deferred.resolve(true);\r\n                    }, function(error){\r\n                        vm.serverErrors = error.data;\r\n                        if(obj.is_active){\r\n                            NotifyService.errorMessage(gettextCatalog.getString(\"Error al dar de alta a este usuario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                        }else{\r\n                            NotifyService.errorMessage(gettextCatalog.getString(\"Error al dar de baja a este usuario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                        }\r\n                        deferred.resolve(false);\r\n                    });\r\n                }\r\n            },function(){\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Se ha producido un error.\"));\r\n                deferred.resolve(false);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function existConcessionaire(id,concessionaires){\r\n            for(var j in vm.user.related_concessionaires){\r\n                if(id===concessionaires[j].concessionaire){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar una user\r\n         */\r\n        function openLeadByUserDialog(user) {\r\n            $mdDialog.show({\r\n                controller: 'LeadByUserDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/users/dialogs/leadByUser/leadByUser-dialog.html',\r\n                parent: angular.element($document.body),\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    User:user\r\n                }\r\n            });\r\n        }\r\n\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.sfas',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n        $stateProvider\r\n            .state('app.sfas', {\r\n                abstract: true,\r\n                url: '/sfas',\r\n                resolve:{\r\n                    currentUser: function (AuthService){\r\n                        return AuthService.checkStatus().then(function (response) {\r\n                            if (response) {\r\n                                return response;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            })\r\n            .state('app.sfas.list', {\r\n                url: '/',\r\n                views: {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/sfas/views/list/sfas.html',\r\n                        controller: 'SfasController as vm'\r\n                    }\r\n                },\r\n                resolve: {\r\n                    Sfas: function (currentUser) {\r\n                        return currentUser.sfa_configurations;\r\n                    }\r\n                },\r\n                bodyClass: 'sfas'\r\n            })\r\n\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.sfas')\r\n        .controller('SfasController', SfasController);\r\n    /** @ngInject */\r\n    function SfasController($scope, currentUser, Sfas, usersService, NotifyService, $rootScope, DebounceService,\r\n                            AuthService, $mdDialog, $document, $q, gettextCatalog)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.sfas=Sfas;\r\n\r\n        vm.channels = [\r\n          {id:'email', name:gettextCatalog.getString('Email')},\r\n          {id:'sms', name:gettextCatalog.getString('SMS')}\r\n        ];\r\n        vm.events = [\r\n          {id:'lead_not_attended', name:gettextCatalog.getString('Lead no atendido')},\r\n          {id:'lead_attended', name:gettextCatalog.getString('Lead atendido por usuario')}\r\n        ];\r\n\r\n        // Methods\r\n        vm.openSfaDialog = openSfaDialog;\r\n        vm.removeSfa = removeSfa;\r\n\r\n        //////////\r\n        /**\r\n         * Abre el dialogo para crear/editar una sfa\r\n         *\r\n         * @param ev\r\n         */\r\n        function openSfaDialog(ev) {\r\n            $mdDialog.show({\r\n                controller: 'SfaDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/sfas/dialogs/sfa/sfa-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    User: currentUser,\r\n                    event: ev\r\n                }\r\n            }).then(function() {\r\n                AuthService.checkStatus().then(function (response) {\r\n                    if (response) {\r\n                      vm.sfas=response.sfa_configurations;\r\n                    }\r\n                });\r\n            });\r\n        }\r\n\r\n      \r\n        /**\r\n         * Abre el dialogo para eliminar una sfa\r\n         *\r\n         * @param $index\r\n         * @param sfa\r\n         */\r\n        function removeSfa($index, sfa) {\r\n            var confirm = $mdDialog.confirm()\r\n                .title(gettextCatalog.getString('Eliminar automatismo'))\r\n                .textContent(gettextCatalog.getString('¿Seguro que quieres eliminar el automatismo?'))\r\n                .ariaLabel(gettextCatalog.getString('Eliminar automatismo'))\r\n                .clickOutsideToClose(true)\r\n                .parent(angular.element(document.body))\r\n                .ok(gettextCatalog.getString('Borrar automatismo'))\r\n                .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n            $mdDialog.show(confirm).then(function() {\r\n                usersService.removeSFA(angular.copy(sfa)).then(function(){\r\n                    vm.sfas.splice($index,1);\r\n                }, function(error){\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al borrar automatísmo.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                });\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('UserController', UserController);\r\n\r\n    /** @ngInject */\r\n    function UserController(currentUser, User, professionalProfilesService) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.user=User;\r\n\r\n        vm.professional_profiles=professionalProfilesService.professionalProfiles;\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('AvailableDialogController', AvailableDialogController);\r\n\r\n    /** @ngInject */\r\n    function AvailableDialogController($mdDialog, User, usersService, NotifyService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Disponibilidad');\r\n        vm.form={\r\n            id:User.id,\r\n            is_available:false\r\n        };\r\n\r\n        vm.reasons=[\r\n            {id:'asisting_clients' ,name:'Atendiendo clientes'},\r\n            {id:'breakfast', name:'Desayunando'},\r\n            {id:'bathroom', name:'En el aseo'},\r\n            {id:'excused', name:'Ausencia justificada'}\r\n        ]\r\n\r\n        // Methods\r\n        vm.saveAvailable = saveAvailable;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar availableo\r\n         */\r\n        function saveAvailable() {\r\n            return usersService.saveUser(vm.form).then(function(res){\r\n                $mdDialog.hide(res);\r\n            })\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('UserEditController', UserEditController);\r\n\r\n    /** @ngInject */\r\n    function UserEditController(currentUser, User, usersService, $rootScope, NotifyService, $state, gettextCatalog, api,\r\n                                Schools, Courses, Specialities, schoolsService, $q) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.user=User;\r\n        vm.schools=Schools;\r\n        vm.courses=Courses;\r\n        vm.specialities=Specialities;\r\n\r\n        //Preparación de opciones para la subida de la imagen de perfil\r\n        vm.ngFlowOptions={\r\n            target: api.URLs.users.replace(\":id\",vm.user.id),\r\n            uploadMethod: \"PATCH\",\r\n            fileParameterName: \"image\"\r\n        };\r\n\r\n        init();\r\n\r\n        // Methods\r\n        vm.saveUser = saveUser;\r\n        vm.removeImage = removeImage;\r\n        vm.imageError = imageError;\r\n        vm.reloadImage = reloadImage;\r\n        vm.getSchools = getSchools;\r\n\r\n        //////////\r\n        function init(){\r\n            if(vm.user.hire_date){\r\n                vm.user.hire_date=moment(vm.user.hire_date,\"DD/MM/YYYY\").toDate();\r\n            }else{\r\n                vm.user.hire_date=null;\r\n            }\r\n            if(vm.user.born_date){\r\n                vm.user.born_date=moment(vm.user.born_date,\"DD/MM/YYYY\").toDate();\r\n            }else{\r\n                vm.user.born_date=null;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guardar detalle del usuario\r\n         */\r\n        function saveUser(user) {\r\n            var form=angular.copy(user);\r\n\r\n            return usersService.saveUser(form).then(function(response){\r\n                $state.go(\"app.users.get.edit\",{user:response.id});\r\n                vm.user.image=response.image;\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Cambios realizados correctamente\"));\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar los datos básicos.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        function removeImage(){\r\n            saveUser({image:null,id:vm.user.id});\r\n        }\r\n\r\n        /* Error al subir imagen */\r\n        function imageError($file, $message, $flow) {\r\n            $file.cancel();\r\n            vm.serverErrors=JSON.parse($message);\r\n            var msg=\"\";\r\n            if(vm.serverErrors.image && vm.serverErrors.image[0]){\r\n                msg+=vm.serverErrors.image[0];\r\n            }\r\n            NotifyService.errorMessage(gettextCatalog.getString(\"Error al modificar foto. \")+msg);\r\n        }\r\n\r\n        /* Recarga de imagen */\r\n        function reloadImage(file, response, flow) {\r\n            var res=JSON.parse(response);\r\n            vm.user.image=res.image;\r\n            NotifyService.successMessage(gettextCatalog.getString(\"Foto modificada correctamente\"));\r\n        }\r\n\r\n        /* Escuelas */\r\n        function getSchools(searchText) {\r\n            var deferred = $q.defer();\r\n            schoolsService.schools.filters={};\r\n            // schoolsService.getAllSchools(searchText).then(function(schools){\r\n            schoolsService.getSchools(searchText).then(function(schools){\r\n                // deferred.resolve(schools);\r\n                deferred.resolve(schools.data);\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.sfas')\r\n        .controller('SfaDialogController', SfaDialogController);\r\n\r\n    /** @ngInject */\r\n    function SfaDialogController($mdDialog, User, usersService, NotifyService, channelsService, concessionairesService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Nuevo automatismo');\r\n        vm.channels = [\r\n            {id:'email', name:gettextCatalog.getString('Email')},\r\n            {id:'sms', name:gettextCatalog.getString('SMS')}\r\n        ];\r\n        vm.events = [\r\n            {id:'lead_not_attended', name:gettextCatalog.getString('Lead no atendido')},\r\n            {id:'lead_attended', name:gettextCatalog.getString('Lead atendido por usuario')}\r\n        ];\r\n\r\n        vm.user = angular.copy(User); // Copiamos para no modificar el original hasta guardar\r\n        vm.user.sfa_configurations.push({});\r\n\r\n        // Methods\r\n        vm.saveUser = saveUser;\r\n        vm.removeSFA = removeSFA;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar usero\r\n         */\r\n        function saveUser() {\r\n            return usersService.saveUser(angular.copy(vm.user)).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Automatismo guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el automatismo.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n        /**\r\n         * Borra un SFA\r\n         */\r\n        function removeSFA($index,form, item) {\r\n            return usersService.removeSFA(angular.copy(item)).then(function(){\r\n                form.$setDirty();\r\n                vm.user.sfa_configurations.splice($index,1);\r\n            }, function(error){\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al borrar SFA.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.origins',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider, msApiProvider) {\r\n\r\n        // State\r\n        $stateProvider.state('app.origins', {\r\n            url      : '/origins',\r\n            views    : {\r\n                'content@app': {\r\n                    templateUrl: 'app/main/origins/origins.html',\r\n                    controller : 'OriginsController as vm'\r\n                }\r\n            },\r\n            resolve  : {\r\n                currentUser: function (AuthService){\r\n                    return AuthService.getCurrentUser().then(function (response) {\r\n                        if (response) {\r\n                            return response;\r\n                        }\r\n                    });\r\n                },\r\n                Origins: function (originsService) {\r\n                    originsService.origins.filters={};\r\n                    return originsService.getOrigins();\r\n                }\r\n            },\r\n            bodyClass: 'todo'\r\n        });\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.origins')\r\n        .controller('OriginDialogController', OriginDialogController);\r\n\r\n    /** @ngInject */\r\n    function OriginDialogController($scope, $mdDialog, Origin, originsService, channelsService, Channels, NotifyService, $timeout, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Editar origen');\r\n        vm.channels = Channels;\r\n\r\n        if (!Origin) {\r\n            vm.title = gettextCatalog.getString('Nuevo origen');\r\n            vm.origin = originsService.getEmptyOrigin();\r\n        } else {\r\n            vm.origin = angular.copy(Origin); // Copiamos para no modificar el original hasta guardar\r\n        }\r\n\r\n        $timeout(function () {\r\n            $(\"#image-uploader\").change(function(){\r\n                readURL(this);\r\n            });\r\n        });\r\n\r\n        // Methods\r\n        vm.saveOrigin = saveOrigin;\r\n        vm.closeDialog = closeDialog;\r\n        vm.openFiles = openFiles;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar origino\r\n         */\r\n        function saveOrigin() {\r\n            return originsService.saveOrigin(angular.copy(vm.origin)).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Origen guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el origen.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n        /**\r\n         * Image change\r\n         * @param input\r\n         */\r\n        function readURL(input)\r\n        {\r\n            if (input.files && input.files[0]) {\r\n                var reader = new FileReader();\r\n\r\n                reader.onload = function (e) {\r\n                    vm.origin.icon = e.target.result;\r\n\r\n                    if(!$scope.$$phase) {\r\n                        $scope.$digest();\r\n                    }\r\n                };\r\n\r\n                reader.readAsDataURL(input.files[0]);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Open filebrowser\r\n         */\r\n        function openFiles(form)\r\n        {\r\n            form.$setDirty();\r\n            $(\"#image-uploader\").click();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('UserDialogController', UserDialogController);\r\n\r\n    /** @ngInject */\r\n    function UserDialogController($mdDialog, User, usersService, NotifyService, channelsService, concessionairesService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Editar usuario');\r\n        vm.channels = [\r\n            {id:'email', name:gettextCatalog.getString('Email')},\r\n            {id:'sms', name:gettextCatalog.getString('SMS')}\r\n        ];\r\n        vm.events = [\r\n            {id:'lead_not_attended', name:gettextCatalog.getString('Lead no atendido')},\r\n            {id:'lead_attended', name:gettextCatalog.getString('Lead atendido por usuario')}\r\n        ];\r\n\r\n        if (!User) {\r\n            vm.title = gettextCatalog.getString('Nuevo usuario');\r\n            vm.user = usersService.getEmptyUser();\r\n        } else {\r\n            vm.user = angular.copy(User); // Copiamos para no modificar el original hasta guardar\r\n            vm.user.start_date= moment(vm.user.start_date).toDate();\r\n            vm.user.end_date= moment(vm.user.end_date).toDate();\r\n        }\r\n\r\n        // Methods\r\n        vm.saveUser = saveUser;\r\n        vm.closeDialog = closeDialog;\r\n        vm.getConcessionaires = getConcessionaires;\r\n        vm.addConcessionaire = addConcessionaire;\r\n        vm.removeConcessionaire = removeConcessionaire;\r\n        vm.addSFA = addSFA;\r\n        vm.removeSFA = removeSFA;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar usero\r\n         */\r\n        function saveUser() {\r\n            return usersService.saveUser(angular.copy(vm.user)).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Usuario guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el usuario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n        /* Concesionarios */\r\n        function getConcessionaires(searchText) {\r\n            var deferred = $q.defer();\r\n            concessionairesService.concessionaires.filters={};\r\n            concessionairesService.getAllConcessionaires(searchText).then(function(concessionaires){\r\n                deferred.resolve(concessionaires);\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Añade un concesionario\r\n         */\r\n        function addConcessionaire() {\r\n            vm.user.related_concessionaires.push({});\r\n        }\r\n\r\n        /**\r\n         * Borra un concesionario\r\n         */\r\n        function removeConcessionaire($index,form, item) {\r\n            if(item.id){\r\n                return usersService.removeConcessionaire(angular.copy(item)).then(function(){\r\n                    form.$setDirty();\r\n                    vm.user.related_concessionaires.splice($index,1);\r\n                }, function(error){\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al borrar concesionario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                });\r\n            }else{\r\n                form.$setDirty();\r\n                vm.user.related_concessionaires.splice($index,1);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Añade un SFA\r\n         */\r\n        function addSFA() {\r\n            vm.user.sfa_configurations.push({});\r\n        }\r\n\r\n        /**\r\n         * Borra un SFA\r\n         */\r\n        function removeSFA($index,form, item) {\r\n            if(item.id){\r\n                return usersService.removeSFA(angular.copy(item)).then(function(){\r\n                    form.$setDirty();\r\n                    vm.user.sfa_configurations.splice($index,1);\r\n                }, function(error){\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al borrar SFA.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                });\r\n            }else{\r\n                form.$setDirty();\r\n                vm.user.sfa_configurations.splice($index,1);\r\n            }\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .controller('LeadByUserDialogController', LeadByUserDialogController);\r\n\r\n    /** @ngInject */\r\n    function LeadByUserDialogController($mdDialog, leadsService, User, NotifyService, usersService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title=gettextCatalog.getString(\"Reasignación de leads\")\r\n        vm.leads=leadsService.leads;\r\n        vm.user=User;\r\n        vm.concessionaires={};\r\n\r\n        init();\r\n\r\n        // Methods\r\n        vm.toggleActive = toggleActive;\r\n        vm.getUsers = getUsers;\r\n        vm.getFullUserName = getFullUserName;\r\n        vm.reasign = reasign;\r\n        vm.isFormDisabled = isFormDisabled;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        function init(){\r\n            var c={};\r\n            for(var i in vm.leads.data){\r\n                if(!c['c'+vm.leads.data[i].concession_id] && vm.leads.data[i].concession_id){\r\n                    c['c'+vm.leads.data[i].concession_id]={\r\n                        id:vm.leads.data[i].concession_id,\r\n                        name:vm.leads.data[i].concession_name,\r\n                        leads:[],\r\n                        user_data:null\r\n                    }\r\n                }\r\n                if(vm.leads.data[i].concession_id){\r\n                    c['c'+vm.leads.data[i].concession_id].leads.push(vm.leads.data[i]);\r\n                }\r\n            }\r\n            vm.concessionaires=c;\r\n        }\r\n\r\n        /* toggle */\r\n        function toggleActive(user) {\r\n            //realizamos la baja/alta\r\n            var obj={\r\n                id:user.id,\r\n                is_active:!user.is_active\r\n            };\r\n            return usersService.saveUser(obj).then(function(res){\r\n                if(res.is_active){\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Usuario dado de alta correctamente\"));\r\n                }else{\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Usuario dado de baja correctamente\"));\r\n                }\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                if(obj.is_active){\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al dar de alta a este usuario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                }else{\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al dar de baja a este usuario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        /* Usuarios */\r\n        function getUsers(searchText, Concessionaire) {\r\n            var deferred = $q.defer();\r\n            usersService.getAllUsersConcessionaire(searchText,Concessionaire).then(function(users){\r\n                deferred.resolve(users);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function getFullUserName(user) {\r\n            return user.first_name+\" \"+user.last_name;\r\n        }\r\n\r\n        function reasign(concessionaire) {\r\n            var obj={\r\n                id:concessionaire.user_data.id,\r\n                leads:[]\r\n            };\r\n            for(var i in concessionaire.leads){\r\n                obj.leads.push(concessionaire.leads[i].id);\r\n            }\r\n            return leadsService.setLeadsByUser(obj).then(function (res) {\r\n                delete vm.concessionaires['c'+concessionaire.id];\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Leads reasignados correctamente\"));\r\n            },function (error) {\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al reasignar leads.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            })\r\n        }\r\n\r\n        function isFormDisabled(){\r\n            for(var i in vm.concessionaires){\r\n                if(vm.concessionaires[i].leads.length>0){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n        \r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n        $stateProvider\r\n            .state('app.leads', {\r\n                abstract: true,\r\n                url: '/leads',\r\n                resolve:{\r\n                    currentUser: function (AuthService){\r\n                        return AuthService.getCurrentUser().then(function (response) {\r\n                            if (response) {\r\n                                return response;\r\n                            }\r\n                        });\r\n                    }\r\n                }\r\n            })\r\n            .state('app.leads.list', {\r\n                url: '/?created_start_date&created_end_date&user_id__in&tasks__realization_date_check&tasks__is_traking_task&' +\r\n                  'with_concession&without_pending_tasks&tasks__planified_realization_date__lt&tasks__realization_date__isnull&' +\r\n                  'without_pending_trackings&result&source__channel_id__in&tasks__media__in&result__isnull&lead_managements__event&' +\r\n                  'without_outgoing_calls',\r\n                views: {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/leads/views/list/leads.html',\r\n                        controller: 'LeadsController as vm'\r\n                    }\r\n                },\r\n                resolve: {\r\n                    Leads: function (currentUser, $rootScope, leadsService, $stateParams) {\r\n                        leadsService.leads.filters=$stateParams;\r\n                        if(!$stateParams.created_start_date){\r\n                          leadsService.leads.filters.user_id__in=currentUser.id;\r\n                        }\r\n                        return leadsService.getLeads();\r\n                    },\r\n                    Kpis: function (currentUser, $rootScope, eventsService) {\r\n                        eventsService.kpis.filters={};\r\n                        return eventsService.getKpis();\r\n                    }\r\n                },\r\n                bodyClass: 'leads'\r\n            })\r\n            .state('app.leads.board', {\r\n                url: '/board',\r\n                views: {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/leads/views/board/board-view.html',\r\n                        controller: 'BoardViewController as vm'\r\n                    }\r\n                },\r\n                resolve: {\r\n                    Today: function(){\r\n                        var d=new Date();\r\n                        d.setHours(0,0,0,0);\r\n                        return d;\r\n                    },\r\n                    PageSize: function(){\r\n                        return 10;\r\n                    },\r\n                    LeadsNews: function (currentUser, leadsService, Today, PageSize) {\r\n                        leadsService.leadsNews.filters={};\r\n                        leadsService.leadsNews.filters.page_size=PageSize;\r\n                        leadsService.leadsNews.filters.page=1;\r\n                        leadsService.leadsNews.filters.ordering='created';\r\n                        leadsService.leadsNews.filters.with_concession=true;\r\n                        return leadsService.getLeadsNews();\r\n                    },\r\n                    LeadsAttended: function (currentUser, leadsService, Today, PageSize) {\r\n                        leadsService.leadsAttended.filters={};\r\n                        leadsService.leadsAttended.filters.page_size=PageSize;\r\n                        leadsService.leadsAttended.filters.page=1;;\r\n                        leadsService.leadsAttended.filters.ordering='created';\r\n                        leadsService.leadsAttended.filters.with_concession=true;\r\n                        return leadsService.getLeadsAttended();\r\n                    },\r\n                    LeadsCommercialManagements: function (currentUser, leadsService, Today, PageSize) {\r\n                        leadsService.leadsCommercialManagements.filters={};\r\n                        leadsService.leadsCommercialManagements.filters.page_size=PageSize;\r\n                        leadsService.leadsCommercialManagements.filters.page=1;\r\n                        leadsService.leadsCommercialManagements.filters.ordering='lead_task_date';\r\n                        leadsService.leadsCommercialManagements.filters.with_concession=true;\r\n                        return leadsService.getLeadsCommercialManagements();\r\n                    },\r\n                    LeadsTracings: function (currentUser, leadsService, Today, PageSize) {\r\n                        leadsService.leadsTracings.filters={};\r\n                        leadsService.leadsTracings.filters.page_size=PageSize;\r\n                        leadsService.leadsTracings.filters.page=1;\r\n                        leadsService.leadsTracings.filters.ordering='lead_task_date';\r\n                        leadsService.leadsTracings.filters.with_concession=true;\r\n                        return leadsService.getLeadsTracings();\r\n                    },\r\n                    LeadsEnds: function (currentUser, leadsService, Today, PageSize) {\r\n                        leadsService.leadsEnds.filters={};\r\n                        leadsService.leadsEnds.filters.page_size=PageSize;\r\n                        leadsService.leadsEnds.filters.page=1;\r\n                        leadsService.leadsEnds.filters.with_concession=true;\r\n                        return leadsService.getLeadsEnds();\r\n                    },\r\n                    Actions: function(currentUser, leadActionsService){\r\n                        return leadActionsService.getLeadActionsColumn();\r\n                    }\r\n                },\r\n                bodyClass: 'leads'\r\n            })\r\n            .state('app.leads.allboard', {\r\n                url: '/all',\r\n                views: {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/leads/views/board/board-view.html',\r\n                        controller: 'BoardViewController as vm'\r\n                    }\r\n                },\r\n                resolve: {\r\n                    PageSize: function(){\r\n                        return 10;\r\n                    },\r\n                    LeadsNews: function (currentUser, leadsService, PageSize) {\r\n                        leadsService.leadsNews.filters={};\r\n                        leadsService.leadsNews.filters.page_size=PageSize;\r\n                        leadsService.leadsNews.filters.with_concession=true;\r\n                        return leadsService.getLeadsNews();\r\n                    },\r\n                    LeadsAttended: function (currentUser, leadsService, PageSize) {\r\n                        leadsService.leadsAttended.filters={};\r\n                        leadsService.leadsAttended.filters.page_size=PageSize;\r\n                        leadsService.leadsAttended.filters.with_concession=true;\r\n                        return leadsService.getLeadsAttended();\r\n                    },\r\n                    LeadsCommercialManagements: function (currentUser, leadsService, PageSize) {\r\n                        leadsService.leadsCommercialManagements.filters={};\r\n                        leadsService.leadsCommercialManagements.filters.page_size=PageSize;\r\n                        leadsService.leadsCommercialManagements.filters.with_concession=true;\r\n                        return leadsService.getLeadsCommercialManagements();\r\n                    },\r\n                    LeadsTracings: function (currentUser, leadsService, PageSize) {\r\n                        leadsService.leadsTracings.filters={};\r\n                        leadsService.leadsTracings.filters.page_size=PageSize;\r\n                        leadsService.leadsTracings.filters.with_concession=true;\r\n                        return leadsService.getLeadsTracings();\r\n                    },\r\n                    LeadsEnds: function (currentUser, leadsService, PageSize) {\r\n                        leadsService.leadsEnds.filters={};\r\n                        leadsService.leadsEnds.filters.page_size=PageSize;\r\n                        leadsService.leadsEnds.filters.with_concession=true;\r\n                        return leadsService.getLeadsEnds();\r\n                    },\r\n                    Actions: function(){\r\n                        return false;\r\n                    }\r\n                },\r\n                bodyClass: 'leads'\r\n            })\r\n            .state('app.leads.get', {\r\n                abstract: true,\r\n                url: '/:lead/',\r\n                resolve:{\r\n                    Lead: function (leadsService,$stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLead($stateParams.lead);\r\n                        }\r\n                        leadsService.lead.data = {};\r\n                        return leadsService.getEmptyLead();\r\n                    },\r\n                    Tasks: function (Lead, tasksService) {\r\n                        tasksService.tasks.data=Lead.request.task;\r\n                        tasksService.tasks.count=Lead.request.task.length;\r\n                        return tasksService.tasks;\r\n                    },\r\n                    GasTypes: function (gasTypesService) {\r\n                        return gasTypesService.getGasTypes();\r\n                    },\r\n                    Concessionaire: function (Lead, concessionairesService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return Lead.concessionaire_data;\r\n                        }\r\n                        return {};\r\n                    },\r\n                    PageSize: function(){\r\n                      return 10;\r\n                    },\r\n                    LeadsNews: function (currentUser, leadsService, PageSize, Lead) {\r\n                      leadsService.leadsNews.filters={};\r\n                      if(Lead.client){\r\n                        leadsService.leadsNews.filters.client__phone__icontains=Lead.client.phone;\r\n                        leadsService.leadsNews.filters.client__email__icontains=Lead.client.email;\r\n                      }\r\n                      leadsService.leadsNews.filters.id_excluded=Lead.id || 0;\r\n                      leadsService.leadsNews.filters.page_size=PageSize;\r\n                      leadsService.leadsNews.filters.ordering='created';\r\n                      leadsService.leadsNews.filters.with_concession=true;\r\n                      return leadsService.getLeadsNews();\r\n                    },\r\n                    LeadsAttended: function (currentUser, leadsService, PageSize, Lead) {\r\n                      leadsService.leadsAttended.filters={};\r\n                      if(Lead.client) {\r\n                        leadsService.leadsAttended.filters.client__phone__icontains = Lead.client.phone;\r\n                        leadsService.leadsAttended.filters.client__email__icontains = Lead.client.email;\r\n                      }\r\n                      leadsService.leadsAttended.filters.id_excluded=Lead.id || 0;\r\n                      leadsService.leadsAttended.filters.page_size=PageSize;\r\n                      leadsService.leadsAttended.filters.ordering='created';\r\n                      leadsService.leadsAttended.filters.with_concession=true;\r\n                      return leadsService.getLeadsAttended();\r\n                    },\r\n                    LeadsCommercialManagements: function (currentUser, leadsService, PageSize, Lead) {\r\n                      leadsService.leadsCommercialManagements.filters={};\r\n                      if(Lead.client) {\r\n                        leadsService.leadsCommercialManagements.filters.client__phone__icontains = Lead.client.phone;\r\n                        leadsService.leadsCommercialManagements.filters.client__email__icontains = Lead.client.email;\r\n                      }\r\n                      leadsService.leadsCommercialManagements.filters.id_excluded=Lead.id || 0;\r\n                      leadsService.leadsCommercialManagements.filters.page_size=PageSize;\r\n                      leadsService.leadsCommercialManagements.filters.ordering='lead_task_date';\r\n                      leadsService.leadsCommercialManagements.filters.with_concession=true;\r\n                      return leadsService.getLeadsCommercialManagements();\r\n                    },\r\n                    LeadsTracings: function (currentUser, leadsService, PageSize, Lead) {\r\n                      leadsService.leadsTracings.filters={};\r\n                      if(Lead.client) {\r\n                        leadsService.leadsTracings.filters.client__phone__icontains = Lead.client.phone;\r\n                        leadsService.leadsTracings.filters.client__email__icontains = Lead.client.email;\r\n                      }\r\n                      leadsService.leadsTracings.filters.id_excluded=Lead.id || 0;\r\n                      leadsService.leadsTracings.filters.page_size=PageSize;\r\n                      leadsService.leadsTracings.filters.ordering='lead_task_date';\r\n                      leadsService.leadsTracings.filters.with_concession=true;\r\n                      return leadsService.getLeadsTracings();\r\n                    },\r\n                    LeadsEnds: function (currentUser, leadsService, PageSize, Lead) {\r\n                      leadsService.leadsEnds.filters={};\r\n                      if(Lead.client) {\r\n                        leadsService.leadsEnds.filters.client__phone__icontains = Lead.client.phone;\r\n                        leadsService.leadsEnds.filters.client__email__icontains = Lead.client.email;\r\n                      }\r\n                      leadsService.leadsEnds.filters.id_excluded=Lead.id || 0;\r\n                      leadsService.leadsEnds.filters.page_size=PageSize;\r\n                      leadsService.leadsEnds.filters.with_concession=true;\r\n                      return leadsService.getLeadsEnds();\r\n                    },\r\n                }\r\n            })\r\n            .state('app.leads.get.detail', {\r\n                url      : 'detail',\r\n                views    : {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/leads/views/detail/lead.html',\r\n                        controller : 'LeadController as vm'\r\n                    }\r\n                },\r\n                bodyClass: 'todo'\r\n            })\r\n            .state('app.leads.get.edit', {\r\n                //Estos parámetros get son para el ACD\r\n                url      : 'edit?source&phone&acd&user',\r\n                views    : {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/leads/views/edit/lead.html',\r\n                        controller : 'LeadEditController as vm'\r\n                    }\r\n                },\r\n                resolve:{\r\n                    Concessionaire: function (Lead, concessionairesService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return Lead.concessionaire_data;\r\n                        }\r\n                        return {};\r\n                    },\r\n                    Source: function (sourcesService, $stateParams) {\r\n                        if($stateParams.source){\r\n                            return sourcesService.getSource($stateParams.source);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsIncomingCalls: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsIncomingCalls($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsOutgoingCalls: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsOutgoingCalls($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsHistory: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsHistory($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsActivity: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsActivity($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    StartCall: function () {\r\n                        return false;\r\n                    }\r\n                },\r\n                bodyClass: 'todo'\r\n            })\r\n            .state('app.leads.get.call', {\r\n                //Estos parámetros get son para el ACD\r\n                url      : 'call',\r\n                views    : {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/leads/views/edit/lead.html',\r\n                        controller : 'LeadEditController as vm'\r\n                    }\r\n                },\r\n                resolve:{\r\n                    Concessionaire: function (Lead, concessionairesService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return Lead.concessionaire_data;\r\n                        }\r\n                        return {};\r\n                    },\r\n                    Source: function (sourcesService, $stateParams) {\r\n                        if($stateParams.source){\r\n                            return sourcesService.getSource($stateParams.source);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsIncomingCalls: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsIncomingCalls($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsOutgoingCalls: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsOutgoingCalls($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsHistory: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsHistory($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    LeadsActivity: function (leadsService, $stateParams) {\r\n                        if($stateParams.lead>0){\r\n                            return leadsService.getLeadsActivity($stateParams.lead);\r\n                        }\r\n                        return {};\r\n                    },\r\n                    StartCall: function () {\r\n                        return true;\r\n                    }\r\n                },\r\n                bodyClass: 'todo'\r\n            });\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n  angular\r\n    .module('app.leads')\r\n    .controller('LeadsController', LeadsController);\r\n\r\n  /** @ngInject */\r\n  function LeadsController($scope, currentUser, leadsService, Leads, Kpis, NotifyService, leadStatusService, $mdSidenav,\r\n                           usersService, concessionairesService, originsService, channelsService, vehiclesService,\r\n                           taskTypesService, mediaTypesService, eventsService, $q, $timeout, cacheFactory, leadResultsService,\r\n                           $mdDialog, $rootScope, $document, DebounceService, $state, gettextCatalog, $stateParams) {\r\n    var vm = this;\r\n    // Data\r\n    vm.user = currentUser;\r\n    vm.leads = Leads;\r\n    vm.kpis = Kpis;\r\n\r\n    vm.results=leadResultsService.newLeadResults;\r\n    vm.resultReasons=leadResultsService.resultReasons;\r\n\r\n    vm.filters = {\r\n      search: \"\",\r\n      date_start: null,\r\n      date_end: null,\r\n      created_start_date: null,\r\n      created_end_date: null,\r\n      user_data: [vm.user],\r\n      concessionaire__in_data: [],\r\n      status_data: [],\r\n      origin_data: [],\r\n      channel_data: [],\r\n      tasks_media_data: [],\r\n      brand_data: [],\r\n      tasks_type_data: [],\r\n      tasks_tracing_data: []\r\n    };\r\n\r\n    if($stateParams.created_start_date) {\r\n      vm.filters = Object.assign({}, $stateParams, vm.filters);\r\n      vm.filters.created_start_date = parseISOString($stateParams.created_start_date);\r\n      vm.filters.created_end_date = parseISOString($stateParams.created_end_date);\r\n      vm.filters.user_data = [];\r\n    }\r\n\r\n    vm.leadStatus = leadStatusService.leadStatus;\r\n\r\n    // Watchers\r\n    $scope.$watch('vm.leads.filters', DebounceService(leadsService.getLeads, 300), true);\r\n    $scope.$watch('vm.kpis.filters', DebounceService(eventsService.getKpis, 300), true);\r\n\r\n\r\n    // Methods\r\n    vm.goLead = goLead;\r\n    vm.toggleKpi = toggleKpi;\r\n    vm.changeOrder = changeOrder;\r\n    vm.changeFilter = changeFilter;\r\n    vm.toggleSidenav = toggleSidenav;\r\n    vm.setScore = setScore;\r\n    vm.getUsers = getUsers;\r\n    vm.getFullUserName = getFullUserName;\r\n    vm.getConcessionaires = getConcessionaires;\r\n    vm.getOrigins = getOrigins;\r\n    vm.getChannels = getChannels;\r\n    vm.getTaskMedia = getTaskMedia;\r\n    vm.getBrands = getBrands;\r\n    vm.getTaskTypes = getTaskTypes;\r\n    vm.getBooleans = getBooleans;\r\n    vm.getRequestTypes = getRequestTypes;\r\n    vm.getStatusLead = getStatusLead;\r\n    vm.setFilters = setFilters;\r\n    vm.copySearch = copySearch;\r\n    vm.getDocument = getDocument;\r\n\r\n    //////////\r\n    function parseISOString(s) {\r\n      if(s){\r\n        var b = s.split(/\\D+/);\r\n        return new Date(Date.UTC(b[0], --b[1], b[2], b[3], b[4], b[5], b[6]));\r\n      }\r\n      return null;\r\n    }\r\n\r\n    function goLead(lead) {\r\n      var url = $state.href('app.leads.get.edit', {lead: lead.id});\r\n      window.open(url,'_blank');\r\n    }\r\n\r\n    /**\r\n     * Activa/Desactiva el filtro del kpi\r\n     *\r\n     * @param item\r\n     */\r\n    function toggleKpi(item) {\r\n      for (var kpi in vm.kpis.data) {\r\n        for (var k in vm.kpis.data[kpi].kpis) {\r\n          vm.kpis.data[kpi].kpis[k].active = false;\r\n        }\r\n      }\r\n      if (vm.leads.filters.kpi_filter === item.filter_key) {\r\n        item.active = false;\r\n        vm.leads.filters.kpi_filter = null;\r\n      } else {\r\n        item.active = true;\r\n        vm.leads.filters.kpi_filter = item.filter_key;\r\n      }\r\n    }\r\n    /**\r\n     * Ordena la tabla\r\n     *\r\n     * @param field\r\n     */\r\n    function changeOrder(field) {\r\n      if(vm.leads.filters.ordering===field){\r\n        vm.leads.filters.ordering='-'+field;\r\n      }else{\r\n        vm.leads.filters.ordering=field;\r\n      }\r\n    }\r\n\r\n\r\n\r\n    /**\r\n     * Toggle sidenav\r\n     *\r\n     * @param sidenavId\r\n     */\r\n    function toggleSidenav(sidenavId) {\r\n      $mdSidenav(sidenavId).toggle();\r\n    }\r\n\r\n    //FILTERS SIDENAV\r\n\r\n    /**\r\n     * Change filters\r\n     *\r\n     * @param key\r\n     * @param value\r\n     */\r\n    function changeFilter(key, value) {\r\n      minDateFilter();\r\n      maxDateFilter();\r\n\r\n      if (key === 'last_action_end_date') {\r\n        value.setHours(23, 59, 59, 999);\r\n      }\r\n\r\n      vm.filters[key] = value;\r\n      vm.leads.filters.page = 1;\r\n      vm.leads.filters[key] = value;\r\n\r\n    }\r\n\r\n    function minDateFilter() {\r\n      if (vm.filters.date_end) {\r\n        vm.minDate = moment(vm.filters.date_end).subtract(30, 'd').toDate();\r\n      } else {\r\n        vm.minDate = null;\r\n      }\r\n\r\n    }\r\n\r\n    function maxDateFilter() {\r\n      if (vm.filters.date_start) {\r\n        vm.maxDate = moment(vm.filters.date_start).add(30, 'd').toDate();\r\n      } else {\r\n        vm.maxDate = null;\r\n      }\r\n    }\r\n\r\n    function setScore(score) {\r\n      if (vm.filters.score === score) {\r\n        vm.filters.score = null;\r\n      } else {\r\n        vm.filters.score = score;\r\n      }\r\n      //vm.changeFilter('score', vm.filters.score)\r\n    }\r\n\r\n    /* Usuarios */\r\n    function getUsers(searchText) {\r\n      var deferred = $q.defer();\r\n      var users = angular.copy(cacheFactory.usersService.get(searchText));\r\n      if(!users){\r\n        usersService.users.filters = {};\r\n        usersService.users.filters.search = searchText;\r\n        usersService.users.filters.page_size = \"50\";\r\n        usersService.users.filters.is_complex = false;\r\n        usersService.getUsers(searchText).then(function (users) {\r\n          cacheFactory.usersService.put(searchText, users);\r\n          deferred.resolve(excludeArr(users.data, vm.filters.user_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(users.data, vm.filters.user_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    function getFullUserName(user) {\r\n      return user.first_name + \" \" + user.last_name;\r\n    }\r\n\r\n    /* Concesionarios */\r\n    function getConcessionaires(searchText) {\r\n      var deferred = $q.defer();\r\n      var concessionaires = angular.copy(cacheFactory.concessionairesService.get(searchText));\r\n      if(!concessionaires){\r\n        concessionairesService.concessionaires.filters = {};\r\n        concessionairesService.concessionaires.filters.search = searchText;\r\n        concessionairesService.concessionaires.filters.page_size = \"50\";\r\n        concessionairesService.concessionaires.filters.is_complex = false;\r\n        concessionairesService.getConcessionaires().then(function (concessionaires) {\r\n          cacheFactory.concessionairesService.put(searchText, concessionaires);\r\n          deferred.resolve(excludeArr(concessionaires.data, vm.filters.concessionaire__in_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(concessionaires.data, vm.filters.concessionaire__in_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Orígenes */\r\n    function getOrigins(searchText) {\r\n      var deferred = $q.defer();\r\n      var origins = angular.copy(cacheFactory.originsService.get(searchText));\r\n      if(!origins){\r\n        originsService.getAllOrigins(searchText).then(function (origins) {\r\n          cacheFactory.originsService.put(searchText, origins);\r\n          deferred.resolve(excludeArr(origins,vm.filters.origin_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(origins, vm.filters.origin_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Canales */\r\n    function getChannels(searchText) {\r\n      var deferred = $q.defer();\r\n      var channels = angular.copy(cacheFactory.channelsService.get(searchText));\r\n      if(!channels){\r\n        channelsService.getAllChannels(searchText).then(function (channels) {\r\n          cacheFactory.channelsService.put(searchText, channels);\r\n          deferred.resolve(excludeArr(channels,vm.filters.channel_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(channels, vm.filters.channel_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Task Media */\r\n    function getTaskMedia(searchText) {\r\n      var deferred = $q.defer();\r\n\r\n      var t = [\r\n        {id: \"Whatsapp\", name: \"Whatsapp\"},\r\n        {id: \"Phone\", name: \"Teléfono\"},\r\n        {id: \"SMS\", name: \"SMS\"},\r\n        {id: \"E-mail\", name: \"Email\"},\r\n        {id: \"face\", name: \"Presencial\"}\r\n      ]\r\n      deferred.resolve(excludeArr(t,vm.filters.tasks_media_data));\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Marcas */\r\n    function getBrands(searchText) {\r\n      var deferred = $q.defer();\r\n      var brands = angular.copy(cacheFactory.vehiclesService.get(searchText));\r\n      if(!brands){\r\n        vehiclesService.getBrands(searchText).then(function (brands) {\r\n          cacheFactory.vehiclesService.put(searchText, brands);\r\n          deferred.resolve(excludeArr(brands,vm.filters.brand_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(brands, vm.filters.brand_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Task types */\r\n    function getTaskTypes(tracing, searchText) {\r\n      var deferred = $q.defer();\r\n      var res = angular.copy(cacheFactory.taskTypesService.get(searchText+tracing));\r\n      if(!res){\r\n        taskTypesService.getTaskTypes(tracing).then(function (res) {\r\n          cacheFactory.taskTypesService.put(searchText+tracing, res);\r\n          if(tracing){\r\n            deferred.resolve(excludeArr(res,vm.filters.tasks_tracing_data, 'key'));\r\n          }else{\r\n            deferred.resolve(excludeArr(res,vm.filters.tasks_type_data, 'key'));\r\n          }\r\n        });\r\n      }else{\r\n        if(tracing){\r\n          deferred.resolve(excludeArr(res,vm.filters.tasks_tracing_data, 'key'));\r\n        }else{\r\n          deferred.resolve(excludeArr(res,vm.filters.tasks_type_data, 'key'));\r\n        }\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* boolean select */\r\n    function getBooleans() {\r\n      var deferred = $q.defer();\r\n\r\n      var b = [\r\n        {id: true, name: \"Vencida\"},\r\n        {id: false, name: \"No vencida\"}\r\n      ]\r\n      deferred.resolve(b);\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Request type */\r\n    function getRequestTypes() {\r\n      var deferred = $q.defer();\r\n\r\n      var t= [\r\n        {id: 'tarea', name: gettextCatalog.getString('Tarea')},\r\n        {id: 'seguimiento', name: gettextCatalog.getString('Seguimiento')},\r\n      ]\r\n      deferred.resolve(t);\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Status lead */\r\n    function getStatusLead() {\r\n      var deferred = $q.defer();\r\n\r\n      var status= [\r\n        {id: 'new', name: gettextCatalog.getString('Leads no atendidos')},\r\n        {id: 'attended', name: gettextCatalog.getString('Leads atendidos')},\r\n        {id: 'commercial_management', name: gettextCatalog.getString('Tareas pendientes')},\r\n        {id: 'tracing', name: gettextCatalog.getString('Seguimiento')},\r\n        {id: 'end', name: gettextCatalog.getString('Leads cerrados')}\r\n      ]\r\n      deferred.resolve(excludeArr(status,vm.filters.status_data));\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    function setFilters() {\r\n      //kpis\r\n      //vm.kpis.filters.start=moment(vm.filters.date_start).format(\"YYYY-MM-DD\");\r\n      //vm.kpis.filters.end=moment(vm.filters.date_end).add(1,'d').format(\"YYYY-MM-DD\");\r\n\r\n      //leads\r\n      var tasks_type_data = vm.filters.tasks_type_data.map(function (e) {\r\n        return e.key;\r\n      }).toString();\r\n      var tasks_tracing_data = vm.filters.tasks_tracing_data.map(function (e) {\r\n        return e.key;\r\n      }).toString();\r\n      if (tasks_type_data !== \"\" && tasks_tracing_data !== \"\") {\r\n        tasks_type_data += \",\";\r\n      }\r\n      tasks_type_data += tasks_tracing_data;\r\n\r\n      var f = {\r\n        with_concession: vm.filters.with_concession,\r\n        search: vm.filters.search,\r\n        score: vm.filters.score,\r\n        date_start: vm.filters.date_start,\r\n        date_end: vm.filters.date_end,\r\n        created_start_date: vm.filters.created_start_date,\r\n        created_end_date: vm.filters.created_end_date,\r\n        result:vm.filters.result,\r\n        result_reason:vm.filters.result_reason,\r\n        status__in:vm.filters.status_data.map(function (e) { return e.id }).toString(),\r\n        user_id__in: vm.filters.user_id__in,\r\n        concessionaire__in: vm.filters.concessionaire__in_data.map(function (e) {\r\n          return e.id\r\n        }).toString(),\r\n        source__origin_id__in: vm.filters.origin_data.map(function (e) {\r\n          return e.id\r\n        }).toString(),\r\n        source__channel_id__in: vm.filters.channel_data.map(function (e) {\r\n          return e.id\r\n        }).toString(),\r\n        tasks__media__in: vm.filters.tasks_media_data.map(function (e) {\r\n          return e.id\r\n        }).toString(),\r\n        vehicles__brand_model__in: vm.filters.brand_data.map(function (e) {\r\n          return e.name + \",\" + e.name + \"___\" + e.id\r\n        }).toString(),\r\n        vehicles__model__icontains: vm.filters.model,\r\n        vehicles__version__icontains: vm.filters.version,\r\n        tasks__type__in: tasks_type_data,\r\n      };\r\n\r\n      if (vm.filters.user_data.length > 0) {\r\n        f.user_id__in = vm.filters.user_data.map(function (e) {\r\n          return e.id;\r\n        }).toString();\r\n      }\r\n\r\n      if (vm.filters.overdue) {\r\n        //Tarea vencida\r\n        if (vm.filters.overdue && vm.filters.overdue.id) {\r\n          f.tasks__planified_realization_date__lt = moment().format();\r\n          f.tasks__planified_realization_date__gt = null;\r\n        } else { //Tarea no vencida\r\n          f.tasks__planified_realization_date__gt = moment().format();\r\n          f.tasks__planified_realization_date__lt = null;\r\n        }\r\n        f.tasks__realization_date_check = false;\r\n        f.tasks__tracking_date_check = false;\r\n      } else {\r\n        f.tasks__planified_realization_date__lt = null;\r\n        f.tasks__planified_realization_date__gt = null;\r\n        f.tasks__realization_date_check = null;\r\n        f.tasks__tracking_date_check = null;\r\n      }\r\n\r\n      for (var i in f) {\r\n        changeFilter(i, f[i]);\r\n      }\r\n    }\r\n\r\n    function copySearch(item) {\r\n      var a = angular.copy(vm[item]);\r\n      if(a){\r\n        $timeout(function () {\r\n          vm[item]=a;\r\n        },100)\r\n      }\r\n    }\r\n\r\n    function excludeArr(arr1, arr2, key) {\r\n      if(!key){\r\n        key='id';\r\n      }\r\n      for(var i=arr1.length-1; i >= 0; i--) {\r\n        for(var j=arr2.length-1; j >= 0; j--) {\r\n          if(arr1[i] && arr1[i][key] === arr2[j][key])\r\n          {\r\n            arr1.splice(i,1);\r\n          }\r\n        }\r\n      }\r\n      return arr1;\r\n    }\r\n\r\n    function getDocument() {\r\n      setFilters();\r\n      var f = angular.copy(vm.leads.filters);\r\n      return concessionairesService.getDocument(f).then(function (response) {\r\n        downloadFile(response, \"leads.xls\", \"leads.xls\");\r\n      }, function (error) {\r\n        NotifyService.errorMessage(gettextCatalog.getString(\"Error al exportar leads\"));\r\n      });\r\n    }\r\n\r\n    //Descarga cualquier tipo de fichero\r\n    function downloadFile(response, name, type) {\r\n      var blob = new Blob([response], {type: type});\r\n\r\n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n        window.navigator.msSaveOrOpenBlob(blob);\r\n      } else {\r\n        var link = document.createElement('a');\r\n        link.href = window.URL.createObjectURL(blob);\r\n        link.download = name;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      }\r\n    }\r\n\r\n  }\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.leads')\r\n    .controller('BoardViewController', BoardViewController);\r\n\r\n  /** @ngInject */\r\n  function BoardViewController($document, $window, $timeout, $mdDialog, msUtils, leadsService, LeadsNews, LeadsAttended, Actions, leadStatusService,\r\n                               LeadsCommercialManagements, leadResultsService, LeadsTracings, LeadsEnds, scoresService, NotifyService,\r\n                               usersService, concessionairesService, originsService, channelsService, vehiclesService, currentUser,\r\n                               cacheFactory, taskTypesService, mediaTypesService, $scope, DebounceService, $mdSidenav, $q, gettextCatalog) {\r\n    var vm = this;\r\n    vm.leadStatus = leadStatusService.leadStatus;\r\n    vm.user=currentUser;\r\n\r\n    vm.results=leadResultsService.newLeadResults;\r\n    vm.resultReasons=leadResultsService.resultReasons;\r\n\r\n    // Data\r\n    vm.board = {\r\n      lists: [\r\n        {id: 'new', name: gettextCatalog.getString('Leads no atendidos'), show: true},\r\n        {id: 'attended', name: gettextCatalog.getString('Leads atendidos por Comercial/Cualificado'), show: true},\r\n        {id: 'commercial_management', name: gettextCatalog.getString('Tareas pendientes'), show: true},\r\n        {id: 'tracing', name: gettextCatalog.getString('Seguimiento'), show: true},\r\n        {id: 'end', name: gettextCatalog.getString('Leads cerrados'), show: true}\r\n      ]\r\n    };\r\n\r\n    vm.leads = {\r\n      new: LeadsNews,\r\n      attended: LeadsAttended,\r\n      commercial_management: LeadsCommercialManagements,\r\n      tracing: LeadsTracings,\r\n      end: LeadsEnds,\r\n    };\r\n\r\n    vm.hasFilterAdvance=false;\r\n    vm.filters = {\r\n      with_concession: true,\r\n      search: \"\",\r\n      date_start: LeadsNews.filters.created_start_date || null,\r\n      date_end: LeadsNews.filters.created_end_date || null,\r\n      created_start_date: null,\r\n      created_end_date: null,\r\n      user_data: [],\r\n      concessionaire__in_data: [],\r\n      status_data: [],\r\n      origin_data: [],\r\n      channel_data: [],\r\n      tasks_media_data: [],\r\n      brand_data: [],\r\n      tasks_type_data: [],\r\n      tasks_tracing_data: []\r\n    };\r\n\r\n    vm.taskTypes = taskTypesService.taskTypes;\r\n    vm.mediaTypes = mediaTypesService.mediaTypes;\r\n    vm.leadResults = leadResultsService.leadResults;\r\n    vm.leadResultsErrors = leadResultsService.leadResultsErrors;\r\n\r\n\r\n    //Columna de actividades\r\n    // vm.showColumn = !!Actions;\r\n    vm.showColumn = false; //nos pide quitar agenda inteligente, comento la linea anterior por si volviese a pedirlo\r\n    vm.taskTypes = taskTypesService.taskTypes;\r\n    vm.tabs = [\r\n      {\r\n        key: 'leadsActivityCommercialManagement',\r\n        title: gettextCatalog.getString('Tareas')\r\n      },\r\n      {\r\n        key: 'leadsActivityTracing',\r\n        title: gettextCatalog.getString('Seguimiento')\r\n      }\r\n    ];\r\n\r\n\r\n    vm.leadsActivityCommercialManagement = {\r\n      dataFuture: [],\r\n      dataToday: [],\r\n      dataYesterday: [],\r\n      dataOthers: [],\r\n      count: 0\r\n    };\r\n\r\n    //Columna de actividades\r\n    vm.leadsActivityTracing = {\r\n      dataFuture: [],\r\n      dataToday: [],\r\n      dataYesterday: [],\r\n      dataOthers: [],\r\n      count: 0\r\n    };\r\n\r\n    vm.activities = [\r\n      // {\r\n      //     title:gettextCatalog.getString(\"Próximamente\"),\r\n      //     key:'dataFuture'\r\n      // },\r\n      {\r\n        title: gettextCatalog.getString(\"Hoy\"),\r\n        key: 'dataToday'\r\n      },\r\n      {\r\n        title: gettextCatalog.getString(\"Ayer\"),\r\n        key: 'dataYesterday'\r\n      },\r\n      {\r\n        title: gettextCatalog.getString(\"Anteriormente\"),\r\n        key: 'dataOthers'\r\n      }\r\n    ];\r\n\r\n    // Watchers\r\n    $scope.$watch('vm.leads.new.filters', DebounceService(leadsService.getLeadsNews, 300), true);\r\n    $scope.$watch('vm.leads.attended.filters', DebounceService(leadsService.getLeadsAttended, 300), true);\r\n    $scope.$watch('vm.leads.commercial_management.filters', DebounceService(leadsService.getLeadsCommercialManagements, 300), true);\r\n    $scope.$watch('vm.leads.tracing.filters', DebounceService(leadsService.getLeadsTracings, 300), true);\r\n    $scope.$watch('vm.leads.end.filters', DebounceService(leadsService.getLeadsEnds, 300), true);\r\n\r\n    // Methods\r\n    vm.changeFilter = changeFilter;\r\n    vm.showMore = showMore;\r\n    vm.toggleInArray = toggleInArray;\r\n    vm.toggleSidenav = toggleSidenav;\r\n    vm.setScore = setScore;\r\n    vm.getUsers = getUsers;\r\n    vm.getFullUserName = getFullUserName;\r\n    vm.getConcessionaires = getConcessionaires;\r\n    vm.getOrigins = getOrigins;\r\n    vm.getChannels = getChannels;\r\n    vm.getTaskMedia = getTaskMedia;\r\n    vm.getBrands = getBrands;\r\n    vm.getTaskTypes = getTaskTypes;\r\n    vm.getBooleans = getBooleans;\r\n    vm.getRequestTypes = getRequestTypes;\r\n    vm.getStatusLead = getStatusLead;\r\n    vm.setFilters = setFilters;\r\n    vm.copySearch = copySearch;\r\n    vm.getDocument = getDocument;\r\n\r\n    //////////\r\n\r\n    init();\r\n\r\n    /**\r\n     * Initialize\r\n     */\r\n    function init() {\r\n      minDateFilter();\r\n      maxDateFilter();\r\n\r\n      $timeout(function () {\r\n        // IE list-content max-height hack\r\n        if (angular.element('html').hasClass('explorer')) {\r\n          // Calculate the height for the first time\r\n          calculateListContentHeight();\r\n\r\n          // Attach calculateListContentHeight function to window resize\r\n          $window.onresize = function () {\r\n            calculateListContentHeight();\r\n          };\r\n        }\r\n      }, 0);\r\n\r\n      //Columna de actividades\r\n      for (var i in Actions) {\r\n        //elegimos si vamos a añadirlo a hoy, ayer o anteriormente\r\n        var key = getKeyActivity(Actions[i]);\r\n\r\n        if (Actions[i].current_lead_status === 'commercial_management' ||\r\n          Actions[i].current_lead_status === 'pending' ||\r\n          Actions[i].current_lead_status === 'new') {\r\n\r\n          if (Actions[i].last_task) {\r\n            vm.leadsActivityCommercialManagement.count++;\r\n            vm.leadsActivityCommercialManagement[key].push(Actions[i]);\r\n          }\r\n        } else if (Actions[i].current_lead_status === 'tracing') {\r\n\r\n          vm.leadsActivityTracing.count++;\r\n          vm.leadsActivityTracing[key].push(Actions[i]);\r\n        }\r\n\r\n      }\r\n    }\r\n\r\n    function getKeyActivity(activity) {\r\n      var date = moment(activity.date).format(\"DD-MM-YYYY\");\r\n      var today = moment().format(\"DD-MM-YYYY\");\r\n      var yesterday = moment().subtract(1, 'd').format('DD-MM-YYYY');\r\n\r\n      if (date === today) {\r\n        return \"dataToday\";\r\n      } else if (date === yesterday) {\r\n        return \"dataYesterday\";\r\n      } else if (validate_fechaMayorQue(today, date)) {\r\n        return \"dataFuture\";\r\n      }\r\n      return \"dataOthers\";\r\n    }\r\n\r\n    function validate_fechaMayorQue(fechaInicial, fechaFinal) {\r\n      var valuesStart = fechaInicial.split(\"-\");\r\n      var valuesEnd = fechaFinal.split(\"-\");\r\n\r\n      // Verificamos que la fecha no sea posterior a la actual\r\n      var dateStart = new Date(valuesStart[2], (valuesStart[1] - 1), valuesStart[0]);\r\n      var dateEnd = new Date(valuesEnd[2], (valuesEnd[1] - 1), valuesEnd[0]);\r\n      return !(dateStart >= dateEnd);\r\n    }\r\n\r\n\r\n    function showMore(id) {\r\n      if (vm.leads[id].filters.page) {\r\n        vm.leads[id].filters.page++;\r\n      } else {\r\n        vm.leads[id].filters.page = 2;\r\n      }\r\n    }\r\n\r\n    /**\r\n     * IE ONLY\r\n     * Calculate the list-content height\r\n     * IE ONLY\r\n     */\r\n    function calculateListContentHeight() {\r\n      var boardEl = angular.element('#board');\r\n      var boardElHeight = boardEl.height();\r\n\r\n      boardEl.find('.list-wrapper').each(function (index, el) {\r\n        // Get the required heights for calculations\r\n        var listWrapperEl = angular.element(el),\r\n          listHeaderElHeight = listWrapperEl.find('.list-header').height(),\r\n          listFooterElHeight = listWrapperEl.find('.list-footer').height();\r\n\r\n        // Calculate the max height\r\n        var maxHeight = boardElHeight - listHeaderElHeight - listFooterElHeight;\r\n\r\n        // Add the max height\r\n        listWrapperEl.find('.list-content').css({'max-height': maxHeight});\r\n      });\r\n    }\r\n\r\n\r\n    /**\r\n     * Toggle in array\r\n     *\r\n     * @param item\r\n     * @param collection\r\n     */\r\n    function toggleInArray(item, collection) {\r\n      var idx = collection.indexOf(item);\r\n      if (idx !== -1) {\r\n        collection.splice(idx, 1);\r\n      } else {\r\n        collection.push(item);\r\n      }\r\n\r\n    }\r\n\r\n    /**\r\n     * Toggle sidenav\r\n     *\r\n     * @param sidenavId\r\n     */\r\n    function toggleSidenav(sidenavId) {\r\n      $mdSidenav(sidenavId).toggle();\r\n    }\r\n\r\n    //FILTERS SIDENAV\r\n\r\n    /**\r\n     * Change filters\r\n     *\r\n     * @param key\r\n     * @param value\r\n     */\r\n    function changeFilter(key, value) {\r\n      minDateFilter();\r\n      maxDateFilter();\r\n\r\n      if (key === 'last_action_end_date') {\r\n        value.setHours(23, 59, 59, 999);\r\n      }\r\n\r\n      vm.filters[key] = value;\r\n      for (var i in vm.leads) {\r\n        vm.leads[i].filters.page = 1;\r\n        vm.leads[i].filters[key] = value;\r\n      }\r\n    }\r\n\r\n    function minDateFilter() {\r\n      if (vm.filters.date_end) {\r\n        vm.minDate = moment(vm.filters.date_end).subtract(30, 'd').toDate();\r\n      } else {\r\n        vm.minDate = null;\r\n      }\r\n\r\n    }\r\n\r\n    function maxDateFilter() {\r\n      if (vm.filters.date_start) {\r\n        vm.maxDate = moment(vm.filters.date_start).add(30, 'd').toDate();\r\n      } else {\r\n        vm.maxDate = null;\r\n      }\r\n    }\r\n\r\n    function setScore(score) {\r\n      if (vm.filters.score === score) {\r\n        vm.filters.score = null;\r\n      } else {\r\n        vm.filters.score = score;\r\n      }\r\n      //vm.changeFilter('score', vm.filters.score)\r\n    }\r\n\r\n    /* Usuarios */\r\n    function getUsers(searchText) {\r\n      var deferred = $q.defer();\r\n      var users = angular.copy(cacheFactory.usersService.get(searchText));\r\n      if(!users){\r\n        usersService.users.filters = {};\r\n        usersService.users.filters.search = searchText;\r\n        usersService.users.filters.page_size = \"50\";\r\n        usersService.users.filters.is_complex = false;\r\n        usersService.getUsers(searchText).then(function (users) {\r\n          cacheFactory.usersService.put(searchText, users);\r\n          deferred.resolve(excludeArr(users.data, vm.filters.user_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(users.data, vm.filters.user_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    function getFullUserName(user) {\r\n      return user.first_name + \" \" + user.last_name;\r\n    }\r\n\r\n    /* Concesionarios */\r\n    function getConcessionaires(searchText) {\r\n      var deferred = $q.defer();\r\n      var concessionaires = angular.copy(cacheFactory.concessionairesService.get(searchText));\r\n      if(!concessionaires){\r\n        concessionairesService.concessionaires.filters = {};\r\n        concessionairesService.concessionaires.filters.search = searchText;\r\n        concessionairesService.concessionaires.filters.page_size = \"50\";\r\n        concessionairesService.concessionaires.filters.is_complex = false;\r\n        concessionairesService.getConcessionaires().then(function (concessionaires) {\r\n          cacheFactory.concessionairesService.put(searchText, concessionaires);\r\n          deferred.resolve(excludeArr(concessionaires.data, vm.filters.concessionaire__in_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(concessionaires.data, vm.filters.concessionaire__in_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Orígenes */\r\n    function getOrigins(searchText) {\r\n      var deferred = $q.defer();\r\n      var origins = angular.copy(cacheFactory.originsService.get(searchText));\r\n      if(!origins){\r\n        originsService.getAllOrigins(searchText).then(function (origins) {\r\n          cacheFactory.originsService.put(searchText, origins);\r\n          deferred.resolve(excludeArr(origins,vm.filters.origin_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(origins, vm.filters.origin_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Canales */\r\n    function getChannels(searchText) {\r\n      var deferred = $q.defer();\r\n      var channels = angular.copy(cacheFactory.channelsService.get(searchText));\r\n      if(!channels){\r\n        channelsService.getAllChannels(searchText).then(function (channels) {\r\n          cacheFactory.channelsService.put(searchText, channels);\r\n          deferred.resolve(excludeArr(channels,vm.filters.channel_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(channels, vm.filters.channel_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Task Media */\r\n    function getTaskMedia(searchText) {\r\n      var deferred = $q.defer();\r\n\r\n      var t = [\r\n        {id: \"Whatsapp\", name: \"Whatsapp\"},\r\n        {id: \"Phone\", name: \"Teléfono\"},\r\n        {id: \"SMS\", name: \"SMS\"},\r\n        {id: \"E-mail\", name: \"Email\"},\r\n        {id: \"face\", name: \"Presencial\"}\r\n      ]\r\n      deferred.resolve(excludeArr(t,vm.filters.tasks_media_data));\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Marcas */\r\n    function getBrands(searchText) {\r\n      var deferred = $q.defer();\r\n      var brands = angular.copy(cacheFactory.vehiclesService.get(searchText));\r\n      if(!brands){\r\n        vehiclesService.getBrands(searchText).then(function (brands) {\r\n          cacheFactory.vehiclesService.put(searchText, brands);\r\n          deferred.resolve(excludeArr(brands,vm.filters.brand_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(brands, vm.filters.brand_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Task types */\r\n    function getTaskTypes(tracing, searchText) {\r\n      var deferred = $q.defer();\r\n      var res = angular.copy(cacheFactory.taskTypesService.get(searchText+tracing));\r\n      if(!res){\r\n        taskTypesService.getTaskTypes(tracing).then(function (res) {\r\n          cacheFactory.taskTypesService.put(searchText+tracing, res);\r\n          if(tracing){\r\n            deferred.resolve(excludeArr(res,vm.filters.tasks_tracing_data, 'key'));\r\n          }else{\r\n            deferred.resolve(excludeArr(res,vm.filters.tasks_type_data, 'key'));\r\n          }\r\n        });\r\n      }else{\r\n        if(tracing){\r\n          deferred.resolve(excludeArr(res,vm.filters.tasks_tracing_data, 'key'));\r\n        }else{\r\n          deferred.resolve(excludeArr(res,vm.filters.tasks_type_data, 'key'));\r\n        }\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* boolean select */\r\n    function getBooleans() {\r\n      var deferred = $q.defer();\r\n\r\n      var b=[\r\n        {id:true,name:\"Vencida\"},\r\n        {id:false,name:\"No vencida\"}\r\n      ]\r\n      deferred.resolve(b);\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Request type */\r\n    function getRequestTypes() {\r\n      var deferred = $q.defer();\r\n\r\n      var t= [\r\n        {id: 'tarea', name: gettextCatalog.getString('Tarea')},\r\n        {id: 'seguimiento', name: gettextCatalog.getString('Seguimiento')},\r\n      ]\r\n      deferred.resolve(t);\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    /* Status lead */\r\n    function getStatusLead() {\r\n      var deferred = $q.defer();\r\n\r\n      var status= [\r\n        {id: 'new', name: gettextCatalog.getString('Leads no atendidos')},\r\n        {id: 'attended', name: gettextCatalog.getString('Leads atendidos')},\r\n        {id: 'commercial_management', name: gettextCatalog.getString('Tareas pendientes')},\r\n        {id: 'tracing', name: gettextCatalog.getString('Seguimiento')},\r\n        {id: 'end', name: gettextCatalog.getString('Leads cerrados')}\r\n      ]\r\n\r\n      deferred.resolve(excludeArr(status,vm.filters.status_data));\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    function setFilters(){\r\n      var tasks_type_data=vm.filters.tasks_type_data.map(function (e) { return e.key }).toString();\r\n      var tasks_tracing_data=vm.filters.tasks_tracing_data.map(function (e) { return e.key }).toString();\r\n      if(tasks_type_data!==\"\" && tasks_tracing_data!==\"\"){\r\n        tasks_type_data+=\",\";\r\n      }\r\n      tasks_type_data+=tasks_tracing_data;\r\n\r\n      var f={\r\n        with_concession:vm.filters.with_concession,\r\n        search:vm.filters.search,\r\n        score:vm.filters.score,\r\n        date_start:vm.filters.date_start,\r\n        date_end:vm.filters.date_end,\r\n        created_start_date: vm.filters.created_start_date,\r\n        created_end_date: vm.filters.created_end_date,\r\n        result:vm.filters.result,\r\n        result_reason:vm.filters.result_reason,\r\n        status__in:vm.filters.status_data.map(function (e) { return e.id }).toString(),\r\n        user_id__in:vm.filters.user_data.map(function (e) { return e.id }).toString(),\r\n        concessionaire__in:vm.filters.concessionaire__in_data.map(function (e) { return e.id }).toString(),\r\n        source__origin_id__in:vm.filters.origin_data.map(function (e) { return e.id }).toString(),\r\n        source__channel_id__in:vm.filters.channel_data.map(function (e) { return e.id }).toString(),\r\n        tasks__media__in:vm.filters.tasks_media_data.map(function (e) { return e.id }).toString(),\r\n        vehicles__brand_model__in:vm.filters.brand_data.map(function (e) { return e.name+\",\"+e.name+\"___\"+e.id }).toString(),\r\n        vehicles__model__icontains:vm.filters.model,\r\n        vehicles__version__icontains:vm.filters.version,\r\n        tasks__type__in:tasks_type_data,\r\n      }\r\n\r\n      if(vm.filters.status_data && vm.filters.status_data.length){\r\n        for(var i in vm.board.lists) {\r\n          vm.board.lists[i].show = false;\r\n        }\r\n        for(var i in vm.board.lists){\r\n          for(var j in vm.filters.status_data){\r\n            if(vm.board.lists[i].id===vm.filters.status_data[j].id) {\r\n              vm.board.lists[i].show = true;\r\n            }\r\n          }\r\n        }\r\n      }else{\r\n        for(var i in vm.board.lists){\r\n          vm.board.lists[i].show=true;\r\n        }\r\n      }\r\n\r\n\r\n\r\n      if(vm.filters.overdue){\r\n        //Tarea vencida\r\n        if(vm.filters.overdue && vm.filters.overdue.id){\r\n          f.tasks__planified_realization_date__lt=moment().format();\r\n          f.tasks__planified_realization_date__gt=null;\r\n        }else{ //Tarea no vencida\r\n          f.tasks__planified_realization_date__gt=moment().format();\r\n          f.tasks__planified_realization_date__lt=null;\r\n        }\r\n        f.tasks__realization_date_check=false;\r\n        f.tasks__tracking_date_check=false;\r\n      }else{\r\n        f.tasks__planified_realization_date__lt=null;\r\n        f.tasks__planified_realization_date__gt=null;\r\n        f.tasks__realization_date_check=null;\r\n        f.tasks__tracking_date_check=null;\r\n      }\r\n\r\n      vm.hasFilterAdvance=false;\r\n      for(var i in f){\r\n        changeFilter(i,f[i]);\r\n        if(f[i] && i!=='user_id__in' && i!=='with_concession'){\r\n          vm.hasFilterAdvance=true;\r\n        }\r\n      }\r\n    }\r\n\r\n    function copySearch(item) {\r\n      var a = angular.copy(vm[item]);\r\n      if(a){\r\n        $timeout(function () {\r\n          vm[item]=a;\r\n        },100)\r\n      }\r\n    }\r\n\r\n    function excludeArr(arr1, arr2, key) {\r\n      if(!key){\r\n        key='id';\r\n      }\r\n      for(var i=arr1.length-1; i >= 0; i--) {\r\n        for(var j=arr2.length-1; j >= 0; j--) {\r\n          if(arr1[i] && arr1[i][key] === arr2[j][key])\r\n          {\r\n            arr1.splice(i,1);\r\n          }\r\n        }\r\n      }\r\n      return arr1;\r\n    }\r\n\r\n    function getDocument(){\r\n      setFilters();\r\n      var f=angular.copy(vm.leads.new.filters);\r\n      return concessionairesService.getDocument(f).then(function(response){\r\n        downloadFile(response,\"leads.xls\",\"leads.xls\");\r\n      }, function(error){\r\n        NotifyService.errorMessage(gettextCatalog.getString(\"Error al exportar leads\"));\r\n      });\r\n    }\r\n\r\n    //Descarga cualquier tipo de fichero\r\n    function downloadFile(response, name, type) {\r\n      var blob = new Blob([response], {type: type});\r\n\r\n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n        window.navigator.msSaveOrOpenBlob(blob);\r\n      }\r\n      else {\r\n        var link = document.createElement('a');\r\n        link.href = window.URL.createObjectURL(blob);\r\n        link.download = name;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      }\r\n    }\r\n  }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadEditController', LeadEditController);\r\n\r\n    /** @ngInject */\r\n    function LeadEditController($scope, currentUser, Lead, leadsService, $rootScope, provincesService, localitiesService,\r\n                                temperaturesService, phonesService, qualificationsService, scoresService, taskTypesService,\r\n                                sourcesService, $document, $stateParams, GasTypes, Tasks, tasksService, Concessionaire,\r\n                                clientsService, emailsService, $state, NotifyService, $mdDialog, $q, acdsService, $timeout,\r\n                                Source, click2callsService, LeadsIncomingCalls, LeadsOutgoingCalls, LeadsHistory, channelsService,\r\n                                vehiclesService, appraisalsService, usersService, LeadsActivity, originsService, gettextCatalog,\r\n                                leadResultsService, leadActionsService, StartCall, leadStatusService, $sce, concessionairesService,\r\n                                LeadsNews, LeadsAttended, LeadsCommercialManagements, LeadsTracings, LeadsEnds, DebounceService) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.lead = angular.copy(Lead);\r\n        vm.tasks = Tasks;\r\n        vm.leadStatus = leadStatusService.leadStatus;\r\n        vm.isOpenFinishLeadBox = false;\r\n        vm.concessionaire = Concessionaire;\r\n        vm.origins = [];\r\n        vm.iframeAdLink=null;\r\n\r\n        vm.clientTypes=[\r\n            {id:'private', name:'Particular'},\r\n            {id:'freelance', name:'Autonomo'},\r\n            {id:'company', name:'Empresa'}\r\n        ]\r\n\r\n        // Data BOARD\r\n        vm.board = {\r\n          lists: [\r\n            {id: 'new', name: gettextCatalog.getString('Leads no atendidos'), show: true},\r\n            {id: 'attended', name: gettextCatalog.getString('Leads atendidos por Comercial/Cualificado'), show: true},\r\n            {id: 'commercial_management', name: gettextCatalog.getString('Tareas pendientes'), show: true},\r\n            {id: 'tracing', name: gettextCatalog.getString('Seguimiento'), show: true},\r\n            {id: 'end', name: gettextCatalog.getString('Leads cerrados'), show: true}\r\n          ]\r\n        };\r\n\r\n        vm.leads = {\r\n          new: LeadsNews,\r\n          attended: LeadsAttended,\r\n          commercial_management: LeadsCommercialManagements,\r\n          tracing: LeadsTracings,\r\n          end: LeadsEnds,\r\n        };\r\n\r\n        vm.filters = {}\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.leads.new.filters', DebounceService(leadsService.getLeadsNews, 300), true);\r\n        $scope.$watch('vm.leads.attended.filters', DebounceService(leadsService.getLeadsAttended, 300), true);\r\n        $scope.$watch('vm.leads.commercial_management.filters', DebounceService(leadsService.getLeadsCommercialManagements, 300), true);\r\n        $scope.$watch('vm.leads.tracing.filters', DebounceService(leadsService.getLeadsTracings, 300), true);\r\n        $scope.$watch('vm.leads.end.filters', DebounceService(leadsService.getLeadsEnds, 300), true);\r\n\r\n        $scope.$watch('vm.leads.new.data', DebounceService(openDuplicateLeadsDialog, 300), true);\r\n        $scope.$watch('vm.leads.attended.data', DebounceService(openDuplicateLeadsDialog, 300), true);\r\n        $scope.$watch('vm.leads.commercial_management.data', DebounceService(openDuplicateLeadsDialog, 300), true);\r\n        $scope.$watch('vm.leads.tracing.data', DebounceService(openDuplicateLeadsDialog, 300), true);\r\n        $scope.$watch('vm.leads.end.data', DebounceService(openDuplicateLeadsDialog, 300), true);\r\n        // END DATA BOARD\r\n\r\n        vm.leadAction = leadActionsService.getEmptyLeadAction(Lead);\r\n        vm.leadsIncomingCalls = LeadsIncomingCalls;\r\n        vm.leadsOutgoingCalls = LeadsOutgoingCalls;\r\n        vm.leadsHistory = {\r\n            dataToday: {},\r\n            dataYesterday: {},\r\n            dataOthers: {},\r\n            count: 0\r\n        };\r\n        vm.histories = [\r\n            {\r\n                title: gettextCatalog.getString(\"Hoy\"),\r\n                key: 'dataToday'\r\n            },\r\n            {\r\n                title: gettextCatalog.getString(\"Ayer\"),\r\n                key: 'dataYesterday'\r\n            },\r\n            {\r\n                title: gettextCatalog.getString(\"Anteriormente\"),\r\n                key: 'dataOthers'\r\n            }\r\n        ];\r\n        vm.leadsActivity = {\r\n            dataFuture: {},\r\n            dataToday: {},\r\n            dataYesterday: {},\r\n            dataOthers: {},\r\n            count: 0\r\n        };\r\n        vm.activities = [\r\n            {\r\n                title: gettextCatalog.getString(\"Próximamente\"),\r\n                key: 'dataFuture'\r\n            },\r\n            {\r\n                title: gettextCatalog.getString(\"Hoy\"),\r\n                key: 'dataToday'\r\n            },\r\n            {\r\n                title: gettextCatalog.getString(\"Ayer\"),\r\n                key: 'dataYesterday'\r\n            },\r\n            {\r\n                title: gettextCatalog.getString(\"Anteriormente\"),\r\n                key: 'dataOthers'\r\n            }\r\n        ];\r\n\r\n        vm.temperatures = temperaturesService.temperatures;\r\n        vm.qualifications = qualificationsService.qualifications;\r\n        vm.scores = scoresService.scores;\r\n        vm.taskTypes = [];\r\n        taskTypesService.getTaskTypes(false).then(function(res){\r\n            vm.taskTypes=res;\r\n            taskTypesService.getTaskTypes(true).then(function(res){\r\n                vm.taskTypes = vm.taskTypes.concat(res);\r\n            });\r\n        });\r\n        vm.gasTypes = GasTypes;\r\n\r\n        vm.results=leadResultsService.newLeadResults;\r\n        vm.resultReasons=leadResultsService.resultReasons;\r\n\r\n        vm.vehicleTypes=[\r\n            {id:'new', name:gettextCatalog.getString('Nuevo')},\r\n            {id:'km0', name:gettextCatalog.getString('Km0')},\r\n            {id:'seminew', name:gettextCatalog.getString('Seminuevo')},\r\n            {id:'used', name:gettextCatalog.getString('Ocasión')}\r\n        ];\r\n        vm.comercialCategories=[\r\n            {id:'request_product', name:gettextCatalog.getString('Producto solicitado')},\r\n            {id:'offered_product', name:gettextCatalog.getString('Producto ofertado')},\r\n        ];\r\n        vm.requestTypes=[\r\n            {id:'new', name:gettextCatalog.getString('Nuevo')},\r\n            {id:'km0', name:gettextCatalog.getString('Kilometro 0')},\r\n            {id:'seminew', name:gettextCatalog.getString('Seminuevo')},\r\n            {id:'used', name:gettextCatalog.getString('Ocasión')},\r\n            {id:'management', name:gettextCatalog.getString('Gerencia')},\r\n            {id:'apv', name:gettextCatalog.getString('Postventa')},\r\n            {id:'acc', name:gettextCatalog.getString('Accesorios')}\r\n        ];\r\n\r\n        vm.gearShifts=[\r\n            {id:'manual', name:gettextCatalog.getString('Manual')},\r\n            {id:'auto', name:gettextCatalog.getString('Automático')}\r\n        ];\r\n\r\n        if ($stateParams.source) {\r\n            vm.lead.source_data = Source;\r\n            vm.lead.source_data_prov = Source;\r\n            vm.lead.concessionaire_data = Source.concession_data;\r\n        }\r\n\r\n        if ($stateParams.phone) {\r\n            vm.lead.client.phone = $stateParams.phone;\r\n        }\r\n\r\n        if ($stateParams.user) {\r\n            vm.lead.user = $stateParams.user;\r\n            usersService.getUser(vm.lead.user).then(function(user){\r\n                vm.lead.user_data=user;\r\n            });\r\n        }\r\n\r\n        vm.week = {};\r\n        vm.week.monday = gettextCatalog.getString(\"Lunes\");\r\n        vm.week.tuesday = gettextCatalog.getString(\"Martes\");\r\n        vm.week.wednesday = gettextCatalog.getString(\"Miércoles\");\r\n        vm.week.thursday = gettextCatalog.getString(\"Jueves\");\r\n        vm.week.friday = gettextCatalog.getString(\"Viernes\");\r\n        vm.week.saturday = gettextCatalog.getString(\"Sábado\");\r\n        vm.week.sunday = gettextCatalog.getString(\"Domingo\");\r\n\r\n        $scope.$on('$stateChangeStart', function (event, toState, toParams, fromState, fromParams) {\r\n            if (fromState.name === \"app.leads.get.edit\") {\r\n\r\n                if ($scope.leadForm.$dirty) {\r\n                    event.preventDefault();\r\n\r\n                    var confirm = $mdDialog.confirm()\r\n                        .title(gettextCatalog.getString('Se han detectado cambios'))\r\n                        .textContent(gettextCatalog.getString('Si abandona esta pantalla perderá los cambios, ¿Desea guardar los cambios?'))\r\n                        .ariaLabel(gettextCatalog.getString('Guardar lead'))\r\n                        .clickOutsideToClose(true)\r\n                        .parent(angular.element(document.body))\r\n                        .ok(gettextCatalog.getString('Guardar'))\r\n                        .cancel(gettextCatalog.getString('Abandonar'));\r\n\r\n                    $mdDialog.show(confirm).then(function () {\r\n                        openSaveLeadDialog();\r\n                    }, function (error) {\r\n                        $scope.leadForm.$setPristine();\r\n                        $state.go(toState.name,{lead:0});\r\n                    });\r\n                }\r\n            }\r\n        });\r\n\r\n        init();\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.lead.client_data', function (n, o) {\r\n            if (n && (!o || n.id !== o.id)) {\r\n                vm.lead.client = n;\r\n            }\r\n        }, true);\r\n\r\n        // Methods\r\n        vm.canEdit = canEdit;\r\n        vm.isDisabled = isDisabled;\r\n        vm.openSaveLeadDialog = openSaveLeadDialog;\r\n        vm.saveLead = saveLead;\r\n        vm.changeStatus = changeStatus;\r\n        vm.finishLead = finishLead;\r\n        vm.saveAndfinishLead = saveAndfinishLead;\r\n        vm.addNote = addNote;\r\n        vm.deleteNote = deleteNote;\r\n        vm.addTag = addTag;\r\n        vm.deleteTag = deleteTag;\r\n        vm.openTaskDialog = openTaskDialog;\r\n        vm.removeTask = removeTask;\r\n        vm.getProvinces = getProvinces;\r\n        vm.getLocalities = getLocalities;\r\n        vm.getBrands = getBrands;\r\n        vm.getModels = getModels;\r\n        vm.getVersions = getVersions;\r\n        vm.getFullNameVersion = getFullNameVersion;\r\n        vm.changeVehicleVersion = changeVehicleVersion;\r\n        vm.getBusinessActivity = getBusinessActivity;\r\n        vm.getSectors = getSectors;\r\n        vm.sendWhatsapp = sendWhatsapp;\r\n        vm.completeAddress = completeAddress;\r\n        vm.getConcessionaires = getConcessionaires;\r\n        vm.getOrigins = getOrigins;\r\n        vm.getAllOrigins = getAllOrigins;\r\n        vm.getChannels = getChannels;\r\n        vm.getAllChannels = getAllChannels;\r\n        vm.changeChannel = changeChannel;\r\n        vm.getExposicion = getExposicion;\r\n        vm.getSources = getSources;\r\n        vm.getFullNamceSource = getFullNamceSource;\r\n        vm.getFullUserName = getFullUserName;\r\n        vm.getClients = getClients;\r\n        vm.openLeadDialog = openLeadDialog;\r\n        vm.openLeadContactDialog = openLeadContactDialog;\r\n        vm.openLeadStatusDialog = openLeadStatusDialog;\r\n        vm.openLeadStatusDateDialog = openLeadStatusDateDialog;\r\n        vm.getLastRealizationDate = getLastRealizationDate;\r\n        vm.datediff = datediff;\r\n        vm.eventClientBlur = eventClientBlur;\r\n        vm.eventClientEmailBlur = eventClientEmailBlur;\r\n        vm.setExtension = setExtension;\r\n        vm.call = call;\r\n        vm.objectSize = objectSize;\r\n        vm.openLeadHistoryDialog = openLeadHistoryDialog;\r\n        vm.openLeadActivityDialog = openLeadActivityDialog;\r\n        vm.addVehicle = addVehicle;\r\n        vm.deleteVehicle = deleteVehicle;\r\n        vm.addAppraisal = addAppraisal;\r\n        vm.deleteAppraisal = deleteAppraisal;\r\n        vm.changeSource = changeSource;\r\n        vm.selectOrigin = selectOrigin;\r\n        vm.getNumber = getNumber;\r\n        vm.saveTask = saveTask;\r\n        vm.reactivate = reactivate;\r\n        vm.sendMail = sendMail;\r\n        vm.trustSrc = trustSrc;\r\n        vm.hubspot = hubspot;\r\n\r\n        //////////\r\n        function init() {\r\n            for (var i in LeadsHistory.data) {\r\n                //elegimos si vamos a añadirlo a hoy, ayer o anteriormente\r\n                var key = getKeyHistory(LeadsHistory.data[i]);\r\n\r\n                if (!vm.leadsHistory[key][LeadsHistory.data[i].history_user]) {\r\n                    vm.leadsHistory[key][LeadsHistory.data[i].history_user] = {\r\n                        data: [],\r\n                        count: 0,\r\n                        history_date_start: LeadsHistory.data[i].history_date,\r\n                        history_date_end: LeadsHistory.data[i].history_date,\r\n                        history_user: LeadsHistory.data[i].history_user\r\n                    };\r\n                }\r\n                vm.leadsHistory.count++;\r\n                vm.leadsHistory[key][LeadsHistory.data[i].history_user].data.push(LeadsHistory.data[i]);\r\n                vm.leadsHistory[key][LeadsHistory.data[i].history_user].count++;\r\n                vm.leadsHistory[key][LeadsHistory.data[i].history_user].history_date_start = LeadsHistory.data[i].history_date;\r\n            }\r\n\r\n            for (var i in LeadsActivity.data) {\r\n                //elegimos si vamos a añadirlo a hoy, ayer o anteriormente\r\n                var key = getKeyActivity(LeadsActivity.data[i]);\r\n\r\n                if (!vm.leadsActivity[key][LeadsActivity.data[i].user]) {\r\n                    vm.leadsActivity[key][LeadsActivity.data[i].user] = {\r\n                        data: [],\r\n                        count: 0,\r\n                        activity_date_start: LeadsActivity.data[i].date,\r\n                        activity_date_end: LeadsActivity.data[i].date,\r\n                        activity_user: LeadsActivity.data[i].user_data\r\n                    };\r\n                }\r\n                vm.leadsActivity.count++;\r\n                vm.leadsActivity[key][LeadsActivity.data[i].user].data.push(LeadsActivity.data[i]);\r\n                vm.leadsActivity[key][LeadsActivity.data[i].user].count++;\r\n                vm.leadsActivity[key][LeadsActivity.data[i].user].activity_date_start = LeadsActivity.data[i].date;\r\n            }\r\n\r\n            //cargamos los orígenes disponbiles\r\n            if (vm.lead.id && vm.lead.concessionaire) {\r\n                reloadOrigins(vm.lead.concessionaire);\r\n            }\r\n\r\n            if(StartCall){\r\n                call(vm.lead);\r\n            }\r\n\r\n\r\n        }\r\n\r\n        function reloadOrigins(concessionaire) {\r\n            originsService.origins.filters.source__concession = concessionaire;\r\n            originsService.getAllOrigins().then(function (res) {\r\n                vm.origins = res;\r\n                reloadLead(vm.lead);\r\n            });\r\n        }\r\n\r\n        function getKeyHistory(history) {\r\n            var date = moment(history.history_date).format(\"DD-MM-YYYY\");\r\n            var today = moment().format(\"DD-MM-YYYY\");\r\n            var yesterday = moment().subtract(1, 'd').format('DD-MM-YYYY');\r\n\r\n            if (date === today) {\r\n                return \"dataToday\";\r\n            } else if (date === yesterday) {\r\n                return \"dataYesterday\";\r\n            }\r\n            return \"dataOthers\";\r\n        }\r\n\r\n        function getKeyActivity(activity) {\r\n            var date = moment(activity.date).format(\"DD-MM-YYYY\");\r\n            var today = moment().format(\"DD-MM-YYYY\");\r\n            var yesterday = moment().subtract(1, 'd').format('DD-MM-YYYY');\r\n\r\n            if (date === today) {\r\n                return \"dataToday\";\r\n            } else if (date === yesterday) {\r\n                return \"dataYesterday\";\r\n            } else if (validate_fechaMayorQue(today, date)) {\r\n                return \"dataFuture\";\r\n            }\r\n            return \"dataOthers\";\r\n        }\r\n\r\n        function validate_fechaMayorQue(fechaInicial, fechaFinal) {\r\n            var valuesStart = fechaInicial.split(\"-\");\r\n            var valuesEnd = fechaFinal.split(\"-\");\r\n\r\n            // Verificamos que la fecha no sea posterior a la actual\r\n            var dateStart = new Date(valuesStart[2], (valuesStart[1] - 1), valuesStart[0]);\r\n            var dateEnd = new Date(valuesEnd[2], (valuesEnd[1] - 1), valuesEnd[0]);\r\n            return !(dateStart >= dateEnd);\r\n        }\r\n\r\n        function objectSize(obj) {\r\n            var size = 0, key;\r\n            for (key in obj) {\r\n                if (obj.hasOwnProperty(key)) size++;\r\n            }\r\n            return size;\r\n        }\r\n\r\n        function canEdit() {\r\n            if (!vm.lead.id || vm.lead.status === 'new' || vm.lead.status === 'pending') {\r\n                return true\r\n            }\r\n            if (vm.user.id = vm.lead.user || vm.user.is_admin) {\r\n                return true\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function isDisabled() {\r\n            /*if (vm.lead.status === 'end') {\r\n                return true;\r\n            }*/\r\n            return false;\r\n        }\r\n\r\n        function reloadLead(lead) {\r\n            for (var i in lead) {\r\n                if(i!=='source_data' && i!=='concessionaire_data' && i!=='origin2_data'){\r\n                    vm.lead[i] = lead[i];\r\n                }\r\n            }\r\n            if(!vm.lead.source_data_prov && vm.lead.source_data){\r\n                vm.lead.source_data_prov=vm.lead.source_data;\r\n                vm.lead.source=null;\r\n            }\r\n\r\n            for (var i in vm.lead.vehicles) {\r\n                selectOrigin(vm.lead.vehicles[i]);\r\n\r\n                if(vm.lead.vehicles[i].brand_model){\r\n                    vm.lead.vehicles[i].brand_model_data={\r\n                        id:vm.lead.vehicles[i].brand_model.split(\"___\")[1] || null,\r\n                        name:vm.lead.vehicles[i].brand_model.split(\"___\")[0],\r\n                    }\r\n                }\r\n\r\n                if(vm.lead.vehicles[i].model){\r\n                    vm.lead.vehicles[i].model_data={\r\n                        id:vm.lead.vehicles[i].model.split(\"___\")[1] || null,\r\n                        model_name:vm.lead.vehicles[i].model.split(\"___\")[0],\r\n                    }\r\n                }\r\n\r\n                if(vm.lead.vehicles[i].version){\r\n                    vm.lead.vehicles[i].version_data={\r\n                        id:vm.lead.vehicles[i].version.split(\"___\")[1] || null,\r\n                        version_name:vm.lead.vehicles[i].version.split(\"___\")[0],\r\n                    }\r\n                }\r\n            }\r\n\r\n            for (var i in vm.lead.appraisals) {\r\n                if(vm.lead.appraisals[i].brand){\r\n                    vm.lead.appraisals[i].brand_data={\r\n                        id:vm.lead.appraisals[i].brand.split(\"___\")[1] || null,\r\n                        name:vm.lead.appraisals[i].brand.split(\"___\")[0],\r\n                    }\r\n                }\r\n\r\n                if(vm.lead.appraisals[i].model){\r\n                    vm.lead.appraisals[i].model_data={\r\n                        id:vm.lead.appraisals[i].model.split(\"___\")[1] || null,\r\n                        model_name:vm.lead.appraisals[i].model.split(\"___\")[0],\r\n                    }\r\n                }\r\n\r\n                if(vm.lead.appraisals[i].version){\r\n                    vm.lead.appraisals[i].version_data={\r\n                        id:vm.lead.appraisals[i].version.split(\"___\")[1] || null,\r\n                        version_name:vm.lead.appraisals[i].version.split(\"___\")[0],\r\n                    }\r\n                }\r\n            }\r\n\r\n            if(vm.lead.vehicles && vm.lead.vehicles[0] && vm.lead.vehicles[0].ad_link){\r\n                vm.iframeAdLink=vm.lead.vehicles[0].ad_link\r\n            }\r\n\r\n            for (var i in vm.lead.appraisals) {\r\n                vm.lead.appraisals[i].circulation_date=vm.lead.appraisals[i].circulation_date? new Date(moment(vm.lead.appraisals[i].circulation_date).format()) : null;\r\n                vm.lead.appraisals[i].buy_date=vm.lead.appraisals[i].buy_date? new Date(moment(vm.lead.appraisals[i].buy_date).format()) : null;\r\n                vm.lead.appraisals[i].registration_date=vm.lead.appraisals[i].registration_date? new Date(moment(vm.lead.appraisals[i].registration_date).format()) : null;\r\n                vm.lead.appraisals[i].last_mechanic_date=vm.lead.appraisals[i].last_mechanic_date? new Date(moment(vm.lead.appraisals[i].last_mechanic_date).format()) : null;\r\n            }\r\n        }\r\n\r\n        function cleanLead(lead) {\r\n            var deleteVars = [];\r\n            for (var i in lead) {\r\n                if (i.indexOf('$') >= 0) {\r\n                    deleteVars.push(i);\r\n                } else if (typeof lead[i] == 'object') {\r\n                    cleanLead(lead[i]);\r\n                }\r\n            }\r\n            for (var i in deleteVars) {\r\n                delete lead[deleteVars[i]];\r\n            }\r\n            if (lead && lead.vehicles) {\r\n                for (var i in lead.vehicles) {\r\n                    delete lead.vehicles[i].field;\r\n                }\r\n            }\r\n        }\r\n\r\n        function openSaveLeadDialog() {\r\n            vm.leadAction.date = undefined;\r\n            \r\n            return saveLead(false).then(function (response) {\r\n                $scope.leadForm.$setPristine();\r\n                reloadLead(response);\r\n\r\n                for (var i = 0; i < response.request.task.length; i++) {\r\n                    if (!vm.leadAction.date && new Date() <= moment(response.request.task[i].planified_realization_date) ) {\r\n                        vm.leadAction.date = moment(response.request.task[i].planified_realization_date);\r\n                    }\r\n\r\n                    if (moment(response.request.task[i].planified_realization_date) < vm.leadAction.date && new Date() <= vm.leadAction.date) {\r\n                        vm.leadAction.date =  moment(response.request.task[i].planified_realization_date)\r\n                    }\r\n                }\r\n\r\n                vm.leadAction.lead = response.id;\r\n                vm.leadAction.lead_status_planing = response.status;\r\n\r\n                if (vm.leadAction.date) {\r\n                    leadActionsService.saveLeadAction(vm.leadAction).then(function (response) {\r\n                        $timeout(function () {\r\n                            $state.go(\"app.leads.board\");\r\n                        }, 500);\r\n                        NotifyService.successMessage(gettextCatalog.getString(\"Lead guardado correctamente\"));\r\n\r\n                    }, function (error) {\r\n                        vm.serverErrors = error.data;\r\n                        NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el Lead.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n                    });\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * Guardar detalle del informe\r\n         */\r\n\r\n        function saveLead(redirect) {\r\n            redirect = typeof redirect !== 'undefined' ? redirect : true;\r\n            var deferred = $q.defer();\r\n\r\n            var lead = angular.copy(vm.lead);\r\n            if (lead.id) {\r\n                delete lead.request;\r\n            }\r\n\r\n            var err={};\r\n            if(!lead.concessionaire_data || !lead.concessionaire_data.id){\r\n               err.concessionaire= [\"Este campo es requerido.\"];\r\n            }\r\n            if(!lead.source_data || !lead.source_data.origin_data || !lead.source_data.origin_data.id){\r\n                err.origin= [\"Este campo es requerido.\"];\r\n            }\r\n            if(!lead.source_data || !lead.source_data.channel_data || !lead.source_data.channel_data.id){\r\n                err.channel= [\"Este campo es requerido.\"];\r\n            }\r\n            if(!lead.source_data_prov || !lead.source_data_prov.id){\r\n                err.source= [\"Este campo es requerido.\"];\r\n            }\r\n            if(err.concessionaire || err.origin || err.channel || err.source){\r\n                vm.serverErrors = err;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el informe.\"));\r\n                deferred.reject(err);\r\n                return deferred.promise;\r\n            }\r\n\r\n            if(lead.origin2_data && lead.origin2_data.id){\r\n                lead.origin2=lead.origin2_data.id;\r\n            }else{\r\n                lead.origin2=null;\r\n            }\r\n\r\n            if(lead.channel2_data && lead.channel2_data.id){\r\n                lead.channel2=lead.channel2_data.id;\r\n            }else{\r\n                lead.channel2=null;\r\n            }\r\n            delete lead.status;\r\n\r\n            if (vm.lead.request.task.length < 1) {\r\n                var confirm = $mdDialog.confirm()\r\n                    .title(gettextCatalog.getString('Guardar lead'))\r\n                    .textContent(gettextCatalog.getString('Este lead no tiene ninguna solicitud adjunta. ¿Desea continuar?'))\r\n                    .ariaLabel(gettextCatalog.getString('Guardar lead'))\r\n                    .clickOutsideToClose(true)\r\n                    .parent(angular.element(document.body))\r\n                    .ok(gettextCatalog.getString('Continuar'))\r\n                    .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n                $mdDialog.show(confirm).then(function () {\r\n                    leadsService.saveLead(lead).then(function (response) {\r\n                        if ($stateParams.acd) {\r\n                            var obj = {\r\n                                call_control: $stateParams.acd,\r\n                                lead: response.id,\r\n                            };\r\n                            acdsService.saveAcd(obj);\r\n                        }\r\n\r\n                        reloadLead(response);\r\n                        if (redirect) {\r\n                            $state.go(\"app.leads.board\");\r\n                        }\r\n                        $rootScope.loadingProgress = false;\r\n                        NotifyService.successMessage(gettextCatalog.getString(\"Informe guardado correctamente\"));\r\n                        vm.serverErrors=null;\r\n                        deferred.resolve(response);\r\n                    }, function (error) {\r\n                        console.log(error);\r\n                        $rootScope.loadingProgress = false;\r\n                        vm.serverErrors = error.data;\r\n                        NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el informe.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n                        deferred.reject(error);\r\n                    });\r\n                }, function () {\r\n                    $rootScope.loadingProgress = false;\r\n                    deferred.reject();\r\n                });\r\n            } else {\r\n                leadsService.saveLead(lead).then(function (response) {\r\n                    if ($stateParams.acd) {\r\n                        var obj = {\r\n                            id: $stateParams.acd,\r\n                            lead: response.id,\r\n                        };\r\n                        acdsService.saveAcd(obj);\r\n                    }\r\n\r\n                    reloadLead(response);\r\n                    if (redirect) {\r\n                        $state.go(\"app.leads.board\");\r\n                    }\r\n                    $rootScope.loadingProgress = false;\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Informe guardado correctamente\"));\r\n                    vm.serverErrors=null;\r\n                    deferred.resolve(response);\r\n                }, function (error) {\r\n                    vm.serverErrors = error.data;\r\n                    $rootScope.loadingProgress = false;\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el informe.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n                    deferred.reject(error);\r\n                });\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Modifica el stado del informe\r\n         */\r\n        function changeStatus(lead, status) {\r\n            if (lead.id) {\r\n                var obj = {\r\n                    status: status,\r\n                    id: lead.id\r\n                };\r\n                var oldStatus = lead.status;\r\n                lead.status = status;\r\n\r\n                return leadsService.saveLead(obj).then(function (res) {\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Acción realizada correctamente\"));\r\n                    vm.lead.status_dates=res.status_dates;\r\n                    vm.lead.status_new_datetime=res.status_new_datetime;\r\n                    vm.lead.status_pending_datetime=res.status_pending_datetime;\r\n                    vm.lead.status_attended_datetime=res.status_attended_datetime;\r\n                    vm.lead.status_tracing_datetime=res.status_tracing_datetime;\r\n                    vm.lead.status_end_datetime=res.status_end_datetime;\r\n                }, function (error) {\r\n                    lead.status = oldStatus;\r\n                    vm.serverErrors = error.data;\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al realizar la acción.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n                });\r\n            } else {\r\n                //PARA LA CREACCION\r\n                vm.lead.status = status;\r\n                vm.lead.status_dates = {};\r\n                vm.lead.status_dates[status] = new Date();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Finaliza el informe\r\n         */\r\n        function finishLead() {\r\n            var deferred = $q.defer();\r\n            leadsService.getLead(vm.lead.id).then(function (res) {\r\n                if (res.pending_tasks) {\r\n                    var confirm = $mdDialog.confirm()\r\n                        .title(gettextCatalog.getString('Finalizar lead'))\r\n                        .textContent(gettextCatalog.getString('Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?'))\r\n                        .ariaLabel(gettextCatalog.getString('Finalizar lead'))\r\n                        .clickOutsideToClose(true)\r\n                        .parent(angular.element(document.body))\r\n                        .ok(gettextCatalog.getString('Confirmar'))\r\n                        .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n                    $mdDialog.show(confirm).then(function () {\r\n                        //Abrimos el modal de resultados de gestion\r\n                        openFinishLeadBox();\r\n                    });\r\n                } else {\r\n                    //Abrimos el modal de resultados de gestion\r\n                    openFinishLeadBox();\r\n                }\r\n                deferred.resolve();\r\n            }, function () {\r\n                deferred.reject();\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Guarda y Finaliza el informe\r\n         */\r\n        function saveAndfinishLead() {\r\n            var deferred = $q.defer();\r\n            var redirect = false;\r\n            vm.saveLead(redirect).then(function (response) {\r\n                leadsService.getLead(response.id).then(function (res) {\r\n                    if (res.pending_tasks) {\r\n                        var confirm = $mdDialog.confirm()\r\n                            .title(gettextCatalog.getString('Finalizar lead'))\r\n                            .textContent(gettextCatalog.getString('Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?'))\r\n                            .ariaLabel(gettextCatalog.getString('Finalizar lead'))\r\n                            .clickOutsideToClose(true)\r\n                            .parent(angular.element(document.body))\r\n                            .ok(gettextCatalog.getString('Confirmar'))\r\n                            .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n                        $mdDialog.show(confirm).then(function () {\r\n                            //Abrimos el modal de resultados de gestion\r\n                            openFinishLeadBox();\r\n                        });\r\n                    } else {\r\n                        //Abrimos el modal de resultados de gestion\r\n                        openFinishLeadBox();\r\n                    }\r\n                    deferred.resolve();\r\n                }, function () {\r\n                    deferred.reject();\r\n                })\r\n            }, function () {\r\n                deferred.reject();\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para indicar el resultado del lead\r\n         */\r\n        function openFinishLeadDialog(lead) {\r\n            lead = typeof lead !== 'undefined' ? lead : vm.lead;\r\n            $mdDialog.show({\r\n                controller: 'FinishLeadDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/finishLead/finishLead-dialog.html',\r\n                parent: angular.element($document.body),\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Lead: lead\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Muestra el cuadro con las opciones de cierre de lead\r\n         */\r\n        function openFinishLeadBox() {\r\n            vm.isOpenFinishLeadBox=true;\r\n            /*vm.lead={\r\n                result:null,\r\n                result_reason:null,\r\n                id:Lead.id\r\n            };*/\r\n\r\n        }\r\n\r\n        /**\r\n         * Añade una nota\r\n         */\r\n        function addNote() {\r\n            vm.lead.note.push({content: '', modified: new Date()});\r\n        }\r\n\r\n        /**\r\n         * borra una nota\r\n         */\r\n        function deleteNote(note) {\r\n            if (note.id) {\r\n                //buscamos por id\r\n                for (var i = 0; i < vm.lead.note.length; i++) {\r\n                    if (vm.lead.note[i].id === note.id) {\r\n                        vm.lead.note.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                //buscamos por contenido\r\n                for (var i = 0; i < vm.lead.note.length; i++) {\r\n                    if (vm.lead.note[i].content === note.content && !note.id) {\r\n                        vm.lead.note.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Añade un tag\r\n         */\r\n        function addTag() {\r\n            vm.lead.tags.push({content: '', modified: new Date()});\r\n        }\r\n\r\n        /**\r\n         * borra un tag\r\n         */\r\n        function deleteTag(tag) {\r\n            if (tag.id) {\r\n                //buscamos por id\r\n                for (var i = 0; i < vm.lead.tags.length; i++) {\r\n                    if (vm.lead.tags[i].id === tag.id) {\r\n                        vm.lead.tags.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            } else {\r\n                //buscamos por contenido\r\n                for (var i = 0; i < vm.lead.tags.length; i++) {\r\n                    if (vm.lead.tags[i].content === tag.content && !tag.id) {\r\n                        vm.lead.tags.splice(i, 1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar una tarea\r\n         *\r\n         * @param ev\r\n         * @param task\r\n         */\r\n        function openTaskDialog(ev, tracing, task) {\r\n            if(!vm.lead.id){\r\n                $rootScope.loadingProgress = true;\r\n                leadsService.saveLead(vm.lead).then(function (response) {\r\n                    vm.lead.id=response.id;\r\n                    vm.lead.request=response.request;\r\n                    vm.openTaskDialog(ev, tracing, task);\r\n                    $rootScope.loadingProgress = false;\r\n                }, function (error) {\r\n                    $rootScope.loadingProgress = false;\r\n                    vm.serverErrors = error.data;\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el informe.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n                });\r\n                return;\r\n            }\r\n\r\n            if (task) task.datetime = new Date(task.planified_realization_date)\r\n            $mdDialog.show({\r\n                controller: 'TaskDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/tasks/dialogs/task/task-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Task: task,\r\n                    Tracing: tracing,\r\n                    GasTypes: GasTypes,\r\n                    Request: vm.lead.request,\r\n                    Lead: vm.lead.id,\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para eliminar una task\r\n         *\r\n         * @param ev\r\n         * @param task\r\n         */\r\n        function removeTask(ev, task) {\r\n            var confirm = $mdDialog.confirm()\r\n                .title(gettextCatalog.getString('Eliminar solicitud'))\r\n                .textContent(gettextCatalog.getString('¿Seguro que quieres eliminar la solicitud?'))\r\n                .ariaLabel(gettextCatalog.getString('Eliminar solicitud'))\r\n                .clickOutsideToClose(true)\r\n                .parent(angular.element(document.body))\r\n                .ok(gettextCatalog.getString('Borrar solicitud'))\r\n                .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n            $mdDialog.show(confirm).then(function () {\r\n                tasksService.removeTask(task).then(function () {\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Solicitud borrada correctamente.\"));\r\n                }, function (error) {\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al borrar la solicitud.\") + \" \" + (error.data.detail || \"\"));\r\n                });\r\n            });\r\n\r\n        }\r\n\r\n        function createFilterFor(query) {\r\n            var lowercaseQuery = getCleanedString(query);\r\n            return function filterFn(q) {\r\n                return (getCleanedString(q.name || q.data).includes(lowercaseQuery));\r\n            };\r\n        }\r\n\r\n        /* Provincias */\r\n        function getProvinces(searchText) {\r\n            var deferred = $q.defer();\r\n            // El id de españa es el 28\r\n            provincesService.getProvinces(\"28\", searchText).then(function (provinces) {\r\n                var results = searchText ? provinces.filter(createFilterFor(searchText)) : provinces;\r\n                deferred.resolve(results);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Localidades */\r\n        function getLocalities(searchText) {\r\n            var deferred = $q.defer();\r\n            var province=null;\r\n            if(vm.lead.client.province_data){\r\n                province=vm.lead.client.province_data.id;\r\n            }\r\n            localitiesService.getLocalities(province, searchText).then(function (localities) {\r\n                var results = searchText ? localities.filter(createFilterFor(searchText)) : localities;\r\n                deferred.resolve(results);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Marcas */\r\n        function getBrands(searchText) {\r\n            var deferred = $q.defer();\r\n\r\n            vehiclesService.getBrands(searchText).then(function (brands) {\r\n                deferred.resolve(brands);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Models */\r\n        function getModels(brand, searchText) {\r\n            var deferred = $q.defer();\r\n\r\n            vehiclesService.getModels(brand, searchText).then(function (models) {\r\n                deferred.resolve(models);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Versions */\r\n        function getVersions(model, searchText) {\r\n            var deferred = $q.defer();\r\n\r\n            vehiclesService.getVersions(model, searchText).then(function (versions) {\r\n                deferred.resolve(versions);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function getFullNameVersion(version) {\r\n          return version.version_name+' '+(version.motor || '')+' '+(version.engine_power || '');\r\n        }\r\n\r\n        /* Change Version */\r\n        function changeVehicleVersion(vehicle, power, gas) {\r\n            if(vehicle.version_data){\r\n                if(vehicle.version_data.engine_power){\r\n                    vehicle[power]=vehicle.version_data.engine_power;\r\n                }\r\n                if(vehicle.version_data.gas_type_data && vehicle.version_data.gas_type_data.id){\r\n                    vehicle[gas]=vehicle.version_data.gas_type_data.id;\r\n                }\r\n            }\r\n        }\r\n\r\n        /* Send Whatsapp */\r\n        function sendWhatsapp(ev) {\r\n            $mdDialog.show({\r\n                controller: 'SendWhatsappDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/sendWhatsapp/sendWhatsapp-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Lead: vm.lead,\r\n                    event: ev\r\n                }\r\n            })\r\n        }\r\n\r\n        /* Sectors */\r\n        function getSectors(searchText) {\r\n            var deferred = $q.defer();\r\n\r\n            clientsService.getSectors(searchText).then(function (sectors) {\r\n                deferred.resolve(sectors);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Business Activity */\r\n        function getBusinessActivity(sector, searchText) {\r\n            var deferred = $q.defer();\r\n\r\n            clientsService.getBusinessActivity(sector, searchText).then(function (activities) {\r\n                deferred.resolve(activities);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Autocompleta Provincias y Localidades */\r\n        function completeAddress() {\r\n            localitiesService.getLocalitiesByCodPostal(vm.lead.client.postal_code).then(function (localities) {\r\n                console.log(localities);\r\n                if(localities && localities[0]){\r\n                    vm.lead.client.location_data=localities[0];\r\n                    vm.lead.client.province_data=localities[0].province;\r\n                }\r\n            });\r\n        }\r\n\r\n        /* Concesionarios */\r\n        function getConcessionaires(searchText) {\r\n            var deferred = $q.defer();\r\n            if(vm.lead.user_data && vm.lead.user_data.id){\r\n                usersService.getUser(vm.lead.user_data.id).then(function(user){\r\n                    var concessionaires=user.related_concessionaires.map(function(related_concessionaire) {\r\n                        return related_concessionaire.concessionaire_data;\r\n                    });\r\n                    var results = searchText ? concessionaires.filter(createFilterFor(searchText)) : concessionaires;\r\n                    deferred.resolve(results);\r\n                });\r\n            }else{\r\n                concessionairesService.concessionaires.filters={};\r\n                concessionairesService.concessionaires.filters.search=searchText;\r\n                concessionairesService.concessionaires.filters.page_size=\"all\";\r\n                concessionairesService.getConcessionaires().then(function(concessionaires){\r\n                    deferred.resolve(concessionaires.data);\r\n                });\r\n            }\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Orígenes */\r\n        function getOrigins(searchText, concessionaire) {\r\n            var deferred = $q.defer();\r\n            if(concessionaire) {\r\n                var originsIds=Array.from(new Set(concessionaire.sources.map(function(s) { return s.origin })));\r\n                var origins=originsIds.map(function(origin) {\r\n                    var t=concessionaire.sources.find(function(s) { return s.origin===origin });\r\n                    if(t) {\r\n                        return t.origin_data;\r\n                    }\r\n                });\r\n                var results = searchText ? origins.filter(createFilterFor(searchText)) : origins;\r\n                deferred.resolve(results);\r\n            }else{\r\n                deferred.resolve([]);\r\n            }\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Todos los Orígenes */\r\n        function getAllOrigins(searchText) {\r\n            var deferred = $q.defer();\r\n            originsService.getAllOrigins(searchText).then(function(origins){\r\n                deferred.resolve(origins);\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Canales */\r\n        function getChannels(searchText, concessionaire, origin) {\r\n            var deferred = $q.defer();\r\n            if(concessionaire && origin) {\r\n                var channelsIds = Array.from(new Set(concessionaire.sources.map(function (s) {\r\n                    return s.channel\r\n                })));\r\n                var channels = channelsIds.map(function (channel) {\r\n                    var t=concessionaire.sources.find(function (s) {\r\n                        return (s.channel === channel && s.origin === origin.id)\r\n                    })\r\n                    if(t){\r\n                        return t.channel_data;\r\n                    }\r\n                }).filter(function (el) {\r\n                    return el != null;\r\n                });\r\n                var results = searchText ? channels.filter(createFilterFor(searchText)) : channels;\r\n                deferred.resolve(results);\r\n            }else{\r\n                deferred.resolve([]);\r\n            }\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Todos los Canales */\r\n        function getAllChannels(searchText,origin) {\r\n            var deferred = $q.defer();\r\n\r\n            if(origin && origin.available_channels_data.length>0){\r\n                deferred.resolve(origin.available_channels_data);\r\n            }else{\r\n                deferred.resolve([]);\r\n            }\r\n            return deferred.promise;\r\n        }\r\n\r\n        function changeChannel(concessionaire, origin, channel) {\r\n            if(channel){\r\n                var sourcesIds=Array.from(new Set(concessionaire.sources.map(function(s) {return s.id})));\r\n                var sources=sourcesIds.map(function(source) {\r\n                    return concessionaire.sources.find(function(s) {\r\n                        return (s.id===source && s.origin===origin.id && s.channel===channel.id)\r\n                    });\r\n                }).filter(function (el) {\r\n                    return el != null;\r\n                });\r\n\r\n                if(sources.length===1){\r\n                    vm.lead.source_data_prov=sources[0];\r\n                }\r\n            }\r\n        }\r\n\r\n      function getExposicion() {\r\n        return {\r\n          id: 4,\r\n          name: \"Presencial\",\r\n          slug: \"presencial\"\r\n        }\r\n      }\r\n\r\n        /* Sources */\r\n        function getSources(searchText, concessionaire, origin, channel) {\r\n            var deferred = $q.defer();\r\n            if(concessionaire && origin && channel){\r\n                var sourcesIds=Array.from(new Set(concessionaire.sources.map(function(s) {return s.id})));\r\n                var sources=sourcesIds.map(function(source) {\r\n                    return concessionaire.sources.find(function(s) {\r\n                        return (s.id===source && s.origin===origin.id && s.channel===channel.id)\r\n                    });\r\n                }).filter(function (el) {\r\n                    return el != null;\r\n                });\r\n                var results = searchText ? sources.filter(createFilterFor(searchText)) : sources;\r\n                deferred.resolve(results);\r\n            }else{\r\n                deferred.resolve([]);\r\n            }\r\n            return deferred.promise;\r\n        }\r\n\r\n        function getFullNamceSource(source) {\r\n            var spaces = \" _____ \";\r\n            return gettextCatalog.getString(\"Origen\") + \": \" +\r\n                source.origin_data.name + spaces + gettextCatalog.getString(\"Canal\") + \": \" +\r\n                source.channel_data.name + \" (\" + source.data + \")\" + spaces + gettextCatalog.getString(\"Concesionario\") + \": \" +\r\n                (source.concession_data__name || source.concession_data.name);\r\n        }\r\n\r\n        function getFullUserName(user) {\r\n            if (user) {\r\n                return user.first_name + \" \" + user.last_name;\r\n            }\r\n            return gettextCatalog.getString(\"Sin asignar\");\r\n        }\r\n\r\n        /* Clientes */\r\n        function getClients(searchText) {\r\n            var deferred = $q.defer();\r\n            clientsService.getClients(searchText).then(function (clients) {\r\n                deferred.resolve(clients);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function getCleanedString(cadena) {\r\n            // Lo queremos devolver limpio en minusculas\r\n            cadena = cadena.toLowerCase();\r\n\r\n            // Quitamos acentos y \"ñ\". Fijate en que va sin comillas el primer parametro\r\n            cadena = cadena.replace(/á/gi, \"a\");\r\n            cadena = cadena.replace(/é/gi, \"e\");\r\n            cadena = cadena.replace(/í/gi, \"i\");\r\n            cadena = cadena.replace(/ó/gi, \"o\");\r\n            cadena = cadena.replace(/ú/gi, \"u\");\r\n            return cadena;\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar una lead\r\n         *\r\n         * @param ev\r\n         */\r\n        function openLeadDialog(ev) {\r\n            var deferred = $q.defer();\r\n            var redirect = false;\r\n            vm.saveLead(redirect).then(function (response) {\r\n                if (response.cur_user_can_assign) {\r\n\r\n                    usersService.users.filters.userconcession__concessionaire__id = response.concessionaire;\r\n                    usersService.users.filters.is_superuser = false;\r\n                    usersService.users.filters.is_staff = false;\r\n                    usersService.users.filters.is_complex = false;\r\n                    // usersService.users.filters.is_concession_admin='False';\r\n                    $mdDialog.show({\r\n                        controller: 'LeadDialogController',\r\n                        controllerAs: 'vm',\r\n                        templateUrl: 'app/main/leads/dialogs/lead/lead-dialog.html',\r\n                        parent: angular.element($document.body),\r\n                        targetEvent: ev,\r\n                        clickOutsideToClose: true,\r\n                        locals: {\r\n                            Lead: vm.lead,\r\n                            Concessionaire: Concessionaire,\r\n                            Users: usersService.getAllUsers(),\r\n                            event: ev\r\n                        }\r\n                    });\r\n                } else {\r\n                    NotifyService.errorMessage(\"Usted no puede realizar asignaciones.\");\r\n                }\r\n                deferred.resolve();\r\n            }, function () {\r\n                deferred.reject();\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar el estado de un lead\r\n         *\r\n         * @param ev\r\n         * @param lead\r\n         */\r\n        function openLeadStatusDialog(ev, lead) {\r\n\r\n            $mdDialog.show({\r\n                controller: 'LeadStatusDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/leadStatus/leadStatus-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Lead: lead,\r\n                    event: ev\r\n                }\r\n            })\r\n\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar la fecha del estado de un lead\r\n         *\r\n         * @param ev\r\n         * @param lead\r\n         * @param field\r\n         */\r\n        function openLeadStatusDateDialog(ev, lead, field) {\r\n\r\n            $mdDialog.show({\r\n                controller: 'LeadStatusDateDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/leadStatusDate/leadStatusDate-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Lead: lead,\r\n                    Field: field,\r\n                    event: ev\r\n                }\r\n            })\r\n\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar una lead\r\n         *\r\n         * @param ev\r\n         */\r\n        function openLeadContactDialog(ev) {\r\n\r\n            $mdDialog.show({\r\n                controller: 'LeadContactDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/leadContact/leadContact-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    LeadContacts: vm.lead.contact_history,\r\n                    event: ev\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        /**\r\n         * Obtiene la fecha mas lejana de realización\r\n         *\r\n         */\r\n        function getLastRealizationDate(tasks) {\r\n            for (var i in tasks) {\r\n                var date = new Date(0);\r\n                var newDate;\r\n                if (tasks[i].realization_date) {\r\n                    newDate = new Date(tasks[i].realization_date);\r\n                    if (date < newDate) {\r\n                        date = newDate;\r\n                    }\r\n                }\r\n            }\r\n            return date;\r\n        }\r\n\r\n        function datediff(first, second) {\r\n            first = new Date(first);\r\n            second = new Date(second);\r\n            // Take the difference between the dates and divide by milliseconds per day.\r\n            // Round to nearest whole number to deal with DST.\r\n\r\n            // return Math.round((second-first)/(1000*60*60*24));\r\n            return Math.ceil((second - first) / (1000 * 60 * 60 * 24));\r\n        }\r\n\r\n        function eventClientBlur() {\r\n            if(vm.lead.client.phone && vm.lead.client.phone==='+34'){\r\n                vm.lead.client.phone='';\r\n            }\r\n            if (vm.lead.client.phone && vm.lead.client.phone.length > 8) {\r\n                changeFilter(\"client__phone__icontains\", vm.lead.client.phone);\r\n            }\r\n        }\r\n\r\n        function eventClientEmailBlur() {\r\n            if (vm.lead.client.email && vm.lead.client.email.length > 5) {\r\n                changeFilter(\"client__email__icontains\", vm.lead.client.email);\r\n            }\r\n        }\r\n\r\n        function setExtension() {\r\n          if(!vm.lead.client.phone || vm.lead.client.phone===''){\r\n            vm.lead.client.phone='+34';\r\n          }\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para indicar si quieres seguir con este lead o ir a otro relacionado\r\n         */\r\n        function openDuplicateLeadsDialog() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            if(!angular.element(document.body).hasClass('md-dialog-is-showing') && vm.leads.new.filters.id_excluded>=0){\r\n              if(((vm.lead.client.phone && vm.lead.client.phone.length > 8) || (vm.lead.client.email && vm.lead.client.email.length > 5)) &&\r\n                (vm.leads.new.count>0 || vm.leads.attended.count>0 || vm.leads.commercial_management.count>0 || vm.leads.tracing.count>0 || vm.leads.end.count>0)){\r\n\r\n                $mdDialog.show(\r\n                  $mdDialog.alert()\r\n                    .ok(gettextCatalog.getString('OK'))\r\n                    .textContent(\r\n                    gettextCatalog.getString(\"¡¡Atención existen registros con los mismos datos de contacto revisa sección Coincidentes antes de generar duplicados!!\")\r\n                    )\r\n                    .multiple(false)\r\n                )\r\n              }\r\n            }\r\n\r\n            deferred.resolve(true);\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Hace la llamada mediante click2call\r\n         */\r\n        function call(lead) {\r\n            var obj = {\r\n                lead: lead.id\r\n            };\r\n\r\n            return click2callsService.saveClick2call(obj).then(function (res) {\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Acción realizada correctamente\"));\r\n                //Si está en gestión y ya tiene alguna llamada preguntamos si desea finalizar el lead\r\n                if (vm.leadsOutgoingCalls.length > 0 && vm.lead.status === 'commercial_management') {\r\n                    finishLeadAfterCall();\r\n                }\r\n                //Si está en seguimiento preguntamos si desea finalizar el lead\r\n                else if (vm.lead.status === 'tracing') {\r\n                    finishLeadAfterCall();\r\n                }\r\n\r\n                //Despues de las comprobaciones cambiamos los estados (Importante no cambiar el orden)\r\n                /*if (vm.lead.status === 'commercial_management') {\r\n                    vm.lead.status = 'tracing'\r\n                }\r\n                if (vm.lead.status === 'new') {\r\n                    vm.lead.status = 'commercial_management'\r\n                }*/\r\n            }, function (error) {\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al realizar la acción.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Pregunta si desea finalizar el informe despues de una llamada\r\n         */\r\n        function finishLeadAfterCall() {\r\n\r\n            var deferred = $q.defer();\r\n            leadsService.getLead(vm.lead.id).then(function (res) {\r\n                if (res.pending_tasks) {\r\n                    var confirm = $mdDialog.confirm()\r\n                        .title(gettextCatalog.getString('Finalizar lead'))\r\n                        .textContent(gettextCatalog.getString('El sistema ha detectado un seguimiento de este lead ¿Desea finalizar el lead?'))\r\n                        .ariaLabel(gettextCatalog.getString('Finalizar lead'))\r\n                        .clickOutsideToClose(true)\r\n                        .parent(angular.element(document.body))\r\n                        .ok(gettextCatalog.getString('Confirmar'))\r\n                        .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n                    $mdDialog.show(confirm).then(function () {\r\n                        //Abrimos el modal de resultados de gestion\r\n                        openFinishLeadBox();\r\n                    });\r\n                } else {\r\n                    //Abrimos el modal de resultados de gestion\r\n                    openFinishLeadBox();\r\n                }\r\n                deferred.resolve();\r\n            }, function () {\r\n                deferred.reject();\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo visualizar las historias del lead\r\n         *\r\n         * @param ev\r\n         * @param histories\r\n         */\r\n        function openLeadHistoryDialog(ev, histories) {\r\n\r\n            $mdDialog.show({\r\n                controller: 'LeadHistoryDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/leadHistory/leadHistory-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    LeadHistories: histories,\r\n                    event: ev\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo visualizar las actividades del lead\r\n         *\r\n         * @param ev\r\n         * @param activities\r\n         */\r\n        function openLeadActivityDialog(ev, activities) {\r\n\r\n            $mdDialog.show({\r\n                controller: 'LeadActivityDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/leadActivity/leadActivity-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    LeadActivities: activities,\r\n                    event: ev\r\n                }\r\n            });\r\n\r\n        }\r\n\r\n        /**\r\n         * Añade vehiculo\r\n         */\r\n        function addVehicle() {\r\n            vm.lead.vehicles.push({});\r\n        }\r\n\r\n        /**\r\n         * Añade vehiculo actular\r\n         */\r\n        function addAppraisal() {\r\n            vm.lead.appraisals.push({\r\n                circulation_date:null,\r\n                buy_date:null,\r\n                registration_date:null,\r\n                last_mechanic_date:null\r\n            });\r\n        }\r\n\r\n\r\n        /**\r\n         * Borra vehiculo\r\n         */\r\n        function deleteVehicle(i, vehicle) {\r\n            if (vehicle.id) {\r\n                vehiclesService.removeVehicle(vehicle).then(function () {\r\n                    vm.lead.vehicles.splice(i, 1);\r\n                });\r\n            } else {\r\n                vm.lead.vehicles.splice(i, 1);\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Borra vehiculo actual\r\n         */\r\n        function deleteAppraisal(i, appraisal) {\r\n            if (appraisal.id) {\r\n                appraisalsService.removeAppraisal(appraisal).then(function () {\r\n                    vm.lead.appraisals.splice(i, 1);\r\n                });\r\n            } else {\r\n                vm.lead.appraisals.splice(i, 1);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Evento que se dispara cuando cambia la fuente\r\n         */\r\n        function changeSource() {\r\n            for (var i in vm.lead.vehicles) {\r\n                vm.lead.vehicles[i].origin = null;\r\n                vm.lead.vehicles[i].media = null;\r\n            }\r\n            if (vm.lead.source_data && vm.lead.source_data.concession) {\r\n                reloadOrigins(vm.lead.source_data.concession);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Evento que se dispara cuando cambia el origen\r\n         */\r\n        function selectOrigin(vehicle) {\r\n            for (var i in vm.origins) {\r\n                if (vm.origins[i].id === vehicle.origin) {\r\n                    vehicle.channelOptions = vm.origins[i].available_channels_data;\r\n                }\r\n            }\r\n        }\r\n\r\n        function getNumber(num) {\r\n            return new Array(num);\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para eliminar una task\r\n         *\r\n         * @param task\r\n         */\r\n        function saveTask(task) {\r\n            if(task.id){\r\n                var obj = {\r\n                    id: task.id,\r\n                    realization_date: new Date(),\r\n                    realization_date_check: true\r\n                };\r\n                return tasksService.saveTask(obj).then(function (res) {\r\n                    //done\r\n                    reloadLead()\r\n                }, function (error) {\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al realizar la solicitud.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n                });\r\n            }else{\r\n                task.realization_date = new Date();\r\n                task.realization_date_check = true;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cambiamos el estado y lo reactivamos\r\n         */\r\n        function reactivate(lead) {\r\n            leadsService.reactivateLead(lead.id).then(function (response) {\r\n                reloadLead(response);\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Lead reactivado correctamente\"));\r\n            }, function (error) {\r\n                $rootScope.loadingProgress = false;\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al reactivar lead.\") + \" \" + (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n\r\n        function sendMail(lead) {\r\n            leadsService.sendMail(lead.id).then(function (response) {\r\n\r\n            }, function (error) {\r\n                console.log(error);\r\n            });\r\n        }\r\n\r\n        function trustSrc(src) {\r\n            return $sce.trustAsResourceUrl(src);\r\n        }\r\n\r\n        function hubspot() {\r\n            return leadsService.hubspot(vm.lead).then(function (response) {\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Lead sincronizado correctamente\"));\r\n            }, function (error) {\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al sincronizar.\") + \" \" + (error.data.error || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Change filters\r\n         *\r\n         * @param key\r\n         * @param value\r\n         */\r\n        function changeFilter(key, value) {\r\n          vm.filters[key] = value;\r\n          for (var i in vm.leads) {\r\n            vm.leads[i].filters.page = 1;\r\n            vm.leads[i].filters[key] = value;\r\n          }\r\n        }\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadController', LeadController);\r\n\r\n    /** @ngInject */\r\n    function LeadController($rootScope, currentUser, Lead, leadsService, NotifyService,\r\n                               $document, $state, $mdDialog, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.user=currentUser;\r\n        vm.lead = angular.copy(Lead);\r\n\r\n        // Methods\r\n\r\n        //////////\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('SendWhatsappDialogController', SendWhatsappDialogController);\r\n\r\n    /** @ngInject */\r\n    function SendWhatsappDialogController($mdDialog, Lead, clientsService, usersService, NotifyService, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.lead=Lead;\r\n        vm.whatsappMsg='';\r\n        vm.manageTemplates = false;\r\n        vm.newAlias = '';\r\n        vm.newText = '';\r\n\r\n        vm.templates = [];\r\n\r\n        vm.templateSelected = null;\r\n\r\n        // Methods\r\n        vm.sendWhatsapp = sendWhatsapp;\r\n        vm.startManageTemplates = startManageTemplates;\r\n        vm.sendWhatsappTemplates = sendWhatsappTemplates;\r\n        vm.updateTemplate = updateTemplate;\r\n        vm.closeDialog = closeDialog;\r\n\r\n\r\n        //////////\r\n\r\n        /* Send Whatsapp */\r\n        function sendWhatsapp() {\r\n            var msg={message:vm.whatsappMsg, lead:vm.lead.id};\r\n            clientsService.sendWhatsapp(msg).then(function (res) {\r\n                var phone=vm.lead.client.phone;\r\n                var url='https://web.whatsapp.com/send?phone='+phone+'&text='+encodeURIComponent(vm.whatsappMsg);\r\n                window.open(url, '_blank');\r\n                vm.whatsappMsg='';\r\n                closeDialog();\r\n            });\r\n        }\r\n\r\n        /* Send Whatsapp */\r\n        function startManageTemplates() {\r\n            vm.templates = angular.copy(Lead.user_data.whatsapp_templates);\r\n            vm.templates.push({\r\n                alias: '',\r\n                text: ''\r\n            });\r\n\r\n            vm.manageTemplates = true;\r\n        }\r\n\r\n        /* Send Whatsapp */\r\n        function sendWhatsappTemplates() {\r\n            var newTemplates = [];\r\n            for (var i in vm.templates) {\r\n                if (vm.templates[i].alias !== '') {\r\n                    newTemplates.push({\r\n                        id: vm.templates[i].id,\r\n                        alias: vm.templates[i].alias,\r\n                        text: vm.templates[i].text,\r\n                        user: vm.lead.user\r\n                    });\r\n                }\r\n            }\r\n\r\n            return usersService.saveUser({whatsapp_templates: newTemplates, email: vm.lead.user_data.email, id: vm.lead.user}).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Plantillas guardadas correctamente\"));\r\n                vm.lead.user_data.whatsapp_templates = newTemplates;\r\n                vm.manageTemplates = false;\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar las plantillas.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n        function updateTemplate()\r\n        {\r\n            // VARIABLE ALIAS VARIABLE\r\n            // [user_user]!first_name & [user_user]!last_name Nombre vendedor\r\n            // [leads_client]!client_name Nombre del cliente\r\n            // [user_user]!phone Telefono del vendedor\r\n            // \"[leads_vehicle]! vehiclebrand_model & \"\" \"\"\r\n            // [leads_vehicle]! vehicle model & \"\" \"\"\r\n            // [leads_vehicle]! vehicle__price\" Vehículo solicitado\r\n            // [leads_origin]!name Origen del lead\r\n            // [leads_vehicle]!vehicle_ad_link url anuncio\r\n            // [leads_concessionaire]!name nombre del concesionario\r\n\r\n            if(vm.templateSelected) {\r\n                vm.whatsappMsg = vm.templateSelected;\r\n                vm.whatsappMsg = vm.whatsappMsg.replaceAll('[Nombre vendedor]', vm.lead.user_data.first_name + ' ' + vm.lead.user_data.last_name);\r\n                vm.whatsappMsg = vm.whatsappMsg.replaceAll('[Telefono del vendedor]', vm.lead.user_data.phone);\r\n                if (vm.lead.vehicles.length > 0) {\r\n                    var v = '';\r\n                    if (vm.lead.vehicles[0].brand_model) {\r\n                        v = vm.lead.vehicles[0].brand_model.split('__')[0];\r\n                    }\r\n                    if (vm.lead.vehicles[0].model) {\r\n                        v += ' ' + vm.lead.vehicles[0].model.split('__')[0];\r\n                    }\r\n                    if (vm.lead.vehicles[0].price) {\r\n                        v += ' ' + vm.lead.vehicles[0].price + \" €\";\r\n                    }\r\n                    vm.whatsappMsg = vm.whatsappMsg.replaceAll('[Vehículo solicitado]', v);\r\n                    if (vm.lead.vehicles[0].ad_link) {\r\n                        vm.whatsappMsg = vm.whatsappMsg.replaceAll('[Url anuncio]', vm.lead.vehicles[0].ad_link);\r\n                    }\r\n\r\n                }\r\n                if (vm.lead.origin) {\r\n                    vm.whatsappMsg = vm.whatsappMsg.replaceAll('[Origen del lead]', vm.lead.origin.name);\r\n                }\r\n                if (vm.lead.concessionaire_data) {\r\n                    vm.whatsappMsg = vm.whatsappMsg.replaceAll('[Nombre del concesionario]', vm.lead.concessionaire_data.name);\r\n                }\r\n\r\n            }\r\n        }\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('SaveLeadDialogController', SaveLeadDialogController);\r\n\r\n    /** @ngInject */\r\n    function SaveLeadDialogController($mdDialog, Lead, Tasks, leadsService, leadActionsService, taskTypesService,\r\n                                      NotifyService, $q, $state, $timeout, tasksService, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.lead=Lead;\r\n        vm.tasks=Tasks;\r\n        vm.leadAction=leadActionsService.getEmptyLeadAction(Lead);\r\n        vm.taskTypes=taskTypesService.taskTypes;\r\n\r\n        // Methods\r\n        vm.saveSaveLead = saveSaveLead;\r\n        vm.closeDialog = closeDialog;\r\n        vm.finishLead = finishLead;\r\n        vm.setDate = setDate;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Guardar informe\r\n         */\r\n        function saveSaveLead() {\r\n            var deferred = $q.defer();\r\n\r\n            var obj=angular.copy(vm.lead);\r\n            delete obj.request;\r\n\r\n            leadsService.saveLead(obj).then(function(response){\r\n\r\n                leadActionsService.saveLeadAction(vm.leadAction).then(function(response){\r\n                    closeDialog();\r\n                    $timeout(function(){\r\n                        $state.go(\"app.leads.board\");\r\n                    },500);\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Informe guardado correctamente\"));\r\n                    deferred.resolve(response);\r\n\r\n                }, function(error){\r\n                    saveKO(error);\r\n                    deferred.reject(error);\r\n                });\r\n\r\n            }, function(error){\r\n                saveKO(error);\r\n                deferred.reject(error);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Finaliza el informe\r\n         */\r\n        function finishLead() {\r\n            var deferred = $q.defer();\r\n            leadsService.getLead(vm.lead.id).then(function(res){\r\n                if(res.pending_tasks){\r\n                    var confirm = $mdDialog.confirm()\r\n                        .title(gettextCatalog.getString('Finalizar lead'))\r\n                        .textContent(gettextCatalog.getString('Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?'))\r\n                        .ariaLabel(gettextCatalog.getString('Finalizar lead'))\r\n                        .clickOutsideToClose(true)\r\n                        .parent(angular.element(document.body))\r\n                        .ok(gettextCatalog.getString('Confirmar'))\r\n                        .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n                    $mdDialog.show(confirm).then(function () {\r\n                        //Abrimos el modal de resultados de gestion\r\n                        openFinishLeadDialog();\r\n                    });\r\n                }else{\r\n                    //Abrimos el modal de resultados de gestion\r\n                    openFinishLeadDialog();\r\n                }\r\n                deferred.resolve();\r\n            },function(){\r\n                deferred.reject();\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para indicar el resultado del lead\r\n         */\r\n        function openFinishLeadDialog(lead){\r\n            lead = typeof lead !== 'undefined' ? lead : vm.lead;\r\n            $mdDialog.show({\r\n                controller: 'FinishLeadDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/finishLead/finishLead-dialog.html',\r\n                parent: angular.element(document.body),\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Lead:lead\r\n                }\r\n            });\r\n        }\r\n\r\n        function saveKO(error){\r\n            vm.serverErrors = error.data;\r\n            NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el informe.\")+\" \" + (error.data.non_field_errors || \"\"));\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n        function setDate(days) {\r\n            var today = new Date();\r\n            vm.leadAction.date = new Date(today.getFullYear(), today.getMonth(), today.getDate() + days, 9, 0);\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadStatusDateDialogController', LeadStatusDateDialogController);\r\n\r\n    /** @ngInject */\r\n    function LeadStatusDateDialogController($mdDialog, Lead, Field, leadsService, NotifyService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.lead={id: Lead.id};\r\n        vm.field='custom_'+Field;\r\n        vm.lead[vm.field]=moment(Lead[Field], \"YYYY-MM-DDThh:mm\").toDate();\r\n\r\n        // Methods\r\n        vm.saveLeadStatus = saveLeadStatus;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar informe\r\n         */\r\n        function saveLeadStatus() {\r\n            return leadsService.saveLead(angular.copy(vm.lead)).then(function(res){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Fecha guardada correctamente\"));\r\n                Lead[Field]=res[Field];\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar la fecha.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadStatusDialogController', LeadStatusDialogController);\r\n\r\n    /** @ngInject */\r\n    function LeadStatusDialogController($mdDialog, Lead, leadsService, NotifyService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.lead=angular.copy(Lead);\r\n        vm.status=[\r\n            {\r\n                id:'new',\r\n                name:gettextCatalog.getString('Lead no atendido')\r\n            },{\r\n                id:'commercial_management',\r\n                name:gettextCatalog.getString('Tareas pendientes')\r\n            },{\r\n                id:'tracing',\r\n                name:gettextCatalog.getString('Seguimiento')\r\n            }\r\n        ];\r\n\r\n        // Methods\r\n        vm.saveLeadStatus = saveLeadStatus;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar informe\r\n         */\r\n        function saveLeadStatus() {\r\n            return leadsService.changeStatus(angular.copy(vm.lead)).then(function(res){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Estado guardado correctamente\"));\r\n                Lead.status=res.status;\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el estado.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadHistoryDialogController', LeadHistoryDialogController);\r\n\r\n    /** @ngInject */\r\n    function LeadHistoryDialogController($mdDialog, LeadHistories, NotifyService, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Histórico');\r\n        vm.leadHistories=LeadHistories;\r\n\r\n        // Methods\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        \r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadActivityDialogController', LeadActivityDialogController);\r\n\r\n    /** @ngInject */\r\n    function LeadActivityDialogController($mdDialog, LeadActivities, NotifyService, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Actividades');\r\n        vm.leadActivities=LeadActivities;\r\n\r\n        vm.activityStatus=[\r\n            {\r\n                id:'commercial_management',\r\n                name:gettextCatalog.getString('En gestión')\r\n            },{\r\n                id:'tracing',\r\n                name:gettextCatalog.getString('Seguimiento')\r\n            }\r\n        ];\r\n\r\n        // Methods\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        \r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadContactDialogController', LeadContactDialogController);\r\n\r\n    /** @ngInject */\r\n    function LeadContactDialogController($mdDialog, LeadContacts, NotifyService, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Historial de contactos');\r\n        vm.leadContacts=LeadContacts;\r\n\r\n        // Methods\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        \r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('ExportLeadDialogController', ExportLeadDialogController);\r\n\r\n    /** @ngInject */\r\n    function ExportLeadDialogController($rootScope, $mdDialog, Concessionaires, concessionairesService, NotifyService,\r\n                                        usersService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.exportLead={\r\n            created_start_date:new Date(moment().subtract(1, 'months').startOf('day').format()),\r\n            created_end_date:new Date(moment().startOf('day').format())\r\n        };\r\n        vm.title = gettextCatalog.getString('Exportar Leads');\r\n        vm.concessionaires = Concessionaires;\r\n        $rootScope.loadingProgress = false;\r\n\r\n        // Methods\r\n        vm.getDocument = getDocument;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        //descagar en general de documentos\r\n        function getDocument(){\r\n            return concessionairesService.getDocument(vm.exportLead).then(function(response){\r\n                downloadFile(response,\"leads.xls\",\"leads.xls\");\r\n                closeDialog();\r\n            }, function(error){\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al exportar leads\"));\r\n            });\r\n        }\r\n\r\n        //Descarga cualquier tipo de fichero\r\n        function downloadFile(response, name, type) {\r\n            var blob = new Blob([response], {type: type});\r\n\r\n            if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n                window.navigator.msSaveOrOpenBlob(blob);\r\n            }\r\n            else {\r\n                var link = document.createElement('a');\r\n                link.href = window.URL.createObjectURL(blob);\r\n                link.download = name;\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('DuplicateLeadsDialogController', DuplicateLeadsDialogController);\r\n\r\n    /** @ngInject */\r\n    function DuplicateLeadsDialogController($mdDialog, DuplicateLeads, leadStatusService, $state, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Posible lead duplicado');\r\n        vm.duplicateLeads = DuplicateLeads;\r\n        vm.lead = null;\r\n        vm.status=leadStatusService.leadStatus;\r\n\r\n        // Methods\r\n        vm.goToLead = goToLead;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar duplicateLeadso\r\n         */\r\n        function goToLead() {\r\n            $state.go(\"app.leads.get.edit\",{lead:vm.lead});\r\n            $mdDialog.hide();\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('LeadDialogController', LeadDialogController);\r\n\r\n    /** @ngInject */\r\n    function LeadDialogController($mdDialog, Lead, leadsService, Concessionaire, NotifyService, usersService, $q, Users, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.lead={\r\n            user:Lead.user,\r\n            user_data:Lead.user_data,\r\n            id:Lead.id,\r\n            source_data_prov:Lead.source_data_prov\r\n        };\r\n\r\n        vm.users=Users;\r\n\r\n        vm.title = gettextCatalog.getString('Asignar comercial');\r\n\r\n        // Methods\r\n        vm.saveLead = saveLead;\r\n        vm.getFullUserName = getFullUserName;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar informe\r\n         */\r\n        function saveLead(user) {\r\n            if(user && user.id){\r\n                vm.lead.user=user.id;\r\n                vm.lead.user_data=user;\r\n                return leadsService.saveLead(angular.copy(vm.lead)).then(function(res){\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Infome guardado correctamente\"));\r\n                    Lead.status=res.status;\r\n                    Lead.end_date=res.end_date;\r\n                    Lead.user_data=res.user_data;\r\n                    closeDialog();\r\n                }, function(error){\r\n                    vm.serverErrors = error.data;\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el infome.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                });\r\n            }else{\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Debe seleccionar un comercial existente. \"));\r\n            }\r\n\r\n        }\r\n\r\n        function getFullUserName(user) {\r\n            if(user){\r\n                return user.first_name+\" \"+user.last_name;\r\n            }\r\n            return '';\r\n        }\r\n        \r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .controller('FinishLeadDialogController', FinishLeadDialogController);\r\n\r\n    /** @ngInject */\r\n    function FinishLeadDialogController($mdDialog, Lead, leadsService, leadResultsService, NotifyService, $state, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.lead={\r\n            result:null,\r\n            result_reason:null,\r\n            id:Lead.id\r\n        };\r\n\r\n        vm.title = gettextCatalog.getString('Finalizar');\r\n        vm.actionError=false;\r\n        vm.buttonErros=leadResultsService.leadResultsErrors;\r\n\r\n        // Methods\r\n        vm.saveLead = saveLead;\r\n        vm.saveLeadError = saveLeadError;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar informe\r\n         */\r\n        function saveLead(result) {\r\n            vm.lead.result=result;\r\n\r\n            if(result==='negative' || result==='not_available' || result==='error'){\r\n                vm.actionError=true;\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Elija una opción\"));\r\n                return;\r\n            }\r\n\r\n            return leadsService.saveLead(angular.copy(vm.lead)).then(function(res){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Lead finalizado correctamente\"));\r\n                // Lead.result=res.result;\r\n                // Lead.status=res.status;\r\n                // Lead.status_dates=res.status_dates;\r\n                $state.go(\"app.leads.board\");\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al finalizar lead.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Guardar informe\r\n         */\r\n        function saveLeadError(result) {\r\n            vm.lead.result_reason=result;\r\n\r\n            return leadsService.saveLead(angular.copy(vm.lead)).then(function(res){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Lead finalizado correctamente\"));\r\n                // Lead.result=res.result;\r\n                // Lead.status=res.status;\r\n                // Lead.status_dates=res.status_dates;\r\n                $state.go(\"app.leads.board\");\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al finalizar lead.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.concessionaires',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider, msApiProvider) {\r\n\r\n        // State\r\n        $stateProvider.state('app.concessionaires', {\r\n            url      : '/concessionaires',\r\n            views    : {\r\n                'content@app': {\r\n                    templateUrl: 'app/main/concessionaires/concessionaires.html',\r\n                    controller : 'ConcessionairesController as vm'\r\n                }\r\n            },\r\n            resolve  : {\r\n                currentUser: function (AuthService){\r\n                    return AuthService.getCurrentUser().then(function (response) {\r\n                        if (response) {\r\n                            return response;\r\n                        }\r\n                    });\r\n                },\r\n                Concessionaires: function (concessionairesService) {\r\n                    concessionairesService.concessionaires.filters={};\r\n                    return concessionairesService.getConcessionairesConfig();\r\n                }\r\n            },\r\n            bodyClass: 'todo'\r\n        });\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.concessionaires')\r\n        .controller('ConcessionaireDialogController', ConcessionaireDialogController);\r\n\r\n    /** @ngInject */\r\n    function ConcessionaireDialogController($mdDialog, Concessionaire, concessionairesService, NotifyService, originsService, channelsService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Editar concesionario');\r\n\r\n        if (!Concessionaire) {\r\n            vm.title = gettextCatalog.getString('Nuevo concesionario');\r\n            vm.concessionaire = concessionairesService.getEmptyConcessionaire();\r\n        } else {\r\n            vm.concessionaire = angular.copy(Concessionaire); // Copiamos para no modificar el original hasta guardar\r\n        }\r\n\r\n        // Methods\r\n        vm.saveConcessionaire = saveConcessionaire;\r\n        vm.closeDialog = closeDialog;\r\n        vm.addSource = addSource;\r\n        vm.removeSource = removeSource;\r\n        vm.getOrigins = getOrigins;\r\n        vm.getChannels = getChannels;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar concessionaireo\r\n         */\r\n        function saveConcessionaire() {\r\n            var c=angular.copy(vm.concessionaire);\r\n            //lo borramos porque ya lo editamos en otro dialogo\r\n            delete vm.concessionaire.work_calendar;\r\n            return concessionairesService.saveConcessionaire(c).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Concesionario guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el concesionario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n        /**\r\n         * Añade un source\r\n         */\r\n        function addSource() {\r\n            vm.concessionaire.sources.push({data:\"\"});\r\n        }\r\n\r\n        /**\r\n         * Borra un source\r\n         */\r\n        function removeSource($index,form, item) {\r\n            if(item.id){\r\n                return concessionairesService.removeSource(angular.copy(item)).then(function(){\r\n                    form.$setDirty();\r\n                    vm.concessionaire.sources.splice($index,1);\r\n                }, function(error){\r\n                    NotifyService.errorMessage(gettextCatalog.getString(\"Error al borrar la fuente.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n                });\r\n            }else{\r\n                form.$setDirty();\r\n                vm.concessionaire.sources.splice($index,1);\r\n            }\r\n        }\r\n\r\n        /* Orígenes */\r\n        function getOrigins(searchText) {\r\n            var deferred = $q.defer();\r\n            originsService.getAllOrigins(searchText).then(function(origins){\r\n                deferred.resolve(origins);\r\n            });\r\n            return deferred.promise;\r\n        }\r\n\r\n        /* Canales */\r\n        function getChannels(searchText,origin) {\r\n            var deferred = $q.defer();\r\n            //Primero comprobamos si el origen seleccionado tiene algun canal, si lo tiene devolvemos esos canales, si no devolvemos todos los canales\r\n            if(origin.available_channels_data.length>0){\r\n                deferred.resolve(origin.available_channels_data);\r\n            }else{\r\n                channelsService.getAllChannels(searchText).then(function(channels){\r\n                    deferred.resolve(channels);\r\n                });\r\n            }\r\n            return deferred.promise;\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.concessionaires')\r\n        .controller('ConcessionaireCalendarDialogController', ConcessionaireCalendarDialogController);\r\n\r\n    /** @ngInject */\r\n    function ConcessionaireCalendarDialogController($mdDialog, Concessionaire, concessionairesService, NotifyService, originsService, channelsService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Calendario de trabajo');\r\n\r\n        vm.concessionaire = angular.copy(Concessionaire); // Copiamos para no modificar el original hasta guardar\r\n\r\n        vm.week={};\r\n        vm.week.monday=gettextCatalog.getString(\"Lunes\");\r\n        vm.week.tuesday=gettextCatalog.getString(\"Martes\");\r\n        vm.week.wednesday=gettextCatalog.getString(\"Miércoles\");\r\n        vm.week.thursday=gettextCatalog.getString(\"Jueves\");\r\n        vm.week.friday=gettextCatalog.getString(\"Viernes\");\r\n        vm.week.saturday=gettextCatalog.getString(\"Sábado\");\r\n        vm.week.sunday=gettextCatalog.getString(\"Domingo\");\r\n\r\n        init();\r\n\r\n        // Methods\r\n        vm.saveConcessionaire = saveConcessionaire;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        function init(){\r\n            if(!vm.concessionaire.work_calendar){\r\n                vm.concessionaire.work_calendar={};\r\n                vm.concessionaire.work_calendar.monday={\r\n                    working_day:false\r\n                };\r\n                vm.concessionaire.work_calendar.tuesday={\r\n                    working_day:false\r\n                };\r\n                vm.concessionaire.work_calendar.wednesday={\r\n                    working_day:false\r\n                };\r\n                vm.concessionaire.work_calendar.thursday={\r\n                    working_day:false\r\n                };\r\n                vm.concessionaire.work_calendar.friday={\r\n                    working_day:false\r\n                };\r\n                vm.concessionaire.work_calendar.saturday={\r\n                    working_day:false\r\n                };\r\n                vm.concessionaire.work_calendar.sunday={\r\n                    working_day:false\r\n                };\r\n            }else{\r\n                var c=vm.concessionaire;\r\n                for(var i in c.work_calendar){\r\n                    if(c.work_calendar[i].start_hour){\r\n                        c.work_calendar[i].start_hour=moment(c.work_calendar[i].start_hour,\"HH:mm\").toDate();\r\n                    }\r\n                    if(c.work_calendar[i].end_hour){\r\n                        c.work_calendar[i].end_hour=moment(c.work_calendar[i].end_hour,\"HH:mm\").toDate();\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guardar concessionaireo\r\n         */\r\n        function saveConcessionaire() {\r\n            var c=angular.copy(vm.concessionaire);\r\n            for(var i in c.work_calendar){\r\n                if(c.work_calendar[i].start_hour){\r\n                    c.work_calendar[i].start_hour=moment(c.work_calendar[i].start_hour).format(\"HH:mm\");\r\n                }\r\n                if(c.work_calendar[i].end_hour){\r\n                    c.work_calendar[i].end_hour=moment(c.work_calendar[i].end_hour).format(\"HH:mm\");\r\n                }\r\n            }\r\n            return concessionairesService.saveConcessionaire(c).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Calendario guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el calendario.\") +\" \" + (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.concessionaires')\r\n        .controller('ConcessionaireNotesDialogController', ConcessionaireNotesDialogController);\r\n\r\n    /** @ngInject */\r\n    function ConcessionaireNotesDialogController($mdDialog, Concessionaire, concessionairesService, NotifyService, originsService, channelsService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Notas');\r\n\r\n        vm.concessionaire = angular.copy(Concessionaire); // Copiamos para no modificar el original hasta guardar\r\n\r\n        // Methods\r\n        vm.saveConcessionaire = saveConcessionaire;\r\n        vm.addNote = addNote;\r\n        vm.deleteNote = deleteNote;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar concessionaireo\r\n         */\r\n        function saveConcessionaire() {\r\n            var c=angular.copy(vm.concessionaire);\r\n            //lo borramos porque ya lo editamos en otro dialogo\r\n            delete vm.concessionaire.work_calendar;\r\n            return concessionairesService.saveConcessionaire(c).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Concesionario guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el concesionario.\") +\" \"+ (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Añade una nota\r\n         */\r\n        function addNote(){\r\n            vm.concessionaire.notes_data.push({content:'', modified:new Date()});\r\n        }\r\n\r\n        /**\r\n         * borra una nota\r\n         */\r\n        function deleteNote(note){\r\n            if(note.id){\r\n                //buscamos por id\r\n                for (var i = 0; i < vm.concessionaire.notes_data.length; i++) {\r\n                    if (vm.concessionaire.notes_data[i].id === note.id) {\r\n                        vm.concessionaire.notes_data.splice(i,1);\r\n                        break;\r\n                    }\r\n                }\r\n            }else{\r\n                //buscamos por contenido\r\n                for (var i = 0; i < vm.concessionaire.notes_data.length; i++) {\r\n                    if (vm.concessionaire.notes_data[i].content === note.content && !note.id) {\r\n                        vm.concessionaire.notes_data.splice(i,1);\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.channels',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider, msApiProvider) {\r\n\r\n        // State\r\n        $stateProvider.state('app.channels', {\r\n            url      : '/channels',\r\n            views    : {\r\n                'content@app': {\r\n                    templateUrl: 'app/main/channels/channels.html',\r\n                    controller : 'ChannelsController as vm'\r\n                }\r\n            },\r\n            resolve  : {\r\n                currentUser: function (AuthService){\r\n                    return AuthService.getCurrentUser().then(function (response) {\r\n                        if (response) {\r\n                            return response;\r\n                        }\r\n                    });\r\n                },\r\n                Channels: function (channelsService) {\r\n                    channelsService.channels.filters={};\r\n                    return channelsService.getChannels();\r\n                }\r\n            },\r\n            bodyClass: 'todo'\r\n        });\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.channels')\r\n        .controller('ChannelDialogController', ChannelDialogController);\r\n\r\n    /** @ngInject */\r\n    function ChannelDialogController($scope, $mdDialog, Channel, channelsService, NotifyService, $timeout, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Editar canal');\r\n\r\n        if (!Channel) {\r\n            vm.title = gettextCatalog.getString('Nuevo canal');\r\n            vm.channel = channelsService.getEmptyChannel();\r\n        } else {\r\n            vm.channel = angular.copy(Channel); // Copiamos para no modificar el channelal hasta guardar\r\n        }\r\n\r\n        // Methods\r\n        vm.saveChannel = saveChannel;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar channelo\r\n         */\r\n        function saveChannel() {\r\n            return channelsService.saveChannel(angular.copy(vm.channel)).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Canal guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el canal.\") +\" \" + (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.acds',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider, msApiProvider) {\r\n\r\n        // State\r\n        $stateProvider.state('app.acds', {\r\n            url      : '/acds',\r\n            views    : {\r\n                'content@app': {\r\n                    templateUrl: 'app/main/acds/acds.html',\r\n                    controller : 'AcdsController as vm'\r\n                }\r\n            },\r\n            resolve  : {\r\n                currentUser: function (AuthService){\r\n                    return AuthService.getCurrentUser().then(function (response) {\r\n                        if (response) {\r\n                            return response;\r\n                        }\r\n                    });\r\n                },\r\n                Acds: function (acdsService) {\r\n                    acdsService.acds.filters={};\r\n                    return acdsService.getAcds();\r\n                }\r\n            },\r\n            bodyClass: 'todo'\r\n        });\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.acds')\r\n        .controller('AcdDialogController', AcdDialogController);\r\n\r\n    /** @ngInject */\r\n    function AcdDialogController($mdDialog, Acd, acdsService, NotifyService, originsService, $q, gettextCatalog) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.title = gettextCatalog.getString('Asignar Lead');\r\n        vm.acd = angular.copy(Acd); // Copiamos para no modificar el original hasta guardar\r\n\r\n        // Methods\r\n        vm.saveAcd = saveAcd;\r\n        vm.closeDialog = closeDialog;\r\n\r\n        //////////\r\n        /**\r\n         * Guardar acdo\r\n         */\r\n        function saveAcd() {\r\n            return acdsService.saveAcd(angular.copy(vm.acd)).then(function(){\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Concesionario guardado correctamente\"));\r\n                closeDialog();\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al guardar el concesionario.\") +\" \" + (error.data.non_field_errors || \"\"));\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Cerrar el cuadro de diálogo sin cambios\r\n         */\r\n        function closeDialog() {\r\n            $mdDialog.hide();\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.auth', [])\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider, msApiProvider) {\r\n        $stateProvider.state('app.auth', {\r\n            abstract: true,\r\n            url: '/auth'\r\n        })\r\n\r\n        // State\r\n        .state('app.auth.login', {\r\n            url: '/login',\r\n            views: {\r\n                'main@': {\r\n                    templateUrl: 'app/core/layouts/content-only.html',\r\n                    controller: 'MainController as vm'\r\n                },\r\n                'content@app.auth.login': {\r\n                    templateUrl: 'app/main/auth/views/login/login.html',\r\n                    controller: 'LoginController as vm'\r\n                }\r\n            },\r\n            bodyClass: 'login'\r\n        })\r\n        // State\r\n        .state('app.auth.register', {\r\n            url      : '/register',\r\n            views    : {\r\n                'main@'                                 : {\r\n                    templateUrl: 'app/core/layouts/content-only.html',\r\n                    controller : 'MainController as vm'\r\n                },\r\n                'content@app.auth.register': {\r\n                    templateUrl: 'app/main/auth/views/register/register.html',\r\n                    controller : 'RegisterController as vm'\r\n                }\r\n            },\r\n            bodyClass: 'register'\r\n        });\r\n\r\n        msApiProvider.setBaseUrl('api/');\r\n\r\n        // Api\r\n        msApiProvider.register('auth.login', ['auth/login/']);\r\n        msApiProvider.register('auth.logout', ['auth/logout/']);\r\n        msApiProvider.register('auth.currentUser', ['user/current_user/']);\r\n        msApiProvider.register('auth.reset', ['authentication/reset_password/']);\r\n        // msApiProvider.register('auth.resetConfirm', ['roles/reset_confirm_password/']);\r\n        msApiProvider.register('auth.register', ['user/']);\r\n        // msApiProvider.register('auth.permissions', ['pydrfpermissions/pydrfpermissions/']);\r\n\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.auth')\r\n        .controller('LoginController', LoginController);\r\n\r\n    /** @ngInject */\r\n    function LoginController(AuthService, NotifyService, $stateParams)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n\r\n        // Methods\r\n        vm.login = login;\r\n        vm.loginSelected=$stateParams.action || \"students\";\r\n\r\n        //////////\r\n        function login(){\r\n            return AuthService.login(vm.username, vm.password).then(function(user){\r\n                //console.log(\"OK\")\r\n                //se ejecutará el evento por broadcast\r\n            }, function(res){\r\n                NotifyService.errorMessage(res.error);\r\n            });\r\n        }\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.auth')\r\n        .controller('RegisterController', RegisterController);\r\n\r\n    /** @ngInject */\r\n    function RegisterController(AuthService, NotifyService, $q, gettextCatalog)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.form = {};\r\n\r\n\r\n        // Methods\r\n        vm.register = register;\r\n\r\n        //////////\r\n\r\n        /*\r\n        * Registro de empresa\r\n        * */\r\n        function register(){\r\n            var form=angular.copy(vm.form);\r\n            return AuthService.register(form).then(function(data){\r\n                // $state.go(\"app.auth.login\");\r\n                NotifyService.successMessage(gettextCatalog.getString(\"Registro realizado correctamente\"));\r\n            }, function(error){\r\n                vm.serverErrors = error.data;\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al realizar el registro\"));\r\n            });\r\n        }\r\n\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.users')\r\n        .factory('usersService', usersService);\r\n\r\n    /** @ngInject */\r\n    function usersService($q, api) {\r\n\r\n        var service = {\r\n            users: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getUsers: getUsers,\r\n            getAllUsers: getAllUsers,\r\n            getAllUsersConcessionaire: getAllUsersConcessionaire,\r\n            getAllAdmins: getAllAdmins,\r\n            getUser: getUser,\r\n            saveUser: saveUser,\r\n            getEmptyUser: getEmptyUser,\r\n            removeUser: removeUser,\r\n            removeConcessionaire: removeConcessionaire,\r\n            removeSFA: removeSFA\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de users\r\n         */\r\n        function getUsers() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            var f=angular.copy(service.users.filters);\r\n\r\n            if(f.concessionaire_data && f.concessionaire_data.id){\r\n                f.userconcession__concessionaire__id=f.concessionaire_data.id;\r\n            }\r\n\r\n            delete f.concessionaire_data;\r\n\r\n            api.users.get(f, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.users.data=response.results;\r\n                service.users.count = response.count;\r\n\r\n                deferred.resolve(service.users);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.users.filters.page!=1){\r\n                    service.users.filters.page=1;\r\n                    getUsers();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de users filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllUsers(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.users.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.users.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de users filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllUsersConcessionaire(search, Concessionaire) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f={};\r\n            f.userconcession__concessionaire__id=Concessionaire;\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.users.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de administradores filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllAdmins(search, concessionaire) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.users.filters);\r\n            f.search=search;\r\n            f.concessionaire=concessionaire.id;\r\n            f.page_size=\"all\";\r\n            api.admins.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una user determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getUser(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.users.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la user que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveUser(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var user = angular.copy(form);\r\n\r\n            for(var i in user.related_concessionaires){\r\n                if(user.related_concessionaires[i].concessionaire_data && user.related_concessionaires[i].concessionaire_data.id){\r\n                    user.related_concessionaires[i].concessionaire=user.related_concessionaires[i].concessionaire_data.id;\r\n                }\r\n            }\r\n\r\n            if(form.id){\r\n                api.users.update(user, updateOK, saveKO);\r\n            }else{\r\n                api.users.create(user, createOK, saveKO);\r\n            }\r\n\r\n            return deferred.promise;\r\n\r\n\r\n            function createOK(response) {\r\n                service.getUsers();\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.users.data.length; i++) {\r\n                    if (service.users.data[i].id === response.id) {\r\n                        service.users.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un usero vacío\r\n         */\r\n        function getEmptyUser() {\r\n            return {\r\n                related_concessionaires:[]\r\n            };\r\n        }\r\n        \r\n        function removeUser(user){\r\n            var deferred = $q.defer();\r\n\r\n            api.users.remove({id: user.id}, userRemoveOK, removeKO);\r\n\r\n            // Usero borrado correctamente\r\n            function userRemoveOK(response){\r\n                // Quitamos la user en los datos locales\r\n                for (var i = 0; i < service.users.data.length; i++) {\r\n                    if (service.users.data[i].id === user.id) {\r\n                        service.users.data.splice(i,1);\r\n                        service.users.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function removeConcessionaire(item){\r\n            var deferred = $q.defer();\r\n\r\n            api.users.removeConcessionaire({id: item.id}, userRemoveOK, removeKO);\r\n\r\n            // borrado correctamente\r\n            function userRemoveOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function removeSFA(item){\r\n            var deferred = $q.defer();\r\n\r\n            api.users.removeSFA({id: item.id}, userRemoveOK, removeKO);\r\n\r\n            // borrado correctamente\r\n            function userRemoveOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n        \r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.tasks')\r\n        .factory('tasksService', tasksService);\r\n\r\n    /** @ngInject */\r\n    function tasksService($q, api) {\r\n\r\n        var service = {\r\n            tasks: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getTasks: getTasks,\r\n            getAllTasks: getAllTasks,\r\n            getTask: getTask,\r\n            saveTask: saveTask,\r\n            getEmptyTask: getEmptyTask,\r\n            removeTask: removeTask\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de tasks\r\n         */\r\n        function getTasks() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            \r\n            api.tasks.get(service.tasks.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.tasks.data = response.results;\r\n                service.tasks.count = response.count;\r\n\r\n                deferred.resolve(service.tasks);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.tasks.filters.page!=1){\r\n                    service.tasks.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de tasks filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllTasks(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.tasks.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.tasks.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una task determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getTask(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.tasks.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la task que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveTask(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var task=angular.copy(form);\r\n\r\n            if (form.id) {\r\n                api.tasks.update(task, updateOK, saveKO);\r\n            } else {\r\n                api.tasks.create(task, createOK, saveKO);\r\n            }\r\n\r\n            return deferred.promise;\r\n\r\n\r\n            function createOK(response) {\r\n                // Store the tasks\r\n                service.tasks.data.push(response);\r\n                service.tasks.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.tasks.data.length; i++) {\r\n                    if (service.tasks.data[i].id === response.id) {\r\n                        service.tasks.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un task vacío\r\n         */\r\n        function getEmptyTask(lead, request, tracing) {\r\n            return {\r\n                request:[request.id],\r\n                lead:lead,\r\n                media:'Phone',\r\n                is_traking_task: tracing,\r\n                note:[]\r\n            };\r\n        }\r\n        \r\n        function removeTask(task){\r\n            var deferred = $q.defer();\r\n\r\n            api.tasks.remove({id: task.id}, taskRemoveOK, removeKO);\r\n\r\n            // Task borrado correctamente\r\n            function taskRemoveOK(response){\r\n                // Quitamos la task en los datos locales\r\n                for (var i = 0; i < service.tasks.data.length; i++) {\r\n                    if (service.tasks.data[i].id === task.id) {\r\n                        service.tasks.data.splice(i,1);\r\n                        service.tasks.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar task\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.origins')\r\n        .factory('originsService', originsService);\r\n\r\n    /** @ngInject */\r\n    function originsService($q, api, $http) {\r\n\r\n        var service = {\r\n            origins: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getOrigins: getOrigins,\r\n            getAllOrigins: getAllOrigins,\r\n            getOrigin: getOrigin,\r\n            saveOrigin: saveOrigin,\r\n            getEmptyOrigin: getEmptyOrigin,\r\n            removeOrigin: removeOrigin\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de origins\r\n         */\r\n        function getOrigins() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.origins.get(service.origins.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.origins.data=response.results;\r\n                service.origins.count = response.count;\r\n\r\n                deferred.resolve(service.origins);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.origins.filters.page!=1){\r\n                    service.origins.filters.page=1;\r\n                    getOrigins();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de origins filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllOrigins(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.origins.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.origins.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una origin determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getOrigin(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.origins.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la origin que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveOrigin(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var origin = angular.copy(form);\r\n\r\n            if(origin.icon && origin.icon.indexOf(\"http\")!==-1){\r\n                delete origin.icon;\r\n            }\r\n\r\n            delete origin.phone_set;\r\n            delete origin.email_set;\r\n\r\n            if(form.id){\r\n                api.origins.update(origin, updateOK, saveKO);\r\n            }else{\r\n                api.origins.create(origin, createOK, saveKO);\r\n            }\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the clients\r\n                service.origins.data.push(response);\r\n                service.origins.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.origins.data.length; i++) {\r\n                    if (service.origins.data[i].id === response.id) {\r\n                        service.origins.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un origino vacío\r\n         */\r\n        function getEmptyOrigin() {\r\n            return {\r\n            };\r\n        }\r\n\r\n        function removeOrigin(origin){\r\n            var deferred = $q.defer();\r\n\r\n            api.origins.remove({id: origin.id}, originRemoveOK, removeKO);\r\n\r\n            // Origino borrado correctamente\r\n            function originRemoveOK(response){\r\n                // Quitamos la origin en los datos locales\r\n                for (var i = 0; i < service.origins.data.length; i++) {\r\n                    if (service.origins.data[i].id === origin.id) {\r\n                        service.origins.data.splice(i,1);\r\n                        service.origins.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.metrics',\r\n            [\r\n              'nvd3',\r\n              'gridshore.c3js.chart',\r\n              'angular-chartist'\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n        $stateProvider\r\n            .state('app.metrics', {\r\n                url: '/metrics',\r\n                views: {\r\n                    'content@app': {\r\n                      templateUrl: 'app/main/metrics/metrics.html',\r\n                      controller: 'MetricsController as vm'\r\n                    }\r\n                },\r\n                resolve:{\r\n                    currentUser: function (AuthService){\r\n                        return AuthService.getCurrentUser().then(function (response) {\r\n                            if (response) {\r\n                                return response;\r\n                            }\r\n                        });\r\n                    },\r\n                    Metrics: function (metricsService) {\r\n                      metricsService.metrics.filters={};\r\n                      metricsService.metrics.filters.user_data=[];\r\n                      return metricsService.metrics;\r\n                    },\r\n                    Benchmark: function (Metrics, metricsService) {\r\n                      return metricsService.benchmark;\r\n                    },\r\n                    Servicelevel: function (Metrics, metricsService) {\r\n                      return metricsService.servicelevel;\r\n                    },\r\n                    VoiceService: function (Metrics, metricsService) {\r\n                      return metricsService.voiceservice;\r\n                    },\r\n                    DigitalService: function (Metrics, metricsService) {\r\n                      return metricsService.digitalservice;\r\n                    }\r\n                },\r\n                bodyClass: 'metrics'\r\n            })\r\n    }\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.metrics')\r\n    .factory('metricsService', metricsService);\r\n\r\n  /** @ngInject */\r\n  function metricsService($q, api) {\r\n\r\n    var service = {\r\n      metrics: {\r\n        loading: false,\r\n        filters: {}\r\n      },\r\n      benchmark: {\r\n        data: {}\r\n      },\r\n      servicelevel: {\r\n        data: {}\r\n      },\r\n      voiceservice: {\r\n        data: {}\r\n      },\r\n      digitalservice: {\r\n        data: {}\r\n      },\r\n      getMetrics: getMetrics,\r\n      getBenchmark: getBenchmark,\r\n      getServicelevel: getServicelevel,\r\n      getVoiceService: getVoiceService,\r\n      getDigitalService: getDigitalService,\r\n    };\r\n\r\n    return service;\r\n\r\n    //////////\r\n\r\n    /**\r\n     * Obtiene el listado de metrics\r\n     */\r\n    function getMetrics() {\r\n      var deferred = $q.defer();\r\n      service.metrics.loading=true;\r\n      var all = $q.all([getBenchmark(), getServicelevel(), getVoiceService(), getDigitalService()]);\r\n      all.then(getOK);\r\n\r\n      return deferred.promise;\r\n\r\n      function getOK() {\r\n        service.metrics.loading=false;\r\n        deferred.resolve(service.metrics);\r\n      }\r\n    }\r\n    /**\r\n     * Obtiene el listado de metrics\r\n     */\r\n    function getBenchmark() {\r\n      // Create a new deferred object\r\n      var deferred = $q.defer();\r\n\r\n      var f = angular.copy(service.metrics.filters);\r\n\r\n      f.user_id__in = f.user_data.map(function (e) {\r\n        return e.id;\r\n      }).toString();\r\n      delete f.user_data;\r\n\r\n\r\n      if(!f.useful){\r\n        delete f.useful;\r\n      }\r\n\r\n      api.benchmark.get(f, getOK, getKO);\r\n\r\n      return deferred.promise;\r\n\r\n      function getOK(response) {\r\n        service.benchmark.data = processDataBenchmark(response);\r\n        deferred.resolve(service.benchmark);\r\n      }\r\n\r\n      function getKO(response) {\r\n        deferred.reject(response);\r\n      }\r\n    }\r\n\r\n    function processDataBenchmark(response){\r\n      response.funnel.lead_util=response.funnel.lead_util||0;\r\n      response.funnel.lead_recibido=response.funnel.lead_recibido||0;\r\n      response.funnel.ganados=response.funnel.ganados||0;\r\n      response.funnel.lead_util_percentage=(response.funnel.lead_util*100/response.funnel.lead_recibido).toFixed(2);\r\n      response.funnel.ganados_percentage=(response.funnel.ganados*100/response.funnel.lead_recibido).toFixed(2);\r\n      response.total_origins={\r\n        abiertos:0,\r\n        descartados:0,\r\n        ganados:0\r\n      }\r\n      response.total_users={\r\n        abiertos:0,\r\n        descartados:0,\r\n        ganados:0\r\n      }\r\n\r\n      response.origins.forEach(function (o) {\r\n        o.abiertos_percentage = (o.abiertos*100/o.total).toFixed(2)\r\n        o.descartados_percentage = (o.descartados*100/o.total).toFixed(2)\r\n        o.ganados_percentage = (o.ganados*100/o.total).toFixed(2)\r\n\r\n        response.total_origins.abiertos+=o.abiertos;\r\n        response.total_origins.descartados+=o.descartados;\r\n        response.total_origins.ganados+=o.ganados;\r\n      });\r\n      response.total_origins.abiertos_percentage=(response.total_origins.abiertos*100/response.funnel.lead_recibido).toFixed(2);\r\n      response.total_origins.descartados_percentage=(response.total_origins.descartados*100/response.funnel.lead_recibido).toFixed(2);\r\n      response.total_origins.ganados_percentage=(response.total_origins.ganados*100/response.funnel.lead_recibido).toFixed(2);\r\n\r\n      response.users.forEach(function (u) {\r\n        u.abiertos_percentage = (u.abiertos*100/u.total).toFixed(2)\r\n        u.descartados_percentage = (u.descartados*100/u.total).toFixed(2)\r\n        u.ganados_percentage = (u.ganados*100/u.total).toFixed(2)\r\n\r\n        response.total_users.abiertos+=u.abiertos;\r\n        response.total_users.descartados+=u.descartados;\r\n        response.total_users.ganados+=u.ganados;\r\n      });\r\n      response.total_users.abiertos_percentage=(response.total_users.abiertos*100/response.funnel.lead_recibido).toFixed(2);\r\n      response.total_users.descartados_percentage=(response.total_users.descartados*100/response.funnel.lead_recibido).toFixed(2);\r\n      response.total_users.ganados_percentage=(response.total_users.ganados*100/response.funnel.lead_recibido).toFixed(2);\r\n\r\n      return response;\r\n    }\r\n\r\n    /**\r\n     * Obtiene el listado de metrics\r\n     */\r\n    function getServicelevel() {\r\n      // Create a new deferred object\r\n      var deferred = $q.defer();\r\n\r\n      var f = angular.copy(service.metrics.filters);\r\n\r\n      f.user_id__in = f.user_data.map(function (e) {\r\n        return e.id\r\n      }).toString();\r\n      delete f.user_data;\r\n\r\n      if(!f.useful){\r\n        delete f.useful;\r\n      }\r\n\r\n      api.servicelevel.get(f, getOK, getKO);\r\n\r\n      return deferred.promise;\r\n\r\n      function getOK(response) {\r\n        service.servicelevel.data = processDataServicelevel(response);\r\n        deferred.resolve(service.servicelevel);\r\n      }\r\n\r\n      function getKO(response) {\r\n        deferred.reject(response);\r\n      }\r\n    }\r\n\r\n    function processDataServicelevel(response){\r\n      for(var i in response.kpis){\r\n        if(i!=='total'){\r\n          var number = response.kpis[i];\r\n          var percentage = (number*100/response.kpis.total).toFixed(2);\r\n          var title = i.split(\"_\").join(\" \");\r\n          if(title.indexOf(\"sin \")!==-1){\r\n            title = \"Leads \"+title;\r\n          }else{\r\n            title = \"Leads con \"+title;\r\n          }\r\n          response.kpis[i]={\r\n            number:number,\r\n            percentage:percentage,\r\n            title:title\r\n          };\r\n          if(i==='tareas_realizadas'){\r\n            response.kpis[i].filters={\r\n              tasks__realization_date_check:true,\r\n              tasks__is_traking_task:false,\r\n            };\r\n          }\r\n          if(i==='tareas_programadas'){\r\n            response.kpis[i].filters={\r\n              tasks__is_traking_task:false,\r\n            };\r\n          }\r\n          if(i==='sin_tareas_programadas'){\r\n            response.kpis[i].filters={\r\n              without_pending_tasks:true\r\n            };\r\n          }\r\n          if(i==='tareas_atrasadas'){\r\n            response.kpis[i].filters={\r\n              tasks__realization_date_check:false,\r\n              tasks__planified_realization_date__lt:new Date().toISOString(),\r\n              tasks__is_traking_task:false,\r\n            };\r\n          }\r\n          if(i==='seguimientos_realizados'){\r\n            response.kpis[i].filters={\r\n              tasks__realization_date__isnull:false,\r\n              tasks__is_traking_task:true,\r\n            };\r\n          }\r\n          if(i==='seguimientos_programados'){\r\n            response.kpis[i].filters={\r\n              tasks__is_traking_task:true,\r\n            };\r\n          }\r\n          if(i==='sin_seguimientos_programados'){\r\n            response.kpis[i].filters={\r\n              without_pending_trackings:true\r\n            };\r\n          }\r\n          if(i==='seguimientos_atrasados'){\r\n            response.kpis[i].filters={\r\n              tasks__realization_date_check:false,\r\n              tasks__planified_realization_date__lt:new Date().toISOString(),\r\n              tasks__is_traking_task:true,\r\n            };\r\n          }\r\n\r\n          if(response.kpis[i] && response.kpis[i].filters){\r\n            response.kpis[i].filters.with_concession = true;\r\n          }\r\n        }\r\n      }\r\n\r\n      return response;\r\n    }\r\n\r\n    /**\r\n     * Obtiene el listado de metrics\r\n     */\r\n    function getVoiceService() {\r\n      // Create a new deferred object\r\n      var deferred = $q.defer();\r\n\r\n      var f = angular.copy(service.metrics.filters);\r\n\r\n      f.user_id__in = f.user_data.map(function (e) {\r\n        return e.id\r\n      }).toString();\r\n      delete f.user_data;\r\n\r\n      if(!f.useful){\r\n        delete f.useful;\r\n      }\r\n\r\n      api.voiceService.get(f, getOK, getKO);\r\n\r\n      return deferred.promise;\r\n\r\n      function getOK(response) {\r\n        service.voiceservice.data = processDataVoiceService(response);\r\n        deferred.resolve(service.voiceservice);\r\n      }\r\n\r\n      function getKO(response) {\r\n        deferred.reject(response);\r\n      }\r\n    }\r\n\r\n    function processDataVoiceService(response){\r\n      var llamadas={};\r\n      llamadas.labels=response.llamadas.map(function (llamada) {\r\n        return llamada.hour;\r\n      });\r\n      llamadas.atendidas=response.llamadas.map(function (llamada) {\r\n        return llamada.total-llamada.no_atendidas;\r\n      });\r\n      llamadas.no_atendidas=response.llamadas.map(function (llamada) {\r\n        return llamada.no_atendidas;\r\n      });\r\n      response.llamadas=llamadas;\r\n\r\n      response.no_atendidos.con_llamadas_percentage = (response.no_atendidos.con_llamadas*100/response.totales.no_atendidas).toFixed(2);\r\n      response.no_atendidos.sin_llamadas_percentage = (response.no_atendidos.sin_llamadas*100/response.totales.no_atendidas).toFixed(2);\r\n\r\n      response.asa.tiempo=secondsToString(response.asa.tiempo);\r\n      response.asa.menos_una_hora_percentage=(response.asa.menos_una_hora*100/response.asa.total).toFixed(2);\r\n\r\n      return response;\r\n    }\r\n\r\n    /**\r\n     * Obtiene el listado de metrics\r\n     */\r\n    function getDigitalService() {\r\n      // Create a new deferred object\r\n      var deferred = $q.defer();\r\n\r\n      var f = angular.copy(service.metrics.filters);\r\n\r\n      f.user_id__in = f.user_data.map(function (e) {\r\n        return e.id\r\n      }).toString();\r\n      delete f.user_data;\r\n\r\n      if(!f.useful){\r\n        delete f.useful;\r\n      }\r\n\r\n      api.digitalService.get(f, getOK, getKO);\r\n\r\n      return deferred.promise;\r\n\r\n      function getOK(response) {\r\n        service.digitalservice.data = processDataDigitalService(response);\r\n        deferred.resolve(service.digitalservice);\r\n      }\r\n\r\n      function getKO(response) {\r\n        deferred.reject(response);\r\n      }\r\n    }\r\n\r\n    function processDataDigitalService(response){\r\n      response.con_telefono.con_llamadas_percentage = (response.con_telefono.con_llamadas*100/response.totales.total).toFixed(2);\r\n      response.con_telefono.sin_llamadas_percentage = (response.con_telefono.sin_llamadas*100/response.totales.total).toFixed(2);\r\n\r\n      response.asa.tiempo=secondsToString(response.asa.tiempo);\r\n      response.asa.menos_una_hora_percentage=(response.asa.menos_una_hora*100/response.asa.total).toFixed(2);\r\n\r\n      return response;\r\n    }\r\n\r\n    function secondsToString(seconds) {\r\n      var hour = Math.floor(seconds / 3600);\r\n      var minute = Math.floor((seconds / 60) % 60);\r\n      var second = seconds % 60;\r\n      second = second.toFixed(0);\r\n      return {hour:hour, minute:minute, second: second};\r\n    }\r\n\r\n\r\n\r\n  }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.geopostcodes',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider, msApiProvider) {}\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.geopostcodes')\r\n        .factory('provincesService', provincesService);\r\n\r\n    /** @ngInject */\r\n    function provincesService($q, api) {\r\n\r\n        var service = {\r\n            provinces: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getProvinces: getProvinces\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de provinces\r\n         */\r\n        function getProvinces(country,search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.provinces.get({country:country,page_size:\"all\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.geopostcodes')\r\n        .factory('localitiesService', localitiesService);\r\n\r\n    /** @ngInject */\r\n    function localitiesService($q, api) {\r\n\r\n        var service = {\r\n            localities: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getLocalities: getLocalities,\r\n            getLocalitiesByCodPostal: getLocalitiesByCodPostal\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de localities\r\n         */\r\n        function getLocalities(province, search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.localities.get({province:province, search:search ,page_size:\"50\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n        /**\r\n         * Obtiene el listado de localities\r\n         */\r\n        function getLocalitiesByCodPostal(codPostal) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.localities.get({postal_code:codPostal ,page_size:\"all\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.geopostcodes')\r\n        .factory('countriesService', countriesService);\r\n\r\n    /** @ngInject */\r\n    function countriesService($q, api) {\r\n\r\n        var service = {\r\n            countries: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getCountries: getCountries\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de countries\r\n         */\r\n        function getCountries() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.countries.get({page_size:\"all\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.dashboard',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n        // State\r\n        $stateProvider.state('app.dashboard', {\r\n            url      : '/dashboard',\r\n            views    : {\r\n                'content@app': {\r\n                    templateUrl: 'app/main/dashboard/dashboard.html',\r\n                    controller : 'DashboardController as vm'\r\n                }\r\n            },\r\n            resolve  : {\r\n                currentUser: function (AuthService)\r\n                {\r\n                    return AuthService.getCurrentUser().then(function (response) {\r\n                        if (response) {\r\n                            return response;\r\n                        }\r\n                    });\r\n                },\r\n                Dashboards: function (currentUser, dashboardService) {\r\n                    dashboardService.dashboards.filters={};\r\n                    dashboardService.dashboards.filters.page_size=\"all\";\r\n                    return dashboardService.getDashboards();\r\n                }\r\n            },\r\n            bodyClass: 'todo'\r\n        });\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.dashboard')\r\n        .factory('dashboardService', dashboardService);\r\n\r\n    /** @ngInject */\r\n    function dashboardService($q, api) {\r\n\r\n        var service = {\r\n            dashboards: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getDashboards: getDashboards,\r\n            getDashboard: getDashboard\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de usuarios\r\n         */\r\n        function getDashboards() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.dashboards.get(service.dashboards.filters, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                // Store the dashboards\r\n                service.dashboards.data = response.results;\r\n                service.dashboards.count = response.count;\r\n\r\n                deferred.resolve(service.dashboards);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de un usuario determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getDashboard(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.dashboards.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .factory('vehiclesService', vehiclesService);\r\n\r\n    /** @ngInject */\r\n    function vehiclesService($q, api) {\r\n\r\n        var service = {\r\n            removeVehicle: removeVehicle,\r\n            getBrands: getBrands,\r\n            getModels: getModels,\r\n            getVersions: getVersions\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n        \r\n        function removeVehicle(vehicle){\r\n            var deferred = $q.defer();\r\n\r\n            api.vehicles.remove({id: vehicle.id}, vehicleRemoveOK, removeKO);\r\n\r\n            // Vehicle borrado correctamente\r\n            function vehicleRemoveOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar vehicle\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de brands\r\n         */\r\n        function getBrands(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.brands.get({search:search,page_size:\"all\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(search && response.count<1){\r\n                    response.results.push({id:null,name:search})\r\n                }\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de modelos\r\n         */\r\n        function getModels(brand, search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.models.get({brand__id:brand, search:search ,page_size:\"50\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(search && response.count<1){\r\n                    response.results.push({id:null,model_name:search})\r\n                }\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de versiones\r\n         */\r\n        function getVersions(model, search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.versions.get({vehicle_model__id:model, search:search ,page_size:\"50\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(search && response.count<1){\r\n                    response.results.push({id:null,version_name:search})\r\n                }\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n    }\r\n\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .factory('leadsService', leadsService);\r\n\r\n    /** @ngInject */\r\n    function leadsService($q, api, $http) {\r\n\r\n        var service = {\r\n            lead: {\r\n                data:{}\r\n            },\r\n            leads: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            leadsNews: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsAttended: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsCommercialManagements: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsTracings: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsEnds: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsIncomingCalls: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsOutgoingCalls: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsHistory: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            leadsActivity: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {},\r\n            },\r\n            getLeads: getLeads,\r\n            getLeadsByUser: getLeadsByUser,\r\n            getAllLeads: getAllLeads,\r\n            getLead: getLead,\r\n            saveLead: saveLead,\r\n            setLeadsByUser: setLeadsByUser,\r\n            changeStatus: changeStatus,\r\n            hubspot: hubspot,\r\n            clone: clone,\r\n            getEmptyLead: getEmptyLead,\r\n            removeLead: removeLead,\r\n            getLeadsNews:getLeadsNews,\r\n            getLeadsAttended:getLeadsAttended,\r\n            getLeadsCommercialManagements:getLeadsCommercialManagements,\r\n            getLeadsTracings:getLeadsTracings,\r\n            getLeadsEnds:getLeadsEnds,\r\n            getLeadsIncomingCalls:getLeadsIncomingCalls,\r\n            getLeadsOutgoingCalls:getLeadsOutgoingCalls,\r\n            getLeadsHistory:getLeadsHistory,\r\n            getLeadsActivity:getLeadsActivity,\r\n            reactivateLead:reactivateLead,\r\n            sendMail:sendMail,\r\n            getDocument:getDocument,\r\n            importLeads:importLeads\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de leads\r\n         */\r\n        function getLeads() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            \r\n            api.leads.get(service.leads.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leads.data = response.results;\r\n                service.leads.count = response.count;\r\n\r\n                deferred.resolve(service.leads);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.leads.filters.page!=1){\r\n                    service.leads.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leads de un usuario\r\n         */\r\n        function getLeadsByUser(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            service.leads.filters={};\r\n            service.leads.filters.id=id;\r\n\r\n            api.leadsByUser.queryAll(service.leads.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leads.data = response;\r\n                service.leads.count = response.length;\r\n\r\n                deferred.resolve(service.leads);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leads filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllLeads(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.leads.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.leads.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una lead determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getLead(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.leads.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.lead.data = response;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la lead que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveLead(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var lead=angular.copy(form);\r\n\r\n            if(lead.client && lead.client.province_data && lead.client.province_data.id){\r\n                lead.client.province=lead.client.province_data.id;\r\n            }\r\n            if(lead.client && lead.client.location_data && lead.client.location_data.id){\r\n                lead.client.location=lead.client.location_data.id;\r\n            }\r\n\r\n            if(lead.source_data_prov && lead.source_data_prov.id){\r\n                lead.source=lead.source_data_prov.id;\r\n            }\r\n\r\n            if(lead.concessionaire_data && lead.concessionaire_data.id){\r\n                lead.concessionaire=lead.concessionaire_data.id;\r\n            }\r\n\r\n            if(lead.user_data && lead.user_data.id){\r\n                lead.user=lead.user_data.id;\r\n            }\r\n\r\n            if(lead.client && lead.client.business_activity_data && lead.client.business_activity_data.id){\r\n                lead.client.business_activity=lead.client.business_activity_data.id;\r\n            }\r\n\r\n            if(lead.client && lead.client.sector_data && lead.client.sector_data.id){\r\n                lead.client.sector=lead.client.sector_data.id;\r\n            }\r\n\r\n            for (var i in lead.vehicles) {\r\n                //brand\r\n                if(lead.vehicles[i].brand_model_data && lead.vehicles[i].brand_model_data.name){\r\n                    lead.vehicles[i].brand_model=lead.vehicles[i].brand_model_data.name;\r\n                }\r\n                if(lead.vehicles[i].brand_model_data && lead.vehicles[i].brand_model_data.id){\r\n                    lead.vehicles[i].brand_model+=\"___\"+lead.vehicles[i].brand_model_data.id;\r\n                }\r\n\r\n                //model\r\n                if(lead.vehicles[i].model_data && lead.vehicles[i].model_data.model_name){\r\n                    lead.vehicles[i].model=lead.vehicles[i].model_data.model_name;\r\n                }\r\n                if(lead.vehicles[i].model_data && lead.vehicles[i].model_data.id){\r\n                    lead.vehicles[i].model+=\"___\"+lead.vehicles[i].model_data.id;\r\n                }\r\n\r\n                //version\r\n                if(lead.vehicles[i].version_data && lead.vehicles[i].version_data.version_name){\r\n                    lead.vehicles[i].version=lead.vehicles[i].version_data.version_name;\r\n                }\r\n                if(lead.vehicles[i].version_data && lead.vehicles[i].version_data.id){\r\n                    lead.vehicles[i].version+=\"___\"+lead.vehicles[i].version_data.id;\r\n                }\r\n\r\n            }\r\n\r\n            for (var i in lead.appraisals) {\r\n                //brand\r\n                if(lead.appraisals[i].brand_data && lead.appraisals[i].brand_data.name){\r\n                    lead.appraisals[i].brand=lead.appraisals[i].brand_data.name;\r\n                }\r\n                if(lead.appraisals[i].brand_data && lead.appraisals[i].brand_data.id){\r\n                    lead.appraisals[i].brand+=\"___\"+lead.appraisals[i].brand_data.id;\r\n                }\r\n\r\n                //model\r\n                if(lead.appraisals[i].model_data && lead.appraisals[i].model_data.model_name){\r\n                    lead.appraisals[i].model=lead.appraisals[i].model_data.model_name;\r\n                }\r\n                if(lead.appraisals[i].model_data && lead.appraisals[i].model_data.id){\r\n                    lead.appraisals[i].model+=\"___\"+lead.appraisals[i].model_data.id;\r\n                }\r\n\r\n                //version\r\n                if(lead.appraisals[i].version_data && lead.appraisals[i].version_data.version_name){\r\n                    lead.appraisals[i].version=lead.appraisals[i].version_data.version_name;\r\n                }\r\n                if(lead.appraisals[i].version_data && lead.appraisals[i].version_data.id){\r\n                    lead.appraisals[i].version+=\"___\"+lead.appraisals[i].version_data.id;\r\n                }\r\n\r\n            }\r\n\r\n            if (form.id) {\r\n                api.leads.update(lead, updateOK, saveKO);\r\n            } else {\r\n                api.leads.create(lead, createOK, saveKO);\r\n            }\r\n\r\n            return deferred.promise;\r\n\r\n\r\n            function createOK(response) {\r\n                // Store the leads\r\n                service.leads.data.push(response);\r\n                service.leads.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.leads.data.length; i++) {\r\n                    if (service.leads.data[i].id === response.id) {\r\n                        service.leads.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Guarda la lead que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function setLeadsByUser(form) {\r\n            var deferred = $q.defer();\r\n\r\n            api.setLeadsByUser.create(form, createOK, saveKO);\r\n\r\n\r\n            return deferred.promise;\r\n\r\n\r\n            function createOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Guarda la lead que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function changeStatus(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var lead=angular.copy(form);\r\n\r\n            api.leads.leadsStatus(lead, updateOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.leads.data.length; i++) {\r\n                    if (service.leads.data[i].id === response.id) {\r\n                        service.leads.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Guarda la lead que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function hubspot(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var lead= {\r\n                id: form.id,\r\n            }\r\n\r\n            api.leads.leadsHubspot(lead, updateOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function updateOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Clona un lead\r\n         *\r\n         * @param lead\r\n         */\r\n        function clone(lead) {\r\n            var deferred = $q.defer();\r\n\r\n            api.leads.clone({id: lead.id}, createOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n\r\n            function createOK(response) {\r\n                // Store the leads\r\n                service.leads.data.push(response);\r\n                service.leads.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un lead vacío\r\n         */\r\n        function getEmptyLead() {\r\n            return {\r\n                client:{},\r\n                vehicles:[{}],\r\n                appraisals:[{\r\n                    circulation_date:null,\r\n                    buy_date:null,\r\n                    registration_date:null,\r\n                    last_mechanic_date:null\r\n                }],\r\n                note:[],\r\n                tags:[],\r\n                request:{\r\n                    task:[]\r\n                },\r\n                // score:null\r\n            };\r\n        }\r\n        \r\n        function removeLead(lead){\r\n            var deferred = $q.defer();\r\n\r\n            api.leads.remove({id: lead.id}, leadRemoveOK, removeKO);\r\n\r\n            // Lead borrado correctamente\r\n            function leadRemoveOK(response){\r\n                // Quitamos la lead en los datos locales\r\n                for (var i = 0; i < service.leads.data.length; i++) {\r\n                    if (service.leads.data[i].id === lead.id) {\r\n                        service.leads.data.splice(i,1);\r\n                        service.leads.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar lead\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        ////// PARA EL BOARD /////\r\n        /**\r\n         * Obtiene el listado de leadsNews\r\n         */\r\n        function getLeadsNews() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leadsNews.get(service.leadsNews.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(service.leadsNews.filters.page>1){\r\n                   service.leadsNews.data=service.leadsNews.data.concat(response.results);\r\n                }else{\r\n                    service.leadsNews.data = response.results;\r\n                }\r\n\r\n                service.leadsNews.count = response.count;\r\n                deferred.resolve(service.leadsNews);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.leadsNews.filters.page!=1){\r\n                    service.leadsNews.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsAttended\r\n         */\r\n        function getLeadsAttended() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leadsAttended.get(service.leadsAttended.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(service.leadsAttended.filters.page>1){\r\n                   service.leadsAttended.data=service.leadsAttended.data.concat(response.results);\r\n                }else{\r\n                    service.leadsAttended.data = response.results;\r\n                }\r\n\r\n                service.leadsAttended.count = response.count;\r\n                deferred.resolve(service.leadsAttended);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.leadsAttended.filters.page!=1){\r\n                    service.leadsAttended.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsCommercialManagements\r\n         */\r\n        function getLeadsCommercialManagements() {\r\n            // Create a leadsCommercialManagement deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leadsCommercialManagements.get(service.leadsCommercialManagements.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(service.leadsCommercialManagements.filters.page>1){\r\n                   service.leadsCommercialManagements.data=service.leadsCommercialManagements.data.concat(response.results);\r\n                }else{\r\n                    service.leadsCommercialManagements.data = response.results;\r\n                }\r\n\r\n                service.leadsCommercialManagements.count = response.count;\r\n                deferred.resolve(service.leadsCommercialManagements);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.leadsCommercialManagements.filters.page!=1){\r\n                    service.leadsCommercialManagements.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsTracings\r\n         */\r\n        function getLeadsTracings() {\r\n            // Create a tracing deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leadsTracings.get(service.leadsTracings.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(service.leadsTracings.filters.page>1){\r\n                   service.leadsTracings.data=service.leadsTracings.data.concat(response.results);\r\n                }else{\r\n                    service.leadsTracings.data = response.results;\r\n                }\r\n\r\n                service.leadsTracings.count = response.count;\r\n                deferred.resolve(service.leadsTracings);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.leadsTracings.filters.page!=1){\r\n                    service.leadsTracings.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsEnds\r\n         */\r\n        function getLeadsEnds() {\r\n            // Create a end deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leadsEnds.get(service.leadsEnds.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                if(service.leadsEnds.filters.page>1){\r\n                   service.leadsEnds.data=service.leadsEnds.data.concat(response.results);\r\n                }else{\r\n                    service.leadsEnds.data = response.results;\r\n                }\r\n\r\n                service.leadsEnds.count = response.count;\r\n                deferred.resolve(service.leadsEnds);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.leadsEnds.filters.page!=1){\r\n                    service.leadsEnds.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsIncomingCalls\r\n         */\r\n        function getLeadsIncomingCalls(id) {\r\n            // Create a end deferred object\r\n            var deferred = $q.defer();\r\n\r\n            var f=angular.copy(service.leadsIncomingCalls.filters);\r\n            f.page_size=\"all\";\r\n            f.id=id;\r\n\r\n            api.leadsIncomingCalls.get(f, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leadsIncomingCalls.data = response.results;\r\n                service.leadsIncomingCalls.count = response.count;\r\n\r\n                deferred.resolve(service.leadsIncomingCalls);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsOutgoingCalls\r\n         */\r\n        function getLeadsOutgoingCalls(id) {\r\n            // Create a end deferred object\r\n            var deferred = $q.defer();\r\n\r\n            var f=angular.copy(service.leadsOutgoingCalls.filters);\r\n            f.page_size=\"all\";\r\n            f.id=id;\r\n\r\n            api.leadsOutgoingCalls.get(f, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leadsOutgoingCalls.data = response.results;\r\n                service.leadsOutgoingCalls.count = response.count;\r\n\r\n                deferred.resolve(service.leadsOutgoingCalls);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsHistory\r\n         */\r\n        function getLeadsHistory(id) {\r\n            // Create a end deferred object\r\n            var deferred = $q.defer();\r\n\r\n            var f=angular.copy(service.leadsHistory.filters);\r\n            f.page_size=\"all\";\r\n            f.id=id;\r\n\r\n            api.leadsHistory.get(f, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leadsHistory.data = response.results;\r\n                service.leadsHistory.count = response.count;\r\n\r\n                deferred.resolve(service.leadsHistory);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadsActivity\r\n         */\r\n        function getLeadsActivity(id) {\r\n            // Create a end deferred object\r\n            var deferred = $q.defer();\r\n\r\n            var f=angular.copy(service.leadsActivity.filters);\r\n            f.page_size=\"all\";\r\n            f.lead=id;\r\n\r\n            api.leadActions.get(f, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leadsActivity.data = response.results;\r\n                service.leadsActivity.count = response.count;\r\n\r\n                deferred.resolve(service.leadsActivity);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Cambiamos el lead y lo reactivamos\r\n         */\r\n        function reactivateLead(id) {\r\n            var deferred = $q.defer();\r\n\r\n            // var lead = angular.copy(form);\r\n             var f= {};\r\n\r\n            f.id=id;\r\n            api.leadsReactivate.create(f, createOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Marcamos que vamos a mandar mail\r\n         */\r\n        function sendMail(id) {\r\n            var deferred = $q.defer();\r\n\r\n            // var lead = angular.copy(form);\r\n             var f= {};\r\n\r\n            f.id=id;\r\n            api.leadsMail.create(f, createOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Descarga un documento excel con leads de ejemplo\r\n         *\r\n         */\r\n        function getDocument() {\r\n            var deferred = $q.defer();\r\n\r\n            $http.get(api.baseUrl + 'lead_importer/download_template/', {responseType:'arraybuffer',timeout:60*60*1000}).then(getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            function getKO(response){\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Importa los leads de un archivo excel\r\n         *\r\n         */\r\n        function importLeads() {\r\n            var deferred = $q.defer();\r\n\r\n            // Preparamos la filen para la subida al servidor\r\n            // Comprobamos si existe en file.element y de forma directa ya\r\n            // que parece que en ios no lo encuentra bien con el file.element.\r\n            var file_data = null;\r\n            var $fileUploader = $(\"#file-uploader\");\r\n            var files = $fileUploader.prop('files');\r\n\r\n            if (files && files.length) {\r\n                file_data = files[0];\r\n            }\r\n\r\n            //Convertimos los datos aun FormData para poder enviar el archivo\r\n            var formData = new FormData();\r\n\r\n            if (file_data){\r\n                formData.append('file', file_data);\r\n            }\r\n\r\n            $http.post(api.baseUrl + 'lead_importer/upload/', formData, { transformRequest: angular.identity,\r\n                headers: {'Content-Type': undefined}, responseType:'arraybuffer',timeout:60*60*1000}).then(createOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .factory('leadActionsService', leadActionsService);\r\n\r\n    /** @ngInject */\r\n    function leadActionsService($q, api) {\r\n\r\n        var service = {\r\n            leadActions: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getLeadActions: getLeadActions,\r\n            getAllLeadActions: getAllLeadActions,\r\n            getLeadActionsColumn: getLeadActionsColumn,\r\n            getLeadAction: getLeadAction,\r\n            saveLeadAction: saveLeadAction,\r\n            getEmptyLeadAction: getEmptyLeadAction,\r\n            removeLeadAction: removeLeadAction\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de leadActions\r\n         */\r\n        function getLeadActions() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            \r\n            api.leadActions.get(service.leadActions.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leadActions.data = response.results;\r\n                service.leadActions.count = response.count;\r\n\r\n                deferred.resolve(service.leadActions);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.leadActions.filters.page!=1){\r\n                    service.leadActions.filters.page=1;\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadActions filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllLeadActions(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.leadActions.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.leadActions.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de leadActions\r\n         */\r\n        function getLeadActionsColumn() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f={};\r\n            f.page_size=\"all\";\r\n            api.leadActionsColumn.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una leadAction determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getLeadAction(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.leadActions.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.leadAction.data = response;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la leadAction que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveLeadAction(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var leadAction=angular.copy(form);\r\n\r\n            api.leadActions.create(leadAction, createOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the leadActions\r\n                service.leadActions.data.push(response);\r\n                service.leadActions.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un leadAction vacío\r\n         */\r\n        function getEmptyLeadAction(lead) {\r\n            return {\r\n                lead: lead.id,\r\n                lead_status_planing: (lead.last_lead_action && lead.last_lead_action.lead_status_planing) ?\r\n                    lead.last_lead_action.lead_status_planing : null,\r\n                date: (lead.last_lead_action && lead.last_lead_action.date) ?\r\n                    moment(lead.last_lead_action.date).toDate() : null\r\n            };\r\n        }\r\n        \r\n        function removeLeadAction(leadAction){\r\n            var deferred = $q.defer();\r\n\r\n            api.leadActions.remove({id: leadAction.id}, leadActionRemoveOK, removeKO);\r\n\r\n            // LeadAction borrado correctamente\r\n            function leadActionRemoveOK(response){\r\n                // Quitamos la leadAction en los datos locales\r\n                for (var i = 0; i < service.leadActions.data.length; i++) {\r\n                    if (service.leadActions.data[i].id === leadAction.id) {\r\n                        service.leadActions.data.splice(i,1);\r\n                        service.leadActions.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar leadAction\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n    }\r\n\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.leads')\r\n        .factory('appraisalsService', appraisalsService);\r\n\r\n    /** @ngInject */\r\n    function appraisalsService($q, api) {\r\n\r\n        var service = {\r\n            removeAppraisal: removeAppraisal\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n        \r\n        function removeAppraisal(appraisal){\r\n            var deferred = $q.defer();\r\n\r\n            api.appraisals.remove({id: appraisal.id}, appraisalRemoveOK, removeKO);\r\n\r\n            // Appraisal borrado correctamente\r\n            function appraisalRemoveOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar appraisal\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n    }\r\n\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.concessionaires')\r\n        .factory('concessionairesService', concessionairesService);\r\n\r\n    /** @ngInject */\r\n    function concessionairesService($q, api, $http) {\r\n\r\n        var service = {\r\n            concessionaires: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getConcessionaires: getConcessionaires,\r\n            getConcessionairesConfig: getConcessionairesConfig,\r\n            getAllConcessionaires: getAllConcessionaires,\r\n            getConcessionaire: getConcessionaire,\r\n            saveConcessionaire: saveConcessionaire,\r\n            getEmptyConcessionaire: getEmptyConcessionaire,\r\n            removeConcessionaire: removeConcessionaire,\r\n            removeSource: removeSource,\r\n            getDocument: getDocument\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de concessionaires\r\n         */\r\n        function getConcessionaires() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.concessionaires.get(service.concessionaires.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.concessionaires.data=response.results;\r\n                service.concessionaires.count = response.count;\r\n\r\n                deferred.resolve(service.concessionaires);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.concessionaires.filters.page!=1){\r\n                    service.concessionaires.filters.page=1;\r\n                    getConcessionaires();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de concessionaires\r\n         */\r\n        function getConcessionairesConfig() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.concessionaires.config(service.concessionaires.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.concessionaires.data=response.results;\r\n                service.concessionaires.count = response.count;\r\n\r\n                deferred.resolve(service.concessionaires);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.concessionaires.filters.page!=1){\r\n                    service.concessionaires.filters.page=1;\r\n                    getConcessionaires();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de concessionaires filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllConcessionaires(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.concessionaires.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.concessionaires.config(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una concessionaire determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getConcessionaire(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.concessionaires.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la concessionaire que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveConcessionaire(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var concessionaire = angular.copy(form);\r\n\r\n            for(var i in concessionaire.sources){\r\n                if(concessionaire.sources[i].origin_data && concessionaire.sources[i].origin_data.id){\r\n                    concessionaire.sources[i].origin=concessionaire.sources[i].origin_data.id;\r\n                }\r\n                if(concessionaire.sources[i].channel_data && concessionaire.sources[i].channel_data.id){\r\n                    concessionaire.sources[i].channel=concessionaire.sources[i].channel_data.id;\r\n                }\r\n            }\r\n\r\n            if(form.id){\r\n                api.concessionaires.update(concessionaire, updateOK, saveKO);\r\n            }else{\r\n                api.concessionaires.create(concessionaire, createOK, saveKO);\r\n            }\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the clients\r\n                service.concessionaires.data.push(response);\r\n                service.concessionaires.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.concessionaires.data.length; i++) {\r\n                    if (service.concessionaires.data[i].id === response.id) {\r\n                        service.concessionaires.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un concessionaireo vacío\r\n         */\r\n        function getEmptyConcessionaire() {\r\n            return {\r\n                phones:[{\r\n                    number:\"\"\r\n                }],\r\n                emails:[],\r\n                sources:[]\r\n            };\r\n        }\r\n\r\n        function removeConcessionaire(concessionaire){\r\n            var deferred = $q.defer();\r\n\r\n            api.concessionaires.remove({id: concessionaire.id}, concessionaireRemoveOK, removeKO);\r\n\r\n            // Concessionaireo borrado correctamente\r\n            function concessionaireRemoveOK(response){\r\n                // Quitamos la concessionaire en los datos locales\r\n                for (var i = 0; i < service.concessionaires.data.length; i++) {\r\n                    if (service.concessionaires.data[i].id === concessionaire.id) {\r\n                        service.concessionaires.data.splice(i,1);\r\n                        service.concessionaires.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function removeSource(item){\r\n            var deferred = $q.defer();\r\n\r\n            api.concessionaires.removeSource({id: item.id}, removeOK, removeKO);\r\n\r\n            // borrado correctamente\r\n            function removeOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Descarga un documento excel con leads de los concesionarios pasados como parámetro\r\n         *\r\n         * @param params\r\n         */\r\n        function getDocument(params) {\r\n            var deferred = $q.defer();\r\n            params.page_size='all';\r\n\r\n            $http({\r\n                url: api.baseUrl + 'lead/excel/',\r\n                method: \"GET\",\r\n                params: params,\r\n                responseType:'arraybuffer',\r\n                timeout:60*60*1000\r\n            }).then(getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            function getKO(response){\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.channels')\r\n        .factory('channelsService', channelsService);\r\n\r\n    /** @ngInject */\r\n    function channelsService($q, api, $http) {\r\n\r\n        var service = {\r\n            channels: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getChannels: getChannels,\r\n            getAllChannels: getAllChannels,\r\n            getChannel: getChannel,\r\n            saveChannel: saveChannel,\r\n            getEmptyChannel: getEmptyChannel,\r\n            removeChannel: removeChannel\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de channels\r\n         */\r\n        function getChannels() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.channels.get(service.channels.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.channels.data=response.results;\r\n                service.channels.count = response.count;\r\n\r\n                deferred.resolve(service.channels);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.channels.filters.page!=1){\r\n                    service.channels.filters.page=1;\r\n                    getChannels();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de channels filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllChannels(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.channels.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.channels.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una channel determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getChannel(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.channels.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la channel que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveChannel(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var channel = angular.copy(form);\r\n\r\n            if(channel.icon && channel.icon.indexOf(\"http\")!==-1){\r\n                delete channel.icon;\r\n            }\r\n\r\n            delete channel.phone_set;\r\n            delete channel.email_set;\r\n\r\n            if(form.id){\r\n                api.channels.update(channel, updateOK, saveKO);\r\n            }else{\r\n                api.channels.create(channel, createOK, saveKO);\r\n            }\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the clients\r\n                service.channels.data.push(response);\r\n                service.channels.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.channels.data.length; i++) {\r\n                    if (service.channels.data[i].id === response.id) {\r\n                        service.channels.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un channelo vacío\r\n         */\r\n        function getEmptyChannel() {\r\n            return {\r\n            };\r\n        }\r\n\r\n        function removeChannel(channel){\r\n            var deferred = $q.defer();\r\n\r\n            api.channels.remove({id: channel.id}, channelRemoveOK, removeKO);\r\n\r\n            // Channelo borrado correctamente\r\n            function channelRemoveOK(response){\r\n                // Quitamos la channel en los datos locales\r\n                for (var i = 0; i < service.channels.data.length; i++) {\r\n                    if (service.channels.data[i].id === channel.id) {\r\n                        service.channels.data.splice(i,1);\r\n                        service.channels.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.clients',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider, msApiProvider) {}\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.clients')\r\n        .factory('clientsService', clientsService);\r\n\r\n    /** @ngInject */\r\n    function clientsService($q, api) {\r\n\r\n        var service = {\r\n            clients: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getClients: getClients,\r\n            getBusinessActivity: getBusinessActivity,\r\n            getSectors: getSectors,\r\n            sendWhatsapp: sendWhatsapp\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de clients\r\n         */\r\n        function getClients(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.clients.get({phone__icontains:search,page_size:\"all\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de clients\r\n         */\r\n        function sendWhatsapp(msg) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.whatsapp.create(msg, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de clients\r\n         */\r\n        function getSectors(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.sectors.get({search:search,page_size:\"50\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de clients\r\n         */\r\n        function getBusinessActivity(sector, search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.businessActivity.get({sector__id:sector,search:search,page_size:\"50\"}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.acds')\r\n        .factory('acdsService', acdsService);\r\n\r\n    /** @ngInject */\r\n    function acdsService($q, api, $http, gettextCatalog) {\r\n\r\n        var service = {\r\n            acds: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            wsAcds: {\r\n                sockets: []\r\n            },\r\n            socketAcds: socketAcds,\r\n            getAcds: getAcds,\r\n            getAllAcds: getAllAcds,\r\n            getAcd: getAcd,\r\n            saveAcd: saveAcd,\r\n            getEmptyAcd: getEmptyAcd,\r\n            removeAcd: removeAcd,\r\n            getAudio: getAudio,\r\n            getStatusCall: getStatusCall,\r\n            getOriginsCall: getOriginsCall\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Conectamos con el socket\r\n         */\r\n        function socketAcds(user,callback) {\r\n            if(user.is_admin){\r\n                addSocket(\"admin\",callback);\r\n            }else{\r\n                for(var i in user.related_concessionaires){\r\n                    if(user.related_concessionaires[i].concessionaire_data.mask_c2c){\r\n                        addSocket(user.related_concessionaires[i].concessionaire_data.mask_c2c,callback);\r\n                    }\r\n                }\r\n\r\n            }\r\n        }\r\n\r\n        function addSocket(channel,callback){\r\n            var socket=new ReconnectingWebSocket(api.wsAcds+channel+\"/\");\r\n            socket.onopen = callback;\r\n            socket.onmessage = callback;\r\n\r\n            if ( socket.readyState === WebSocket.OPEN ) {\r\n                socket.onopen();\r\n            }\r\n            service.wsAcds.sockets.push(socket);\r\n        }\r\n\r\n\r\n        /**\r\n         * Obtiene el listado de acds\r\n         */\r\n        function getAcds() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.acds.get(service.acds.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.acds.data=response.results;\r\n                service.acds.count = response.count;\r\n\r\n                deferred.resolve(service.acds);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.acds.filters.page!=1){\r\n                    service.acds.filters.page=1;\r\n                    getAcds();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de acds filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllAcds(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.acds.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.acds.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una acd determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getAcd(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.acds.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la acd que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveAcd(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var acd = angular.copy(form);\r\n\r\n            for(var i in acd.phones){\r\n                if(acd.phones[i].origin_data && acd.phones[i].origin_data.id){\r\n                    acd.phones[i].origin=acd.phones[i].origin_data.id;\r\n                }\r\n            }\r\n\r\n            if(form.id){\r\n                api.acds.update(acd, updateOK, saveKO);\r\n            }else{\r\n                api.acds.create(acd, createOK, saveKO);\r\n            }\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                service.getAcds();\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                service.getAcds();\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un acdo vacío\r\n         */\r\n        function getEmptyAcd() {\r\n            return {\r\n                phones:[{\r\n                    number:\"\"\r\n                }]\r\n            };\r\n        }\r\n\r\n        function removeAcd(acd){\r\n            var deferred = $q.defer();\r\n\r\n            api.acds.remove({id: acd.id}, acdRemoveOK, removeKO);\r\n\r\n            // Acdo borrado correctamente\r\n            function acdRemoveOK(response){\r\n                // Quitamos la acd en los datos locales\r\n                for (var i = 0; i < service.acds.data.length; i++) {\r\n                    if (service.acds.data[i].id === acd.id) {\r\n                        service.acds.data.splice(i,1);\r\n                        service.acds.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Descarga audio de una llamada\r\n         *\r\n         * @param id\r\n         */\r\n        function getAudio(id) {\r\n            var deferred = $q.defer();\r\n\r\n            $http.get(api.baseUrl + 'netelip/calls/'+id+'/audio/', {responseType:'arraybuffer',timeout:60*60*1000}).then(getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response){\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            function getKO(response){\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        function getStatusCall() {\r\n            return [\r\n                {\r\n                    id:'CHANUNAVAIL',\r\n                    name:gettextCatalog.getString('El número llamado no existe'),\r\n                    color:'red-bg'\r\n                },\r\n                {\r\n                    id:'BUSY',\r\n                    name:gettextCatalog.getString('El número llamado está ocupado'),\r\n                    color:'orange-bg'\r\n                },\r\n                {\r\n                    id:'NOANSWER',\r\n                    name:gettextCatalog.getString('El número llamado no contesta'),\r\n                    color:'orange-bg'\r\n                },\r\n                {\r\n                    id:'ANSWER',\r\n                    name:gettextCatalog.getString('El número llamado ha contestado'),\r\n                    color:'green-bg'\r\n                },\r\n                {\r\n                    id:'CANCEL',\r\n                    name:gettextCatalog.getString('El número llamado ha colgado'),\r\n                    color:'orange-bg'\r\n                },\r\n                {\r\n                    id:'CONGESTION',\r\n                    name:gettextCatalog.getString('Fallo en red telefónica por congestión'),\r\n                    color:'red-bg'\r\n                },\r\n                {\r\n                    id:'UNKNOW',\r\n                    name:gettextCatalog.getString('Fallo en red telefónica desconocido'),\r\n                    color:'red-bg'\r\n                },\r\n            ]\r\n        }\r\n        function getOriginsCall() {\r\n            return [\r\n                {\r\n                    id:'user',\r\n                    name:gettextCatalog.getString('Usuario'),\r\n                    color:'teal-bg'\r\n                },\r\n                {\r\n                    id:'client',\r\n                    name:gettextCatalog.getString('Cliente'),\r\n                    color:'green-bg'\r\n                }\r\n            ]\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.calendar',\r\n            [\r\n                // 3rd Party Dependencies\r\n                'ui.calendar'\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider)\r\n    {\r\n        // State\r\n        $stateProvider\r\n            .state('app.calendar', {\r\n                url      : '/calendar',\r\n                views    : {\r\n                    'content@app': {\r\n                        templateUrl: 'app/main/calendar/calendar.html',\r\n                        controller : 'CalendarController as vm'\r\n                    }\r\n                },\r\n                    resolve  : {\r\n                        currentUser: function (AuthService){\r\n                            return AuthService.getCurrentUser().then(function (response) {\r\n                                if (response) {\r\n                                    return response;\r\n                                }\r\n                            });\r\n                        },\r\n                        Kpis: function (currentUser, $rootScope, eventsService) {\r\n                            eventsService.leads.filters={}\r\n                            eventsService.leads.filters.user_data=currentUser;\r\n                            eventsService.kpis.filters={};\r\n                            return eventsService.kpis;\r\n                        },\r\n                        KpisPositive: function (currentUser, $rootScope, eventsService) {\r\n                            eventsService.kpisPositive.filters={};\r\n                            eventsService.kpisPositive.filters.result='positive';\r\n                            return eventsService.kpisPositive;\r\n                        }\r\n                    },\r\n                bodyClass: 'calendar'\r\n            });\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.calendar')\r\n        .factory('eventsService', eventsService);\r\n\r\n    /** @ngInject */\r\n    function eventsService($q, api, localStorageService) {\r\n\r\n        var service = {\r\n            leads: {\r\n                filters: {}\r\n            },\r\n            kpis: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            kpisPositive: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getEvents: getEvents,\r\n            getKpis:getKpis,\r\n            reloadKpis:reloadKpis,\r\n            getKpisPositive:getKpisPositive,\r\n            reloadKpisPositive:reloadKpisPositive,\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de citas\r\n         */\r\n        function getUrl() {\r\n            return api.URLs.calendar;\r\n        }\r\n        /**\r\n         * Obtiene el listado de citas\r\n         */\r\n        function getEvents() {\r\n            return [{\r\n                url: getUrl(),\r\n                beforeSend : function (request, data) {\r\n                    var urlParams = new URLSearchParams(data.url.split('?')[1]);\r\n\r\n                    var f=angular.copy(service.leads.filters);\r\n\r\n                    if(f.user_data && f.user_data.id){\r\n                        f.user=f.user_data.id;\r\n                    }\r\n                    delete f.user_data;\r\n\r\n                    service.kpis.filters.start=urlParams.get('start');\r\n                    service.kpis.filters.end=urlParams.get('end');\r\n                    service.kpis.filters.user=f.user;\r\n\r\n                    service.kpisPositive.filters.start=urlParams.get('start');\r\n                    service.kpisPositive.filters.end=urlParams.get('end');\r\n                    service.kpisPositive.filters.user=f.user;\r\n\r\n                    var str = \"\";\r\n                    for (var key in f) {\r\n                        if(f[key]!==null){\r\n                            str += \"&\";\r\n                            str += key + \"=\" + encodeURIComponent(f[key]);\r\n                        }\r\n                    }\r\n                    data.url+=str;\r\n                    if(localStorageService.get('token')){\r\n                        request.setRequestHeader(\"Authorization\", 'Token ' + localStorageService.get('token'));\r\n                    }\r\n                }\r\n            }]\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de kpis\r\n         */\r\n        function getKpis() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leads.kpis(service.kpis.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.kpis.data = response.kpis;\r\n                service.kpis.count = response.kpis.length;\r\n\r\n                deferred.resolve(service.kpis);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Actualiza el listado de kpis\r\n         */\r\n        function reloadKpis() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leads.kpis(service.kpis.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n              if(service.kpis.data.length>0){\r\n                for(var i in service.kpis.data){\r\n                  for(var j in response.kpis) {\r\n                    if(service.kpis.data[i].name===response.kpis[j].name){\r\n                      service.kpis.data[i].kpis = response.kpis[j].kpis;\r\n                    }\r\n                  }\r\n                }\r\n              }else{\r\n                service.kpis.data = response.kpis;\r\n                service.kpis.count = response.kpis.length;\r\n              }\r\n              deferred.resolve(service.kpis);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de kpis ganados\r\n         */\r\n        function getKpisPositive() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.leads.kpis(service.kpisPositive.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.kpisPositive.data = response.kpis;\r\n                service.kpisPositive.count = response.kpis.length;\r\n\r\n                deferred.resolve(service.kpisPositive);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n      /**\r\n       * Actualiza el listado de kpis ganados\r\n       */\r\n      function reloadKpisPositive() {\r\n        // Create a new deferred object\r\n        var deferred = $q.defer();\r\n\r\n        api.leads.kpis(service.kpisPositive.filters, getOK, getKO);\r\n\r\n        return deferred.promise;\r\n\r\n        function getOK(response) {\r\n          if(service.kpisPositive.data.length>0){\r\n            for(var i in service.kpisPositive.data){\r\n              for(var j in response.kpis) {\r\n                if(service.kpisPositive.data[i].name===response.kpis[j].name){\r\n                  service.kpisPositive.data[i].kpis = response.kpis[j].kpis;\r\n                }\r\n              }\r\n            }\r\n          }else{\r\n            service.kpisPositive.data = response.kpis;\r\n            service.kpisPositive.count = response.kpis.length;\r\n          }\r\n          deferred.resolve(service.kpisPositive);\r\n        }\r\n\r\n        function getKO(response) {\r\n          deferred.reject(response);\r\n        }\r\n      }\r\n\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.auth')\r\n        .factory(\"AuthService\", AuthService);\r\n\r\n\r\n    /** @ngInject */\r\n    function AuthService ( $q, $rootScope, authSettings, msApi, localStorageService, api) {\r\n        var service = {\r\n            loggedIn : false,\r\n            token: '',\r\n            currentUser : null,\r\n            getCurrentUser : getCurrentUser,\r\n            changeProfile : changeProfile,\r\n            checkStatus: checkStatus,\r\n            login: login,\r\n            logout: logout,\r\n            register: register,\r\n            toggleOnline: toggleOnline,\r\n            password: {\r\n                resetRequest: passwordResetRequest,\r\n                resetConfirm: passwordResetConfirm,\r\n                change: passwordChange\r\n            }\r\n        };\r\n\r\n        return service;\r\n\r\n        /////////////\r\n\r\n        /**\r\n         * Comprueba el estado de identificación del usuario actual\r\n         */\r\n        function checkStatus ( )\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            msApi.request('auth.currentUser@get', {}, function(res){\r\n                if (res){\r\n                    for(var i in res.profiles){\r\n                        for(var j in res.profiles[i]){\r\n                            if(res.profiles[i][j].id===localStorageService.get('token')){\r\n                                res.profile=res.profiles[i][j];\r\n                                res.type_user=res.profiles[i][j].profile_type;\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                    service.loggedIn = true;\r\n                    //res.is_admin=false;\r\n                    //res.is_concession_admin=false;\r\n                    service.currentUser = res;\r\n                    service.token = localStorageService.get('token');\r\n\r\n                    deferred.resolve(service.currentUser);\r\n                    // msApi.request('auth.permissions@get', {}, function(res) {\r\n                    //     service.currentUser.urlPermissions=res;\r\n                    //     deferred.resolve(service.currentUser);\r\n                    // });\r\n                } else {\r\n                    deferred.reject({error:\"No hay ningún usuario autenticado\"});\r\n                }\r\n            }, function(){\r\n                deferred.reject({error:\"No hay ningún usuario autenticado\"});\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Devuelve el usuario logueado\r\n         */\r\n        function getCurrentUser ( )\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            if(service.currentUser){\r\n                deferred.resolve(service.currentUser);\r\n            }else{\r\n                service.checkStatus().then(function(){\r\n                    deferred.resolve(service.currentUser);\r\n                },function(){\r\n                    deferred.reject({error:\"No hay ningún usuario autenticado\"});\r\n                });\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Cambia de perfil\r\n         */\r\n        function changeProfile ( profile )\r\n        {\r\n            service.token = profile.id;\r\n            localStorageService.set('token', service.token);\r\n\r\n            service.currentUser.profile=profile;\r\n            service.currentUser.type_user=profile.profile_type;\r\n\r\n            if (authSettings.ON_LOGIN_BROADCAST) {\r\n                $rootScope.$broadcast(authSettings.ON_LOGIN_BROADCAST, service.currentUser);\r\n            }\r\n            location.reload();\r\n        }\r\n\r\n        /**\r\n         * Realiza la acción / intento de login\r\n         */\r\n        function login (username, password, noevent )\r\n        {\r\n            var deferred = $q.defer();\r\n            localStorageService.remove('token');\r\n            localStorageService.remove('tokenImpersonate');\r\n\r\n            msApi.request('auth.login@save', {username: username, password: password}, function(res){\r\n                // On login success\r\n                service.loggedIn = true;\r\n                service.token = res.token;\r\n                localStorageService.set('token', service.token);\r\n\r\n                //service.currentUser = res.user;\r\n                service.checkStatus().then(function(data){\r\n                    if ( authSettings.ON_LOGIN_BROADCAST && noevent !== true) {\r\n                        $rootScope.$broadcast(authSettings.ON_LOGIN_BROADCAST, data);\r\n                    }\r\n                    deferred.resolve(res);\r\n                }, function(){\r\n                    // On detail fail\r\n                    deferred.reject({error: \"Error al obtener los datos del usuario\"});\r\n                });\r\n\r\n            }, function(){\r\n                // On login fail\r\n                deferred.reject({error: \"Nombre de usuario o contraseña incorrecta\"});\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Realiza la acción de logout\r\n         */\r\n        function logout ()\r\n        {\r\n            var deferred = $q.defer();\r\n            msApi.request('auth.logout@save', function(res){\r\n                service.loggedIn = false;\r\n                service.currentUser = null;\r\n                service.token = null;\r\n                localStorageService.remove('token');\r\n                localStorageService.remove('tokenImpersonate');\r\n\r\n\r\n\r\n                if ( authSettings.ON_LOGOUT_BROADCAST) {\r\n                    $rootScope.$broadcast(authSettings.ON_LOGOUT_BROADCAST);\r\n                }\r\n            }, function(res){\r\n                // On logout fail\r\n                deferred.reject(res);\r\n            });\r\n\r\n        }\r\n\r\n\r\n        /**\r\n         * Realiza la acción de solicitud de reseteo de contraseña\r\n         */\r\n        function passwordResetRequest ( form )\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            msApi.request('auth.reset@save', form, function(res){\r\n                if (res){\r\n                    deferred.resolve(res);\r\n                } else {\r\n                    deferred.reject({error:\"No hay ningún usuario con este email\"});\r\n                }\r\n            }, function(error){\r\n                deferred.reject(error);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Realiza la acción de confirmación de reseteo de contraseña\r\n         */\r\n        function passwordResetConfirm ( form )\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            msApi.request('auth.resetConfirm@save', form, function(res){\r\n                // On login success\r\n                service.loggedIn = true;\r\n                service.token = res.token;\r\n                localStorageService.set('token', service.token);\r\n\r\n                //service.currentUser = res.user;\r\n                service.checkStatus().then(function(data){\r\n                    if ( authSettings.ON_LOGIN_BROADCAST) {\r\n                        $rootScope.$broadcast(authSettings.ON_LOGIN_BROADCAST, data);\r\n                    }\r\n                    deferred.resolve(res);\r\n                });\r\n            }, function(res){\r\n                deferred.reject(res);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Realiza la acción de cambio de contraseña\r\n         */\r\n        function passwordChange ( oldPassword, newPassword, newPasswordRepeat )\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            api.user.passwordChange({current_password: oldPassword, password: newPassword, password_repeat: newPasswordRepeat}, function(){\r\n                deferred.resolve();\r\n            }, function(res){\r\n                // On password fail\r\n                deferred.reject(res.data);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Realiza el registro de una empresa\r\n         */\r\n        function register ( form )\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            localStorageService.remove('token');\r\n            localStorageService.remove('tokenImpersonate');\r\n            msApi.request('auth.register@save', form, function(res){\r\n\r\n                service.loggedIn = true;\r\n                service.token = res.token;\r\n                localStorageService.set('token', service.token);\r\n\r\n                //service.currentUser = res.user;\r\n                service.checkStatus().then(function(data){\r\n                    if ( authSettings.ON_LOGIN_BROADCAST) {\r\n                        $rootScope.$broadcast(authSettings.ON_LOGIN_BROADCAST, data);\r\n                    }\r\n                    deferred.resolve(res);\r\n                });\r\n\r\n            }, function(error){\r\n                deferred.reject(error);\r\n            });\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Cambia el estado de la sesión\r\n         */\r\n        function toggleOnline ()\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            api.users.sessionStatus({}, updateOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function updateOK(response) {\r\n                service.currentUser.session.online=response.forced_online_status;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.auth')\r\n        .config(interceptor);\r\n\r\n    function interceptor($provide, $httpProvider, authSettings, AuthServiceProvider) {\r\n\r\n        // Este interceptor captura todos los fallos de autenticación\r\n        $provide.factory('AuthenticationInterceptor', ['localStorageService', '$q', '$rootScope', function (localStorageService, $q, $rootScope) {\r\n            return {\r\n                request: function(config) {\r\n                    config.headers = config.headers || {};\r\n                    if (localStorageService.get('token')) {\r\n                        config.headers.Authorization = 'Token ' + localStorageService.get('token');\r\n                    }\r\n                    if (localStorageService.get('tokenImpersonate')) {\r\n                        config.headers.ImpersonateAuthorization = 'Token ' + localStorageService.get('tokenImpersonate');\r\n                    }\r\n                    if($rootScope.languageSelected){\r\n                       config.headers['Accept-Language'] = $rootScope.languageSelected;\r\n                    }\r\n                    return config || $q.when(config);\r\n                },\r\n\r\n                // Utilizamos el método response error ya que queremos capturar los 401\r\n                responseError: function (rejection) {\r\n                    if (rejection.status === 401 || rejection.status === 403) {\r\n\r\n                        if (authSettings.ON_UNAUTHORIZED_REQUEST && localStorageService.get('token')){\r\n                            AuthServiceProvider.$get().getCurrentUser().then(function(currentUser){\r\n                                $rootScope.$broadcast(authSettings.ON_UNAUTHORIZED_REQUEST, currentUser);\r\n                            });\r\n                        }else{\r\n                            $rootScope.$broadcast(authSettings.ON_UNAUTHORIZED_REQUEST);\r\n                        }\r\n                        localStorageService.remove('token');\r\n                        localStorageService.remove('tokenImpersonate');\r\n\r\n                    }\r\n\r\n                    // Flujo normal de ejecución\r\n                    return $q.reject(rejection);\r\n                }\r\n            };\r\n        }]);\r\n\r\n        // Add the interceptor to the $httpProvider.\r\n        $httpProvider.interceptors.push('AuthenticationInterceptor');\r\n    }\r\n})();\r\n\n(function()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.auth')\r\n        .constant('authSettings', {\r\n\r\n            /**\r\n             * estado ($route) al que se cambiará cuando sea necesario pedir el login de usuario\r\n             */\r\n            LOGIN_STATE: 'app.auth.login',\r\n\r\n            /**\r\n             * estado ($route) al que se cambiará cuando el logueo sea correcto\r\n             */\r\n            LOGIN_STATE_SUCCESS: 'app.leads.board',\r\n\r\n            /**\r\n             * evento que se emitirá mediante $rootScope.broadcast() cuando el usuario se identifique correctamente. Si\r\n             * es un valor que se evalúe como false, no se emitirá ningún evento\r\n             */\r\n            ON_LOGIN_BROADCAST: 'auth.login',\r\n\r\n            /**\r\n             * evento que se emitirá mediante $rootScope.broadcast() cuando el usuario cierra la sesión. Si\r\n             * es un valor que se evalúe como false, no se emitirá ningún evento\r\n             */\r\n            ON_LOGOUT_BROADCAST: 'auth.logout',\r\n\r\n            /**\r\n             * evento que se emitirá mediante $rootScope.broadcast() cuando el usuario hace alguna petición\r\n             * que devuelve un 401 o 403. Si es un valor que se evalúe como false, no se emitirá ningún evento\r\n             */\r\n            ON_UNAUTHORIZED_REQUEST: 'auth.unauthorized'\r\n\r\n        } );\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services',\r\n            [\r\n\r\n            ]\r\n        );\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('temperaturesService', temperaturesService);\r\n\r\n    /** @ngInject */\r\n    function temperaturesService(gettextCatalog) {\r\n\r\n        var service = {\r\n            temperatures: [\r\n                {\r\n                    id:'30',\r\n                    name:gettextCatalog.getString('Menos de 30')\r\n                },{\r\n                    id:'90',\r\n                    name:'30 - 90'\r\n                },{\r\n                    id:'120',\r\n                    name:'90 - 120'\r\n                },{\r\n                    id:'240',\r\n                    name:'120 - 240'\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('taskTypesService', taskTypesService);\r\n\r\n    /** @ngInject */\r\n    function taskTypesService($q, api) {\r\n\r\n        var service = {\r\n            getTaskTypes: getTaskTypes,\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de taskTypes\r\n         */\r\n        function getTaskTypes(tracing) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.taskTypes.queryAll({is_traking_task:tracing}, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /*var service = {\r\n            taskTypes: [\r\n                {\r\n                    id:'date',\r\n                    name:gettextCatalog.getString('Visita / Test Drive')\r\n                },{\r\n                    id:'appraisal',\r\n                    name:gettextCatalog.getString('Tasación')\r\n                },{\r\n                    id:'budget',\r\n                    name:gettextCatalog.getString('Presupuesto')\r\n                },{\r\n                    id:'financing',\r\n                    name:gettextCatalog.getString('Financiación')\r\n                },{\r\n                    id:'warranty',\r\n                    name:gettextCatalog.getString('Garantía')\r\n                },{\r\n                    id:'vehicle_information',\r\n                    name:gettextCatalog.getString('Información del vehículo')\r\n                },{\r\n                    id: 'response_information_mail',\r\n                    name: gettextCatalog.getString('Responder al Email')\r\n                },{\r\n                    id: 'lost_call',\r\n                    name: gettextCatalog.getString('Atender una llamada perdida')\r\n                },{\r\n                    id: 'send_email',\r\n                    name: gettextCatalog.getString('Enviar email')\r\n                },{\r\n                    id: 'workshop_appointment',\r\n                    name: gettextCatalog.getString('Cita para taller')\r\n                },{\r\n                    id:'other',\r\n                    name:gettextCatalog.getString('Otro')\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;*/\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('scoresService', scoresService);\r\n\r\n    /** @ngInject */\r\n    function scoresService(gettextCatalog) {\r\n\r\n        var service = {\r\n            scores: [\r\n                {\r\n                    id:'1',\r\n                    color:\"#ea5242\",\r\n                    name:gettextCatalog.getString('Muy bajo')\r\n                },{\r\n                    id:'2',\r\n                    color:\"#feca15\",\r\n                    name:gettextCatalog.getString('Bajo')\r\n                },{\r\n                    id:'3',\r\n                    color:\"#8dbf22\",\r\n                    name:gettextCatalog.getString('Medio')\r\n                },{\r\n                    id:'4',\r\n                    color:\"#3fab34\",\r\n                    name:gettextCatalog.getString('Alto')\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('sourcesService', sourcesService);\r\n\r\n    /** @ngInject */\r\n    function sourcesService($q, api) {\r\n\r\n        var service = {\r\n            sources: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getSources: getSources,\r\n            getAllSources: getAllSources,\r\n            getSource: getSource,\r\n            saveSource: saveSource,\r\n            getEmptySource: getEmptySource,\r\n            removeSource: removeSource\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de sources\r\n         */\r\n        function getSources() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.sources.get(service.sources.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.sources.data=response.results;\r\n                service.sources.count = response.count;\r\n\r\n                deferred.resolve(service.sources);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.sources.filters.page!=1){\r\n                    service.sources.filters.page=1;\r\n                    getSources();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de sources filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllSources(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.sources.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.sources.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una source determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getSource(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.sources.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la source que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveSource(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var source = angular.copy(form);\r\n\r\n            api.sources.update(source, updateOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the clients\r\n                service.sources.data.push(response);\r\n                service.sources.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.sources.data.length; i++) {\r\n                    if (service.sources.data[i].id === response.id) {\r\n                        service.sources.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un sourceo vacío\r\n         */\r\n        function getEmptySource() {\r\n            return {\r\n            };\r\n        }\r\n\r\n        function removeSource(source){\r\n            var deferred = $q.defer();\r\n\r\n            api.sources.remove({id: source.id}, sourceRemoveOK, removeKO);\r\n\r\n            // Sourceo borrado correctamente\r\n            function sourceRemoveOK(response){\r\n                // Quitamos la source en los datos locales\r\n                for (var i = 0; i < service.sources.data.length; i++) {\r\n                    if (service.sources.data[i].id === source.id) {\r\n                        service.sources.data.splice(i,1);\r\n                        service.sources.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('qualificationsService', qualificationsService);\r\n\r\n    /** @ngInject */\r\n    function qualificationsService(gettextCatalog) {\r\n\r\n        var service = {\r\n            qualifications: [\r\n                {\r\n                    id:'positive',\r\n                    name:gettextCatalog.getString('Positiva')\r\n                },{\r\n                    id:'negative',\r\n                    name:gettextCatalog.getString('Negativa')\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('mediaTypesService', mediaTypesService);\r\n\r\n    /** @ngInject */\r\n    function mediaTypesService(gettextCatalog) {\r\n\r\n        var service = {\r\n            mediaTypes: [\r\n                {\r\n                    id:'Whatsapp',\r\n                    icon:'icon-whatsapp',\r\n                    name:gettextCatalog.getString('Whatsapp'),\r\n                    alias:gettextCatalog.getString('Enviar Whatsapp a')\r\n                },{\r\n                    id:'Phone',\r\n                    icon:'icon-phone',\r\n                    name:gettextCatalog.getString('Teléfono'),\r\n                    alias:gettextCatalog.getString('LLamar a')\r\n                },{\r\n                    id:'SMS',\r\n                    icon:'SMS',\r\n                    name:gettextCatalog.getString('SMS'),\r\n                    alias:gettextCatalog.getString('Enviar SMS a')\r\n                },{\r\n                    id:'E-mail',\r\n                    icon:'icon-email',\r\n                    name:gettextCatalog.getString('Email'),\r\n                    alias:gettextCatalog.getString('Enviar Email a')\r\n                },{\r\n                    id:'face',\r\n                    icon:'icon-account-multiple',\r\n                    name:gettextCatalog.getString('Reunión'),\r\n                    alias:gettextCatalog.getString('Reunión con')\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('originsCarService', originsCarService);\r\n\r\n    /** @ngInject */\r\n    function originsCarService(gettextCatalog) {\r\n\r\n        var service = {\r\n            origins: [\r\n                {\r\n                    id:'national',\r\n                    name:gettextCatalog.getString('Nacional')\r\n                },{\r\n                    id:'foreign',\r\n                    name:gettextCatalog.getString('Extranjero')\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('leadStatusService', leadStatusService);\r\n\r\n    /** @ngInject */\r\n    function leadStatusService(gettextCatalog) {\r\n\r\n        var service = {\r\n            leadStatus: [\r\n                {\r\n                    id:'new',\r\n                    name:gettextCatalog.getString('Lead no atendido'),\r\n                    color:'#009688'\r\n                },{\r\n                    id:'attended',\r\n                    name:gettextCatalog.getString('Lead atendido por comercial'),\r\n                    color:'#f39400'\r\n                },{\r\n                    id:'commercial_management',\r\n                    name:gettextCatalog.getString('Tareas pendientes'),\r\n                    color:'#2196f3'\r\n                },{\r\n                    id:'tracing',\r\n                    name:gettextCatalog.getString('Seguimiento'),\r\n                    color:'#673ab7'\r\n                },{\r\n                    id:'end',\r\n                    name:gettextCatalog.getString('Lead cerrado'),\r\n                    color:'#f44336'\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('phonesService', phonesService);\r\n\r\n    /** @ngInject */\r\n    function phonesService($q, api) {\r\n\r\n        var service = {\r\n            phones: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getPhones: getPhones,\r\n            getAllPhones: getAllPhones,\r\n            getPhone: getPhone,\r\n            savePhone: savePhone,\r\n            getEmptyPhone: getEmptyPhone,\r\n            removePhone: removePhone\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de phones\r\n         */\r\n        function getPhones() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.phones.get(service.phones.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.phones.data=response.results;\r\n                service.phones.count = response.count;\r\n\r\n                deferred.resolve(service.phones);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.phones.filters.page!=1){\r\n                    service.phones.filters.page=1;\r\n                    getPhones();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de phones filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllPhones(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.phones.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.phones.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una phone determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getPhone(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.phones.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la phone que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function savePhone(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var phone = angular.copy(form);\r\n\r\n            api.phones.update(phone, updateOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the clients\r\n                service.phones.data.push(response);\r\n                service.phones.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.phones.data.length; i++) {\r\n                    if (service.phones.data[i].id === response.id) {\r\n                        service.phones.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un phoneo vacío\r\n         */\r\n        function getEmptyPhone() {\r\n            return {\r\n            };\r\n        }\r\n\r\n        function removePhone(phone){\r\n            var deferred = $q.defer();\r\n\r\n            api.phones.remove({id: phone.id}, phoneRemoveOK, removeKO);\r\n\r\n            // Phoneo borrado correctamente\r\n            function phoneRemoveOK(response){\r\n                // Quitamos la phone en los datos locales\r\n                for (var i = 0; i < service.phones.data.length; i++) {\r\n                    if (service.phones.data[i].id === phone.id) {\r\n                        service.phones.data.splice(i,1);\r\n                        service.phones.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('gasTypesService', gasTypesService);\r\n\r\n    /** @ngInject */\r\n    function gasTypesService($q, api) {\r\n\r\n        var service = {\r\n            gasTypes: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getGasTypes: getGasTypes,\r\n            getAllGasTypes: getAllGasTypes,\r\n            getGasType: getGasType,\r\n            saveGasType: saveGasType,\r\n            getEmptyGasType: getEmptyGasType,\r\n            removeGasType: removeGasType\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de gasTypes\r\n         */\r\n        function getGasTypes() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.gasTypes.get(service.gasTypes.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.gasTypes.data=response.results;\r\n                service.gasTypes.count = response.count;\r\n\r\n                deferred.resolve(service.gasTypes);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.gasTypes.filters.page!=1){\r\n                    service.gasTypes.filters.page=1;\r\n                    getGasTypes();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de gasTypes filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllGasTypes(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.gasTypes.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.gasTypes.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una gasType determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getGasType(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.gasTypes.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la gasType que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveGasType(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var gasType = angular.copy(form);\r\n\r\n            api.gasTypes.update(gasType, updateOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the clients\r\n                service.gasTypes.data.push(response);\r\n                service.gasTypes.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.gasTypes.data.length; i++) {\r\n                    if (service.gasTypes.data[i].id === response.id) {\r\n                        service.gasTypes.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un gasTypeo vacío\r\n         */\r\n        function getEmptyGasType() {\r\n            return {\r\n            };\r\n        }\r\n\r\n        function removeGasType(gasType){\r\n            var deferred = $q.defer();\r\n\r\n            api.gasTypes.remove({id: gasType.id}, gasTypeRemoveOK, removeKO);\r\n\r\n            // GasTypeo borrado correctamente\r\n            function gasTypeRemoveOK(response){\r\n                // Quitamos la gasType en los datos locales\r\n                for (var i = 0; i < service.gasTypes.data.length; i++) {\r\n                    if (service.gasTypes.data[i].id === gasType.id) {\r\n                        service.gasTypes.data.splice(i,1);\r\n                        service.gasTypes.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('leadResultsService', leadResultsService);\r\n\r\n    /** @ngInject */\r\n    function leadResultsService(gettextCatalog) {\r\n\r\n        var service = {\r\n\r\n            newLeadResults: [\r\n                {id:'positive', name:gettextCatalog.getString('Ganado')},\r\n                {id:'negative', name:gettextCatalog.getString('Descartado')}\r\n            ],\r\n            resultReasons:{\r\n                positive:[\r\n                    {id:'pedido', name:gettextCatalog.getString('Pedido')},\r\n                    {id:'reservado', name:gettextCatalog.getString('Reservado')}\r\n                ],\r\n                negative:[\r\n                    {id:'publicidad', name:gettextCatalog.getString('Publicidad')},\r\n                    {id:'compra_competencia_precio', name:gettextCatalog.getString('Compra competencia por precio')},\r\n                    {id:'compra_competencia_proximidad', name:gettextCatalog.getString('Compra competencia por proximidad')},\r\n                    {id:'compra_competencia_stock', name:gettextCatalog.getString('Compra competencia por stock')},\r\n                    {id:'no_encaja_producto', name:gettextCatalog.getString('No le encaja el producto')},\r\n                    {id:'no_encaja_precio', name:gettextCatalog.getString('No le encaja el precio')},\r\n                    {id:'no_encaja_cuota', name:gettextCatalog.getString('No le encaja la cuota')},\r\n                    {id:'disconforme_tasacion', name:gettextCatalog.getString('Disconforme con tasación')},\r\n                    {id:'infinanciable', name:gettextCatalog.getString('Infinanciable')},\r\n                    {id:'aplaza_decision', name:gettextCatalog.getString('Aplaza decisión')},\r\n                    {id:'cita_cancelada', name:gettextCatalog.getString('Cita cancelada')},\r\n                    {id:'ilocalizable', name:gettextCatalog.getString('Ilocalizable')},\r\n                    {id:'informacion_cliente_incorrecta', name:gettextCatalog.getString('Información cliente incorrecta')},\r\n                    {id:'duplicado', name:gettextCatalog.getString('Duplicado')},\r\n                    {id:'otro', name:gettextCatalog.getString('Otro')},\r\n                    {id:'caducado', name:gettextCatalog.getString('Caducado')},\r\n                    {id:'vehiculo_ya_vendido', name:gettextCatalog.getString('Vehiculo ya vendido')}\r\n                ]\r\n            },\r\n            leadResults: [\r\n                {\r\n                    id:'positive',\r\n                    name:gettextCatalog.getString('Ganado'),\r\n                    color:\"#388E3C\"\r\n                },{\r\n                    id:'negative',\r\n                    name:gettextCatalog.getString('Negativo'),\r\n                    color:\"rgb(244,67,54)\"\r\n                },{\r\n                    id:'reserved_vehicle',\r\n                    name:gettextCatalog.getString('Vehiculo reservado'),\r\n                    color:\"#388E3C\"\r\n                },{\r\n                    id:'unreachable',\r\n                    name:gettextCatalog.getString('Ilocalizable'),\r\n                    color:\"rgb(3,155,229)\"\r\n                },{\r\n                    id:'wrong',\r\n                    name:gettextCatalog.getString('Duplicado'),\r\n                    color:\"rgb(45,50,62)\"\r\n                },{\r\n                    id:'not_available',\r\n                    name:gettextCatalog.getString('No disponible'),\r\n                    color:\"rgb(45,50,62)\"\r\n                },{\r\n                    id:'error',\r\n                    name:gettextCatalog.getString('Error'),\r\n                    color:\"rgb(123,31,162)\"\r\n                }\r\n            ],\r\n            leadResultsErrors: [\r\n                {\r\n                    id:'rechaza_financiacion',\r\n                    name:gettextCatalog.getString('Rechaza financiación'),\r\n                    status:'negative'\r\n                },{\r\n                    id:'rechaza_tasacion',\r\n                    name:gettextCatalog.getString('Rechaza tasación'),\r\n                    status:'negative'\r\n                },{\r\n                    id:'rechaza_precio',\r\n                    name:gettextCatalog.getString('Rechaza precio'),\r\n                    status:'negative'\r\n                },{\r\n                    id:'aplaza_compra',\r\n                    name:gettextCatalog.getString('Aplaza compra'),\r\n                    status:'negative'\r\n                },{\r\n                    id:'compra_competencia',\r\n                    name:gettextCatalog.getString('Compra competencia'),\r\n                    status:'negative'\r\n                },{\r\n                    id:'pre-reservado',\r\n                    name:gettextCatalog.getString('Pre-Reservado'),\r\n                    status:'not_available'\r\n                },{\r\n                    id:'reservado-old',\r\n                    name:gettextCatalog.getString('Reservado'),\r\n                    status:'not_available'\r\n                },{\r\n                    id:'publicidad',\r\n                    name:gettextCatalog.getString('Publicidad'),\r\n                    status:'error'\r\n                },{\r\n                    id:'otro_departamento',\r\n                    name:gettextCatalog.getString('Otro Departamento'),\r\n                    status:'error'\r\n                },{\r\n                    id:'error',\r\n                    name:gettextCatalog.getString('Error'),\r\n                    status:'error'\r\n                },\r\n                {\r\n                    id:'compra_competencia_precio',\r\n                    name:gettextCatalog.getString('Compra competencia por precio'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'compra_competencia_proximidad',\r\n                    name:gettextCatalog.getString('Compra competencia por proximidad'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'compra_competencia_stock',\r\n                    name:gettextCatalog.getString('Compra competencia por stock'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'infinanciable',\r\n                    name:gettextCatalog.getString('Infinanciable'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'aplaza_decision',\r\n                    name:gettextCatalog.getString('Aplaza decisión'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'otro',\r\n                    name:gettextCatalog.getString('Otro'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'duplicado',\r\n                    name:gettextCatalog.getString('Duplicado'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'cita_cancelada',\r\n                    name:gettextCatalog.getString('Cita cancelada'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'informacion_cliente_incorrecta',\r\n                    name:gettextCatalog.getString('Información cliente incorrecta'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'ilocalizable',\r\n                    name:gettextCatalog.getString('Ilocalizable'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'disconforme_tasacion',\r\n                    name:gettextCatalog.getString('Disconforme con tasación'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'caducado',\r\n                    name:gettextCatalog.getString('Caducado'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'no_encaja_producto',\r\n                    name:gettextCatalog.getString('No le encaja el producto'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'no_encaja_precio',\r\n                    name:gettextCatalog.getString('No le encaja el precio'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'no_encaja_cuota',\r\n                    name:gettextCatalog.getString('No le encaja la cuota'),\r\n                    status:'negative'\r\n                },\r\n                {\r\n                    id:'pedido',\r\n                    name:gettextCatalog.getString('Pedido'),\r\n                    status:'positive'\r\n                },\r\n                {\r\n                    id:'reservado',\r\n                    name:gettextCatalog.getString('Reservado'),\r\n                    status:'positive'\r\n                }\r\n            ]\r\n        };\r\n\r\n        return service;\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('emailsService', emailsService);\r\n\r\n    /** @ngInject */\r\n    function emailsService($q, api) {\r\n\r\n        var service = {\r\n            emails: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getEmails: getEmails,\r\n            getAllEmails: getAllEmails,\r\n            getEmail: getEmail,\r\n            saveEmail: saveEmail,\r\n            getEmptyEmail: getEmptyEmail,\r\n            removeEmail: removeEmail\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de emails\r\n         */\r\n        function getEmails() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.emails.get(service.emails.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.emails.data=response.results;\r\n                service.emails.count = response.count;\r\n\r\n                deferred.resolve(service.emails);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.emails.filters.page!=1){\r\n                    service.emails.filters.page=1;\r\n                    getEmails();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de emails filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllEmails(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.emails.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.emails.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una email determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getEmail(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.emails.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la email que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveEmail(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var email = angular.copy(form);\r\n\r\n            api.emails.update(email, updateOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                // Store the clients\r\n                service.emails.data.push(response);\r\n                service.emails.count ++;\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function updateOK(response) {\r\n                // Actauliza el listado\r\n                for (var i = 0; i < service.emails.data.length; i++) {\r\n                    if (service.emails.data[i].id === response.id) {\r\n                        service.emails.data[i] = angular.copy(response);\r\n                    }\r\n                }\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un emailo vacío\r\n         */\r\n        function getEmptyEmail() {\r\n            return {\r\n            };\r\n        }\r\n\r\n        function removeEmail(email){\r\n            var deferred = $q.defer();\r\n\r\n            api.emails.remove({id: email.id}, emailRemoveOK, removeKO);\r\n\r\n            // Emailo borrado correctamente\r\n            function emailRemoveOK(response){\r\n                // Quitamos la email en los datos locales\r\n                for (var i = 0; i < service.emails.data.length; i++) {\r\n                    if (service.emails.data[i].id === email.id) {\r\n                        service.emails.data.splice(i,1);\r\n                        service.emails.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.services')\r\n        .factory('click2callsService', click2callsService);\r\n\r\n    /** @ngInject */\r\n    function click2callsService($q, leadsService, api) {\r\n\r\n        var service = {\r\n            click2calls: {\r\n                data: [],\r\n                count: 0,\r\n                filters: {}\r\n            },\r\n            getClick2calls: getClick2calls,\r\n            getAllClick2calls: getAllClick2calls,\r\n            getClick2call: getClick2call,\r\n            saveClick2call: saveClick2call,\r\n            getEmptyClick2call: getEmptyClick2call,\r\n            removeClick2call: removeClick2call\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Obtiene el listado de click2calls\r\n         */\r\n        function getClick2calls() {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            api.click2calls.get(service.click2calls.filters, getOK, getKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                service.click2calls.data=response.results;\r\n                service.click2calls.count = response.count;\r\n\r\n                deferred.resolve(service.click2calls);\r\n            }\r\n\r\n            function getKO(response) {\r\n                //con esto evitamos que den problemas los not found cuando\r\n                // filtramos y estamos en una página que ya no existe\r\n                if(response.status==404 && service.click2calls.filters.page!=1){\r\n                    service.click2calls.filters.page=1;\r\n                    getClick2calls();\r\n                }\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene el listado de click2calls filtrando unicamente por el texto dado y sin guardar en el servicio\r\n         *\r\n         * @param search\r\n         */\r\n        function getAllClick2calls(search) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            var f=angular.copy(service.click2calls.filters);\r\n            f.search=search;\r\n            f.page_size=\"all\";\r\n            api.click2calls.get(f, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response.results);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Obtiene los datos de una click2call determinado por su ID\r\n         *\r\n         * @param id\r\n         */\r\n        function getClick2call(id) {\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n            api.click2calls.get({id: id}, getOK, getKO);\r\n            return deferred.promise;\r\n\r\n            function getOK(response) {\r\n                deferred.resolve(response);\r\n            }\r\n\r\n            function getKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Guarda la click2call que se pasa como parámetro. Si ya existe actualiza el existente.\r\n         *\r\n         * @param form\r\n         */\r\n        function saveClick2call(form) {\r\n            var deferred = $q.defer();\r\n\r\n            var click2call = angular.copy(form);\r\n\r\n            api.click2calls.create(click2call, createOK, saveKO);\r\n\r\n            return deferred.promise;\r\n\r\n            function createOK(response) {\r\n                leadsService.getLeadsOutgoingCalls(form.lead).then(function(){\r\n                    deferred.resolve(response);\r\n                });\r\n            }\r\n\r\n            function saveKO(response) {\r\n                deferred.reject(response);\r\n            }\r\n\r\n        }\r\n\r\n        /**\r\n         * Devuelve un click2callo vacío\r\n         */\r\n        function getEmptyClick2call() {\r\n            return {\r\n            };\r\n        }\r\n\r\n        function removeClick2call(click2call){\r\n            var deferred = $q.defer();\r\n\r\n            api.click2calls.remove({id: click2call.id}, click2callRemoveOK, removeKO);\r\n\r\n            // Click2callo borrado correctamente\r\n            function click2callRemoveOK(response){\r\n                // Quitamos la click2call en los datos locales\r\n                for (var i = 0; i < service.click2calls.data.length; i++) {\r\n                    if (service.click2calls.data[i].id === click2call.id) {\r\n                        service.click2calls.data.splice(i,1);\r\n                        service.click2calls.count -= 1;\r\n                        break;\r\n                    }\r\n                }\r\n                deferred.resolve(response.data);\r\n            }\r\n\r\n            // Fallo al borrar centro\r\n            function removeKO(response){\r\n                deferred.reject(response);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core',\r\n            [\r\n                'ngAnimate',\r\n                'ngAria',\r\n                'ngCookies',\r\n                'ngMessages',\r\n                'ngResource',\r\n                'ngSanitize',\r\n                'ngMaterial',\r\n                'ui.router'\r\n            ]);\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('MsWidgetController', MsWidgetController)\r\n        .directive('msWidget', msWidgetDirective)\r\n        .directive('msWidgetFront', msWidgetFrontDirective)\r\n        .directive('msWidgetBack', msWidgetBackDirective);\r\n\r\n    /** @ngInject */\r\n    function MsWidgetController($scope, $element)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.flipped = false;\r\n\r\n        // Methods\r\n        vm.flip = flip;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Flip the widget\r\n         */\r\n        function flip()\r\n        {\r\n            if ( !isFlippable() )\r\n            {\r\n                return;\r\n            }\r\n\r\n            // Toggle flipped status\r\n            vm.flipped = !vm.flipped;\r\n\r\n            // Toggle the 'flipped' class\r\n            $element.toggleClass('flipped', vm.flipped);\r\n        }\r\n\r\n        /**\r\n         * Check if widget is flippable\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isFlippable()\r\n        {\r\n            return (angular.isDefined($scope.flippable) && $scope.flippable === true);\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msWidgetDirective()\r\n    {\r\n        return {\r\n            restrict  : 'E',\r\n            scope     : {\r\n                flippable: '=?'\r\n            },\r\n            controller: 'MsWidgetController',\r\n            transclude: true,\r\n            compile   : function (tElement)\r\n            {\r\n                tElement.addClass('ms-widget');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsWidgetCtrl, transcludeFn)\r\n                {\r\n                    // Custom transclusion\r\n                    transcludeFn(function (clone)\r\n                    {\r\n                        iElement.empty();\r\n                        iElement.append(clone);\r\n                    });\r\n\r\n                    //////////\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msWidgetFrontDirective()\r\n    {\r\n        return {\r\n            restrict  : 'E',\r\n            require   : '^msWidget',\r\n            transclude: true,\r\n            compile   : function (tElement)\r\n            {\r\n                tElement.addClass('ms-widget-front');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsWidgetCtrl, transcludeFn)\r\n                {\r\n                    // Custom transclusion\r\n                    transcludeFn(function (clone)\r\n                    {\r\n                        iElement.empty();\r\n                        iElement.append(clone);\r\n                    });\r\n\r\n                    // Methods\r\n                    scope.flipWidget = MsWidgetCtrl.flip;\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msWidgetBackDirective()\r\n    {\r\n        return {\r\n            restrict  : 'E',\r\n            require   : '^msWidget',\r\n            transclude: true,\r\n            compile   : function (tElement)\r\n            {\r\n                tElement.addClass('ms-widget-back');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsWidgetCtrl, transcludeFn)\r\n                {\r\n                    // Custom transclusion\r\n                    transcludeFn(function (clone)\r\n                    {\r\n                        iElement.empty();\r\n                        iElement.append(clone);\r\n                    });\r\n\r\n                    // Methods\r\n                    scope.flipWidget = MsWidgetCtrl.flip;\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('MsTimelineController', MsTimelineController)\r\n        .directive('msTimeline', msTimelineDirective)\r\n        .directive('msTimelineItem', msTimelineItemDirective);\r\n\r\n    /** @ngInject */\r\n    function MsTimelineController()\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.scrollEl = undefined;\r\n\r\n        // Methods\r\n        vm.setScrollEl = setScrollEl;\r\n        vm.getScrollEl = getScrollEl;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Set scroll element\r\n         *\r\n         * @param scrollEl\r\n         */\r\n        function setScrollEl(scrollEl)\r\n        {\r\n            vm.scrollEl = scrollEl;\r\n        }\r\n\r\n        /**\r\n         * Get scroll element\r\n         *\r\n         * @returns {undefined|*}\r\n         */\r\n        function getScrollEl()\r\n        {\r\n            return vm.scrollEl;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msTimelineDirective()\r\n    {\r\n        return {\r\n            scope     : {\r\n                msTimeline: '=?',\r\n                loadMore  : '&?msTimelineLoadMore'\r\n            },\r\n            controller: 'MsTimelineController',\r\n            compile   : function (tElement)\r\n            {\r\n                tElement.addClass('ms-timeline');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsTimelineCtrl)\r\n                {\r\n                    // Create an element for triggering the load more action and append it\r\n                    var loadMoreEl = angular.element('<div class=\"ms-timeline-loader md-accent-bg md-whiteframe-4dp\"><span class=\"spinner animate-rotate\"></span></div>');\r\n                    iElement.append(loadMoreEl);\r\n\r\n                    // Default config\r\n                    var config = {\r\n                        scrollEl: '#content'\r\n                    };\r\n\r\n                    // Extend the configuration\r\n                    config = angular.extend(config, scope.msTimeline, {});\r\n                    \r\n                    // Grab the scrollable element and store it in the controller for general use\r\n                    var scrollEl = angular.element(config.scrollEl);\r\n                    MsTimelineCtrl.setScrollEl(scrollEl);\r\n\r\n                    // Threshold\r\n                    var threshold = 144;\r\n\r\n                    // Register onScroll event for the first time\r\n                    registerOnScroll();\r\n\r\n                    /**\r\n                     * onScroll Event\r\n                     */\r\n                    function onScroll()\r\n                    {\r\n                        if ( scrollEl.scrollTop() + scrollEl.height() + threshold > loadMoreEl.position().top )\r\n                        {\r\n                            // Show the loader\r\n                            loadMoreEl.addClass('show');\r\n\r\n                            // Unregister scroll event to prevent triggering the function over and over again\r\n                            unregisterOnScroll();\r\n\r\n                            // Trigger load more event\r\n                            scope.loadMore().then(\r\n                                // Success\r\n                                function ()\r\n                                {\r\n                                    // Hide the loader\r\n                                    loadMoreEl.removeClass('show');\r\n\r\n                                    // Register the onScroll event again\r\n                                    registerOnScroll();\r\n                                },\r\n\r\n                                // Error\r\n                                function ()\r\n                                {\r\n                                    // Remove the loader completely\r\n                                    loadMoreEl.remove();\r\n                                }\r\n                            );\r\n                        }\r\n                    }\r\n\r\n                    /**\r\n                     * onScroll event registerer\r\n                     */\r\n                    function registerOnScroll()\r\n                    {\r\n                        scrollEl.on('scroll', onScroll);\r\n                    }\r\n\r\n                    /**\r\n                     * onScroll event unregisterer\r\n                     */\r\n                    function unregisterOnScroll()\r\n                    {\r\n                        scrollEl.off('scroll', onScroll);\r\n                    }\r\n\r\n                    // Cleanup\r\n                    scope.$on('$destroy', function ()\r\n                    {\r\n                        unregisterOnScroll();\r\n                    });\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msTimelineItemDirective($timeout, $q)\r\n    {\r\n        return {\r\n            scope  : true,\r\n            require: '^msTimeline',\r\n            compile: function (tElement)\r\n            {\r\n                tElement.addClass('ms-timeline-item').addClass('hidden');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsTimelineCtrl)\r\n                {\r\n                    var threshold = 72,\r\n                        itemLoaded = false,\r\n                        itemInViewport = false,\r\n                        scrollEl = MsTimelineCtrl.getScrollEl();\r\n\r\n                    //////////\r\n\r\n                    init();\r\n\r\n                    /**\r\n                     * Initialize\r\n                     */\r\n                    function init()\r\n                    {\r\n                        // Check if the timeline item has ms-card\r\n                        if ( iElement.find('ms-card') )\r\n                        {\r\n                            // If the ms-card template loaded...\r\n                            scope.$on('msCard::cardTemplateLoaded', function (event, args)\r\n                            {\r\n                                var cardEl = angular.element(args[0]);\r\n\r\n                                // Test the card to see if there is any image on it\r\n                                testForImage(cardEl).then(function ()\r\n                                {\r\n                                    $timeout(function ()\r\n                                    {\r\n                                        itemLoaded = true;\r\n                                    });\r\n                                });\r\n                            });\r\n                        }\r\n                        else\r\n                        {\r\n                            // Test the element to see if there is any image on it\r\n                            testForImage(iElement).then(function ()\r\n                            {\r\n                                $timeout(function ()\r\n                                {\r\n                                    itemLoaded = true;\r\n                                });\r\n                            });\r\n                        }\r\n\r\n                        // Check if the loaded element also in the viewport\r\n                        scrollEl.on('scroll', testForVisibility);\r\n\r\n                        // Test for visibility for the first time without waiting for the scroll event\r\n                        testForVisibility();\r\n                    }\r\n\r\n                    // Item ready watcher\r\n                    var itemReadyWatcher = scope.$watch(\r\n                        function ()\r\n                        {\r\n                            return itemLoaded && itemInViewport;\r\n                        },\r\n                        function (current, old)\r\n                        {\r\n                            if ( angular.equals(current, old) )\r\n                            {\r\n                                return;\r\n                            }\r\n\r\n                            if ( current )\r\n                            {\r\n                                iElement.removeClass('hidden').addClass('animate');\r\n\r\n                                // Unbind itemReadyWatcher\r\n                                itemReadyWatcher();\r\n                            }\r\n                        }, true);\r\n\r\n                    /**\r\n                     * Test the given element for image\r\n                     *\r\n                     * @param element\r\n                     * @returns promise\r\n                     */\r\n                    function testForImage(element)\r\n                    {\r\n                        var deferred = $q.defer(),\r\n                            imgEl = element.find('img');\r\n\r\n                        if ( imgEl.length > 0 )\r\n                        {\r\n                            imgEl.on('load', function ()\r\n                            {\r\n                                deferred.resolve('Image is loaded');\r\n                            });\r\n                        }\r\n                        else\r\n                        {\r\n                            deferred.resolve('No images');\r\n                        }\r\n\r\n                        return deferred.promise;\r\n                    }\r\n\r\n                    /**\r\n                     * Test the element for visibility\r\n                     */\r\n                    function testForVisibility()\r\n                    {\r\n                        if ( scrollEl.scrollTop() + scrollEl.height() > iElement.position().top + threshold )\r\n                        {\r\n                            $timeout(function ()\r\n                            {\r\n                                itemInViewport = true;\r\n                            });\r\n\r\n                            // Unbind the scroll event\r\n                            scrollEl.off('scroll', testForVisibility);\r\n                        }\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('MsStepperController', MsStepperController)\r\n        .directive('msHorizontalStepper', msHorizontalStepperDirective)\r\n        .directive('msHorizontalStepperStep', msHorizontalStepperStepDirective)\r\n        .directive('msVerticalStepper', msVerticalStepperDirective)\r\n        .directive('msVerticalStepperStep', msVerticalStepperStepDirective);\r\n\r\n    /** @ngInject */\r\n    function MsStepperController($timeout)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.mainForm = undefined;\r\n\r\n        vm.orientation = 'horizontal';\r\n        vm.steps = [];\r\n        vm.currentStep = undefined;\r\n        vm.currentStepNumber = 1;\r\n\r\n        // Methods\r\n        vm.setOrientation = setOrientation;\r\n        vm.registerMainForm = registerMainForm;\r\n        vm.registerStep = registerStep;\r\n        vm.setupSteps = setupSteps;\r\n        vm.resetForm = resetForm;\r\n\r\n        vm.setCurrentStep = setCurrentStep;\r\n\r\n        vm.gotoStep = gotoStep;\r\n        vm.gotoPreviousStep = gotoPreviousStep;\r\n        vm.gotoNextStep = gotoNextStep;\r\n        vm.gotoFirstStep = gotoFirstStep;\r\n        vm.gotoLastStep = gotoLastStep;\r\n\r\n        vm.isFirstStep = isFirstStep;\r\n        vm.isLastStep = isLastStep;\r\n\r\n        vm.isStepCurrent = isStepCurrent;\r\n        vm.isStepDisabled = isStepDisabled;\r\n        vm.isStepOptional = isStepOptional;\r\n        vm.isStepHidden = isStepHidden;\r\n        vm.filterHiddenStep = filterHiddenStep;\r\n        vm.isStepValid = isStepValid;\r\n        vm.isStepNumberValid = isStepNumberValid;\r\n\r\n        vm.isFormValid = isFormValid;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Set the orientation of the stepper\r\n         *\r\n         * @param orientation\r\n         */\r\n        function setOrientation(orientation)\r\n        {\r\n            vm.orientation = orientation || 'horizontal';\r\n        }\r\n\r\n        /**\r\n         * Register the main form\r\n         *\r\n         * @param form\r\n         */\r\n        function registerMainForm(form)\r\n        {\r\n            vm.mainForm = form;\r\n        }\r\n\r\n        /**\r\n         * Register a step\r\n         *\r\n         * @param element\r\n         * @param scope\r\n         * @param form\r\n         */\r\n        function registerStep(element, scope, form)\r\n        {\r\n            var step = {\r\n                element           : element,\r\n                scope             : scope,\r\n                form              : form,\r\n                stepNumber        : scope.step || (vm.steps.length + 1),\r\n                stepTitle         : scope.stepTitle,\r\n                stepTitleTranslate: scope.stepTitleTranslate\r\n            };\r\n\r\n            // Push the step into steps array\r\n            vm.steps.push(step);\r\n\r\n            // Sort steps by stepNumber\r\n            vm.steps.sort(function (a, b)\r\n            {\r\n                return a.stepNumber - b.stepNumber;\r\n            });\r\n\r\n            return step;\r\n        }\r\n\r\n        /**\r\n         * Setup steps for the first time\r\n         */\r\n        function setupSteps()\r\n        {\r\n            vm.setCurrentStep(vm.currentStepNumber);\r\n        }\r\n\r\n        /**\r\n         * Reset steps and the main form\r\n         */\r\n        function resetForm()\r\n        {\r\n            // Timeout is required here because we need to\r\n            // let form model to reset before setting the\r\n            // statuses\r\n            $timeout(function ()\r\n            {\r\n                // Reset all the steps\r\n                for ( var x = 0; x < vm.steps.length; x++ )\r\n                {\r\n                    vm.steps[x].form.$setPristine();\r\n                    vm.steps[x].form.$setUntouched();\r\n                }\r\n\r\n                // Reset the main form\r\n                vm.mainForm.$setPristine();\r\n                vm.mainForm.$setUntouched();\r\n\r\n                // Go to first step\r\n                gotoFirstStep();\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Set current step\r\n         *\r\n         * @param stepNumber\r\n         */\r\n        function setCurrentStep(stepNumber)\r\n        {\r\n            // If the stepNumber is not a valid step number, bail...\r\n            if ( !isStepNumberValid(stepNumber) )\r\n            {\r\n                return;\r\n            }\r\n\r\n            // Update the current step number\r\n            vm.currentStepNumber = stepNumber;\r\n\r\n            if ( vm.orientation === 'horizontal' )\r\n            {\r\n                // Hide all steps\r\n                for ( var i = 0; i < vm.steps.length; i++ )\r\n                {\r\n                    vm.steps[i].element.hide();\r\n                }\r\n\r\n                // Show the current step\r\n                vm.steps[vm.currentStepNumber - 1].element.show();\r\n            }\r\n            else if ( vm.orientation === 'vertical' )\r\n            {\r\n                // Hide all step content\r\n                for ( var j = 0; j < vm.steps.length; j++ )\r\n                {\r\n                    vm.steps[j].element.find('.ms-stepper-step-content').hide();\r\n                }\r\n\r\n                // Show the current step content\r\n                vm.steps[vm.currentStepNumber - 1].element.find('.ms-stepper-step-content').show();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Go to a step\r\n         *\r\n         * @param stepNumber\r\n         */\r\n        function gotoStep(stepNumber)\r\n        {\r\n            // If the step we are about to go\r\n            // is hidden, bail...\r\n            if ( isStepHidden(stepNumber) )\r\n            {\r\n                return;\r\n            }\r\n\r\n            vm.setCurrentStep(stepNumber);\r\n        }\r\n\r\n        /**\r\n         * Go to the previous step\r\n         */\r\n        function gotoPreviousStep()\r\n        {\r\n            var stepNumber = vm.currentStepNumber - 1;\r\n\r\n            // Test the previous steps and make sure we\r\n            // will land to the one that is not hidden\r\n            for ( var s = stepNumber; s >= 1; s-- )\r\n            {\r\n                if ( !isStepHidden(s) )\r\n                {\r\n                    stepNumber = s;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            vm.setCurrentStep(stepNumber);\r\n        }\r\n\r\n        /**\r\n         * Go to the next step\r\n         */\r\n        function gotoNextStep()\r\n        {\r\n            var stepNumber = vm.currentStepNumber + 1;\r\n\r\n            // Test the following steps and make sure we\r\n            // will land to the one that is not hidden\r\n            for ( var s = stepNumber; s <= vm.steps.length; s++ )\r\n            {\r\n                if ( !isStepHidden(s) )\r\n                {\r\n                    stepNumber = s;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            vm.setCurrentStep(stepNumber);\r\n        }\r\n\r\n        /**\r\n         * Go to the first step\r\n         */\r\n        function gotoFirstStep()\r\n        {\r\n            vm.setCurrentStep(1);\r\n        }\r\n\r\n        /**\r\n         * Go to the last step\r\n         */\r\n        function gotoLastStep()\r\n        {\r\n            vm.setCurrentStep(vm.steps.length);\r\n        }\r\n\r\n        /**\r\n         * Check if the current step is the first step\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isFirstStep()\r\n        {\r\n            return vm.currentStepNumber === 1;\r\n        }\r\n\r\n        /**\r\n         * Check if the current step is the last step\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isLastStep()\r\n        {\r\n            return vm.currentStepNumber === vm.steps.length;\r\n        }\r\n\r\n        /**\r\n         * Check if the given step is the current one\r\n         *\r\n         * @param stepNumber\r\n         * @returns {null|boolean}\r\n         */\r\n        function isStepCurrent(stepNumber)\r\n        {\r\n            // If the stepNumber is not a valid step number, bail...\r\n            if ( !isStepNumberValid(stepNumber) )\r\n            {\r\n                return null;\r\n            }\r\n\r\n            return vm.currentStepNumber === stepNumber;\r\n        }\r\n\r\n        /**\r\n         * Check if the given step should be disabled\r\n         *\r\n         * @param stepNumber\r\n         * @returns {null|boolean}\r\n         */\r\n        function isStepDisabled(stepNumber)\r\n        {\r\n            // If the stepNumber is not a valid step number, bail...\r\n            if ( !isStepNumberValid(stepNumber) )\r\n            {\r\n                return null;\r\n            }\r\n\r\n            var disabled = false;\r\n\r\n            for ( var i = 1; i < stepNumber; i++ )\r\n            {\r\n                if ( !isStepValid(i) )\r\n                {\r\n                    disabled = true;\r\n                    break;\r\n                }\r\n            }\r\n\r\n            return disabled;\r\n        }\r\n\r\n        /**\r\n         * Check if the given step is optional\r\n         *\r\n         * @param stepNumber\r\n         * @returns {null|boolean}\r\n         */\r\n        function isStepOptional(stepNumber)\r\n        {\r\n            // If the stepNumber is not a valid step number, bail...\r\n            if ( !isStepNumberValid(stepNumber) )\r\n            {\r\n                return null;\r\n            }\r\n\r\n            return vm.steps[stepNumber - 1].scope.optionalStep;\r\n        }\r\n\r\n        /**\r\n         * Check if the given step is hidden\r\n         *\r\n         * @param stepNumber\r\n         * @returns {null|boolean}\r\n         */\r\n        function isStepHidden(stepNumber)\r\n        {\r\n            // If the stepNumber is not a valid step number, bail...\r\n            if ( !isStepNumberValid(stepNumber) )\r\n            {\r\n                return null;\r\n            }\r\n\r\n            return !!vm.steps[stepNumber - 1].scope.hideStep;\r\n        }\r\n\r\n        /**\r\n         * Check if the given step is hidden as a filter\r\n         *\r\n         * @param step\r\n         * @returns {boolean}\r\n         */\r\n        function filterHiddenStep(step)\r\n        {\r\n            return !isStepHidden(step.stepNumber);\r\n        }\r\n\r\n        /**\r\n         * Check if the given step is valid\r\n         *\r\n         * @param stepNumber\r\n         * @returns {null|boolean}\r\n         */\r\n        function isStepValid(stepNumber)\r\n        {\r\n            // If the stepNumber is not a valid step number, bail...\r\n            if ( !isStepNumberValid(stepNumber) )\r\n            {\r\n                return null;\r\n            }\r\n\r\n            // If the step is optional, always return true\r\n            if ( isStepOptional(stepNumber) )\r\n            {\r\n                return true;\r\n            }\r\n\r\n            return vm.steps[stepNumber - 1].form.$valid;\r\n        }\r\n\r\n        /**\r\n         * Check if the given step number is a valid step number\r\n         *\r\n         * @param stepNumber\r\n         * @returns {boolean}\r\n         */\r\n        function isStepNumberValid(stepNumber)\r\n        {\r\n            return !(angular.isUndefined(stepNumber) || stepNumber < 1 || stepNumber > vm.steps.length);\r\n        }\r\n\r\n        /**\r\n         * Check if the entire form is valid\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isFormValid()\r\n        {\r\n            return vm.mainForm.$valid;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msHorizontalStepperDirective()\r\n    {\r\n        return {\r\n            restrict        : 'A',\r\n            scope           : {},\r\n            require         : ['form', 'msHorizontalStepper'],\r\n            priority        : 1001,\r\n            controller      : 'MsStepperController as MsStepper',\r\n            bindToController: {\r\n                model: '=ngModel'\r\n            },\r\n            transclude      : true,\r\n            templateUrl     : 'app/core/directives/ms-stepper/templates/horizontal/horizontal.html',\r\n            compile         : function (tElement)\r\n            {\r\n                tElement.addClass('ms-stepper');\r\n\r\n                return function postLink(scope, iElement, iAttrs, ctrls)\r\n                {\r\n                    var FormCtrl = ctrls[0],\r\n                        MsStepperCtrl = ctrls[1];\r\n\r\n                    // Register the main form and setup\r\n                    // the steps for the first time\r\n                    MsStepperCtrl.setOrientation('horizontal');\r\n                    MsStepperCtrl.registerMainForm(FormCtrl);\r\n                    MsStepperCtrl.setupSteps();\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msHorizontalStepperStepDirective()\r\n    {\r\n        return {\r\n            restrict: 'E',\r\n            require : ['form', '^msHorizontalStepper'],\r\n            priority: 1000,\r\n            scope   : {\r\n                step              : '=?',\r\n                stepTitle         : '=?',\r\n                stepTitleTranslate: '=?',\r\n                optionalStep      : '=?',\r\n                hideStep          : '=?'\r\n            },\r\n            compile : function (tElement)\r\n            {\r\n                tElement.addClass('ms-stepper-step');\r\n\r\n                return function postLink(scope, iElement, iAttrs, ctrls)\r\n                {\r\n                    var FormCtrl = ctrls[0],\r\n                        MsStepperCtrl = ctrls[1];\r\n\r\n                    // Is it an optional step?\r\n                    scope.optionalStep = angular.isDefined(iAttrs.optionalStep);\r\n\r\n                    // Register the step\r\n                    MsStepperCtrl.registerStep(iElement, scope, FormCtrl);\r\n\r\n                    // Hide the step by default\r\n                    iElement.hide();\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msVerticalStepperDirective($timeout)\r\n    {\r\n        return {\r\n            restrict        : 'A',\r\n            scope           : {},\r\n            require         : ['form', 'msVerticalStepper'],\r\n            priority        : 1001,\r\n            controller      : 'MsStepperController as MsStepper',\r\n            bindToController: {\r\n                model: '=ngModel'\r\n            },\r\n            transclude      : true,\r\n            templateUrl     : 'app/core/directives/ms-stepper/templates/vertical/vertical.html',\r\n            compile         : function (tElement)\r\n            {\r\n                tElement.addClass('ms-stepper');\r\n\r\n                return function postLink(scope, iElement, iAttrs, ctrls)\r\n                {\r\n                    var FormCtrl = ctrls[0],\r\n                        MsStepperCtrl = ctrls[1];\r\n\r\n                    // Register the main form and setup\r\n                    // the steps for the first time\r\n\r\n                    // Timeout is required in vertical stepper\r\n                    // as we are using transclusion in steps.\r\n                    // We have to wait for them to be transcluded\r\n                    // and registered to the controller\r\n                    $timeout(function ()\r\n                    {\r\n                        MsStepperCtrl.setOrientation('vertical');\r\n                        MsStepperCtrl.registerMainForm(FormCtrl);\r\n                        MsStepperCtrl.setupSteps();\r\n                    });\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msVerticalStepperStepDirective()\r\n    {\r\n        return {\r\n            restrict   : 'E',\r\n            require    : ['form', '^msVerticalStepper'],\r\n            priority   : 1000,\r\n            scope      : {\r\n                step              : '=?',\r\n                stepTitle         : '=?',\r\n                stepTitleTranslate: '=?',\r\n                optionalStep      : '=?',\r\n                hideStep          : '=?'\r\n            },\r\n            transclude : true,\r\n            templateUrl: 'app/core/directives/ms-stepper/templates/vertical/step/vertical-step.html',\r\n            compile    : function (tElement)\r\n            {\r\n                tElement.addClass('ms-stepper-step');\r\n\r\n                return function postLink(scope, iElement, iAttrs, ctrls)\r\n                {\r\n                    var FormCtrl = ctrls[0],\r\n                        MsStepperCtrl = ctrls[1];\r\n\r\n                    // Is it an optional step?\r\n                    scope.optionalStep = angular.isDefined(iAttrs.optionalStep);\r\n\r\n                    // Register the step\r\n                    scope.stepInfo = MsStepperCtrl.registerStep(iElement, scope, FormCtrl);\r\n\r\n                    // Expose the controller to the scope\r\n                    scope.MsStepper = MsStepperCtrl;\r\n\r\n                    // Hide the step content by default\r\n                    iElement.find('.ms-stepper-step-content').hide();\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .directive('msSplashScreen', msSplashScreenDirective);\r\n\r\n    /** @ngInject */\r\n    function msSplashScreenDirective($animate)\r\n    {\r\n        return {\r\n            restrict: 'E',\r\n            link    : function (scope, iElement)\r\n            {\r\n                var splashScreenRemoveEvent = scope.$on('msSplashScreen::remove', function ()\r\n                {\r\n                    $animate.leave(iElement).then(function ()\r\n                    {\r\n                        // De-register scope event\r\n                        splashScreenRemoveEvent();\r\n\r\n                        // Null-ify everything else\r\n                        scope = iElement = null;\r\n                    });\r\n                });\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('MsShortcutsController', MsShortcutsController)\r\n        .directive('msShortcuts', msShortcutsDirective);\r\n\r\n    /** @ngInject */\r\n    function MsShortcutsController($scope, $cookies, $document, $timeout, $q, msNavigationService)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.query = '';\r\n        vm.queryOptions = {\r\n            debounce: 300\r\n        };\r\n        vm.resultsLoading = false;\r\n        vm.selectedResultIndex = 0;\r\n        vm.ignoreMouseEvents = false;\r\n        vm.mobileBarActive = false;\r\n\r\n        vm.results = null;\r\n        vm.shortcuts = [];\r\n\r\n        vm.sortableOptions = {\r\n            ghostClass   : 'ghost',\r\n            forceFallback: true,\r\n            fallbackClass: 'dragging',\r\n            onSort       : function ()\r\n            {\r\n                vm.saveShortcuts();\r\n            }\r\n        };\r\n\r\n        // Methods\r\n        vm.populateResults = populateResults;\r\n        vm.loadShortcuts = loadShortcuts;\r\n        vm.saveShortcuts = saveShortcuts;\r\n        vm.addShortcut = addShortcut;\r\n        vm.removeShortcut = removeShortcut;\r\n        vm.handleResultClick = handleResultClick;\r\n\r\n        vm.absorbEvent = absorbEvent;\r\n        vm.handleKeydown = handleKeydown;\r\n        vm.handleMouseenter = handleMouseenter;\r\n        vm.temporarilyIgnoreMouseEvents = temporarilyIgnoreMouseEvents;\r\n        vm.ensureSelectedResultIsVisible = ensureSelectedResultIsVisible;\r\n        vm.toggleMobileBar = toggleMobileBar;\r\n\r\n        //////////\r\n\r\n        init();\r\n\r\n        function init()\r\n        {\r\n            // Load the shortcuts\r\n            vm.loadShortcuts().then(\r\n                // Success\r\n                function (response)\r\n                {\r\n                    vm.shortcuts = response;\r\n\r\n                    // Add shortcuts as results by default\r\n                    if ( vm.shortcuts.length > 0 )\r\n                    {\r\n                        vm.results = response;\r\n                    }\r\n                }\r\n            );\r\n\r\n            // Watch the model changes to trigger the search\r\n            $scope.$watch('MsShortcuts.query', function (current, old)\r\n            {\r\n                if ( angular.isUndefined(current) )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                if ( angular.equals(current, old) )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                // Show the loader\r\n                vm.resultsLoading = true;\r\n\r\n                // Populate the results\r\n                vm.populateResults().then(\r\n                    // Success\r\n                    function (response)\r\n                    {\r\n                        vm.results = response;\r\n                    },\r\n                    // Error\r\n                    function ()\r\n                    {\r\n                        vm.results = [];\r\n                    }\r\n                ).finally(\r\n                    function ()\r\n                    {\r\n                        // Hide the loader\r\n                        vm.resultsLoading = false;\r\n                    }\r\n                );\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Populate the results\r\n         */\r\n        function populateResults()\r\n        {\r\n            var results = [],\r\n                flatNavigation = msNavigationService.getFlatNavigation(),\r\n                deferred = $q.defer();\r\n\r\n            // Iterate through the navigation array and\r\n            // make sure it doesn't have any groups or\r\n            // none ui-sref items\r\n            for ( var x = 0; x < flatNavigation.length; x++ )\r\n            {\r\n                if ( flatNavigation[x].uisref )\r\n                {\r\n                    results.push(flatNavigation[x]);\r\n                }\r\n            }\r\n\r\n            // If there is a query, filter the results\r\n            if ( vm.query )\r\n            {\r\n                results = results.filter(function (item)\r\n                {\r\n                    if ( angular.lowercase(item.title).search(angular.lowercase(vm.query)) > -1 )\r\n                    {\r\n                        return true;\r\n                    }\r\n                });\r\n\r\n                // Iterate through one last time and\r\n                // add required properties to items\r\n                for ( var i = 0; i < results.length; i++ )\r\n                {\r\n                    // Add false to hasShortcut by default\r\n                    results[i].hasShortcut = false;\r\n\r\n                    // Test if the item is in the shortcuts list\r\n                    for ( var y = 0; y < vm.shortcuts.length; y++ )\r\n                    {\r\n                        if ( vm.shortcuts[y]._id === results[i]._id )\r\n                        {\r\n                            results[i].hasShortcut = true;\r\n                            break;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            else\r\n            {\r\n                // If the query is empty, that means\r\n                // there is nothing to search for so\r\n                // we will populate the results with\r\n                // current shortcuts if there is any\r\n                if ( vm.shortcuts.length > 0 )\r\n                {\r\n                    results = vm.shortcuts;\r\n                }\r\n            }\r\n\r\n            // Reset the selected result\r\n            vm.selectedResultIndex = 0;\r\n\r\n            // Fake the service delay\r\n            $timeout(function ()\r\n            {\r\n                // Resolve the promise\r\n                deferred.resolve(results);\r\n            }, 250);\r\n\r\n            // Return a promise\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Load shortcuts\r\n         */\r\n        function loadShortcuts()\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            // For the demo purposes, we will\r\n            // load the shortcuts from the cookies.\r\n            // But here you can make an API call\r\n            // to load them from the DB.\r\n            var shortcuts = angular.fromJson($cookies.get('FUSE.shortcuts'));\r\n\r\n            // No cookie available. Generate one\r\n            // for the demo purposes...\r\n            if ( angular.isUndefined(shortcuts) )\r\n            {\r\n                shortcuts = [\r\n                    {\r\n                        'title'      : 'Sample',\r\n                        'icon'       : 'icon-tile-four',\r\n                        'state'      : 'app.sample',\r\n                        'weight'     : 1,\r\n                        'children'   : [],\r\n                        '_id'        : 'sample',\r\n                        '_path'      : 'apps.sample',\r\n                        'uisref'     : 'app.sample',\r\n                        'hasShortcut': true\r\n                    }\r\n                ];\r\n\r\n                $cookies.put('FUSE.shortcuts', angular.toJson(shortcuts));\r\n            }\r\n\r\n            // Resolve the promise\r\n            deferred.resolve(shortcuts);\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Save the shortcuts\r\n         */\r\n        function saveShortcuts()\r\n        {\r\n            var deferred = $q.defer();\r\n\r\n            // For the demo purposes, we will\r\n            // keep the shortcuts in the cookies.\r\n            // But here you can make an API call\r\n            // to save them to the DB.\r\n            $cookies.put('FUSE.shortcuts', angular.toJson(vm.shortcuts));\r\n\r\n            // Fake the service delay\r\n            $timeout(function ()\r\n            {\r\n                deferred.resolve({'success': true});\r\n            }, 250);\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Add item as shortcut\r\n         *\r\n         * @param item\r\n         */\r\n        function addShortcut(item)\r\n        {\r\n            // Update the hasShortcut status\r\n            item.hasShortcut = true;\r\n\r\n            // Add as a shortcut\r\n            vm.shortcuts.push(item);\r\n\r\n            // Save the shortcuts\r\n            vm.saveShortcuts();\r\n        }\r\n\r\n        /**\r\n         * Remove item from shortcuts\r\n         *\r\n         * @param item\r\n         */\r\n        function removeShortcut(item)\r\n        {\r\n            // Update the hasShortcut status\r\n            item.hasShortcut = false;\r\n\r\n            // Remove the shortcut\r\n            for ( var x = 0; x < vm.shortcuts.length; x++ )\r\n            {\r\n                if ( vm.shortcuts[x]._id === item._id )\r\n                {\r\n                    // Remove the x-th item from the array\r\n                    vm.shortcuts.splice(x, 1);\r\n\r\n                    // If we aren't searching for anything...\r\n                    if ( !vm.query )\r\n                    {\r\n                        // If all the shortcuts have been removed,\r\n                        // null-ify the results\r\n                        if ( vm.shortcuts.length === 0 )\r\n                        {\r\n                            vm.results = null;\r\n                        }\r\n                        // Otherwise update the selected index\r\n                        else\r\n                        {\r\n                            if ( x >= vm.shortcuts.length )\r\n                            {\r\n                                vm.selectedResultIndex = vm.shortcuts.length - 1;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n\r\n            // Save the shortcuts\r\n            vm.saveShortcuts();\r\n        }\r\n\r\n        /**\r\n         * Handle the result click\r\n         *\r\n         * @param item\r\n         */\r\n        function handleResultClick(item)\r\n        {\r\n            // Add or remove the shortcut\r\n            if ( item.hasShortcut )\r\n            {\r\n                vm.removeShortcut(item);\r\n            }\r\n            else\r\n            {\r\n                vm.addShortcut(item);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Absorb the given event\r\n         *\r\n         * @param event\r\n         */\r\n        function absorbEvent(event)\r\n        {\r\n            event.preventDefault();\r\n        }\r\n\r\n        /**\r\n         * Handle keydown\r\n         *\r\n         * @param event\r\n         */\r\n        function handleKeydown(event)\r\n        {\r\n            var keyCode = event.keyCode,\r\n                keys = [38, 40];\r\n\r\n            // Prevent the default action if\r\n            // one of the keys are pressed that\r\n            // we are listening\r\n            if ( keys.indexOf(keyCode) > -1 )\r\n            {\r\n                event.preventDefault();\r\n            }\r\n\r\n            switch ( keyCode )\r\n            {\r\n                // Enter\r\n                case 13:\r\n\r\n                    // Trigger result click\r\n                    vm.handleResultClick(vm.results[vm.selectedResultIndex]);\r\n\r\n                    break;\r\n\r\n                // Up Arrow\r\n                case 38:\r\n\r\n                    // Decrease the selected result index\r\n                    if ( vm.selectedResultIndex - 1 >= 0 )\r\n                    {\r\n                        // Decrease the selected index\r\n                        vm.selectedResultIndex--;\r\n\r\n                        // Make sure the selected result is in the view\r\n                        vm.ensureSelectedResultIsVisible();\r\n                    }\r\n\r\n                    break;\r\n\r\n                // Down Arrow\r\n                case 40:\r\n\r\n                    // Increase the selected result index\r\n                    if ( vm.selectedResultIndex + 1 < vm.results.length )\r\n                    {\r\n                        // Increase the selected index\r\n                        vm.selectedResultIndex++;\r\n\r\n                        // Make sure the selected result is in the view\r\n                        vm.ensureSelectedResultIsVisible();\r\n                    }\r\n\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle mouseenter\r\n         *\r\n         * @param index\r\n         */\r\n        function handleMouseenter(index)\r\n        {\r\n            if ( vm.ignoreMouseEvents )\r\n            {\r\n                return;\r\n            }\r\n\r\n            // Update the selected result index\r\n            // with the given index\r\n            vm.selectedResultIndex = index;\r\n        }\r\n\r\n        /**\r\n         * Set a variable for a limited time\r\n         * to make other functions to ignore\r\n         * the mouse events\r\n         */\r\n        function temporarilyIgnoreMouseEvents()\r\n        {\r\n            // Set the variable\r\n            vm.ignoreMouseEvents = true;\r\n\r\n            // Cancel the previous timeout\r\n            $timeout.cancel(vm.mouseEventIgnoreTimeout);\r\n\r\n            // Set the timeout\r\n            vm.mouseEventIgnoreTimeout = $timeout(function ()\r\n            {\r\n                vm.ignoreMouseEvents = false;\r\n            }, 250);\r\n        }\r\n\r\n        /**\r\n         * Ensure the selected result will\r\n         * always be visible on the results\r\n         * area\r\n         */\r\n        function ensureSelectedResultIsVisible()\r\n        {\r\n            var resultsEl = $document.find('#ms-shortcut-add-menu').find('.results'),\r\n                selectedItemEl = angular.element(resultsEl.find('.result')[vm.selectedResultIndex]);\r\n\r\n            if ( resultsEl && selectedItemEl )\r\n            {\r\n                var top = selectedItemEl.position().top - 8,\r\n                    bottom = selectedItemEl.position().top + selectedItemEl.outerHeight() + 8;\r\n\r\n                // Start ignoring mouse events\r\n                vm.temporarilyIgnoreMouseEvents();\r\n\r\n                if ( resultsEl.scrollTop() > top )\r\n                {\r\n                    resultsEl.scrollTop(top);\r\n                }\r\n\r\n                if ( bottom > (resultsEl.height() + resultsEl.scrollTop()) )\r\n                {\r\n                    resultsEl.scrollTop(bottom - resultsEl.height());\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Toggle mobile bar\r\n         */\r\n        function toggleMobileBar()\r\n        {\r\n            vm.mobileBarActive = !vm.mobileBarActive;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msShortcutsDirective()\r\n    {\r\n        return {\r\n            restrict        : 'E',\r\n            scope           : {},\r\n            require         : 'msShortcuts',\r\n            controller      : 'MsShortcutsController as MsShortcuts',\r\n            bindToController: {},\r\n            templateUrl     : 'app/core/directives/ms-shortcuts/ms-shortcuts.html',\r\n            compile         : function (tElement)\r\n            {\r\n                // Add class\r\n                tElement.addClass('ms-shortcuts');\r\n\r\n                return function postLink(scope, iElement)\r\n                {\r\n                    // Data\r\n\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .directive('msSidenavHelper', msSidenavHelperDirective);\r\n\r\n    /** @ngInject */\r\n    function msSidenavHelperDirective()\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            require : '^mdSidenav',\r\n            link    : function (scope, iElement, iAttrs, MdSidenavCtrl)\r\n            {\r\n                // Watch md-sidenav open & locked open statuses\r\n                // and add class to the \".page-layout\" if only\r\n                // the sidenav open and NOT locked open\r\n                scope.$watch(function ()\r\n                {\r\n                    return MdSidenavCtrl.isOpen() && !MdSidenavCtrl.isLockedOpen();\r\n                }, function (current)\r\n                {\r\n                    if ( angular.isUndefined(current) )\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    iElement.parent().toggleClass('full-height', current);\r\n                    angular.element('html').toggleClass('sidenav-open', current);\r\n                });\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('MsSearchBarController', MsSearchBarController)\r\n        .directive('msSearchBar', msSearchBarDirective);\r\n\r\n    /** @ngInject */\r\n    function MsSearchBarController($scope, $element, $timeout)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.collapsed = true;\r\n        vm.query = '';\r\n        vm.queryOptions = {\r\n            debounce: vm.debounce || 0\r\n        };\r\n        vm.resultsLoading = false;\r\n        vm.results = null;\r\n        vm.selectedResultIndex = 0;\r\n        vm.ignoreMouseEvents = false;\r\n\r\n        // Methods\r\n        vm.populateResults = populateResults;\r\n\r\n        vm.expand = expand;\r\n        vm.collapse = collapse;\r\n\r\n        vm.absorbEvent = absorbEvent;\r\n        vm.handleKeydown = handleKeydown;\r\n        vm.handleMouseenter = handleMouseenter;\r\n        vm.temporarilyIgnoreMouseEvents = temporarilyIgnoreMouseEvents;\r\n        vm.handleResultClick = handleResultClick;\r\n        vm.ensureSelectedResultIsVisible = ensureSelectedResultIsVisible;\r\n\r\n        //////////\r\n\r\n        init();\r\n\r\n        function init()\r\n        {\r\n            // Watch the model changes to trigger the search\r\n            $scope.$watch('MsSearchBar.query', function (current, old)\r\n            {\r\n                if ( angular.isUndefined(current) )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                if ( angular.equals(current, old) )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                if ( vm.collapsed )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                // Evaluate the onSearch function to access the\r\n                // function itself\r\n                var onSearchEvaluated = $scope.$parent.$eval(vm.onSearch, {query: current}),\r\n                    isArray = angular.isArray(onSearchEvaluated),\r\n                    isPromise = (onSearchEvaluated && !!onSearchEvaluated.then);\r\n\r\n                if ( isArray )\r\n                {\r\n                    // Populate the results\r\n                    vm.populateResults(onSearchEvaluated);\r\n                }\r\n\r\n                if ( isPromise )\r\n                {\r\n                    // Show the loader\r\n                    vm.resultsLoading = true;\r\n\r\n                    onSearchEvaluated.then(\r\n                        // Success\r\n                        function (response)\r\n                        {\r\n                            // Populate the results\r\n                            vm.populateResults(response);\r\n                        },\r\n                        // Error\r\n                        function ()\r\n                        {\r\n                            // Assign an empty array to show\r\n                            // the no-results screen\r\n                            vm.populateResults([]);\r\n                        }\r\n                    ).finally(function ()\r\n                        {\r\n                            // Hide the loader\r\n                            vm.resultsLoading = false;\r\n                        }\r\n                    );\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Populate the results\r\n         *\r\n         * @param results\r\n         */\r\n        function populateResults(results)\r\n        {\r\n            // Before doing anything,\r\n            // make sure the search bar is expanded\r\n            if ( vm.collapsed )\r\n            {\r\n                return;\r\n            }\r\n\r\n            var isArray = angular.isArray(results),\r\n                isNull = results === null;\r\n\r\n            // Only accept arrays and null values\r\n            if ( !isArray && !isNull )\r\n            {\r\n                return;\r\n            }\r\n\r\n            // Reset the selected result\r\n            vm.selectedResultIndex = 0;\r\n\r\n            // Populate the results\r\n            vm.results = results;\r\n        }\r\n\r\n        /**\r\n         * Expand\r\n         */\r\n        function expand()\r\n        {\r\n            // Set collapsed status\r\n            vm.collapsed = false;\r\n\r\n            // Call expand on scope\r\n            $scope.expand();\r\n\r\n            // Callback\r\n            if ( vm.onExpand && angular.isFunction(vm.onExpand) )\r\n            {\r\n                vm.onExpand();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Collapse\r\n         */\r\n        function collapse()\r\n        {\r\n            // Empty the query\r\n            vm.query = '';\r\n\r\n            // Empty results to hide the results view\r\n            vm.populateResults(null);\r\n\r\n            // Set collapsed status\r\n            vm.collapsed = true;\r\n\r\n            // Call collapse on scope\r\n            $scope.collapse();\r\n\r\n            // Callback\r\n            if ( vm.onCollapse && angular.isFunction(vm.onCollapse) )\r\n            {\r\n                vm.onCollapse();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Absorb the given event\r\n         *\r\n         * @param event\r\n         */\r\n        function absorbEvent(event)\r\n        {\r\n            event.preventDefault();\r\n        }\r\n\r\n        /**\r\n         * Handle keydown\r\n         *\r\n         * @param event\r\n         */\r\n        function handleKeydown(event)\r\n        {\r\n            var keyCode = event.keyCode,\r\n                keys = [27, 38, 40];\r\n\r\n            // Prevent the default action if\r\n            // one of the keys are pressed that\r\n            // we are listening\r\n            if ( keys.indexOf(keyCode) > -1 )\r\n            {\r\n                event.preventDefault();\r\n            }\r\n\r\n            switch ( keyCode )\r\n            {\r\n                // Enter\r\n                case 13:\r\n\r\n                    // Trigger result click\r\n                    vm.handleResultClick(vm.results[vm.selectedResultIndex]);\r\n\r\n                    break;\r\n\r\n                // Escape\r\n                case 27:\r\n\r\n                    // Collapse the search bar\r\n                    vm.collapse();\r\n\r\n                    break;\r\n\r\n                // Up Arrow\r\n                case 38:\r\n\r\n                    // Decrease the selected result index\r\n                    if ( vm.selectedResultIndex - 1 >= 0 )\r\n                    {\r\n                        // Decrease the selected index\r\n                        vm.selectedResultIndex--;\r\n\r\n                        // Make sure the selected result is in the view\r\n                        vm.ensureSelectedResultIsVisible();\r\n                    }\r\n\r\n                    break;\r\n\r\n                // Down Arrow\r\n                case 40:\r\n\r\n                    if ( !vm.results )\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    // Increase the selected result index\r\n                    if ( vm.selectedResultIndex + 1 < vm.results.length )\r\n                    {\r\n                        // Increase the selected index\r\n                        vm.selectedResultIndex++;\r\n\r\n                        // Make sure the selected result is in the view\r\n                        vm.ensureSelectedResultIsVisible();\r\n                    }\r\n\r\n                    break;\r\n\r\n                default:\r\n                    break;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Handle mouseenter\r\n         *\r\n         * @param index\r\n         */\r\n        function handleMouseenter(index)\r\n        {\r\n            if ( vm.ignoreMouseEvents )\r\n            {\r\n                return;\r\n            }\r\n\r\n            // Update the selected result index\r\n            // with the given index\r\n            vm.selectedResultIndex = index;\r\n        }\r\n\r\n        /**\r\n         * Set a variable for a limited time\r\n         * to make other functions to ignore\r\n         * the mouse events\r\n         */\r\n        function temporarilyIgnoreMouseEvents()\r\n        {\r\n            // Set the variable\r\n            vm.ignoreMouseEvents = true;\r\n\r\n            // Cancel the previous timeout\r\n            $timeout.cancel(vm.mouseEventIgnoreTimeout);\r\n\r\n            // Set the timeout\r\n            vm.mouseEventIgnoreTimeout = $timeout(function ()\r\n            {\r\n                vm.ignoreMouseEvents = false;\r\n            }, 250);\r\n        }\r\n\r\n        /**\r\n         * Handle the result click\r\n         *\r\n         * @param item\r\n         */\r\n        function handleResultClick(item)\r\n        {\r\n            if ( vm.onResultClick )\r\n            {\r\n                vm.onResultClick({item: item});\r\n            }\r\n\r\n            // Collapse the search bar\r\n            vm.collapse();\r\n        }\r\n\r\n        /**\r\n         * Ensure the selected result will\r\n         * always be visible on the results\r\n         * area\r\n         */\r\n        function ensureSelectedResultIsVisible()\r\n        {\r\n            var resultsEl = $element.find('.ms-search-bar-results'),\r\n                selectedItemEl = angular.element(resultsEl.find('.result')[vm.selectedResultIndex]);\r\n\r\n            if ( resultsEl && selectedItemEl )\r\n            {\r\n                var top = selectedItemEl.position().top - 8,\r\n                    bottom = selectedItemEl.position().top + selectedItemEl.outerHeight() + 8;\r\n\r\n                // Start ignoring mouse events\r\n                vm.temporarilyIgnoreMouseEvents();\r\n\r\n                if ( resultsEl.scrollTop() > top )\r\n                {\r\n                    resultsEl.scrollTop(top);\r\n                }\r\n\r\n                if ( bottom > (resultsEl.height() + resultsEl.scrollTop()) )\r\n                {\r\n                    resultsEl.scrollTop(bottom - resultsEl.height());\r\n                }\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msSearchBarDirective($document)\r\n    {\r\n        return {\r\n            restrict        : 'E',\r\n            scope           : {},\r\n            require         : 'msSearchBar',\r\n            controller      : 'MsSearchBarController as MsSearchBar',\r\n            bindToController: {\r\n                debounce     : '=?',\r\n                onSearch     : '@',\r\n                onResultClick: '&?',\r\n                onExpand     : '&?',\r\n                onCollapse   : '&?'\r\n            },\r\n            templateUrl     : 'app/core/directives/ms-search-bar/ms-search-bar.html',\r\n            compile         : function (tElement)\r\n            {\r\n                // Add class\r\n                tElement.addClass('ms-search-bar');\r\n\r\n                return function postLink(scope, iElement)\r\n                {\r\n                    // Data\r\n                    var inputEl,\r\n                        bodyEl = $document.find('body');\r\n\r\n                    // Methods\r\n                    scope.collapse = collapse;\r\n                    scope.expand = expand;\r\n\r\n                    //////////\r\n\r\n                    // Initialize\r\n                    init();\r\n\r\n                    /**\r\n                     * Initialize\r\n                     */\r\n                    function init()\r\n                    {\r\n                        // Grab the input element\r\n                        inputEl = iElement.find('#ms-search-bar-input');\r\n                    }\r\n\r\n                    /**\r\n                     * Expand action\r\n                     */\r\n                    function expand()\r\n                    {\r\n                        // Add expanded class\r\n                        iElement.addClass('expanded');\r\n\r\n                        // Add helper class to the body\r\n                        bodyEl.addClass('ms-search-bar-expanded');\r\n\r\n                        // Focus on the input\r\n                        inputEl.focus();\r\n                    }\r\n\r\n                    /**\r\n                     * Collapse action\r\n                     */\r\n                    function collapse()\r\n                    {\r\n                        // Remove expanded class\r\n                        iElement.removeClass('expanded');\r\n\r\n                        // Remove helper class from the body\r\n                        bodyEl.removeClass('ms-search-bar-expanded');\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .provider('msScrollConfig', msScrollConfigProvider)\r\n        .directive('msScroll', msScrollDirective);\r\n\r\n    /** @ngInject */\r\n    function msScrollConfigProvider()\r\n    {\r\n        // Default configuration\r\n        var defaultConfiguration = {\r\n            wheelSpeed            : 1,\r\n            wheelPropagation      : false,\r\n            swipePropagation      : true,\r\n            minScrollbarLength    : null,\r\n            maxScrollbarLength    : null,\r\n            useBothWheelAxes      : false,\r\n            useKeyboard           : true,\r\n            suppressScrollX       : false,\r\n            suppressScrollY       : false,\r\n            scrollXMarginOffset   : 0,\r\n            scrollYMarginOffset   : 0,\r\n            stopPropagationOnClick: true\r\n        };\r\n\r\n        // Methods\r\n        this.config = config;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Extend default configuration with the given one\r\n         *\r\n         * @param configuration\r\n         */\r\n        function config(configuration)\r\n        {\r\n            defaultConfiguration = angular.extend({}, defaultConfiguration, configuration);\r\n        }\r\n\r\n        /**\r\n         * Service\r\n         */\r\n        this.$get = function ()\r\n        {\r\n            var service = {\r\n                getConfig: getConfig\r\n            };\r\n\r\n            return service;\r\n\r\n            //////////\r\n\r\n            /**\r\n             * Return the config\r\n             */\r\n            function getConfig()\r\n            {\r\n                return defaultConfiguration;\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msScrollDirective($timeout, msScrollConfig, msUtils, fuseConfig)\r\n    {\r\n        return {\r\n            restrict: 'AE',\r\n            compile : function (tElement)\r\n            {\r\n                // Do not replace scrollbars if\r\n                // 'disableCustomScrollbars' config enabled\r\n                if ( fuseConfig.getConfig('disableCustomScrollbars') )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                // Do not replace scrollbars on mobile devices\r\n                // if 'disableCustomScrollbarsOnMobile' config enabled\r\n                if ( fuseConfig.getConfig('disableCustomScrollbarsOnMobile') && msUtils.isMobile() )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                // Add class\r\n                tElement.addClass('ms-scroll');\r\n\r\n                return function postLink(scope, iElement, iAttrs)\r\n                {\r\n                    var options = {};\r\n\r\n                    // If options supplied, evaluate the given\r\n                    // value. This is because we don't want to\r\n                    // have an isolated scope but still be able\r\n                    // to use scope variables.\r\n                    // We don't want an isolated scope because\r\n                    // we should be able to use this everywhere\r\n                    // especially with other directives\r\n                    if ( iAttrs.msScroll )\r\n                    {\r\n                        options = scope.$eval(iAttrs.msScroll);\r\n                    }\r\n\r\n                    // Extend the given config with the ones from provider\r\n                    options = angular.extend({}, msScrollConfig.getConfig(), options);\r\n\r\n                    // Initialize the scrollbar\r\n                    $timeout(function ()\r\n                    {\r\n                        PerfectScrollbar.initialize(iElement[0], options);\r\n                    }, 0);\r\n\r\n                    // Update the scrollbar on element mouseenter\r\n                    iElement.on('mouseenter', updateScrollbar);\r\n\r\n                    // Watch scrollHeight and update\r\n                    // the scrollbar if it changes\r\n                    scope.$watch(function ()\r\n                    {\r\n                        return iElement.prop('scrollHeight');\r\n                    }, function (current, old)\r\n                    {\r\n                        if ( angular.isUndefined(current) || angular.equals(current, old) )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        updateScrollbar();\r\n                    });\r\n\r\n                    // Watch scrollWidth and update\r\n                    // the scrollbar if it changes\r\n                    scope.$watch(function ()\r\n                    {\r\n                        return iElement.prop('scrollWidth');\r\n                    }, function (current, old)\r\n                    {\r\n                        if ( angular.isUndefined(current) || angular.equals(current, old) )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        updateScrollbar();\r\n                    });\r\n\r\n                    /**\r\n                     * Update the scrollbar\r\n                     */\r\n                    function updateScrollbar()\r\n                    {\r\n                        PerfectScrollbar.update(iElement[0]);\r\n                    }\r\n\r\n                    // Cleanup on destroy\r\n                    scope.$on('$destroy', function ()\r\n                    {\r\n                        iElement.off('mouseenter');\r\n                        PerfectScrollbar.destroy(iElement[0]);\r\n                    });\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .directive('msResponsiveTable', msResponsiveTableDirective);\r\n\r\n    /** @ngInject */\r\n    function msResponsiveTableDirective()\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            link    : function (scope, iElement)\r\n            {\r\n                // Wrap the table\r\n                var wrapper = angular.element('<div class=\"ms-responsive-table-wrapper\"></div>');\r\n                iElement.after(wrapper);\r\n                wrapper.append(iElement);\r\n\r\n                //////////\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .directive('msRandomClass', msRandomClassDirective);\r\n\r\n    /** @ngInject */\r\n    function msRandomClassDirective()\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            scope   : {\r\n                msRandomClass: '='\r\n            },\r\n            link    : function (scope, iElement)\r\n            {\r\n                var randomClass = scope.msRandomClass[Math.floor(Math.random() * (scope.msRandomClass.length))];\r\n                iElement.addClass(randomClass);\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .provider('msNavigationService', msNavigationServiceProvider)\r\n        .controller('MsNavigationController', MsNavigationController)\r\n        // Vertical\r\n        .directive('msNavigation', msNavigationDirective)\r\n        .controller('MsNavigationNodeController', MsNavigationNodeController)\r\n        .directive('msNavigationNode', msNavigationNodeDirective)\r\n        .directive('msNavigationItem', msNavigationItemDirective)\r\n        //Horizontal\r\n        .directive('msNavigationHorizontal', msNavigationHorizontalDirective)\r\n        .controller('MsNavigationHorizontalNodeController', MsNavigationHorizontalNodeController)\r\n        .directive('msNavigationHorizontalNode', msNavigationHorizontalNodeDirective)\r\n        .directive('msNavigationHorizontalItem', msNavigationHorizontalItemDirective);\r\n\r\n    /** @ngInject */\r\n    function msNavigationServiceProvider()\r\n    {\r\n        // Inject $log service\r\n        var $log = angular.injector(['ng']).get('$log');\r\n\r\n        // Navigation array\r\n        var navigation = [];\r\n\r\n        var service = this;\r\n\r\n        // Methods\r\n        service.saveItem = saveItem;\r\n        service.deleteItem = deleteItem;\r\n        service.sortByWeight = sortByWeight;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Create or update the navigation item\r\n         *\r\n         * @param path\r\n         * @param item\r\n         */\r\n        function saveItem(path, item)\r\n        {\r\n            if ( !angular.isString(path) )\r\n            {\r\n                $log.error('path must be a string (eg. `dashboard.project`)');\r\n                return;\r\n            }\r\n\r\n            var parts = path.split('.');\r\n\r\n            // Generate the object id from the parts\r\n            var id = parts[parts.length - 1];\r\n\r\n            // Get the parent item from the parts\r\n            var parent = _findOrCreateParent(parts);\r\n\r\n            // Decide if we are going to update or create\r\n            var updateItem = false;\r\n\r\n            for ( var i = 0; i < parent.length; i++ )\r\n            {\r\n                if ( parent[i]._id === id )\r\n                {\r\n                    updateItem = parent[i];\r\n\r\n                    break;\r\n                }\r\n            }\r\n\r\n            // Update\r\n            if ( updateItem )\r\n            {\r\n                angular.extend(updateItem, item);\r\n\r\n                // Add proper ui-sref\r\n                updateItem.uisref = _getUiSref(updateItem);\r\n            }\r\n            // Create\r\n            else\r\n            {\r\n                // Create an empty children array in the item\r\n                item.children = [];\r\n\r\n                // Add the default weight if not provided or if it's not a number\r\n                if ( angular.isUndefined(item.weight) || !angular.isNumber(item.weight) )\r\n                {\r\n                    item.weight = 1;\r\n                }\r\n\r\n                // Add the item id\r\n                item._id = id;\r\n\r\n                // Add the item path\r\n                item._path = path;\r\n\r\n                // Add proper ui-sref\r\n                item.uisref = _getUiSref(item);\r\n\r\n                // Push the item into the array\r\n                parent.push(item);\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Delete navigation item\r\n         *\r\n         * @param path\r\n         */\r\n        function deleteItem(path)\r\n        {\r\n            if ( !angular.isString(path) )\r\n            {\r\n                $log.error('path must be a string (eg. `dashboard.project`)');\r\n                return;\r\n            }\r\n\r\n            // Locate the item by using given path\r\n            var item = navigation,\r\n                parts = path.split('.');\r\n\r\n            for ( var p = 0; p < parts.length; p++ )\r\n            {\r\n                var id = parts[p];\r\n\r\n                for ( var i = 0; i < item.length; i++ )\r\n                {\r\n                    if ( item[i]._id === id )\r\n                    {\r\n                        // If we have a matching path,\r\n                        // we have found our object:\r\n                        // remove it.\r\n                        if ( item[i]._path === path )\r\n                        {\r\n                            item.splice(i, 1);\r\n                            return true;\r\n                        }\r\n\r\n                        // Otherwise grab the children of\r\n                        // the current item and continue\r\n                        item = item[i].children;\r\n                        break;\r\n                    }\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Sort the navigation items by their weights\r\n         *\r\n         * @param parent\r\n         */\r\n        function sortByWeight(parent)\r\n        {\r\n            // If parent not provided, sort the root items\r\n            if ( !parent )\r\n            {\r\n                parent = navigation;\r\n                parent.sort(_byWeight);\r\n            }\r\n\r\n            // Sort the children\r\n            for ( var i = 0; i < parent.length; i++ )\r\n            {\r\n                var children = parent[i].children;\r\n\r\n                if ( children.length > 1 )\r\n                {\r\n                    children.sort(_byWeight);\r\n                }\r\n\r\n                if ( children.length > 0 )\r\n                {\r\n                    sortByWeight(children);\r\n                }\r\n            }\r\n        }\r\n\r\n        /* ----------------- */\r\n        /* Private Functions */\r\n        /* ----------------- */\r\n\r\n        /**\r\n         * Find or create parent\r\n         *\r\n         * @param parts\r\n         * @returns {Array|Boolean}\r\n         * @private\r\n         */\r\n        function _findOrCreateParent(parts)\r\n        {\r\n            // Store the main navigation\r\n            var parent = navigation;\r\n\r\n            // If it's going to be a root item\r\n            // return the navigation itself\r\n            if ( parts.length === 1 )\r\n            {\r\n                return parent;\r\n            }\r\n\r\n            // Remove the last element from the parts as\r\n            // we don't need that to figure out the parent\r\n            parts.pop();\r\n\r\n            // Find and return the parent\r\n            for ( var i = 0; i < parts.length; i++ )\r\n            {\r\n                var _id = parts[i],\r\n                    createParent = true;\r\n\r\n                for ( var p = 0; p < parent.length; p++ )\r\n                {\r\n                    if ( parent[p]._id === _id )\r\n                    {\r\n                        parent = parent[p].children;\r\n                        createParent = false;\r\n\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                // If there is no parent found, create one, push\r\n                // it into the current parent and assign it as a\r\n                // new parent\r\n                if ( createParent )\r\n                {\r\n                    var item = {\r\n                        _id     : _id,\r\n                        _path   : parts.join('.'),\r\n                        title   : _id,\r\n                        weight  : 1,\r\n                        children: []\r\n                    };\r\n\r\n                    parent.push(item);\r\n                    parent = item.children;\r\n                }\r\n            }\r\n\r\n            return parent;\r\n        }\r\n\r\n        /**\r\n         * Sort by weight\r\n         *\r\n         * @param x\r\n         * @param y\r\n         * @returns {number}\r\n         * @private\r\n         */\r\n        function _byWeight(x, y)\r\n        {\r\n            return parseInt(x.weight) - parseInt(y.weight);\r\n        }\r\n\r\n        /**\r\n         * Setup the ui-sref using state & state parameters\r\n         *\r\n         * @param item\r\n         * @returns {string}\r\n         * @private\r\n         */\r\n        function _getUiSref(item)\r\n        {\r\n            var uisref = '';\r\n\r\n            if ( angular.isDefined(item.state) )\r\n            {\r\n                uisref = item.state;\r\n\r\n                if ( angular.isDefined(item.stateParams) && angular.isObject(item.stateParams) )\r\n                {\r\n                    uisref = uisref + '(' + angular.toJson(item.stateParams) + ')';\r\n                }\r\n            }\r\n\r\n            return uisref;\r\n        }\r\n\r\n        /* ----------------- */\r\n        /* Service           */\r\n        /* ----------------- */\r\n\r\n        this.$get = function ()\r\n        {\r\n            var activeItem = null,\r\n                navigationScope = null,\r\n                folded = null,\r\n                foldedOpen = null;\r\n\r\n            var service = {\r\n                saveItem          : saveItem,\r\n                deleteItem        : deleteItem,\r\n                sort              : sortByWeight,\r\n                clearNavigation   : clearNavigation,\r\n                setActiveItem     : setActiveItem,\r\n                getActiveItem     : getActiveItem,\r\n                getNavigation     : getNavigation,\r\n                getFlatNavigation : getFlatNavigation,\r\n                setNavigationScope: setNavigationScope,\r\n                setFolded         : setFolded,\r\n                getFolded         : getFolded,\r\n                setFoldedOpen     : setFoldedOpen,\r\n                getFoldedOpen     : getFoldedOpen,\r\n                toggleFolded      : toggleFolded\r\n            };\r\n\r\n            return service;\r\n\r\n            //////////\r\n\r\n            /**\r\n             * Clear the entire navigation\r\n             */\r\n            function clearNavigation()\r\n            {\r\n                // Clear the navigation array\r\n                navigation = [];\r\n\r\n                // Clear the vm.navigation from main controller\r\n                if ( navigationScope )\r\n                {\r\n                    navigationScope.vm.navigation = navigation;\r\n                }\r\n            }\r\n\r\n            /**\r\n             * Set active item\r\n             *\r\n             * @param node\r\n             * @param scope\r\n             */\r\n            function setActiveItem(node, scope)\r\n            {\r\n                activeItem = {\r\n                    node : node,\r\n                    scope: scope\r\n                };\r\n            }\r\n\r\n            /**\r\n             * Return active item\r\n             */\r\n            function getActiveItem()\r\n            {\r\n                return activeItem;\r\n            }\r\n\r\n            /**\r\n             * Return navigation array\r\n             *\r\n             * @param root\r\n             * @returns Array\r\n             */\r\n            function getNavigation(root)\r\n            {\r\n                if ( root )\r\n                {\r\n                    for ( var i = 0; i < navigation.length; i++ )\r\n                    {\r\n                        if ( navigation[i]._id === root )\r\n                        {\r\n                            return [navigation[i]];\r\n                        }\r\n                    }\r\n\r\n                    return null;\r\n                }\r\n\r\n                return navigation;\r\n            }\r\n\r\n            /**\r\n             * Return flat navigation array\r\n             *\r\n             * @param root\r\n             * @returns Array\r\n             */\r\n            function getFlatNavigation(root)\r\n            {\r\n                // Get the correct navigation array\r\n                var navigation = getNavigation(root);\r\n\r\n                // Flatten the navigation object\r\n                return _flattenNavigation(navigation);\r\n            }\r\n\r\n            /**\r\n             * Store navigation's scope for later use\r\n             *\r\n             * @param scope\r\n             */\r\n            function setNavigationScope(scope)\r\n            {\r\n                navigationScope = scope;\r\n            }\r\n\r\n            /**\r\n             * Set folded status\r\n             *\r\n             * @param status\r\n             */\r\n            function setFolded(status)\r\n            {\r\n                folded = status;\r\n            }\r\n\r\n            /**\r\n             * Return folded status\r\n             *\r\n             * @returns {*}\r\n             */\r\n            function getFolded()\r\n            {\r\n                return folded;\r\n            }\r\n\r\n            /**\r\n             * Set folded open status\r\n             *\r\n             * @param status\r\n             */\r\n            function setFoldedOpen(status)\r\n            {\r\n                foldedOpen = status;\r\n            }\r\n\r\n            /**\r\n             * Return folded open status\r\n             *\r\n             * @returns {*}\r\n             */\r\n            function getFoldedOpen()\r\n            {\r\n                return foldedOpen;\r\n            }\r\n\r\n\r\n            /**\r\n             * Toggle fold on stored navigation's scope\r\n             */\r\n            function toggleFolded()\r\n            {\r\n                navigationScope.toggleFolded();\r\n            }\r\n\r\n            /**\r\n             * Flatten the given navigation\r\n             *\r\n             * @param navigation\r\n             * @private\r\n             */\r\n            function _flattenNavigation(navigation)\r\n            {\r\n                var flatNav = [];\r\n\r\n                for ( var x = 0; x < navigation.length; x++ )\r\n                {\r\n                    // Copy and clear the children of the\r\n                    // navigation that we want to push\r\n                    var navToPush = angular.copy(navigation[x]);\r\n                    navToPush.children = [];\r\n\r\n                    // Push the item\r\n                    flatNav.push(navToPush);\r\n\r\n                    // If there are child items in this navigation,\r\n                    // do some nested function magic\r\n                    if ( navigation[x].children.length > 0 )\r\n                    {\r\n                        flatNav = flatNav.concat(_flattenNavigation(navigation[x].children));\r\n                    }\r\n                }\r\n\r\n                return flatNav;\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function MsNavigationController($scope, msNavigationService)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        if ( $scope.root )\r\n        {\r\n            vm.navigation = msNavigationService.getNavigation($scope.root);\r\n        }\r\n        else\r\n        {\r\n            vm.navigation = msNavigationService.getNavigation();\r\n        }\r\n\r\n        // Methods\r\n        vm.toggleHorizontalMobileMenu = toggleHorizontalMobileMenu;\r\n\r\n        //////////\r\n\r\n        init();\r\n\r\n        /**\r\n         * Initialize\r\n         */\r\n        function init()\r\n        {\r\n            // Sort the navigation before doing anything else\r\n            msNavigationService.sort();\r\n        }\r\n\r\n        /**\r\n         * Toggle horizontal mobile menu\r\n         */\r\n        function toggleHorizontalMobileMenu()\r\n        {\r\n            angular.element('body').toggleClass('ms-navigation-horizontal-mobile-menu-active');\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavigationDirective($rootScope, $timeout, $mdSidenav, msNavigationService)\r\n    {\r\n        return {\r\n            restrict   : 'E',\r\n            scope      : {\r\n                folded: '=',\r\n                root  : '@'\r\n            },\r\n            controller : 'MsNavigationController as vm',\r\n            templateUrl: 'app/core/directives/ms-navigation/templates/vertical.html',\r\n            transclude : true,\r\n            compile    : function (tElement)\r\n            {\r\n                tElement.addClass('ms-navigation');\r\n\r\n                return function postLink(scope, iElement)\r\n                {\r\n                    var bodyEl = angular.element('body'),\r\n                        foldExpanderEl = angular.element('<div id=\"ms-navigation-fold-expander\"></div>'),\r\n                        foldCollapserEl = angular.element('<div id=\"ms-navigation-fold-collapser\"></div>'),\r\n                        sidenav = $mdSidenav('navigation');\r\n\r\n                    // Store the navigation in the service for public access\r\n                    msNavigationService.setNavigationScope(scope);\r\n\r\n                    // Initialize\r\n                    init();\r\n\r\n                    /**\r\n                     * Initialize\r\n                     */\r\n                    function init()\r\n                    {\r\n                        // Set the folded status for the first time.\r\n                        // First, we have to check if we have a folded\r\n                        // status available in the service already. This\r\n                        // will prevent navigation to act weird if we already\r\n                        // set the fold status, remove the navigation and\r\n                        // then re-initialize it, which happens if we\r\n                        // change to a view without a navigation and then\r\n                        // come back with history.back() function.\r\n\r\n                        // If the service didn't initialize before, set\r\n                        // the folded status from scope, otherwise we\r\n                        // won't touch anything because the folded status\r\n                        // already set in the service...\r\n                        if ( msNavigationService.getFolded() === null )\r\n                        {\r\n                            msNavigationService.setFolded(scope.folded);\r\n                        }\r\n\r\n                        if ( msNavigationService.getFolded() )\r\n                        {\r\n                            // Collapse everything.\r\n                            // This must be inside a $timeout because by the\r\n                            // time we call this, the 'msNavigation::collapse'\r\n                            // event listener is not registered yet. $timeout\r\n                            // will ensure that it will be called after it is\r\n                            // registered.\r\n                            $timeout(function ()\r\n                            {\r\n                                $rootScope.$broadcast('msNavigation::collapse');\r\n                            });\r\n\r\n                            // Add class to the body\r\n                            bodyEl.addClass('ms-navigation-folded');\r\n\r\n                            // Set fold expander\r\n                            setFoldExpander();\r\n                        }\r\n                    }\r\n\r\n                    // Sidenav locked open status watcher\r\n                    scope.$watch(function ()\r\n                    {\r\n                        return sidenav.isLockedOpen();\r\n                    }, function (current, old)\r\n                    {\r\n                        if ( angular.isUndefined(current) || angular.equals(current, old) )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        var folded = msNavigationService.getFolded();\r\n\r\n                        if ( folded )\r\n                        {\r\n                            if ( current )\r\n                            {\r\n                                // Collapse everything\r\n                                $rootScope.$broadcast('msNavigation::collapse');\r\n                            }\r\n                            else\r\n                            {\r\n                                // Expand the active one and its parents\r\n                                var activeItem = msNavigationService.getActiveItem();\r\n                                if ( activeItem )\r\n                                {\r\n                                    activeItem.scope.$emit('msNavigation::stateMatched');\r\n                                }\r\n                            }\r\n                        }\r\n                    });\r\n\r\n                    // Folded status watcher\r\n                    scope.$watch('folded', function (current, old)\r\n                    {\r\n                        if ( angular.isUndefined(current) || angular.equals(current, old) )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        setFolded(current);\r\n                    });\r\n\r\n                    /**\r\n                     * Set folded status\r\n                     *\r\n                     * @param folded\r\n                     */\r\n                    function setFolded(folded)\r\n                    {\r\n                        // Store folded status on the service for global access\r\n                        msNavigationService.setFolded(folded);\r\n\r\n                        if ( folded )\r\n                        {\r\n                            // Collapse everything\r\n                            $rootScope.$broadcast('msNavigation::collapse');\r\n\r\n                            // Add class to the body\r\n                            bodyEl.addClass('ms-navigation-folded');\r\n\r\n                            // Set fold expander\r\n                            setFoldExpander();\r\n                        }\r\n                        else\r\n                        {\r\n                            // Expand the active one and its parents\r\n                            var activeItem = msNavigationService.getActiveItem();\r\n                            if ( activeItem )\r\n                            {\r\n                                activeItem.scope.$emit('msNavigation::stateMatched');\r\n                            }\r\n\r\n                            // Remove body class\r\n                            bodyEl.removeClass('ms-navigation-folded ms-navigation-folded-open');\r\n\r\n                            // Remove fold collapser\r\n                            removeFoldCollapser();\r\n                        }\r\n                    }\r\n\r\n                    /**\r\n                     * Set fold expander\r\n                     */\r\n                    function setFoldExpander()\r\n                    {\r\n                        iElement.parent().append(foldExpanderEl);\r\n\r\n                        // Let everything settle for a moment\r\n                        // before registering the event listener\r\n                        $timeout(function ()\r\n                        {\r\n                            foldExpanderEl.on('mouseenter touchstart', onFoldExpanderHover);\r\n                        });\r\n                    }\r\n\r\n                    /**\r\n                     * Set fold collapser\r\n                     */\r\n                    function setFoldCollapser()\r\n                    {\r\n                        bodyEl.find('#main').append(foldCollapserEl);\r\n                        foldCollapserEl.on('mouseenter touchstart', onFoldCollapserHover);\r\n                    }\r\n\r\n                    /**\r\n                     * Remove fold collapser\r\n                     */\r\n                    function removeFoldCollapser()\r\n                    {\r\n                        foldCollapserEl.remove();\r\n                    }\r\n\r\n                    /**\r\n                     * onHover event of foldExpander\r\n                     */\r\n                    function onFoldExpanderHover(event)\r\n                    {\r\n                        if ( event )\r\n                        {\r\n                            event.preventDefault();\r\n                        }\r\n\r\n                        // Set folded open status\r\n                        msNavigationService.setFoldedOpen(true);\r\n\r\n                        // Expand the active one and its parents\r\n                        var activeItem = msNavigationService.getActiveItem();\r\n                        if ( activeItem )\r\n                        {\r\n                            activeItem.scope.$emit('msNavigation::stateMatched');\r\n                        }\r\n\r\n                        // Add class to the body\r\n                        bodyEl.addClass('ms-navigation-folded-open');\r\n\r\n                        // Remove the fold opener\r\n                        foldExpanderEl.remove();\r\n\r\n                        // Set fold collapser\r\n                        setFoldCollapser();\r\n                    }\r\n\r\n                    /**\r\n                     * onHover event of foldCollapser\r\n                     */\r\n                    function onFoldCollapserHover(event)\r\n                    {\r\n                        if ( event )\r\n                        {\r\n                            event.preventDefault();\r\n                        }\r\n\r\n                        // Set folded open status\r\n                        msNavigationService.setFoldedOpen(false);\r\n\r\n                        // Collapse everything\r\n                        $rootScope.$broadcast('msNavigation::collapse');\r\n\r\n                        // Remove body class\r\n                        bodyEl.removeClass('ms-navigation-folded-open');\r\n\r\n                        // Remove the fold collapser\r\n                        foldCollapserEl.remove();\r\n\r\n                        // Set fold expander\r\n                        setFoldExpander();\r\n                    }\r\n\r\n                    /**\r\n                     * Public access for toggling folded status externally\r\n                     */\r\n                    scope.toggleFolded = function ()\r\n                    {\r\n                        var folded = msNavigationService.getFolded();\r\n\r\n                        setFolded(!folded);\r\n                    };\r\n\r\n                    /**\r\n                     * On $stateChangeStart\r\n                     */\r\n                    scope.$on('$stateChangeStart', function ()\r\n                    {\r\n                        // Close the sidenav\r\n                        sidenav.close();\r\n                    });\r\n\r\n                    // Cleanup\r\n                    scope.$on('$destroy', function ()\r\n                    {\r\n                        foldCollapserEl.off('mouseenter touchstart');\r\n                        foldExpanderEl.off('mouseenter touchstart');\r\n                    });\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function MsNavigationNodeController($scope, $element, $rootScope, $animate, $state, msNavigationService)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.element = $element;\r\n        vm.node = $scope.node;\r\n        vm.hasChildren = undefined;\r\n        vm.collapsed = undefined;\r\n        vm.collapsable = undefined;\r\n        vm.group = undefined;\r\n        vm.animateHeightClass = 'animate-height';\r\n\r\n        // Methods\r\n        vm.toggleCollapsed = toggleCollapsed;\r\n        vm.collapse = collapse;\r\n        vm.expand = expand;\r\n        vm.getClass = getClass;\r\n        vm.isHidden = isHidden;\r\n\r\n        //////////\r\n\r\n        init();\r\n\r\n        /**\r\n         * Initialize\r\n         */\r\n        function init()\r\n        {\r\n            // Setup the initial values\r\n\r\n            // Has children?\r\n            vm.hasChildren = vm.node.children.length > 0;\r\n\r\n            // Is group?\r\n            vm.group = !!(angular.isDefined(vm.node.group) && vm.node.group === true);\r\n\r\n            // Is collapsable?\r\n            if ( !vm.hasChildren || vm.group )\r\n            {\r\n                vm.collapsable = false;\r\n            }\r\n            else\r\n            {\r\n                vm.collapsable = !!(angular.isUndefined(vm.node.collapsable) || typeof vm.node.collapsable !== 'boolean' || vm.node.collapsable === true);\r\n            }\r\n\r\n            // Is collapsed?\r\n            if ( !vm.collapsable )\r\n            {\r\n                vm.collapsed = false;\r\n            }\r\n            else\r\n            {\r\n                vm.collapsed = !!(angular.isUndefined(vm.node.collapsed) || typeof vm.node.collapsed !== 'boolean' || vm.node.collapsed === true);\r\n            }\r\n\r\n            // Expand all parents if we have a matching state or\r\n            // the current state is a child of the node's state\r\n            if ( vm.node.state === $state.current.name || $state.includes(vm.node.state) )\r\n            {\r\n                // If state params are defined, make sure they are\r\n                // equal, otherwise do not set the active item\r\n                if ( angular.isDefined(vm.node.stateParams) && angular.isDefined($state.params) && !angular.equals(vm.node.stateParams, $state.params) )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                $scope.$emit('msNavigation::stateMatched');\r\n\r\n                // Also store the current active menu item\r\n                msNavigationService.setActiveItem(vm.node, $scope);\r\n            }\r\n\r\n            $scope.$on('msNavigation::stateMatched', function ()\r\n            {\r\n                // Expand if the current scope is collapsable and is collapsed\r\n                if ( vm.collapsable && vm.collapsed )\r\n                {\r\n                    $scope.$evalAsync(function ()\r\n                    {\r\n                        vm.collapsed = false;\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Listen for collapse event\r\n            $scope.$on('msNavigation::collapse', function (event, path)\r\n            {\r\n                if ( vm.collapsed || !vm.collapsable )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                // If there is no path defined, collapse\r\n                if ( angular.isUndefined(path) )\r\n                {\r\n                    vm.collapse();\r\n                }\r\n                // If there is a path defined, do not collapse\r\n                // the items that are inside that path. This will\r\n                // prevent parent items from collapsing\r\n                else\r\n                {\r\n                    var givenPathParts = path.split('.'),\r\n                        activePathParts = [];\r\n\r\n                    var activeItem = msNavigationService.getActiveItem();\r\n                    if ( activeItem )\r\n                    {\r\n                        activePathParts = activeItem.node._path.split('.');\r\n                    }\r\n\r\n                    // Test for given path\r\n                    if ( givenPathParts.indexOf(vm.node._id) > -1 )\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    // Test for active path\r\n                    if ( activePathParts.indexOf(vm.node._id) > -1 )\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    vm.collapse();\r\n                }\r\n            });\r\n\r\n            // Listen for $stateChangeSuccess event\r\n            $scope.$on('$stateChangeSuccess', function ()\r\n            {\r\n                if ( vm.node.state === $state.current.name )\r\n                {\r\n                    // If state params are defined, make sure they are\r\n                    // equal, otherwise do not set the active item\r\n                    if ( angular.isDefined(vm.node.stateParams) && angular.isDefined($state.params) && !angular.equals(vm.node.stateParams, $state.params) )\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    // Update active item on state change\r\n                    msNavigationService.setActiveItem(vm.node, $scope);\r\n\r\n                    // Collapse everything except the one we're using\r\n                    $rootScope.$broadcast('msNavigation::collapse', vm.node._path);\r\n                }\r\n\r\n                // Expand the parents if we the current\r\n                // state is a child of the node's state\r\n                if ( $state.includes(vm.node.state) )\r\n                {\r\n                    // If state params are defined, make sure they are\r\n                    // equal, otherwise do not set the active item\r\n                    if ( angular.isDefined(vm.node.stateParams) && angular.isDefined($state.params) && !angular.equals(vm.node.stateParams, $state.params) )\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    // Emit the stateMatched\r\n                    $scope.$emit('msNavigation::stateMatched');\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Toggle collapsed\r\n         */\r\n        function toggleCollapsed()\r\n        {\r\n            if ( vm.collapsed )\r\n            {\r\n                vm.expand();\r\n            }\r\n            else\r\n            {\r\n                vm.collapse();\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Collapse\r\n         */\r\n        function collapse()\r\n        {\r\n            // Grab the element that we are going to collapse\r\n            var collapseEl = vm.element.children('ul');\r\n\r\n            // Grab the height\r\n            var height = collapseEl[0].offsetHeight;\r\n\r\n            $scope.$evalAsync(function ()\r\n            {\r\n                // Set collapsed status\r\n                vm.collapsed = true;\r\n\r\n                // Add collapsing class to the node\r\n                vm.element.addClass('collapsing');\r\n\r\n                // Animate the height\r\n                $animate.animate(collapseEl,\r\n                    {\r\n                        'display': 'block',\r\n                        'height' : height + 'px'\r\n                    },\r\n                    {\r\n                        'height': '0px'\r\n                    },\r\n                    vm.animateHeightClass\r\n                ).then(\r\n                    function ()\r\n                    {\r\n                        // Clear the inline styles after animation done\r\n                        collapseEl.css({\r\n                            'display': '',\r\n                            'height' : ''\r\n                        });\r\n\r\n                        // Clear collapsing class from the node\r\n                        vm.element.removeClass('collapsing');\r\n                    }\r\n                );\r\n\r\n                // Broadcast the collapse event so child items can also be collapsed\r\n                $scope.$broadcast('msNavigation::collapse');\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Expand\r\n         */\r\n        function expand()\r\n        {\r\n            // Grab the element that we are going to expand\r\n            var expandEl = vm.element.children('ul');\r\n\r\n            // Move the element out of the dom flow and\r\n            // make it block so we can get its height\r\n            expandEl.css({\r\n                'position'  : 'absolute',\r\n                'visibility': 'hidden',\r\n                'display'   : 'block',\r\n                'height'    : 'auto'\r\n            });\r\n\r\n            // Grab the height\r\n            var height = expandEl[0].offsetHeight;\r\n\r\n            // Reset the style modifications\r\n            expandEl.css({\r\n                'position'  : '',\r\n                'visibility': '',\r\n                'display'   : '',\r\n                'height'    : ''\r\n            });\r\n\r\n            $scope.$evalAsync(function ()\r\n            {\r\n                // Set collapsed status\r\n                vm.collapsed = false;\r\n\r\n                // Add expanding class to the node\r\n                vm.element.addClass('expanding');\r\n\r\n                // Animate the height\r\n                $animate.animate(expandEl,\r\n                    {\r\n                        'display': 'block',\r\n                        'height' : '0px'\r\n                    },\r\n                    {\r\n                        'height': height + 'px'\r\n                    },\r\n                    vm.animateHeightClass\r\n                ).then(\r\n                    function ()\r\n                    {\r\n                        // Clear the inline styles after animation done\r\n                        expandEl.css({\r\n                            'height': ''\r\n                        });\r\n\r\n                        // Clear expanding class from the node\r\n                        vm.element.removeClass('expanding');\r\n                    }\r\n                );\r\n\r\n                // If item expanded, broadcast the collapse event from rootScope so that the other expanded items\r\n                // can be collapsed. This is necessary for keeping only one parent expanded at any time\r\n                $rootScope.$broadcast('msNavigation::collapse', vm.node._path);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Return the class\r\n         *\r\n         * @returns {*}\r\n         */\r\n        function getClass()\r\n        {\r\n            return vm.node.class;\r\n        }\r\n\r\n        /**\r\n         * Check if node should be hidden\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isHidden()\r\n        {\r\n            if ( angular.isDefined(vm.node.hidden) && angular.isFunction(vm.node.hidden) )\r\n            {\r\n                return vm.node.hidden();\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavigationNodeDirective()\r\n    {\r\n        return {\r\n            restrict        : 'A',\r\n            bindToController: {\r\n                node: '=msNavigationNode'\r\n            },\r\n            controller      : 'MsNavigationNodeController as vm',\r\n            compile         : function (tElement)\r\n            {\r\n                tElement.addClass('ms-navigation-node');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsNavigationNodeCtrl)\r\n                {\r\n                    // Add custom classes\r\n                    iElement.addClass(MsNavigationNodeCtrl.getClass());\r\n\r\n                    // Add group class if it's a group\r\n                    if ( MsNavigationNodeCtrl.group )\r\n                    {\r\n                        iElement.addClass('group');\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavigationItemDirective()\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            require : '^msNavigationNode',\r\n            compile : function (tElement)\r\n            {\r\n                tElement.addClass('ms-navigation-item');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsNavigationNodeCtrl)\r\n                {\r\n                    // If the item is collapsable...\r\n                    if ( MsNavigationNodeCtrl.collapsable )\r\n                    {\r\n                        iElement.on('click', MsNavigationNodeCtrl.toggleCollapsed);\r\n                    }\r\n\r\n                    // Cleanup\r\n                    scope.$on('$destroy', function ()\r\n                    {\r\n                        iElement.off('click');\r\n                    });\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavigationHorizontalDirective(msNavigationService)\r\n    {\r\n        return {\r\n            restrict   : 'E',\r\n            scope      : {\r\n                root: '@'\r\n            },\r\n            controller : 'MsNavigationController as vm',\r\n            templateUrl: 'app/core/directives/ms-navigation/templates/horizontal.html',\r\n            transclude : true,\r\n            compile    : function (tElement)\r\n            {\r\n                tElement.addClass('ms-navigation-horizontal');\r\n\r\n                return function postLink(scope)\r\n                {\r\n                    // Store the navigation in the service for public access\r\n                    msNavigationService.setNavigationScope(scope);\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function MsNavigationHorizontalNodeController($scope, $element, $rootScope, $state, msNavigationService)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.element = $element;\r\n        vm.node = $scope.node;\r\n        vm.hasChildren = undefined;\r\n        vm.group = undefined;\r\n\r\n        // Methods\r\n        vm.getClass = getClass;\r\n        vm.isHidden = isHidden;\r\n\r\n        //////////\r\n\r\n        init();\r\n\r\n        /**\r\n         * Initialize\r\n         */\r\n        function init()\r\n        {\r\n            // Setup the initial values\r\n\r\n            // Is active\r\n            vm.isActive = false;\r\n\r\n            // Has children?\r\n            vm.hasChildren = vm.node.children.length > 0;\r\n\r\n            // Is group?\r\n            vm.group = !!(angular.isDefined(vm.node.group) && vm.node.group === true);\r\n\r\n            // Mark all parents as active if we have a matching state\r\n            // or the current state is a child of the node's state\r\n            if ( vm.node.state === $state.current.name || $state.includes(vm.node.state) )\r\n            {\r\n                // If state params are defined, make sure they are\r\n                // equal, otherwise do not set the active item\r\n                if ( angular.isDefined(vm.node.stateParams) && angular.isDefined($state.params) && !angular.equals(vm.node.stateParams, $state.params) )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                $scope.$emit('msNavigation::stateMatched');\r\n\r\n                // Also store the current active menu item\r\n                msNavigationService.setActiveItem(vm.node, $scope);\r\n            }\r\n\r\n            $scope.$on('msNavigation::stateMatched', function ()\r\n            {\r\n                // Mark as active if has children\r\n                if ( vm.hasChildren )\r\n                {\r\n                    $scope.$evalAsync(function ()\r\n                    {\r\n                        vm.isActive = true;\r\n                    });\r\n                }\r\n            });\r\n\r\n            // Listen for clearActive event\r\n            $scope.$on('msNavigation::clearActive', function ()\r\n            {\r\n                if ( !vm.hasChildren )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                var activePathParts = [];\r\n\r\n                var activeItem = msNavigationService.getActiveItem();\r\n                if ( activeItem )\r\n                {\r\n                    activePathParts = activeItem.node._path.split('.');\r\n                }\r\n\r\n                // Test for active path\r\n                if ( activePathParts.indexOf(vm.node._id) > -1 )\r\n                {\r\n                    $scope.$evalAsync(function ()\r\n                    {\r\n                        vm.isActive = true;\r\n                    });\r\n                }\r\n                else\r\n                {\r\n                    $scope.$evalAsync(function ()\r\n                    {\r\n                        vm.isActive = false;\r\n                    });\r\n                }\r\n\r\n            });\r\n\r\n            // Listen for $stateChangeSuccess event\r\n            $scope.$on('$stateChangeSuccess', function ()\r\n            {\r\n                if ( vm.node.state === $state.current.name || $state.includes(vm.node.state) )\r\n                {\r\n                    // If state params are defined, make sure they are\r\n                    // equal, otherwise do not set the active item\r\n                    if ( angular.isDefined(vm.node.stateParams) && angular.isDefined($state.params) && !angular.equals(vm.node.stateParams, $state.params) )\r\n                    {\r\n                        return;\r\n                    }\r\n\r\n                    // Update active item on state change\r\n                    msNavigationService.setActiveItem(vm.node, $scope);\r\n\r\n                    // Clear all active states except the one we're using\r\n                    $rootScope.$broadcast('msNavigation::clearActive');\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Return the class\r\n         *\r\n         * @returns {*}\r\n         */\r\n        function getClass()\r\n        {\r\n            return vm.node.class;\r\n        }\r\n\r\n        /**\r\n         * Check if node should be hidden\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isHidden()\r\n        {\r\n            if ( angular.isDefined(vm.node.hidden) && angular.isFunction(vm.node.hidden) )\r\n            {\r\n                return vm.node.hidden();\r\n            }\r\n\r\n            return false;\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavigationHorizontalNodeDirective()\r\n    {\r\n        return {\r\n            restrict        : 'A',\r\n            bindToController: {\r\n                node: '=msNavigationHorizontalNode'\r\n            },\r\n            controller      : 'MsNavigationHorizontalNodeController as vm',\r\n            compile         : function (tElement)\r\n            {\r\n                tElement.addClass('ms-navigation-horizontal-node');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsNavigationHorizontalNodeCtrl)\r\n                {\r\n                    // Add custom classes\r\n                    iElement.addClass(MsNavigationHorizontalNodeCtrl.getClass());\r\n\r\n                    // Add group class if it's a group\r\n                    if ( MsNavigationHorizontalNodeCtrl.group )\r\n                    {\r\n                        iElement.addClass('group');\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavigationHorizontalItemDirective($mdMedia)\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            require : '^msNavigationHorizontalNode',\r\n            compile : function (tElement)\r\n            {\r\n                tElement.addClass('ms-navigation-horizontal-item');\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsNavigationHorizontalNodeCtrl)\r\n                {\r\n                    iElement.on('click', onClick);\r\n\r\n                    function onClick()\r\n                    {\r\n                        if ( !MsNavigationHorizontalNodeCtrl.hasChildren || $mdMedia('gt-md') )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        iElement.toggleClass('expanded');\r\n                    }\r\n\r\n                    // Cleanup\r\n                    scope.$on('$destroy', function ()\r\n                    {\r\n                        iElement.off('click');\r\n                    });\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .factory('msNavFoldService', msNavFoldService)\r\n        .directive('msNavIsFolded', msNavIsFoldedDirective)\r\n        .controller('MsNavController', MsNavController)\r\n        .directive('msNav', msNavDirective)\r\n        .directive('msNavTitle', msNavTitleDirective)\r\n        .directive('msNavButton', msNavButtonDirective)\r\n        .directive('msNavToggle', msNavToggleDirective);\r\n\r\n    /** @ngInject */\r\n    function msNavFoldService()\r\n    {\r\n        var foldable = {};\r\n\r\n        var service = {\r\n            setFoldable    : setFoldable,\r\n            isNavFoldedOpen: isNavFoldedOpen,\r\n            toggleFold     : toggleFold,\r\n            openFolded     : openFolded,\r\n            closeFolded    : closeFolded\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Set the foldable\r\n         *\r\n         * @param scope\r\n         * @param element\r\n         */\r\n        function setFoldable(scope, element)\r\n        {\r\n            foldable = {\r\n                'scope'  : scope,\r\n                'element': element\r\n            };\r\n        }\r\n\r\n        /**\r\n         * Is folded open\r\n         */\r\n        function isNavFoldedOpen()\r\n        {\r\n            return foldable.scope.isNavFoldedOpen();\r\n        }\r\n\r\n        /**\r\n         * Toggle fold\r\n         */\r\n        function toggleFold()\r\n        {\r\n            foldable.scope.toggleFold();\r\n        }\r\n\r\n        /**\r\n         * Open folded navigation\r\n         */\r\n        function openFolded()\r\n        {\r\n            foldable.scope.openFolded();\r\n        }\r\n\r\n        /**\r\n         * Close folded navigation\r\n         */\r\n        function closeFolded()\r\n        {\r\n            foldable.scope.closeFolded();\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavIsFoldedDirective($document, $rootScope, msNavFoldService)\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            link    : function (scope, iElement, iAttrs)\r\n            {\r\n                var isFolded = (iAttrs.msNavIsFolded === 'true'),\r\n                    isFoldedOpen = false,\r\n                    body = angular.element($document[0].body),\r\n                    openOverlay = angular.element('<div id=\"ms-nav-fold-open-overlay\"></div>'),\r\n                    closeOverlay = angular.element('<div id=\"ms-nav-fold-close-overlay\"></div>'),\r\n                    sidenavEl = iElement.parent();\r\n\r\n                // Initialize the service\r\n                msNavFoldService.setFoldable(scope, iElement, isFolded);\r\n\r\n                // Set the fold status for the first time\r\n                if ( isFolded )\r\n                {\r\n                    fold();\r\n                }\r\n                else\r\n                {\r\n                    unfold();\r\n                }\r\n\r\n                /**\r\n                 * Is nav folded open\r\n                 */\r\n                function isNavFoldedOpen()\r\n                {\r\n                    return isFoldedOpen;\r\n                }\r\n\r\n                /**\r\n                 * Toggle fold\r\n                 */\r\n                function toggleFold()\r\n                {\r\n                    isFolded = !isFolded;\r\n\r\n                    if ( isFolded )\r\n                    {\r\n                        fold();\r\n                    }\r\n                    else\r\n                    {\r\n                        unfold();\r\n                    }\r\n                }\r\n\r\n                /**\r\n                 * Fold the navigation\r\n                 */\r\n                function fold()\r\n                {\r\n                    // Add classes\r\n                    body.addClass('ms-nav-folded');\r\n\r\n                    // Collapse everything and scroll to the top\r\n                    $rootScope.$broadcast('msNav::forceCollapse');\r\n                    iElement.scrollTop(0);\r\n\r\n                    // Append the openOverlay to the element\r\n                    sidenavEl.append(openOverlay);\r\n\r\n                    // Event listeners\r\n                    openOverlay.on('mouseenter touchstart', function (event)\r\n                    {\r\n                        openFolded(event);\r\n                        isFoldedOpen = true;\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * Open folded navigation\r\n                 */\r\n                function openFolded(event)\r\n                {\r\n                    if ( angular.isDefined(event) )\r\n                    {\r\n                        event.preventDefault();\r\n                    }\r\n\r\n                    body.addClass('ms-nav-folded-open');\r\n\r\n                    // Update the location\r\n                    $rootScope.$broadcast('msNav::expandMatchingToggles');\r\n\r\n                    // Remove open overlay\r\n                    sidenavEl.find(openOverlay).remove();\r\n\r\n                    // Append close overlay and bind its events\r\n                    sidenavEl.parent().append(closeOverlay);\r\n                    closeOverlay.on('mouseenter touchstart', function (event)\r\n                    {\r\n                        closeFolded(event);\r\n                        isFoldedOpen = false;\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * Close folded navigation\r\n                 */\r\n                function closeFolded(event)\r\n                {\r\n                    if ( angular.isDefined(event) )\r\n                    {\r\n                        event.preventDefault();\r\n                    }\r\n\r\n                    // Collapse everything and scroll to the top\r\n                    $rootScope.$broadcast('msNav::forceCollapse');\r\n                    iElement.scrollTop(0);\r\n\r\n                    body.removeClass('ms-nav-folded-open');\r\n\r\n                    // Remove close overlay\r\n                    sidenavEl.parent().find(closeOverlay).remove();\r\n\r\n                    // Append open overlay and bind its events\r\n                    sidenavEl.append(openOverlay);\r\n                    openOverlay.on('mouseenter touchstart', function (event)\r\n                    {\r\n                        openFolded(event);\r\n                        isFoldedOpen = true;\r\n                    });\r\n                }\r\n\r\n                /**\r\n                 * Unfold the navigation\r\n                 */\r\n                function unfold()\r\n                {\r\n                    body.removeClass('ms-nav-folded ms-nav-folded-open');\r\n\r\n                    // Update the location\r\n                    $rootScope.$broadcast('msNav::expandMatchingToggles');\r\n\r\n                    iElement.off('mouseenter mouseleave');\r\n                }\r\n\r\n                // Expose functions to the scope\r\n                scope.toggleFold = toggleFold;\r\n                scope.openFolded = openFolded;\r\n                scope.closeFolded = closeFolded;\r\n                scope.isNavFoldedOpen = isNavFoldedOpen;\r\n\r\n                // Cleanup\r\n                scope.$on('$destroy', function ()\r\n                {\r\n                    openOverlay.off('mouseenter touchstart');\r\n                    closeOverlay.off('mouseenter touchstart');\r\n                    iElement.off('mouseenter mouseleave');\r\n                });\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n    /** @ngInject */\r\n    function MsNavController()\r\n    {\r\n        var vm = this,\r\n            disabled = false,\r\n            toggleItems = [],\r\n            lockedItems = [];\r\n\r\n        // Data\r\n\r\n        // Methods\r\n        vm.isDisabled = isDisabled;\r\n        vm.enable = enable;\r\n        vm.disable = disable;\r\n        vm.setToggleItem = setToggleItem;\r\n        vm.getLockedItems = getLockedItems;\r\n        vm.setLockedItem = setLockedItem;\r\n        vm.clearLockedItems = clearLockedItems;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Is navigation disabled\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isDisabled()\r\n        {\r\n            return disabled;\r\n        }\r\n\r\n        /**\r\n         * Disable the navigation\r\n         */\r\n        function disable()\r\n        {\r\n            disabled = true;\r\n        }\r\n\r\n        /**\r\n         * Enable the navigation\r\n         */\r\n        function enable()\r\n        {\r\n            disabled = false;\r\n        }\r\n\r\n        /**\r\n         * Set toggle item\r\n         *\r\n         * @param element\r\n         * @param scope\r\n         */\r\n        function setToggleItem(element, scope)\r\n        {\r\n            toggleItems.push({\r\n                'element': element,\r\n                'scope'  : scope\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Get locked items\r\n         *\r\n         * @returns {Array}\r\n         */\r\n        function getLockedItems()\r\n        {\r\n            return lockedItems;\r\n        }\r\n\r\n        /**\r\n         * Set locked item\r\n         *\r\n         * @param element\r\n         * @param scope\r\n         */\r\n        function setLockedItem(element, scope)\r\n        {\r\n            lockedItems.push({\r\n                'element': element,\r\n                'scope'  : scope\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Clear locked items list\r\n         */\r\n        function clearLockedItems()\r\n        {\r\n            lockedItems = [];\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavDirective($rootScope, $mdComponentRegistry, msNavFoldService)\r\n    {\r\n        return {\r\n            restrict  : 'E',\r\n            scope     : {},\r\n            controller: 'MsNavController',\r\n            compile   : function (tElement)\r\n            {\r\n                tElement.addClass('ms-nav');\r\n\r\n                return function postLink(scope)\r\n                {\r\n                    // Update toggle status according to the ui-router current state\r\n                    $rootScope.$broadcast('msNav::expandMatchingToggles');\r\n\r\n                    // Update toggles on state changes\r\n                    var stateChangeSuccessEvent = $rootScope.$on('$stateChangeSuccess', function ()\r\n                    {\r\n                        $rootScope.$broadcast('msNav::expandMatchingToggles');\r\n\r\n                        // Close navigation sidenav on stateChangeSuccess\r\n                        $mdComponentRegistry.when('navigation').then(function (navigation)\r\n                        {\r\n                            navigation.close();\r\n\r\n                            if ( msNavFoldService.isNavFoldedOpen() )\r\n                            {\r\n                                msNavFoldService.closeFolded();\r\n                            }\r\n                        });\r\n                    });\r\n\r\n                    // Cleanup\r\n                    scope.$on('$destroy', function ()\r\n                    {\r\n                        stateChangeSuccessEvent();\r\n                    });\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavTitleDirective()\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            compile : function (tElement)\r\n            {\r\n                tElement.addClass('ms-nav-title');\r\n\r\n                return function postLink()\r\n                {\r\n\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavButtonDirective()\r\n    {\r\n        return {\r\n            restrict: 'AE',\r\n            compile : function (tElement)\r\n            {\r\n                tElement.addClass('ms-nav-button');\r\n\r\n                return function postLink()\r\n                {\r\n\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msNavToggleDirective($rootScope, $q, $animate, $state)\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            require : '^msNav',\r\n            scope   : true,\r\n            compile : function (tElement, tAttrs)\r\n            {\r\n                tElement.addClass('ms-nav-toggle');\r\n\r\n                // Add collapsed attr\r\n                if ( angular.isUndefined(tAttrs.collapsed) )\r\n                {\r\n                    tAttrs.collapsed = true;\r\n                }\r\n\r\n                tElement.attr('collapsed', tAttrs.collapsed);\r\n\r\n                return function postLink(scope, iElement, iAttrs, MsNavCtrl)\r\n                {\r\n                    var classes = {\r\n                        expanded         : 'expanded',\r\n                        expandAnimation  : 'expand-animation',\r\n                        collapseAnimation: 'collapse-animation'\r\n                    };\r\n\r\n                    // Store all related states\r\n                    var links = iElement.find('a');\r\n                    var states = [];\r\n                    var regExp = /\\(.*\\)/g;\r\n\r\n                    angular.forEach(links, function (link)\r\n                    {\r\n                        var state = angular.element(link).attr('ui-sref');\r\n\r\n                        if ( angular.isUndefined(state) )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        // Remove any parameter definition from the state name before storing it\r\n                        state = state.replace(regExp, '');\r\n\r\n                        states.push(state);\r\n                    });\r\n\r\n                    // Store toggle-able element and its scope in the main nav controller\r\n                    MsNavCtrl.setToggleItem(iElement, scope);\r\n\r\n                    // Click handler\r\n                    iElement.children('.ms-nav-button').on('click', toggle);\r\n\r\n                    // Toggle function\r\n                    function toggle()\r\n                    {\r\n                        // If navigation is disabled, do nothing...\r\n                        if ( MsNavCtrl.isDisabled() )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        // Disable the entire navigation to prevent spamming\r\n                        MsNavCtrl.disable();\r\n\r\n                        if ( isCollapsed() )\r\n                        {\r\n                            // Clear the locked items list\r\n                            MsNavCtrl.clearLockedItems();\r\n\r\n                            // Emit pushToLockedList event\r\n                            scope.$emit('msNav::pushToLockedList');\r\n\r\n                            // Collapse everything but locked items\r\n                            $rootScope.$broadcast('msNav::collapse');\r\n\r\n                            // Expand and then...\r\n                            expand().then(function ()\r\n                            {\r\n                                // Enable the entire navigation after animations completed\r\n                                MsNavCtrl.enable();\r\n                            });\r\n                        }\r\n                        else\r\n                        {\r\n                            // Collapse with all children\r\n                            scope.$broadcast('msNav::forceCollapse');\r\n                        }\r\n                    }\r\n\r\n                    // Cleanup\r\n                    scope.$on('$destroy', function ()\r\n                    {\r\n                        iElement.children('.ms-nav-button').off('click');\r\n                    });\r\n\r\n                    /*---------------------*/\r\n                    /* Scope Events        */\r\n                    /*---------------------*/\r\n\r\n                    /**\r\n                     * Collapse everything but locked items\r\n                     */\r\n                    scope.$on('msNav::collapse', function ()\r\n                    {\r\n                        // Only collapse toggles that are not locked\r\n                        var lockedItems = MsNavCtrl.getLockedItems();\r\n                        var locked = false;\r\n\r\n                        angular.forEach(lockedItems, function (lockedItem)\r\n                        {\r\n                            if ( angular.equals(lockedItem.scope, scope) )\r\n                            {\r\n                                locked = true;\r\n                            }\r\n                        });\r\n\r\n                        if ( locked )\r\n                        {\r\n                            return;\r\n                        }\r\n\r\n                        // Collapse and then...\r\n                        collapse().then(function ()\r\n                        {\r\n                            // Enable the entire navigation after animations completed\r\n                            MsNavCtrl.enable();\r\n                        });\r\n                    });\r\n\r\n                    /**\r\n                     * Collapse everything\r\n                     */\r\n                    scope.$on('msNav::forceCollapse', function ()\r\n                    {\r\n                        // Collapse and then...\r\n                        collapse().then(function ()\r\n                        {\r\n                            // Enable the entire navigation after animations completed\r\n                            MsNavCtrl.enable();\r\n                        });\r\n                    });\r\n\r\n                    /**\r\n                     * Expand toggles that match with the current states\r\n                     */\r\n                    scope.$on('msNav::expandMatchingToggles', function ()\r\n                    {\r\n                        var currentState = $state.current.name;\r\n                        var shouldExpand = false;\r\n\r\n                        angular.forEach(states, function (state)\r\n                        {\r\n                            if ( currentState === state )\r\n                            {\r\n                                shouldExpand = true;\r\n                            }\r\n                        });\r\n\r\n                        if ( shouldExpand )\r\n                        {\r\n                            expand();\r\n                        }\r\n                        else\r\n                        {\r\n                            collapse();\r\n                        }\r\n                    });\r\n\r\n                    /**\r\n                     * Add toggle to the locked list\r\n                     */\r\n                    scope.$on('msNav::pushToLockedList', function ()\r\n                    {\r\n                        // Set expanded item on main nav controller\r\n                        MsNavCtrl.setLockedItem(iElement, scope);\r\n                    });\r\n\r\n                    /*---------------------*/\r\n                    /* Internal functions  */\r\n                    /*---------------------*/\r\n\r\n                    /**\r\n                     * Is element collapsed\r\n                     *\r\n                     * @returns {bool}\r\n                     */\r\n                    function isCollapsed()\r\n                    {\r\n                        return iElement.attr('collapsed') === 'true';\r\n                    }\r\n\r\n                    /**\r\n                     * Is element expanded\r\n                     *\r\n                     * @returns {bool}\r\n                     */\r\n                    function isExpanded()\r\n                    {\r\n                        return !isCollapsed();\r\n                    }\r\n\r\n                    /**\r\n                     * Expand the toggle\r\n                     *\r\n                     * @returns $promise\r\n                     */\r\n                    function expand()\r\n                    {\r\n                        // Create a new deferred object\r\n                        var deferred = $q.defer();\r\n\r\n                        // If the menu item is already expanded, do nothing..\r\n                        if ( isExpanded() )\r\n                        {\r\n                            // Reject the deferred object\r\n                            deferred.reject({'error': true});\r\n\r\n                            // Return the promise\r\n                            return deferred.promise;\r\n                        }\r\n\r\n                        // Set element attr\r\n                        iElement.attr('collapsed', false);\r\n\r\n                        // Grab the element to expand\r\n                        var elementToExpand = angular.element(iElement.find('ms-nav-toggle-items')[0]);\r\n\r\n                        // Move the element out of the dom flow and\r\n                        // make it block so we can get its height\r\n                        elementToExpand.css({\r\n                            'position'  : 'absolute',\r\n                            'visibility': 'hidden',\r\n                            'display'   : 'block',\r\n                            'height'    : 'auto'\r\n                        });\r\n\r\n                        // Grab the height\r\n                        var height = elementToExpand[0].offsetHeight;\r\n\r\n                        // Reset the style modifications\r\n                        elementToExpand.css({\r\n                            'position'  : '',\r\n                            'visibility': '',\r\n                            'display'   : '',\r\n                            'height'    : ''\r\n                        });\r\n\r\n                        // Animate the height\r\n                        scope.$evalAsync(function ()\r\n                        {\r\n                            $animate.animate(elementToExpand,\r\n                                {\r\n                                    'display': 'block',\r\n                                    'height' : '0px'\r\n                                },\r\n                                {\r\n                                    'height': height + 'px'\r\n                                },\r\n                                classes.expandAnimation\r\n                            ).then(\r\n                                function ()\r\n                                {\r\n                                    // Add expanded class\r\n                                    elementToExpand.addClass(classes.expanded);\r\n\r\n                                    // Clear the inline styles after animation done\r\n                                    elementToExpand.css({'height': ''});\r\n\r\n                                    // Resolve the deferred object\r\n                                    deferred.resolve({'success': true});\r\n                                }\r\n                            );\r\n                        });\r\n\r\n                        // Return the promise\r\n                        return deferred.promise;\r\n                    }\r\n\r\n                    /**\r\n                     * Collapse the toggle\r\n                     *\r\n                     * @returns $promise\r\n                     */\r\n                    function collapse()\r\n                    {\r\n                        // Create a new deferred object\r\n                        var deferred = $q.defer();\r\n\r\n                        // If the menu item is already collapsed, do nothing..\r\n                        if ( isCollapsed() )\r\n                        {\r\n                            // Reject the deferred object\r\n                            deferred.reject({'error': true});\r\n\r\n                            // Return the promise\r\n                            return deferred.promise;\r\n                        }\r\n\r\n                        // Set element attr\r\n                        iElement.attr('collapsed', true);\r\n\r\n                        // Grab the element to collapse\r\n                        var elementToCollapse = angular.element(iElement.find('ms-nav-toggle-items')[0]);\r\n\r\n                        // Grab the height\r\n                        var height = elementToCollapse[0].offsetHeight;\r\n\r\n                        // Animate the height\r\n                        scope.$evalAsync(function ()\r\n                        {\r\n                            $animate.animate(elementToCollapse,\r\n                                {\r\n                                    'height': height + 'px'\r\n                                },\r\n                                {\r\n                                    'height': '0px'\r\n                                },\r\n                                classes.collapseAnimation\r\n                            ).then(\r\n                                function ()\r\n                                {\r\n                                    // Remove expanded class\r\n                                    elementToCollapse.removeClass(classes.expanded);\r\n\r\n                                    // Clear the inline styles after animation done\r\n                                    elementToCollapse.css({\r\n                                        'display': '',\r\n                                        'height' : ''\r\n                                    });\r\n\r\n                                    // Resolve the deferred object\r\n                                    deferred.resolve({'success': true});\r\n                                }\r\n                            );\r\n                        });\r\n\r\n                        // Return the promise\r\n                        return deferred.promise;\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .directive('msInfoBar', msInfoBarDirective);\r\n\r\n    /** @ngInject */\r\n    function msInfoBarDirective($document)\r\n    {\r\n        return {\r\n            restrict   : 'E',\r\n            scope      : {},\r\n            transclude : true,\r\n            templateUrl: 'app/core/directives/ms-info-bar/ms-info-bar.html',\r\n            link       : function (scope, iElement)\r\n            {\r\n                var body = $document.find('body'),\r\n                    bodyClass = 'ms-info-bar-active';\r\n\r\n                // Add body class\r\n                body.addClass(bodyClass);\r\n\r\n                /**\r\n                 * Remove the info bar\r\n                 */\r\n                function removeInfoBar()\r\n                {\r\n                    body.removeClass(bodyClass);\r\n                    iElement.remove();\r\n                    scope.$destroy();\r\n                }\r\n\r\n                // Expose functions\r\n                scope.removeInfoBar = removeInfoBar;\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('msMaterialColorPickerController', msMaterialColorPickerController)\r\n        .directive('msMaterialColorPicker', msMaterialColorPicker);\r\n\r\n    /** @ngInject */\r\n    function msMaterialColorPickerController($scope, $mdColorPalette, $mdMenu, fuseGenerator)\r\n    {\r\n        var vm = this;\r\n        vm.palettes = $mdColorPalette; // Material Color Palette\r\n        vm.selectedPalette = false;\r\n        vm.selectedHues = false;\r\n        $scope.$selectedColor = {};\r\n\r\n        // Methods\r\n        vm.activateHueSelection = activateHueSelection;\r\n        vm.selectColor = selectColor;\r\n        vm.removeColor = removeColor;\r\n\r\n        /**\r\n         * Initialize / Watch model changes\r\n         */\r\n        $scope.$watch('ngModel', setSelectedColor);\r\n\r\n        /**\r\n         * Activate Hue Selection\r\n         * @param palette\r\n         * @param hues\r\n         */\r\n        function activateHueSelection(palette, hues)\r\n        {\r\n            vm.selectedPalette = palette;\r\n            vm.selectedHues = hues;\r\n        }\r\n\r\n        /**\r\n         * Select Color\r\n         * @type {selectColor}\r\n         */\r\n        function selectColor(palette, hue)\r\n        {\r\n            // Update Selected Color\r\n            updateSelectedColor(palette, hue);\r\n\r\n            // Update Model Value\r\n            updateModel();\r\n\r\n            // Hide The picker\r\n            $mdMenu.hide();\r\n        }\r\n\r\n        function removeColor()\r\n        {\r\n            vm.selectedColor = {\r\n                palette: '',\r\n                hue    : '',\r\n                class  : ''\r\n            };\r\n\r\n            activateHueSelection(false, false);\r\n\r\n            updateModel();\r\n        }\r\n\r\n        /**\r\n         * Set SelectedColor by model type\r\n         */\r\n        function setSelectedColor()\r\n        {\r\n            if ( !vm.modelCtrl.$viewValue || vm.modelCtrl.$viewValue === '' )\r\n            {\r\n                removeColor();\r\n                return;\r\n            }\r\n\r\n            var palette, hue;\r\n\r\n            // If ModelType Class\r\n            if ( vm.msModelType === 'class' )\r\n            {\r\n                var color = vm.modelCtrl.$viewValue.split('-');\r\n                if ( color.length >= 5 )\r\n                {\r\n                    palette = color[1] + '-' + color[2];\r\n                    hue = color[3];\r\n                }\r\n                else\r\n                {\r\n                    palette = color[1];\r\n                    hue = color[2];\r\n                }\r\n            }\r\n\r\n            // If ModelType Object\r\n            else if ( vm.msModelType === 'obj' )\r\n            {\r\n                palette = vm.modelCtrl.$viewValue.palette;\r\n                hue = vm.modelCtrl.$viewValue.hue || 500;\r\n            }\r\n\r\n            // Update Selected Color\r\n            updateSelectedColor(palette, hue);\r\n        }\r\n\r\n        /**\r\n         * Update Selected Color\r\n         * @param palette\r\n         * @param hue\r\n         */\r\n        function updateSelectedColor(palette, hue)\r\n        {\r\n            vm.selectedColor = {\r\n                palette     : palette,\r\n                hue         : hue,\r\n                class       : 'md-' + palette + '-' + hue + '-bg',\r\n                bgColorValue: fuseGenerator.rgba(vm.palettes[palette][hue].value),\r\n                fgColorValue: fuseGenerator.rgba(vm.palettes[palette][hue].contrast)\r\n            };\r\n\r\n            // If Model object not Equals the selectedColor update it\r\n            // it can be happen when the model only have pallete and hue values\r\n            if ( vm.msModelType === 'obj' && !angular.equals(vm.selectedColor, vm.modelCtrl.$viewValue) )\r\n            {\r\n                // Update Model Value\r\n                updateModel();\r\n            }\r\n\r\n            activateHueSelection(palette, vm.palettes[palette]);\r\n\r\n            $scope.$selectedColor = vm.selectedColor;\r\n        }\r\n\r\n        /**\r\n         * Update Model Value by model type\r\n         */\r\n        function updateModel()\r\n        {\r\n            if ( vm.msModelType === 'class' )\r\n            {\r\n                vm.modelCtrl.$setViewValue(vm.selectedColor.class);\r\n            }\r\n            else if ( vm.msModelType === 'obj' )\r\n            {\r\n                vm.modelCtrl.$setViewValue(vm.selectedColor);\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msMaterialColorPicker()\r\n    {\r\n        return {\r\n            require    : ['msMaterialColorPicker', 'ngModel'],\r\n            restrict   : 'E',\r\n            scope      : {\r\n                ngModel    : '=',\r\n                msModelType: '@?'\r\n            },\r\n            controller : 'msMaterialColorPickerController as vm',\r\n            transclude : true,\r\n            templateUrl: 'app/core/directives/ms-material-color-picker/ms-material-color-picker.html',\r\n            link       : function (scope, element, attrs, controllers, transclude)\r\n            {\r\n                var ctrl = controllers[0];\r\n\r\n                /**\r\n                 *  Pass model controller to directive controller\r\n                 */\r\n                ctrl.modelCtrl = controllers[1];\r\n\r\n                /**\r\n                 * ModelType: 'obj', 'class'(default)\r\n                 * @type {string|string}\r\n                 */\r\n                ctrl.msModelType = scope.msModelType || 'class';\r\n\r\n                transclude(scope, function (clone)\r\n                {\r\n                    clone = clone.filter(function (i, el)\r\n                    {\r\n                        return ( el.nodeType === 1 ) ? true : false;\r\n                    });\r\n\r\n                    if ( clone.length )\r\n                    {\r\n                        element.find('ms-color-picker-button').replaceWith(clone);\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('msMasonryController', msMasonryController)\r\n        .directive('msMasonry', msMasonry)\r\n        .directive('msMasonryItem', msMasonryItem);\r\n\r\n    /** @ngInject */\r\n    function msMasonryController($scope, $window, $mdMedia, $timeout)\r\n    {\r\n        var vm = this,\r\n            defaultOpts = {\r\n                columnCount     : 5,\r\n                respectItemOrder: false,\r\n                reLayoutDebounce: 400,\r\n                responsive      : {\r\n                    md: 3,\r\n                    sm: 2,\r\n                    xs: 1\r\n                }\r\n            },\r\n            reLayoutTimeout = true;\r\n\r\n        vm.options = null;\r\n        vm.container = [];\r\n        vm.containerPos = '';\r\n        vm.columnWidth = '';\r\n        vm.items = [];\r\n\r\n        // Methods\r\n        vm.reLayout = reLayout;\r\n        vm.initialize = initialize;\r\n        vm.waitImagesLoaded = waitImagesLoaded;\r\n\r\n        function initialize()\r\n        {\r\n            vm.options = !vm.options ? defaultOpts : angular.extend(defaultOpts, vm.options);\r\n\r\n\r\n            watchContainerResize();\r\n        }\r\n\r\n        $scope.$on('msMasonry:relayout', function ()\r\n        {\r\n            reLayout();\r\n        });\r\n\r\n        function waitImagesLoaded(element, callback)\r\n        {\r\n            if ( typeof imagesLoaded !== 'undefined' )\r\n            {\r\n                var imgLoad = $window.imagesLoaded(element);\r\n\r\n                imgLoad.on('done', function ()\r\n                {\r\n                    callback();\r\n                });\r\n            }\r\n            else\r\n            {\r\n                callback();\r\n            }\r\n        }\r\n\r\n        function watchContainerResize()\r\n        {\r\n            $scope.$watch(\r\n                function ()\r\n                {\r\n                    return vm.container.width();\r\n                },\r\n                function (newValue, oldValue)\r\n                {\r\n                    if ( newValue !== oldValue )\r\n                    {\r\n                        reLayout();\r\n                    }\r\n                }\r\n            );\r\n        }\r\n\r\n        function reLayout()\r\n        {\r\n            // Debounce for relayout\r\n            if ( reLayoutTimeout )\r\n            {\r\n                $timeout.cancel(reLayoutTimeout);\r\n            }\r\n\r\n            reLayoutTimeout = $timeout(function ()\r\n            {\r\n                start();\r\n\r\n                $scope.$broadcast('msMasonry:relayoutFinished');\r\n\r\n            }, vm.options.reLayoutDebounce);\r\n\r\n            // Start relayout\r\n            function start()\r\n            {\r\n                vm.containerPos = vm.container[0].getBoundingClientRect();\r\n\r\n                updateColumnOptions();\r\n\r\n                $scope.$broadcast('msMasonry:relayoutStarted');\r\n\r\n                vm.items = vm.container.find('ms-masonry-item');\r\n\r\n                //initialize lastRowBottomArr\r\n                var referenceArr = Array.apply(null, new Array(vm.columnCount)).map(function ()\r\n                {\r\n                    return 0;\r\n                });\r\n\r\n                // set item positions\r\n                for ( var i = 0; i < vm.items.length; i++ )\r\n                {\r\n                    var item = vm.items[i],\r\n                        xPos, yPos, column, refTop;\r\n\r\n                    item = angular.element(item);\r\n\r\n                    if ( item.scope() )\r\n                    {\r\n                        item.scope().$broadcast('msMasonryItem:startReLayout');\r\n                    }\r\n\r\n                    item.css({'width': vm.columnWidth});\r\n\r\n                    if ( vm.options.respectItemOrder )\r\n                    {\r\n                        column = i % vm.columnCount;\r\n                        refTop = referenceArr[column];\r\n                    }\r\n                    else\r\n                    {\r\n                        refTop = Math.min.apply(Math, referenceArr);\r\n                        column = referenceArr.indexOf(refTop);\r\n                    }\r\n\r\n                    referenceArr[column] = refTop + item[0].getBoundingClientRect().height;\r\n\r\n                    xPos = Math.round(column * vm.columnWidth);\r\n                    yPos = refTop;\r\n\r\n                    item.css({'transform': 'translate3d(' + xPos + 'px,' + yPos + 'px,0px)'});\r\n                    item.addClass('placed');\r\n\r\n                    if ( item.scope() )\r\n                    {\r\n                        item.scope().$broadcast('msMasonryItem:finishReLayout');\r\n                    }\r\n                }\r\n            }\r\n        }\r\n\r\n        function updateColumnOptions()\r\n        {\r\n            vm.columnCount = vm.options.columnCount;\r\n\r\n            if ( $mdMedia('gt-md') )\r\n            {\r\n                vm.columnCount = vm.options.columnCount;\r\n            }\r\n            else if ( $mdMedia('md') )\r\n            {\r\n                vm.columnCount = (vm.columnCount > vm.options.responsive.md ? vm.options.responsive.md : vm.columnCount);\r\n            }\r\n            else if ( $mdMedia('sm') )\r\n            {\r\n                vm.columnCount = (vm.columnCount > vm.options.responsive.sm ? vm.options.responsive.sm : vm.columnCount);\r\n            }\r\n            else\r\n            {\r\n                vm.columnCount = vm.options.responsive.xs;\r\n            }\r\n\r\n            vm.columnWidth = vm.containerPos.width / vm.columnCount;\r\n\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msMasonry($timeout)\r\n    {\r\n        return {\r\n            restrict  : 'AEC',\r\n            controller: 'msMasonryController',\r\n            compile   : compile\r\n        };\r\n        function compile(element, attributes)\r\n        {\r\n            return {\r\n                pre : function preLink(scope, iElement, iAttrs, controller)\r\n                {\r\n                    controller.options = angular.fromJson(attributes.options || '{}');\r\n                    controller.container = element;\r\n                },\r\n                post: function postLink(scope, iElement, iAttrs, controller)\r\n                {\r\n                    $timeout(function ()\r\n                    {\r\n                        controller.initialize();\r\n                    });\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msMasonryItem()\r\n    {\r\n        return {\r\n            restrict: 'AEC',\r\n            require : '^msMasonry',\r\n            priority: 1,\r\n            link    : link\r\n        };\r\n\r\n        function link(scope, element, attributes, controller)\r\n        {\r\n            controller.waitImagesLoaded(element, function ()\r\n            {\r\n                controller.reLayout();\r\n\r\n            });\r\n\r\n            scope.$on('msMasonryItem:finishReLayout', function ()\r\n            {\r\n                scope.$watch(function ()\r\n                {\r\n                    return element.height();\r\n                }, function (newVal, oldVal)\r\n                {\r\n                    if ( newVal !== oldVal )\r\n                    {\r\n                        controller.reLayout();\r\n                    }\r\n                });\r\n            });\r\n\r\n            element.on('$destroy', function ()\r\n            {\r\n                controller.reLayout();\r\n            });\r\n        }\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .directive('msCard', msCardDirective);\r\n\r\n    /** @ngInject */\r\n    function msCardDirective()\r\n    {\r\n        return {\r\n            restrict: 'E',\r\n            scope   : {\r\n                templatePath: '=template',\r\n                card        : '=ngModel',\r\n                vm          : '=viewModel'\r\n            },\r\n            template: '<div class=\"ms-card-content-wrapper\" ng-include=\"templatePath\" onload=\"cardTemplateLoaded()\"></div>',\r\n            compile : function (tElement)\r\n            {\r\n                // Add class\r\n                tElement.addClass('ms-card');\r\n\r\n                return function postLink(scope, iElement)\r\n                {\r\n                    // Methods\r\n                    scope.cardTemplateLoaded = cardTemplateLoaded;\r\n\r\n                    //////////\r\n\r\n                    /**\r\n                     * Emit cardTemplateLoaded event\r\n                     */\r\n                    function cardTemplateLoaded()\r\n                    {\r\n                        scope.$emit('msCard::cardTemplateLoaded', iElement);\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .provider('msDatepickerFixConfig', msDatepickerFixConfigProvider)\r\n        .directive('msDatepickerFix', msDatepickerFix);\r\n\r\n    /** @ngInject */\r\n    function msDatepickerFixConfigProvider()\r\n    {\r\n        var service = this;\r\n\r\n        // Default configuration\r\n        var defaultConfig = {\r\n            // To view\r\n            formatter: function (val)\r\n            {\r\n                if ( !val )\r\n                {\r\n                    return '';\r\n                }\r\n\r\n                return val === '' ? val : new Date(val);\r\n            },\r\n            // To model\r\n            parser   : function (val)\r\n            {\r\n                if ( !val )\r\n                {\r\n                    return '';\r\n                }\r\n\r\n                return moment(val).add(moment(val).utcOffset(), 'm').toDate();\r\n            }\r\n        };\r\n\r\n        // Methods\r\n        service.config = config;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Extend default configuration with the given one\r\n         *\r\n         * @param configuration\r\n         */\r\n        function config(configuration)\r\n        {\r\n            defaultConfig = angular.extend({}, defaultConfig, configuration);\r\n        }\r\n\r\n        /**\r\n         * Service\r\n         */\r\n        service.$get = function ()\r\n        {\r\n            return defaultConfig;\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msDatepickerFix(msDatepickerFixConfig)\r\n    {\r\n        return {\r\n            require : 'ngModel',\r\n            priority: 1,\r\n            link    : function (scope, elem, attrs, ngModel)\r\n            {\r\n                ngModel.$formatters.push(msDatepickerFixConfig.formatter); // to view\r\n                ngModel.$parsers.push(msDatepickerFixConfig.parser); // to model\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('MsFormWizardController', MsFormWizardController)\r\n        .directive('msFormWizard', msFormWizardDirective)\r\n        .directive('msFormWizardForm', msFormWizardFormDirective);\r\n\r\n    /** @ngInject */\r\n    function MsFormWizardController()\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.forms = [];\r\n        vm.selectedIndex = 0;\r\n\r\n        // Methods\r\n        vm.registerForm = registerForm;\r\n\r\n        vm.previousStep = previousStep;\r\n        vm.nextStep = nextStep;\r\n        vm.firstStep = firstStep;\r\n        vm.lastStep = lastStep;\r\n\r\n        vm.totalSteps = totalSteps;\r\n        vm.isFirstStep = isFirstStep;\r\n        vm.isLastStep = isLastStep;\r\n\r\n        vm.currentStepInvalid = currentStepInvalid;\r\n        vm.previousStepInvalid = previousStepInvalid;\r\n        vm.formsIncomplete = formsIncomplete;\r\n        vm.resetForm = resetForm;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Register form\r\n         *\r\n         * @param form\r\n         */\r\n        function registerForm(form)\r\n        {\r\n            vm.forms.push(form);\r\n        }\r\n\r\n        /**\r\n         * Go to previous step\r\n         */\r\n        function previousStep()\r\n        {\r\n            if ( isFirstStep() )\r\n            {\r\n                return;\r\n            }\r\n\r\n            vm.selectedIndex--;\r\n        }\r\n\r\n        /**\r\n         * Go to next step\r\n         */\r\n        function nextStep()\r\n        {\r\n            if ( isLastStep() )\r\n            {\r\n                return;\r\n            }\r\n\r\n            vm.selectedIndex++;\r\n        }\r\n\r\n        /**\r\n         * Go to first step\r\n         */\r\n        function firstStep()\r\n        {\r\n            vm.selectedIndex = 0;\r\n        }\r\n\r\n        /**\r\n         * Go to last step\r\n         */\r\n        function lastStep()\r\n        {\r\n            vm.selectedIndex = totalSteps() - 1;\r\n        }\r\n\r\n        /**\r\n         * Return total steps\r\n         *\r\n         * @returns {int}\r\n         */\r\n        function totalSteps()\r\n        {\r\n            return vm.forms.length;\r\n        }\r\n\r\n        /**\r\n         * Is first step?\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isFirstStep()\r\n        {\r\n            return vm.selectedIndex === 0;\r\n        }\r\n\r\n        /**\r\n         * Is last step?\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function isLastStep()\r\n        {\r\n            return vm.selectedIndex === totalSteps() - 1;\r\n        }\r\n\r\n        /**\r\n         * Is current step invalid?\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function currentStepInvalid()\r\n        {\r\n            return angular.isDefined(vm.forms[vm.selectedIndex]) && vm.forms[vm.selectedIndex].$invalid;\r\n        }\r\n\r\n        /**\r\n         * Is previous step invalid?\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function previousStepInvalid()\r\n        {\r\n            return vm.selectedIndex > 0 && angular.isDefined(vm.forms[vm.selectedIndex - 1]) && vm.forms[vm.selectedIndex - 1].$invalid;\r\n        }\r\n\r\n        /**\r\n         * Check if there is any incomplete forms\r\n         *\r\n         * @returns {boolean}\r\n         */\r\n        function formsIncomplete()\r\n        {\r\n            for ( var x = 0; x < vm.forms.length; x++ )\r\n            {\r\n                if ( vm.forms[x].$invalid )\r\n                {\r\n                    return true;\r\n                }\r\n            }\r\n\r\n            return false;\r\n        }\r\n\r\n        /**\r\n         * Reset form\r\n         */\r\n        function resetForm()\r\n        {\r\n            // Go back to the first step\r\n            vm.selectedIndex = 0;\r\n\r\n            // Make sure all the forms are back in the $pristine & $untouched status\r\n            for ( var x = 0; x < vm.forms.length; x++ )\r\n            {\r\n                vm.forms[x].$setPristine();\r\n                vm.forms[x].$setUntouched();\r\n            }\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msFormWizardDirective()\r\n    {\r\n        return {\r\n            restrict  : 'E',\r\n            scope     : true,\r\n            controller: 'MsFormWizardController as msWizard',\r\n            compile   : function (tElement)\r\n            {\r\n                tElement.addClass('ms-form-wizard');\r\n\r\n                return function postLink()\r\n                {\r\n\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msFormWizardFormDirective()\r\n    {\r\n        return {\r\n            restrict: 'A',\r\n            require : ['form', '^msFormWizard'],\r\n            compile : function (tElement)\r\n            {\r\n                tElement.addClass('ms-form-wizard-form');\r\n\r\n                return function postLink(scope, iElement, iAttrs, ctrls)\r\n                {\r\n                    var formCtrl = ctrls[0],\r\n                        MsFormWizardCtrl = ctrls[1];\r\n\r\n                    MsFormWizardCtrl.registerForm(formCtrl);\r\n                };\r\n            }\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.notify', [])\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config()\r\n    {\r\n\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.notify')\r\n        .factory(\"NotifyService\", NotifyService);\r\n\r\n\r\n    /** @ngInject */\r\n    function NotifyService ( $mdToast ) {\r\n        var service = {\r\n            errorMessage: showErrorMessage,\r\n            successMessage: showSuccessMessage\r\n        };\r\n\r\n        return service;\r\n\r\n        /////////////\r\n\r\n        /**\r\n         * Muestra un mensaje simple de error\r\n         */\r\n        function showErrorMessage ( message )\r\n        {\r\n            //Damos mas tiempo a lo mensajes mas largos\r\n            var time=2500;\r\n            time+=(message.length*20);\r\n            $mdToast.show(\r\n                $mdToast.simple()\r\n                    .textContent(message)\r\n                    .theme('toast-error')\r\n                    .hideDelay(time)\r\n            );\r\n        }\r\n\r\n        /**\r\n         * Muestra un mensaje simple de éxito\r\n         */\r\n        function showSuccessMessage ( message )\r\n        {\r\n            //Damos mas tiempo a lo mensajes mas largos\r\n            var time=2500;\r\n            time+=(message.length*20);\r\n            $mdToast.show(\r\n                $mdToast.simple()\r\n                    .textContent(message)\r\n                    .theme('toast-success')\r\n                    .hideDelay(time)\r\n            );\r\n        }\r\n\r\n\r\n\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.debounce', [])\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config()\r\n    {\r\n\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.debounce')\r\n        .factory(\"DebounceService\", DebounceService);\r\n\r\n\r\n    /** @ngInject */\r\n    function DebounceService ( $timeout, $rootScope ) {\r\n\r\n        return debounce;\r\n\r\n        /////////////\r\n\r\n        /**\r\n         * Muestra un mensaje simple de error\r\n         */\r\n        function debounce (callback, interval) {\r\n            var timeout = null;\r\n            return function(o,n) {\r\n                //solo aplicamos esto si realmente cambian los filtros\r\n                if(o!==n){\r\n                    $rootScope.loadingProgress = true;\r\n                    $timeout.cancel(timeout);\r\n                    timeout = $timeout(function () {\r\n                        callback.apply(this, arguments).then(function(){\r\n                            $rootScope.loadingProgress = false;\r\n                        });\r\n                    }, interval);\r\n                }\r\n            };\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters', []\r\n        )\r\n        .config(config)\r\n        .filter('formatTime', formatTime);\r\n\r\n    /** @ngInject */\r\n    function config() {\r\n\r\n\r\n    }\r\n\r\n    function formatTime($filter) {\r\n        return function (time, format) {\r\n            var parts = time.split(':');\r\n            var date = new Date(0, 0, 0, parts[0], parts[1], parts[2]);\r\n            return $filter('date')(date, format || 'HH:mm');\r\n        };\r\n\r\n    }\r\n})();\r\n\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('vehicle', vehicle);\r\n\r\n    function vehicle() {\r\n        return function(text) {\r\n            if(text){\r\n                var arr=text.split(\" \");\r\n                var t='';\r\n                for(var i=0; i<arr.length;i++){\r\n                    t+=arr[i].split(\"___\")[0]+\" \";\r\n                }\r\n                return t;\r\n            }\r\n            return text;\r\n        }\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('unique', unique);\r\n\r\n    function unique() {\r\n\r\n        return function (collection, keyname) {\r\n\r\n            // we define our output and keys array;\r\n            var output = [],\r\n                keys = [];\r\n\r\n            // we utilize angular's foreach function\r\n            // this takes in our original collection and an iterator function\r\n            angular.forEach(collection, function (item) {\r\n                // we check to see whether our object exists\r\n                var key = item[keyname];\r\n                // if it's not already part of our keys array\r\n                if (keys.indexOf(key) === -1) {\r\n                    // add it to our keys array\r\n                    keys.push(key);\r\n                    // push this item to our final output array\r\n                    output.push(item);\r\n                }\r\n            });\r\n            // return our array which should be devoid of\r\n            // any duplicates\r\n            return output;\r\n        }\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('syntaxHighlight', syntaxHighlight);\r\n\r\n    function syntaxHighlight() {\r\n        return function(json){\r\n            if(typeof json === 'string' && json.charAt(0)==='{'){\r\n                json = JSON.parse(json);\r\n            }else{\r\n                return json;\r\n            }\r\n            if (typeof json != 'string') {\r\n                 json = JSON.stringify(json, undefined, 2);\r\n            }\r\n\r\n            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');\r\n            return json.replace(/(\"(\\\\u[a-zA-Z0-9]{4}|\\\\[^u]|[^\\\\\"])*\"(\\s*:)?|\\b(true|false|null)\\b|-?\\d+(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)/g, function (match) {\r\n                var cls = 'number';\r\n                if (/^\"/.test(match)) {\r\n                    if (/:$/.test(match)) {\r\n                        cls = 'key';\r\n                    } else {\r\n                        cls = 'string';\r\n                    }\r\n                } else if (/true|false/.test(match)) {\r\n                    cls = 'boolean';\r\n                } else if (/null/.test(match)) {\r\n                    cls = 'null';\r\n                }\r\n                return '<span class=\"' + cls + '\">' + match + '</span>';\r\n            });\r\n        };\r\n    }\r\n})();\r\n\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('promiseStatus', promiseStatus);\r\n\r\n    function promiseStatus() {\r\n        return function(promise) {\r\n            var status = {\r\n                inProgress: true,\r\n                resolved: false,\r\n                rejected: false\r\n            };\r\n            promise\r\n                .then(function() {\r\n                    status.resolved = true;\r\n                })\r\n                .catch(function() {\r\n                    status.rejected = true;\r\n                })\r\n                .finally(function() {\r\n                    status.inProgress = false;\r\n                });\r\n            return status;\r\n        }\r\n    }\r\n})();\r\n\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('level', level);\r\n\r\n    function level(gettextCatalog) {\r\n        return function(input) {\r\n            if(input===\"initial\"){\r\n                return gettextCatalog.getString(\"Inicial\");\r\n            }\r\n            if(input===\"medium\"){\r\n                return gettextCatalog.getString(\"Medio\");\r\n            }\r\n            if(input===\"advanced\"){\r\n                return gettextCatalog.getString(\"Avanzado\");\r\n            }\r\n            return input;\r\n        }\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('findBodyHtml', findBodyHtml);\r\n\r\n    function findBodyHtml() {\r\n        return function(html){\r\n            var strVal = html; //obviously, this line can be omitted - just assign your string to the name strVal or put your string var in the pattern.exec call below\r\n            var pattern = /<body[^>]*>((.|[\\n\\r])*)<\\/body>/im;\r\n            var array_matches = pattern.exec(strVal);\r\n\r\n            return array_matches || html;\r\n        };\r\n    }\r\n})();\r\n\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('durationHumanize', durationHumanize);\r\n\r\n    function durationHumanize(moment) {\r\n        return function(input) {\r\n            return moment.duration(input, \"minutes\").format(\"D [días], h [horas], m [minutos]\");\r\n        }\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.filters')\r\n        .filter('currency6', currency6);\r\n\r\n    function currency6(currencyFilter) {\r\n        return function(amount){\r\n            return currencyFilter(amount,'€',6);\r\n        }\r\n    }\r\n})();\r\n\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.factory', [])\r\n        .factory('utils', utils);\r\n\r\n    function utils(localStorageService, DebounceService, $state) {\r\n        return  {\r\n            filtersAndOrdering : function(scope, vm, itemOrdering, service, filtered){\r\n                vm.ordering = localStorageService.get(itemOrdering);\r\n                scope.$watchCollection('vm.ordering', function (newValue, oldValue) {\r\n                    if(newValue !== oldValue) {\r\n                        if(vm.ordering !== undefined){\r\n                            localStorageService.set(itemOrdering, vm.ordering);\r\n                        }\r\n                        if (filtered){\r\n                            DebounceService(service.listFiltered, 300)();\r\n                        }else{\r\n                            DebounceService(service.list, 300)();\r\n                        }\r\n                    }\r\n                });\r\n\r\n                // Cambios en el número de páginas\r\n                scope.$watch('config.itemsPerPage', function (newValue, oldValue) {\r\n                    if (newValue !== oldValue){\r\n                        if (filtered){\r\n                            DebounceService(service.listFiltered, 300)();\r\n                        }else{\r\n                            DebounceService(service.list, 300)();\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        }\r\n    }\r\n})();\r\n\n\r\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.factory', [])\r\n        .factory('cacheFactory', cacheFactory);\r\n\r\n    function cacheFactory($cacheFactory) {\r\n        var cache = {\r\n          usersService:$cacheFactory('usersService'),\r\n          concessionairesService:$cacheFactory('concessionairesService'),\r\n          originsService:$cacheFactory('originsService'),\r\n          channelsService:$cacheFactory('channelsService'),\r\n          vehiclesService:$cacheFactory('vehiclesService'),\r\n          taskTypesService:$cacheFactory('taskTypesService'),\r\n        };\r\n\r\n        return  cache;\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives', [])\r\n        .directive('tableAjax', tableAjax)\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config()\r\n    {\r\n\r\n    }\r\n\r\n    function tableAjax($compile,$timeout) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: {\r\n                tableAjax: '='\r\n            },\r\n            link: function (scope, elem, attrs) {\r\n\r\n                var title_table=$(elem).closest(\".md-card\").find(\".md-card-toolbar .md-card-toolbar-heading-text\").text();\r\n\r\n                if(!window.location.host.includes(\"localhost\")){\r\n                    $.fn.dataTableExt.sErrMode = function(oSettings, iLevel, sMesg){\r\n                        console.log(oSettings, iLevel, sMesg);\r\n                    };\r\n                }\r\n\r\n                scope.$watch('tableAjax.data', function (newVal,oldVal) {\r\n                    if(newVal!==oldVal){\r\n                        var numPage=table_tableTools.page();\r\n                        table_tableTools.clear().draw();\r\n                        table_tableTools.rows.add(newVal); // Add new data\r\n                        table_tableTools.columns.adjust().draw(); // Redraw the DataTable\r\n                        if(newVal.length===oldVal.length){\r\n                            table_tableTools.page(numPage).draw( 'page' );\r\n                        }\r\n                        else if(newVal.length>oldVal.length){\r\n                            var data = table_tableTools.rows().data();\r\n                            var id=newVal[newVal.length-1].id;\r\n                            var pos=-1;\r\n                            for(var i in data){\r\n                                if(data[i].id && data[i].id===id){\r\n                                    pos=i;\r\n                                }\r\n                            }\r\n                            if(pos!==-1){\r\n                                var page=pos/table_tableTools.page.len();\r\n                                page=Math.trunc(page);\r\n                                table_tableTools.page(page).draw( 'page' );\r\n                            }\r\n                        }\r\n                    }\r\n\r\n                });\r\n\r\n                scope.$watch('tableAjax.reload', function (newVal,oldVal) {\r\n                    if(newVal && newVal!==oldVal){\r\n                        table_tableTools.ajax.reload();\r\n                        scope.tableAjax.reload=false;\r\n                    }\r\n                },true);\r\n\r\n                function collect() {\r\n                  var ret = {};\r\n                  var len = arguments.length;\r\n                  for (var i=0; i<len; i++) {\r\n                    for (var p in arguments[i]) {\r\n                      if (arguments[i].hasOwnProperty(p)) {\r\n                        ret[p] = arguments[i][p];\r\n                      }\r\n                    }\r\n                  }\r\n                  return ret;\r\n                }\r\n\r\n                var $dt_tableTools = $(elem);\r\n                if ($dt_tableTools.length) {\r\n\r\n                    var obj=\r\n                        {\r\n                            lengthMenu: [[10, 25, 50, 100, -1], [10, 25, 50, 100, \"Todos\"]],\r\n                            \"language\": {\r\n                                \"sProcessing\": '<div id=\"page_preloader\" class=\"loaddatatable\" style=\"display: block;opacity:1;width: 200px;height: 200px;margin-top: -100px;margin-left: -100px;top: 50%;left: 50%;border: 1px solid #ccc;\"><img src=\"assets/img/page_preloader.gif\" alt=\"\"></div>',\r\n                                \"sLengthMenu\": \"Mostrar\"+\" _MENU_ \"+\"registros\",\r\n                                \"sZeroRecords\": \"No se encontraron resultados\",\r\n                                \"sEmptyTable\": \"Ningún dato disponible en esta tabla\",\r\n                                \"sInfo\": \"Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros\",\r\n                                \"sInfoEmpty\": \"Mostrando registros del 0 al 0 de un total de 0 registros\",\r\n                                \"sInfoFiltered\": \"(filtrado de un total de _MAX_ registros)\",\r\n                                \"sInfoPostFix\": \"\",\r\n                                \"sSearch\": \"Buscar\"+\":\",\r\n                                \"sUrl\": \"\",\r\n                                \"sInfoThousands\": \",\",\r\n                                \"sLoadingRecords\": '<div id=\"page_preloader\" class=\"loaddatatable\" style=\"display: block;opacity:1;width: 200px;height: 200px;margin-top: -100px;margin-left: -100px;top: 50%;left: 50%;border: 1px solid #ccc;\"><img src=\"assets/img/page_preloader.gif\" alt=\"\"></div>',\r\n                                \"oPaginate\": {\r\n                                    \"sFirst\": \"Primero\",\r\n                                    \"sLast\": \"Último\",\r\n                                    \"sNext\": \"Siguiente\",\r\n                                    \"sPrevious\": \"Anterior\"\r\n                                },\r\n                                \"oAria\": {\r\n                                    \"sSortAscending\": \": \"+\"Activar para ordenar la columna de manera ascendente\",\r\n                                    \"sSortDescending\": \": \"+\"Activar para ordenar la columna de manera descendente\"\r\n                                }\r\n                            }\r\n                        };\r\n\r\n                    obj = collect(obj,scope.tableAjax);\r\n                    var table_tableTools = $dt_tableTools.DataTable(obj);\r\n\r\n                    var createButtons=function(){\r\n                        $(\".DTTT.uk-text-right\").remove();\r\n                        var tt = new $.fn.dataTable.TableTools(table_tableTools, {\r\n                            \"sSwfPath\": \"bower_components/datatables-tabletools/swf/copy_csv_xls_pdf.swf\",\r\n                            \"aButtons\": [\r\n                                {\r\n                                    \"sExtends\": \"copy\",\r\n                                    \"sButtonClass\": \"md-raised md-background md-button md-default-theme md-ink-ripple\",\r\n                                    \"sButtonText\": \"Copiar\"\r\n                                },\r\n                                {\r\n                                    \"sExtends\": \"xls\",\r\n                                    \"sButtonClass\": \"md-raised md-background md-button md-default-theme md-ink-ripple\",\r\n                                    \"sButtonText\": \"Excel\",\r\n                                    \"fnCellRender\": function ( sValue, iColumn, nTr, iDataIndex ) {\r\n                                        return sValue;\r\n                                    },\r\n                                    \"sFileName\": \"*.xls\"\r\n                                },\r\n                                {\r\n                                    \"sExtends\": \"csv\",\r\n                                    \"sButtonClass\": \"md-raised md-background md-button md-default-theme md-ink-ripple\",\r\n                                    \"sButtonText\": \"CSV\",\r\n                                    \"fnCellRender\": function ( sValue, iColumn, nTr, iDataIndex ) {\r\n                                        return sValue;\r\n                                    }\r\n                                }\r\n                            ]\r\n\r\n\r\n                        });\r\n                        // $(tt.fnContainer()).insertBefore($dt_tableTools.closest('.content-card').find('.toolbar .options-datatable'));\r\n                        $dt_tableTools.closest('.content-card').find('.toolbar .options-datatable').append($(tt.fnContainer()));\r\n                        $(\"a.DTTT_button\").removeClass(\"DTTT_button\");\r\n                    };\r\n                    $timeout(function(){\r\n                        createButtons();\r\n                    });\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives')\r\n        .directive('uniqueEmail', uniqueEmail);\r\n\r\n    /** @ngInject */\r\n    function uniqueEmail(api, $q) {\r\n        return {\r\n            require: 'ngModel',\r\n            link: function (scope, element, attrs, ctrl) {\r\n                ctrl.$asyncValidators.unique = function (modelValue, viewValue) {\r\n                    var deferred = $q.defer();\r\n\r\n                    api.user.emailCheck({email: viewValue}, function(data){\r\n                        if (data.exists){\r\n                            deferred.reject();\r\n                        } else {\r\n                            deferred.resolve();\r\n                        }\r\n                    });\r\n\r\n                    return deferred.promise;\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\r\n\n/*\r\n * Angular Fixed Table Header\r\n * https://github.com/daniel-nagy/fixed-table-header\r\n * @license MIT\r\n * v0.2.1\r\n */\r\n\r\n(function (window, angular, undefined) {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives')\r\n        .directive('tableFixedHeader', tableFixedHeader);\r\n\r\n    /** @ngInject */\r\n    function tableFixedHeader($compile, $window) {\r\n        return {\r\n            compile: function (element) {\r\n                var table = {\r\n                    clone: element.find(\"table\").clone(),\r\n                    original: element.find(\"table\")\r\n                };\r\n\r\n                var container = element;\r\n\r\n                element.css('position', 'relative');\r\n                table.clone.css({\r\n                    position: 'absolute',\r\n                    'z-index':9999\r\n                });\r\n\r\n\r\n                return function postLink(scope) {\r\n                    table.clone.find(\"tbody\").remove();\r\n                    container.before(table.clone);\r\n\r\n                    var header = {\r\n                        clone: table.clone.find(\"thead\"),\r\n                        original: table.original.find(\"thead\")\r\n                    };\r\n\r\n                    function cells() {\r\n                        return header.clone.find('th').length;\r\n                    }\r\n\r\n                    function getCells(node) {\r\n                        return Array.prototype.map.call(node.find('th'), function (cell) {\r\n                            return angular.element(cell);\r\n                        });\r\n                    }\r\n\r\n                    function updateCells() {\r\n                        var cells = {\r\n                            clone: getCells(header.clone),\r\n                            original: getCells(header.original)\r\n                        };\r\n\r\n\r\n                        cells.clone.forEach(function (clone, index) {\r\n                            if(clone.data('isClone')) {\r\n                                return;\r\n                            }\r\n\r\n                            // prevent duplicating watch listeners\r\n                            clone.data('isClone', true);\r\n\r\n                            var cell = cells.original[index];\r\n                            var style = $window.getComputedStyle(cell[0]);\r\n\r\n                            var setWidth = function () {\r\n                                clone.css({minWidth: style.width, maxWidth: style.width});\r\n                            };\r\n\r\n                            var getWidth = function () {\r\n                                return style.width;\r\n                            };\r\n\r\n                            var listener = scope.$watch(getWidth, setWidth);\r\n\r\n                            $window.addEventListener('resize', setWidth);\r\n\r\n                            clone.on('$destroy', function () {\r\n                                listener();\r\n                                $window.removeEventListener('resize', setWidth);\r\n                            });\r\n\r\n                            cell.on('$destroy', function () {\r\n                                clone.remove();\r\n                            });\r\n                        });\r\n                    }\r\n\r\n                    scope.$watch(cells, updateCells);\r\n\r\n                    $compile(table.clone)(scope);\r\n                }\r\n            }\r\n        };\r\n    }\r\n})(window, angular);\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives')\r\n        .controller('StarsController', StarsController)\r\n        .directive('stars', starsDirective);\r\n    \r\n    /** @ngInject */\r\n    function StarsController($attrs, $scope, $timeout, gettextCatalog) {\r\n        var vm = this;\r\n    }\r\n\r\n    /** @ngInject */\r\n    function starsDirective(api, $q) {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {},\r\n            replace: true,\r\n            bindToController: {\r\n                score: '=score',\r\n            },\r\n            controller: 'StarsController as Stars',\r\n            template: '<div class=\"tags\" layout=\"row\" layout-align=\"start center\" layout-wrap>'+\r\n                                        '<div class=\"ntag\" layout=\"row\" layout-align=\"start center\">'+\r\n                                            '<md-icon ng-if=\"Stars.score <=0.5\" md-font-icon=\"{{Stars.score >0 ? \\'icon-star-half\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                            '<md-icon ng-if=\"Stars.score >0.5\" md-font-icon=\"{{Stars.score >0 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                            '<md-icon ng-if=\"Stars.score <=1.5\" md-font-icon=\"{{Stars.score >1 ? \\'icon-star-half\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                            '<md-icon ng-if=\"Stars.score >1.5\" md-font-icon=\"{{Stars.score >1 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                            '<md-icon ng-if=\"Stars.score <=2.5\" md-font-icon=\"{{Stars.score >2 ? \\'icon-star-half\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                            '<md-icon ng-if=\"Stars.score >2.5\" md-font-icon=\"{{Stars.score >2 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                            '<md-icon ng-if=\"Stars.score <=3.5\" md-font-icon=\"{{Stars.score >3 ? \\'icon-star-half\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                            '<md-icon ng-if=\"Stars.score >3.5\" md-font-icon=\"{{Stars.score >3 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\" class=\"s16 amber-fg\"></md-icon>'+\r\n                                        '</div>'+\r\n                                    '</div>',\r\n            link: function (scope, iElement) {\r\n\r\n            }\r\n        };\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives')\r\n        .controller('ParametersController', ParametersController)\r\n        .directive('parameters', parametersDirective);\r\n\r\n    /** @ngInject */\r\n    function ParametersController($timeout) {\r\n        var vm = this;\r\n\r\n        vm.selectedParameter=null;\r\n        vm.breadcrumb=[];\r\n        vm.load=false;\r\n\r\n        // Methods\r\n        vm.addToBreadcrumb = addToBreadcrumb;\r\n        vm.addValueParemeter = addValueParemeter;\r\n        vm.resetParameters = resetParameters;\r\n        vm.showMenu = showMenu;\r\n        vm.notEmpty = notEmpty;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Añade al breadcrumb el rastro de migas\r\n         */\r\n        function addToBreadcrumb(key, obj) {\r\n            vm.load=true;\r\n            $timeout(function(){\r\n                vm.load=false;\r\n            },500);\r\n            //si tiene key se entiende que es un paso hacia adelante\r\n            if(key){\r\n                vm.selectedParameter=obj.data || obj;\r\n                vm.breadcrumb.push({\r\n                    \"key\":key,\r\n                    \"value\":obj.human_name,\r\n                    \"parameters\":obj.data || obj\r\n                });\r\n            }else{\r\n                //Si no tiene key es que quiere ir al padre\r\n                vm.breadcrumb.splice(-1,1);\r\n                if(vm.breadcrumb.length){\r\n                    vm.selectedParameter=vm.breadcrumb[vm.breadcrumb.length-1].parameters;\r\n                }else{\r\n                    vm.selectedParameter=null;\r\n                }\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Añade al campo de texto la variable que hayamos indicado\r\n         */\r\n        function addValueParemeter(key) {\r\n            var s=\"\";\r\n            for(var i in vm.breadcrumb){\r\n                s+=vm.breadcrumb[i].key+\".\";\r\n            }\r\n            s+=key;\r\n            if(typeof vm.model===\"string\"){\r\n                vm.model+=\" \"+s+\" \";\r\n            }\r\n            else if(typeof vm.model===\"object\"){\r\n                if(vm.model.indexOf(s)===-1){\r\n                    vm.model.push(s);\r\n                }\r\n            }\r\n            resetParameters();\r\n        }\r\n\r\n        function resetParameters(){\r\n            vm.selectedParameter=null;\r\n            vm.breadcrumb=[];\r\n        }\r\n\r\n        function showMenu(params){\r\n            for(var i in params){\r\n                if(notEmpty(params[i][vm.filter])){\r\n                    return true;\r\n                }\r\n            }\r\n            return false;\r\n        }\r\n\r\n        function notEmpty(obj){\r\n            return Object.keys(obj).length>0;\r\n        }\r\n\r\n\r\n    }\r\n\r\n    /** @ngInject */\r\n    function parametersDirective() {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {},\r\n            bindToController: {\r\n                model: '=model',\r\n                filter: '=filter',\r\n                parameters: '=parameters',\r\n                icon: '@icon'\r\n            },\r\n            controller: 'ParametersController as Parameters',\r\n            templateUrl: 'app/main/parameters/parameters.html',\r\n            link: function (scope, iElement) {\r\n\r\n            }\r\n        };\r\n    }\r\n})();\r\n\n(function (window, angular, undefined) {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives')\r\n        .directive('iframeAuthentication', iframeAuthentication);\r\n\r\n    /** @ngInject */\r\n    function iframeAuthentication($http, $rootScope) {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {\r\n                src: '='\r\n            },\r\n            link: function (scope, element) {\r\n                $http({\r\n                    method: 'GET',\r\n                    url: scope.src\r\n                }).then(function successCallback(response) {\r\n                    getOK(response);\r\n                });\r\n\r\n                function getOK(response){\r\n                    var iframe = $(element);\r\n                    var str=response.data;\r\n\r\n                    var p1=str.indexOf(\"<body\");\r\n                    var p2=str.indexOf(\"</body>\")+7;\r\n\r\n                    str = str.slice(p1, p2);\r\n\r\n                    str=str.replace(\"<body\",\"<div\");\r\n                    str=str.replace(\"</body>\",\"</div>\");\r\n\r\n                    if($rootScope.server){\r\n                        str = str.replace(/<img[^<]*src=[\"']([^\"]*)[\"']/g, \"<img src='\"+$rootScope.server+\"$1'\");\r\n                    }\r\n\r\n                    iframe.html(str);\r\n                }\r\n            }\r\n        };\r\n    }\r\n\r\n})(window, angular);\r\n\n(function (window, angular, undefined) {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives')\r\n        .directive('formTranslate', formTranslate)\r\n        .directive('formTranslateTemplates', formTranslateTemplates)\r\n        .directive('varTranslate', varTranslate)\r\n        .directive('bindTranslate', bindTranslate)\r\n        .directive('mdAutocompleteTranslate', mdAutocompleteTranslate);\r\n\r\n    /** @ngInject */\r\n    function formTranslate($rootScope) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: {\r\n                formTranslate: '='\r\n            },\r\n            compile: function (elem, attrs) {\r\n                /*var $form=$(elem).find(\"md-dialog-content\");\r\n\r\n                var html='<md-content><md-tabs md-dynamic-height md-border-bottom>';\r\n\r\n                for(var i in $rootScope.languages){\r\n                    var $formClone=$form.clone();\r\n\r\n                    //vamos a buscar los campos que sean traducibles solo si no estamos mirando el idioma por defecto\r\n                    if($rootScope.languages[i].code!==$rootScope.languageDefault){\r\n                        var $inputs=$formClone.find(\"[data-input-translate]\");\r\n                        var $errors=$formClone.find(\"error-messages\");\r\n\r\n                        $inputs.each(function() {\r\n                            if($(this).attr(\"name\")){\r\n                                $(this).attr(\"name\",$(this).attr(\"name\")+\"_\"+$rootScope.languages[i].code);\r\n                            }\r\n                            if($(this).attr(\"data-ng-model\")){\r\n                                $(this).attr(\"data-ng-model\",$(this).attr(\"data-ng-model\")+\"_\"+$rootScope.languages[i].code);\r\n                            }\r\n                        });\r\n\r\n                        $errors.each(function() {\r\n                            if($(this).attr(\"field\")){\r\n                                $(this).attr(\"field\",$(this).attr(\"field\")+\"_\"+$rootScope.languages[i].code);\r\n                            }\r\n                        });\r\n\r\n                        // Además añadimos la extension del idioma a los campos adicionales\r\n                        // que luego se usará solo para los campos de tipo texto.\r\n                        var $extraFields=$formClone.find(\"extra-fields\");\r\n                        $extraFields.attr(\"language\",\"_\"+$rootScope.languages[i].code);\r\n                    }\r\n\r\n                    html+='<md-tab label=\"'+$rootScope.languages[i].name+'\"><md-content class=\"md-padding\">';\r\n\r\n                    html+=$formClone.html();\r\n\r\n                    html+='</md-content></md-tab>';\r\n\r\n                }\r\n\r\n                html+='</md-tabs></md-content>';\r\n\r\n               $(elem).find(\"md-dialog-content\").html(html);*/\r\n\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function formTranslateTemplates($rootScope, gettextCatalog) {\r\n        return {\r\n            restrict: 'A',\r\n            scope: {\r\n                formTranslate: '='\r\n            },\r\n            compile: function (elem, attrs) {\r\n                /*var $form=$(elem).find(\"md-dialog-content\");\r\n\r\n                var html='<md-content><md-tabs md-dynamic-height md-border-bottom>';\r\n\r\n                var languages = [\r\n                    {\r\n                        code:'es',\r\n                        name:gettextCatalog.getString('Español')\r\n                    },\r\n                    {\r\n                        code:'en',\r\n                        name:gettextCatalog.getString('Inglés')\r\n                    },\r\n                    {\r\n                        code:'fr',\r\n                        name:gettextCatalog.getString('Francés')\r\n                    },\r\n                    {\r\n                        code:'pt',\r\n                        name:gettextCatalog.getString('Portugués')\r\n                    },\r\n                    {\r\n                        code:'it',\r\n                        name:gettextCatalog.getString('Italiano')\r\n                    },\r\n                    {\r\n                        code:'de',\r\n                        name:gettextCatalog.getString('Alemán')\r\n                    }\r\n                ];\r\n\r\n                for(var i in languages){\r\n                    var $formClone=$form.clone();\r\n\r\n                    //vamos a buscar los campos que sean traducibles solo si no estamos mirando el idioma por defecto\r\n                    if(languages[i].code!==$rootScope.languageDefault){\r\n                        var $inputs=$formClone.find(\"[data-input-translate]\");\r\n                        var $keys=$formClone.find(\".attachment\");\r\n\r\n                        $inputs.each(function() {\r\n                            if($(this).attr(\"name\")){\r\n                                $(this).attr(\"name\",$(this).attr(\"name\")+\"_\"+languages[i].code);\r\n                            }\r\n                            if($(this).attr(\"data-ng-model\")){\r\n                                $(this).attr(\"data-ng-model\",$(this).attr(\"data-ng-model\")+\"_\"+languages[i].code);\r\n                            }\r\n                            if($(this).attr(\"required\")){\r\n                                $(this).attr(\"required\",false);\r\n                            }\r\n                        });\r\n\r\n                        $keys.each(function() {\r\n                            if($(this).attr(\"data-ng-click\")) {\r\n                                $(this).attr(\"data-ng-click\",\"vm.template.description_\"+languages[i].code+\"=vm.template.description_\"+languages[i].code+\"+' {'+key+'} '\");\r\n                            }\r\n                        });\r\n\r\n\r\n                    }\r\n\r\n                    html+='<md-tab label=\"'+languages[i].name+'\"><md-content class=\"md-padding\">';\r\n\r\n                    html+=$formClone.html();\r\n\r\n                    html+='</md-content></md-tab>';\r\n\r\n                }\r\n\r\n                html+='</md-tabs></md-content>';\r\n\r\n               $(elem).find(\"md-dialog-content\").html(html);*/\r\n\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function varTranslate($rootScope) {\r\n        return {\r\n            restrict: 'A',\r\n            compile: function (elem, attrs) {\r\n                /*var text=$(elem).text();\r\n                var arrText=text.split(\"}}\");\r\n\r\n                text=\"\";\r\n                for(var i=0; i<arrText.length-1; i++){\r\n                    var t=arrText[i];\r\n                    t=t.replace(\"{{\",\"\");\r\n                    t=t.replace(\"}}\",\"\");\r\n                    text+=\" {{\"+t.trim()+\"_\"+$rootScope.languageSelected+\" || \"+t.trim()+\" }}\";\r\n                }\r\n\r\n                $(elem).text(text);*/\r\n\r\n            }\r\n        };\r\n    }\r\n    /** @ngInject */\r\n    function bindTranslate($rootScope) {\r\n        return {\r\n            restrict: 'A',\r\n            compile: function (elem, attrs) {\r\n                /*var text=attrs.ngBindHtml;\r\n                text=text.trim()+\"_\"+$rootScope.languageSelected+\" || \"+text;\r\n                attrs.ngBindHtml=text;*/\r\n            }\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function mdAutocompleteTranslate($rootScope) {\r\n        return {\r\n            restrict: 'A',\r\n            compile: function (elem, attrs) {\r\n                /*\r\n                //Hay que cambiar el atributo mdItemText que es lo que se muestra una vez seleccionado\r\n                // y además hay que traducir las opciones posibles\r\n                var text=attrs.mdItemText;\r\n                // Compruebo que este atributo no sea una función, en el caso de que lo sea debemos controlar\r\n                // la traduccion en la misma función que le pasamos como parámetro.\r\n                // Puedes ver un ejemplo en index.run.js en la función \"$rootScope.getFullName()\"\r\n                if(text.charAt(text.length-1)!==')'){\r\n                    text=text.trim()+\"_\"+$rootScope.languageSelected+\" || \"+text;\r\n                    attrs.mdItemText=text;\r\n                }\r\n\r\n                //Una vez cambiado el atributo cambios las opciones\r\n                text=$(elem).find(\"span[md-highlight-text]\").text();\r\n\r\n                var arrText=text.split(\"}}\");\r\n\r\n                text=\"\";\r\n                for(var i=0; i<arrText.length-1; i++){\r\n                    var t=arrText[i];\r\n                    t=t.replace(\"{{\",\"\");\r\n                    t=t.replace(\"}}\",\"\");\r\n                    text+=\" {{\"+t.trim()+\"_\"+$rootScope.languageSelected+\" || \"+t.trim()+\" }}\";\r\n                }\r\n\r\n                $(elem).find(\"span[md-highlight-text]\").text(text);\r\n                */\r\n\r\n            }\r\n        };\r\n    }\r\n})(window, angular);\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.utils.directives')\r\n        .controller('ErrorMessagesController', ErrorMessagesController)\r\n        .directive('errorMessages', errorMessagesDirective);\r\n\r\n    /** @ngInject */\r\n    function ErrorMessagesController($attrs, $scope, $timeout, gettextCatalog) {\r\n        var vm = this;\r\n        vm.messages = [];\r\n        vm.serverMessages = [];\r\n\r\n        init();\r\n\r\n        function init() {\r\n            // Atributo required\r\n            if (angular.isDefined($attrs.required)) {\r\n                vm.messages.push({\r\n                    type: ['required'],\r\n                    message: gettextCatalog.getString('Este campo es obligatorio')\r\n                });\r\n            }\r\n\r\n            if (angular.isDefined($attrs.mdRequireMatch)) {\r\n                vm.messages.push({\r\n                    type: ['md-require-match'],\r\n                    message: gettextCatalog.getString('Debe seleccionar una opción de la lista')\r\n                });\r\n            }\r\n\r\n            if (angular.isDefined($attrs.url)){\r\n                vm.messages.push({\r\n                    type: ['url'],\r\n                    message: gettextCatalog.getString(\"La dirección web debe ser de la forma http://...\")\r\n                });\r\n            }\r\n\r\n            // Atributo pattern\r\n            if (angular.isDefined($attrs.pattern)) {\r\n                vm.messages.push({\r\n                    type: ['pattern'],\r\n                    message: gettextCatalog.getString($attrs.pattern)\r\n                });\r\n            }\r\n\r\n            // Atributo match-password\r\n            if (angular.isDefined($attrs.passwordMatch)) {\r\n                vm.messages.push({\r\n                    type: ['passwordMatch'],\r\n                    message: gettextCatalog.getString(\"Las contraseñas no coinciden\")\r\n                });\r\n            }\r\n\r\n            // Atributo match-password\r\n            if (angular.isDefined($attrs.unique)) {\r\n                vm.messages.push({\r\n                    type: ['unique'],\r\n                    message: gettextCatalog.getString(\"El email indicado ya existe\")\r\n                });\r\n            }\r\n        }\r\n\r\n        function getValueObject(obj,keys) {\r\n            var o=obj;\r\n            for(var i in keys){\r\n                o=o[keys[i]];\r\n                if(!o){\r\n                    return false;\r\n                }\r\n            }\r\n            return o[0];\r\n        }\r\n\r\n        $scope.$watch(\"ErrorMessages.errors\", function () {\r\n            vm.serverMessages.length = 0;\r\n            if(vm.field && vm.field.$name && vm.errors){\r\n                var parents=vm.field.$name.split(\"___\");\r\n                var message=getValueObject(vm.errors,parents);\r\n\r\n                if(message){\r\n                    vm.serverMessages.push(message);\r\n                    vm.field.$setTouched();\r\n                    vm.field.$setValidity(\"serverError\", false);\r\n                    if (angular.isDefined($attrs.forcechange)) {\r\n                        $timeout(function(){\r\n                            vm.field.$setValidity(\"serverError\", true);\r\n                        },6000);\r\n                    }\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    /** @ngInject */\r\n    function errorMessagesDirective($timeout) {\r\n        return {\r\n            restrict: 'E',\r\n            scope: {},\r\n            replace: true,\r\n            bindToController: {\r\n                field: '=field',\r\n                errors: '=serverErrors'\r\n            },\r\n            controller: 'ErrorMessagesController as ErrorMessages',\r\n            template: '<div ng-messages=\"ErrorMessages.field.$error\" ng-show=\"ErrorMessages.field.$touched || ErrorMessages.serverMessages.length > 0\" role=\"alert\"><div ng-hide=\"ErrorMessages.serverMessages.length > 0\" ng-repeat=\"message in ErrorMessages.messages\" ng-message-exp=\"message.type\"><span>{{message.message}}</span></div><div ng-repeat=\"message in ErrorMessages.serverMessages\" ng-message=\"serverError\" class=\"has-animate\"><span>{{message}}</span></div></div>',\r\n            link: function (scope, iElement) {\r\n                $timeout(function(){\r\n                    var animate=$(iElement).find(\".has-animate\");\r\n                    if(animate){\r\n                        if(!animate.hasClass(\"ng-animate\")){\r\n                            animate.addClass(\"ng-animate\");\r\n                        }\r\n                    }\r\n                });\r\n            }\r\n        };\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.videos',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n        // State\r\n        $stateProvider.state('app.videos', {\r\n            url      : '/videos',\r\n            views    : {\r\n                'content@app': {\r\n                    templateUrl: 'app/main/videos/videos.html',\r\n                    controller : 'VideosController as vm'\r\n                }\r\n            },\r\n            resolve  : {\r\n                currentUser: function (AuthService){\r\n                    return AuthService.getCurrentUser().then(function (response) {\r\n                        if (response) {\r\n                            return response;\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            bodyClass: 'todo'\r\n        });\r\n\r\n\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.videos')\r\n        .controller('VideosController', VideosController);\r\n    /** @ngInject */\r\n    function VideosController($scope, currentUser)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.videos=[];\r\n\r\n        // Methods\r\n\r\n\r\n        //////////\r\n\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.origins')\r\n        .controller('OriginsController', OriginsController);\r\n    /** @ngInject */\r\n    function OriginsController($scope, currentUser, originsService, Origins, NotifyService, $mdDialog, $document,\r\n                               channelsService, DebounceService, gettextCatalog)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.origins=Origins;\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.origins.filters', DebounceService(originsService.getOrigins, 300), true);\r\n\r\n        // Methods\r\n        vm.openOriginDialog = openOriginDialog;\r\n        vm.removeOrigin = removeOrigin;\r\n\r\n        //////////\r\n        /**\r\n         * Abre el dialogo para crear/editar una origin\r\n         *\r\n         * @param ev\r\n         * @param origin\r\n         */\r\n        function openOriginDialog(ev, origin) {\r\n            $mdDialog.show({\r\n                controller: 'OriginDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/origins/dialogs/origin/origin-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Origin:origin,\r\n                    Channels:channelsService.getAllChannels(),\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n      \r\n        /**\r\n         * Abre el dialogo para eliminar una origin\r\n         *\r\n         * @param ev\r\n         * @param origin\r\n         */\r\n        function removeOrigin(ev, origin) {\r\n            var confirm = $mdDialog.confirm()\r\n                .title(gettextCatalog.getString('Eliminar concesionario')+' \"'+origin.name+'\"')\r\n                .textContent(gettextCatalog.getString('¿Seguro que quieres eliminar el concesionario?'))\r\n                .ariaLabel(gettextCatalog.getString('Eliminar concesionario'))\r\n                .clickOutsideToClose(true)\r\n                .parent(angular.element(document.body))\r\n                .ok(gettextCatalog.getString('Borrar concesionario'))\r\n                .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n            $mdDialog.show(confirm).then(function() {\r\n                originsService.removeOrigin(origin).then(function(){\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Concesionario borrado correctamente.\"));\r\n                }, function(error){\r\n                    NotifyService.errorMessage(\"Error al borrar el concesionario.\" +\" \"+ (error.data.detail || \"\"));\r\n                });\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n})();\n(function () {\r\n  'use strict';\r\n  angular\r\n    .module('app.metrics')\r\n    .controller('MetricsController', MetricsController);\r\n\r\n  /** @ngInject */\r\n  function MetricsController($scope, currentUser, metricsService, Benchmark, DigitalService, Servicelevel, VoiceService,\r\n                             Metrics, $rootScope, DebounceService, $q, $timeout, cacheFactory, usersService) {\r\n    var vm = this;\r\n    // Data\r\n    vm.user = currentUser;\r\n    vm.metrics = Metrics;\r\n    vm.benchmark = Benchmark;\r\n    vm.digitalService = DigitalService;\r\n    vm.servicelevel = Servicelevel;\r\n    vm.voiceService = VoiceService;\r\n\r\n    vm.data_origins = 'numbers';\r\n    vm.data_users = 'numbers';\r\n    vm.colors = ['gris', 'violeta', 'verde'];\r\n\r\n    vm.calendarModel = [];\r\n    vm.calendarUiConfig = {\r\n      calendar: {\r\n        defaultView       : 'agendaWeek',\r\n        locale            : 'es',\r\n        lang              : 'es',\r\n        viewRender        : function (view)\r\n        {\r\n          vm.calendarView = view;\r\n          vm.calendar = vm.calendarView.calendar;\r\n          vm.metrics.filters.created_start_date=view.intervalStart._d;\r\n          vm.metrics.filters.created_end_date=view.intervalEnd._d;\r\n        },\r\n        views: {\r\n          agendaDay: { // name of view\r\n            titleFormat: 'dddd, DD [de] MMMM [de] YYYY'\r\n          }\r\n        }\r\n      }\r\n    };\r\n\r\n    // Watchers\r\n    $scope.$watch('vm.metrics.filters', DebounceService(metricsService.getMetrics, 300), true);\r\n\r\n    // Methods\r\n    vm.getChart=getChart;\r\n    vm.getFullUserName=getFullUserName;\r\n    vm.copySearch=copySearch;\r\n    vm.getUsers=getUsers;\r\n    vm.getColor = getColor;\r\n    vm.concatFilters = concatFilters;\r\n\r\n    //////////\r\n    function getChart() {\r\n      vm.donutChartDigital = {\r\n        data   : {\r\n          series: [vm.digitalService.data.con_telefono.con_llamadas, vm.digitalService.data.con_telefono.sin_llamadas]\r\n        },\r\n        options: {\r\n          donut: true,\r\n          height: '450px',\r\n        },\r\n        events : {\r\n          draw: function (data)\r\n          {\r\n            if ( data.type === 'slice' )\r\n            {\r\n              var color=(data.index===0)? '#3182ce' : '#63b3ed'\r\n              data.element.attr({\r\n                style: 'stroke:'+color\r\n              });\r\n            }\r\n          }\r\n        }\r\n      };\r\n\r\n      vm.stackedBarChart = {\r\n        data   : {\r\n          labels: vm.voiceService.data.llamadas.labels,\r\n          series: [\r\n            vm.voiceService.data.llamadas.atendidas,\r\n            vm.voiceService.data.llamadas.no_atendidas,\r\n          ]\r\n        },\r\n        options: {\r\n          stackBars: true,\r\n          axisY    : {\r\n            labelInterpolationFnc: function (value)\r\n            {\r\n              return value;\r\n            }\r\n          },\r\n          height: '450px',\r\n          plugins: [\r\n            Chartist.plugins.tooltip()\r\n          ]\r\n        },\r\n        events : {\r\n          draw: function (data)\r\n          {\r\n            if ( data.type === 'bar' )\r\n            {\r\n              var color=(data.seriesIndex===0)? '#448aff' : '#e0e0e0'\r\n              data.element.attr({\r\n                style: 'stroke:'+color\r\n              });\r\n            }\r\n          }\r\n        }\r\n      };\r\n\r\n      vm.donutChart = {\r\n        data   : {\r\n          series: [vm.voiceService.data.no_atendidos.con_llamadas, vm.voiceService.data.no_atendidos.sin_llamadas]\r\n        },\r\n        options: {\r\n          donut: true,\r\n          height: '450px',\r\n        },\r\n        events : {\r\n          draw: function (data)\r\n          {\r\n            if ( data.type === 'slice' )\r\n            {\r\n              var color=(data.index===0)? '#3182ce' : '#63b3ed'\r\n              data.element.attr({\r\n                style: 'stroke:'+color\r\n              });\r\n            }\r\n          }\r\n        }\r\n      };\r\n    }\r\n\r\n    function getFullUserName(user) {\r\n      return user.first_name + \" \" + user.last_name;\r\n    }\r\n\r\n    function copySearch(item) {\r\n      var a = angular.copy(vm[item]);\r\n      if(a){\r\n        $timeout(function () {\r\n          vm[item]=a;\r\n        },100)\r\n      }\r\n    }\r\n\r\n    /* Usuarios */\r\n    function getUsers(searchText) {\r\n      var deferred = $q.defer();\r\n      var users = angular.copy(cacheFactory.usersService.get(searchText));\r\n      if(!users){\r\n        usersService.users.filters = {};\r\n        usersService.users.filters.search = searchText;\r\n        usersService.users.filters.page_size = \"20\";\r\n        usersService.users.filters.is_complex = false;\r\n        usersService.getUsers(searchText).then(function (users) {\r\n          cacheFactory.usersService.put(searchText, users);\r\n          deferred.resolve(excludeArr(users.data, vm.metrics.filters.user_data));\r\n        });\r\n      }else{\r\n        deferred.resolve(excludeArr(users.data, vm.metrics.filters.user_data));\r\n      }\r\n\r\n      return deferred.promise;\r\n    }\r\n\r\n    function excludeArr(arr1, arr2, key) {\r\n      if(!key){\r\n        key='id';\r\n      }\r\n      for(var i=arr1.length-1; i >= 0; i--) {\r\n        for(var j=arr2.length-1; j >= 0; j--) {\r\n          if(arr1[i] && arr1[i][key] === arr2[j][key])\r\n          {\r\n            arr1.splice(i,1);\r\n          }\r\n        }\r\n      }\r\n      return arr1;\r\n    }\r\n\r\n    function getColor($index){\r\n      var i=($index - (vm.colors.length*Math.trunc($index/vm.colors.length)));\r\n      return vm.colors[i];\r\n    }\r\n\r\n    function concatFilters(o1, o2){\r\n      var f=Object.assign({}, o1, o2);\r\n      f.created_end_date=new Date(f.created_end_date).toISOString();\r\n      f.created_start_date=new Date(f.created_start_date).toISOString();\r\n      f.user_id__in = f.user_data.map(function (e) {\r\n        return e.id;\r\n      }).toString();\r\n      return f;\r\n    }\r\n\r\n\r\n  }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.imports',\r\n            [\r\n\r\n            ]\r\n        )\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($stateProvider) {\r\n\r\n        // State\r\n        $stateProvider.state('app.imports', {\r\n            url      : '/imports',\r\n            views    : {\r\n                'content@app': {\r\n                    templateUrl: 'app/main/imports/imports-view.html',\r\n                    controller : 'ImportsViewController as vm'\r\n                }\r\n            },\r\n            resolve  : {\r\n                currentUser: function (AuthService){\r\n                    return AuthService.getCurrentUser().then(function (response) {\r\n                        if (response) {\r\n                            return response;\r\n                        }\r\n                    });\r\n                }\r\n            },\r\n            bodyClass: 'todo'\r\n        });\r\n\r\n\r\n    }\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('app.imports')\r\n    .controller('ImportsViewController', ImportsViewController);\r\n\r\n  /** @ngInject */\r\n  function ImportsViewController($document, $rootScope, leadsService, NotifyService, $timeout, concessionairesService,\r\n                                 $mdDialog, gettextCatalog) {\r\n    var vm = this;\r\n\r\n    // Data\r\n    vm.loadingImport = false;\r\n\r\n    // Methods\r\n    vm.getDocument = getDocument;\r\n    vm.openFiles = openFiles;\r\n    vm.importLeads = importLeads;\r\n    vm.openExportLeadDialog = openExportLeadDialog;\r\n\r\n    //////////\r\n    init();\r\n\r\n    /**\r\n     * Initialize\r\n     */\r\n    function init() {\r\n      $timeout(function () {\r\n        $(\"#file-uploader\").change(function () {\r\n          importLeads()\r\n        });\r\n      });\r\n    }\r\n\r\n    //descagar en general de documentos\r\n    function getDocument() {\r\n      return leadsService.getDocument().then(function (response) {\r\n        downloadFile(response, \"leads.xls\", \"leads.xls\");\r\n      }, function (error) {\r\n        NotifyService.errorMessage(gettextCatalog.getString(\"Error al exportar leads\"));\r\n      });\r\n    }\r\n\r\n    //Descarga cualquier tipo de fichero\r\n    function downloadFile(response, name, type) {\r\n      var blob = new Blob([response], {type: type});\r\n\r\n      if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n        window.navigator.msSaveOrOpenBlob(blob);\r\n      } else {\r\n        var link = document.createElement('a');\r\n        link.href = window.URL.createObjectURL(blob);\r\n        link.download = name;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n      }\r\n    }\r\n\r\n    function openFiles() {\r\n      $(\"#file-uploader\").trigger(\"click\");\r\n    }\r\n\r\n    /**\r\n     * Importar excel\r\n     */\r\n    function importLeads() {\r\n      vm.loadingImport = true;\r\n      return leadsService.importLeads().then(function (response) {\r\n        NotifyService.successMessage(gettextCatalog.getString(\"Leads importado correctamente\"));\r\n        downloadFile(response, \"result.xls\", \"result.xls\");\r\n        vm.loadingImport = false;\r\n      }, function (error) {\r\n        vm.serverErrors = error.data;\r\n        NotifyService.errorMessage(gettextCatalog.getString(\"Error al importar leads. \") + (error.data.non_field_errors || \"\"));\r\n        vm.loadingImport = false;\r\n      });\r\n    }\r\n\r\n    /**\r\n     * Abre el dialogo para exportar leads\r\n     *\r\n     * @param ev\r\n     */\r\n    function openExportLeadDialog(ev) {\r\n      $rootScope.loadingProgress = true;\r\n      $mdDialog.show({\r\n        controller: 'ExportLeadDialogController',\r\n        controllerAs: 'vm',\r\n        templateUrl: 'app/main/leads/dialogs/exportLeads/exportLeads-dialog.html',\r\n        parent: angular.element($document.body),\r\n        targetEvent: ev,\r\n        clickOutsideToClose: true,\r\n        locals: {\r\n          event: ev,\r\n          Concessionaires: concessionairesService.getAllConcessionaires()\r\n        }\r\n      });\r\n    }\r\n  }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.dashboard')\r\n        .controller('DashboardController', DashboardController);\r\n    /** @ngInject */\r\n    function DashboardController($scope, currentUser, $sce, Dashboards, NotifyService, $mdDialog, $document)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.concessionaires=Dashboards.data;\r\n\r\n        // Methods\r\n        vm.trustAsHtml = trustAsHtml;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Devuelve el formato necesario para mostrar iframes\r\n         *\r\n         * @param html\r\n         */\r\n        function trustAsHtml(html) {\r\n            return $sce.trustAsHtml(html);\r\n        }\r\n\r\n\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.concessionaires')\r\n        .controller('ConcessionairesController', ConcessionairesController);\r\n    /** @ngInject */\r\n    function ConcessionairesController($scope, currentUser, concessionairesService, Concessionaires, NotifyService, $mdDialog, $document,\r\n                                        DebounceService, gettextCatalog)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.concessionaires=Concessionaires;\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.concessionaires.filters', DebounceService(concessionairesService.getConcessionairesConfig, 300), true);\r\n\r\n        // Methods\r\n        vm.openConcessionaireDialog = openConcessionaireDialog;\r\n        vm.openConcessionaireCalendarDialog = openConcessionaireCalendarDialog;\r\n        vm.openConcessionaireNotesDialog = openConcessionaireNotesDialog;\r\n        vm.removeConcessionaire = removeConcessionaire;\r\n\r\n        //////////\r\n        /**\r\n         * Abre el dialogo para crear/editar una concessionaire\r\n         *\r\n         * @param ev\r\n         * @param concessionaire\r\n         */\r\n        function openConcessionaireDialog(ev, concessionaire) {\r\n            $mdDialog.show({\r\n                controller: 'ConcessionaireDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/concessionaires/dialogs/concessionaire/concessionaire-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Concessionaire:concessionaire,\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para editar el calendario de un concessionaire\r\n         *\r\n         * @param ev\r\n         * @param concessionaire\r\n         */\r\n        function openConcessionaireCalendarDialog(ev, concessionaire) {\r\n            $mdDialog.show({\r\n                controller: 'ConcessionaireCalendarDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/concessionaires/dialogs/concessionaireCalendar/concessionaireCalendar-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Concessionaire:concessionaire,\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para editar el calendario de un concessionaire\r\n         *\r\n         * @param ev\r\n         * @param concessionaire\r\n         */\r\n        function openConcessionaireNotesDialog(ev, concessionaire) {\r\n            $mdDialog.show({\r\n                controller: 'ConcessionaireNotesDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/concessionaires/dialogs/concessionaireNotes/concessionaireNotes-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Concessionaire:concessionaire,\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n      \r\n        /**\r\n         * Abre el dialogo para eliminar una concessionaire\r\n         *\r\n         * @param ev\r\n         * @param concessionaire\r\n         */\r\n        function removeConcessionaire(ev, concessionaire) {\r\n            var confirm = $mdDialog.confirm()\r\n                .title(gettextCatalog.getString('Eliminar concesionario')+' \"'+concessionaire.name+'\"')\r\n                .textContent(gettextCatalog.getString('¿Seguro que quieres eliminar el concesionario?'))\r\n                .ariaLabel(gettextCatalog.getString('Eliminar concesionario'))\r\n                .clickOutsideToClose(true)\r\n                .parent(angular.element(document.body))\r\n                .ok(gettextCatalog.getString('Borrar concesionario'))\r\n                .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n            $mdDialog.show(confirm).then(function() {\r\n                concessionairesService.removeConcessionaire(concessionaire).then(function(){\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Concesionario borrado correctamente.\"));\r\n                }, function(error){\r\n                    NotifyService.errorMessage(\"Error al borrar el concesionario.\" +\" \"+ (error.data.detail || \"\"));\r\n                });\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.channels')\r\n        .controller('ChannelsController', ChannelsController);\r\n    /** @ngInject */\r\n    function ChannelsController($scope, currentUser, channelsService, Channels, NotifyService, $mdDialog, $document,\r\n                                        DebounceService, gettextCatalog)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.channels=Channels;\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.channels.filters', DebounceService(channelsService.getChannels, 300), true);\r\n\r\n        // Methods\r\n        vm.openChannelDialog = openChannelDialog;\r\n        vm.removeChannel = removeChannel;\r\n\r\n        //////////\r\n        /**\r\n         * Abre el dialogo para crear/editar una channel\r\n         *\r\n         * @param ev\r\n         * @param channel\r\n         */\r\n        function openChannelDialog(ev, channel) {\r\n            $mdDialog.show({\r\n                controller: 'ChannelDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/channels/dialogs/channel/channel-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Channel:channel,\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n      \r\n        /**\r\n         * Abre el dialogo para eliminar una channel\r\n         *\r\n         * @param ev\r\n         * @param channel\r\n         */\r\n        function removeChannel(ev, channel) {\r\n            var confirm = $mdDialog.confirm()\r\n                .title(gettextCatalog.getString('Eliminar canal')+' \"'+channel.name+'\"')\r\n                .textContent(gettextCatalog.getString('¿Seguro que quieres eliminar el canal?'))\r\n                .ariaLabel(gettextCatalog.getString('Eliminar canal'))\r\n                .clickOutsideToClose(true)\r\n                .parent(angular.element(document.body))\r\n                .ok(gettextCatalog.getString('Borrar canal'))\r\n                .cancel(gettextCatalog.getString('Cancelar'));\r\n\r\n            $mdDialog.show(confirm).then(function() {\r\n                channelsService.removeChannel(channel).then(function(){\r\n                    NotifyService.successMessage(gettextCatalog.getString(\"Canal borrado correctamente.\"));\r\n                }, function(error){\r\n                    NotifyService.errorMessage(\"Error al borrar el canal.\" +\" \"+ (error.data.detail || \"\"));\r\n                });\r\n            });\r\n\r\n        }\r\n\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n    angular\r\n        .module('app.acds')\r\n        .controller('AcdsController', AcdsController);\r\n    /** @ngInject */\r\n    function AcdsController($scope, currentUser, acdsService, Acds, NotifyService, $mdDialog, $document, $state,\r\n                            AuthService, DebounceService, gettextCatalog, $timeout)\r\n    {\r\n        var vm = this;\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.acds=Acds;\r\n        vm.lastAcds=null;\r\n        vm.status=acdsService.getStatusCall();\r\n        vm.origins=acdsService.getOriginsCall();\r\n\r\n        AuthService.getCurrentUser().then(function (response) {\r\n            if (response) {\r\n                vm.user=response;\r\n                if(vm.user.id){\r\n                    acdsService.socketAcds(vm.user,reloadAcds);\r\n                }\r\n            }\r\n        });\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.acds.filters', DebounceService(acdsService.getAcds, 300), true);\r\n\r\n        // Methods\r\n        vm.openAcdDialog = openAcdDialog;\r\n        vm.createLead = createLead;\r\n        vm.getAudio = getAudio;\r\n\r\n        //////////\r\n        /**\r\n         * Recarga las llamadas entrantes cuando el socket le avisa\r\n         *\r\n         * @param response\r\n         */\r\n        function reloadAcds(response){\r\n            if(response.data){\r\n                var res=JSON.parse(response.data);\r\n                vm.lastAcds=JSON.parse(res.received_call).ID;\r\n            }\r\n            return acdsService.getAcds().then(function(){\r\n                $timeout(function(){\r\n                    vm.lastAcds=null;\r\n                },2000);\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Crea un lead a traves de una llamada entrante\r\n         *\r\n         * @param acd\r\n         */\r\n        function createLead(acd) {\r\n            $state.go(\"app.leads.get.edit\",{lead:0,source:acd.source.id,phone:acd.src,acd:acd.id,user:(acd.user ? acd.user.id: undefined)});\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar una acd\r\n         *\r\n         * @param ev\r\n         * @param acd\r\n         */\r\n        function openAcdDialog(ev, acd) {\r\n            var obj={\r\n                call_control:acd.id,\r\n                possible_leads:acd.possible_leads\r\n            };\r\n            $mdDialog.show({\r\n                controller: 'AcdDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/acds/dialogs/acd/acd-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    Acd:obj,\r\n                    event: ev\r\n                }\r\n            });\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar una acd\r\n         *\r\n         * @param acd\r\n         */\r\n        function getAudio(acd) {\r\n            return acdsService.getAudio(acd.id).then(function(response){\r\n                downloadFile(response,acd.src+\"-audio.mp3\",acd.src+\"-audio.mp3\");\r\n            }, function(error){\r\n                NotifyService.errorMessage(gettextCatalog.getString(\"Error al obtener audio\"));\r\n            });\r\n        }\r\n\r\n        //Descarga cualquier tipo de fichero\r\n        function downloadFile(response, name, type) {\r\n            var blob = new Blob([response], {type: type});\r\n\r\n            if (window.navigator && window.navigator.msSaveOrOpenBlob) {\r\n                window.navigator.msSaveOrOpenBlob(blob);\r\n            }\r\n            else {\r\n                var link = document.createElement('a');\r\n                link.href = window.URL.createObjectURL(blob);\r\n                link.download = name;\r\n                document.body.appendChild(link);\r\n                link.click();\r\n                document.body.removeChild(link);\r\n            }\r\n        }\r\n\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.calendar')\r\n        .controller('CalendarController', CalendarController);\r\n\r\n    /** @ngInject */\r\n    function CalendarController($scope, currentUser, Kpis, KpisPositive, usersService, $mdDialog, $document, eventsService,\r\n                                DebounceService, $q, $state, cacheFactory)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.user = currentUser;\r\n        vm.kpis=Kpis;\r\n        vm.kpisPositive=KpisPositive;\r\n\r\n        vm.events = [];\r\n        vm.leads=eventsService.leads;\r\n\r\n        vm.selectedTabIndex=0;\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.leads.filters', DebounceService(reloadCalendar, 300), true);\r\n        $scope.$watch('vm.kpis.filters', DebounceService(eventsService.reloadKpis, 300), true);\r\n        $scope.$watch('vm.kpisPositive.filters', DebounceService(eventsService.reloadKpisPositive, 300), true);\r\n\r\n        vm.calendarUiConfig = {\r\n            calendar: {\r\n                defaultView       : 'month',\r\n                locale            : 'es',\r\n                lang              : 'es',\r\n                editable          : false,\r\n                eventLimit        : true,\r\n                header            : '',\r\n                handleWindowResize: false,\r\n                aspectRatio       : 1,\r\n                //hiddenDays        : [ 0 ],\r\n                slotDuration      : '00:30:00',\r\n                minTime           : \"08:00:00\",\r\n                maxTime           : \"22:00:00\",\r\n                slotLabelFormat   : \"HH:mm\",\r\n                allDayText        : 'Todo el día',\r\n                viewRender        : function (view)\r\n                {\r\n                    vm.calendarView = view;\r\n                    vm.calendar = vm.calendarView.calendar;\r\n                    vm.currentMonthShort = vm.calendar.getDate().format('MMMM');\r\n                    vm.currentDate = vm.calendar.getDate().format('DD-MM-YYYY');\r\n                },\r\n                lazyFetching      : false,\r\n                eventClick        : select,\r\n                selectable        : false,\r\n                selectHelper      : !!vm.user,\r\n                eventRender       : eventRender,\r\n                views: {\r\n                    agendaDay: { // name of view\r\n                        titleFormat: 'dddd, DD [de] MMMM [de] YYYY'\r\n                    }\r\n                },\r\n                timeFormat: 'H:mm'\r\n            }\r\n        };\r\n\r\n        // Methods\r\n        vm.next = next;\r\n        vm.prev = prev;\r\n        vm.togglePositive = togglePositive;\r\n        vm.toggleKpi = toggleKpi;\r\n        vm.toggleKpiPositive = toggleKpiPositive;\r\n        vm.getUsers = getUsers;\r\n        vm.getFullUserName = getFullUserName;\r\n\r\n        //////////\r\n        reloadCalendar();\r\n        function reloadCalendar(){\r\n            var deferred = $q.defer();\r\n\r\n            vm.events = eventsService.getEvents();\r\n            $('#calendarView').fullCalendar('refetchEvents');\r\n\r\n            deferred.resolve(vm.events);\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Go to next on current view (week, month etc.)\r\n         */\r\n        function select(event)\r\n        {\r\n            // $state.go('app.leads.get.edit',{lead: event.id});\r\n            var url = $state.href('app.leads.get.edit', {lead: event.id});\r\n            window.open(url,'_blank');\r\n        }\r\n\r\n        /**\r\n         * Go to next on current view (week, month etc.)\r\n         */\r\n        function next()\r\n        {\r\n            vm.calendarView.calendar.next();\r\n        }\r\n\r\n        /**\r\n         * Go to previous on current view (week, month etc.)\r\n         */\r\n        function prev()\r\n        {\r\n            vm.calendarView.calendar.prev();\r\n        }\r\n\r\n        function eventRender( event, element, view ) {\r\n            var parent=$(element).find(\".fc-content\");\r\n            setTimeout(function(){\r\n                if(event.description){\r\n                    var description=$(\"<span>(\"+event.description+\")</span>\");\r\n                    parent.append(description);\r\n                }\r\n\r\n            },100);\r\n        }\r\n\r\n\r\n\r\n        /**\r\n         * Activa/Desactiva el filtro de ganados\r\n         *\r\n         * @param active\r\n         */\r\n        function togglePositive() {\r\n            for(var kpi in vm.kpis.data){\r\n              for(var k in vm.kpis.data[kpi].kpis){\r\n                vm.kpis.data[kpi].kpis[k].active=false;\r\n              }\r\n            }\r\n            for(var kpi in vm.kpisPositive.data){\r\n              for(var k in vm.kpisPositive.data[kpi].kpis){\r\n                vm.kpisPositive.data[kpi].kpis[k].active=false;\r\n              }\r\n            }\r\n            delete vm.leads.filters.kpi_filter;\r\n\r\n            if(vm.selectedTabIndex===1 || vm.selectedTabIndex==='1'){\r\n              vm.leads.filters.result='positive';\r\n            }else{\r\n              delete vm.leads.filters.result;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Activa/Desactiva el filtro del kpi\r\n         *\r\n         * @param item\r\n         */\r\n        function toggleKpi(item) {\r\n            for(var kpi in vm.kpis.data){\r\n                for(var k in vm.kpis.data[kpi].kpis){\r\n                  vm.kpis.data[kpi].kpis[k].active=false;\r\n                }\r\n            }\r\n            if(vm.leads.filters.kpi_filter===item.filter_key){\r\n                item.active=false;\r\n                vm.leads.filters.kpi_filter=null;\r\n            }else{\r\n                item.active=true;\r\n                vm.leads.filters.kpi_filter=item.filter_key;\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Activa/Desactiva el filtro del kpi\r\n         *\r\n         * @param item\r\n         */\r\n        function toggleKpiPositive(item) {\r\n            for(var kpi in vm.kpisPositive.data){\r\n                for(var k in vm.kpisPositive.data[kpi].kpis){\r\n                  vm.kpisPositive.data[kpi].kpis[k].active=false;\r\n                }\r\n            }\r\n            if(vm.leads.filters.kpi_filter===item.filter_key){\r\n                item.active=false;\r\n                vm.leads.filters.kpi_filter=null;\r\n            }else{\r\n                item.active=true;\r\n                vm.leads.filters.kpi_filter=item.filter_key;\r\n            }\r\n        }\r\n\r\n        /* Usuarios */\r\n        function getUsers(searchText) {\r\n            var deferred = $q.defer();\r\n            var users = angular.copy(cacheFactory.usersService.get(searchText));\r\n            if(!users){\r\n                usersService.users.filters = {};\r\n                usersService.users.filters.search = searchText;\r\n                usersService.users.filters.page_size = \"50\";\r\n                usersService.users.filters.is_complex = false;\r\n                usersService.getUsers(searchText).then(function (users) {\r\n                  cacheFactory.usersService.put(searchText, users);\r\n                  deferred.resolve(users.data);\r\n                });\r\n            }else{\r\n                deferred.resolve(users.data);\r\n            }\r\n\r\n            return deferred.promise;\r\n        }\r\n\r\n        function getFullUserName(user) {\r\n            return user.first_name + \" \" + user.last_name;\r\n        }\r\n\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .service('fuseTheming', fuseThemingService);\r\n\r\n    /** @ngInject */\r\n    function fuseThemingService($cookies, $log, $mdTheming)\r\n    {\r\n        var service = {\r\n            getRegisteredPalettes: getRegisteredPalettes,\r\n            getRegisteredThemes  : getRegisteredThemes,\r\n            setActiveTheme       : setActiveTheme,\r\n            setThemesList        : setThemesList,\r\n            themes               : {\r\n                list  : {},\r\n                active: {\r\n                    'name' : '',\r\n                    'theme': {}\r\n                }\r\n            }\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Get registered palettes\r\n         *\r\n         * @returns {*}\r\n         */\r\n        function getRegisteredPalettes()\r\n        {\r\n            return $mdTheming.PALETTES;\r\n        }\r\n\r\n        /**\r\n         * Get registered themes\r\n         *\r\n         * @returns {*}\r\n         */\r\n        function getRegisteredThemes()\r\n        {\r\n            return $mdTheming.THEMES;\r\n        }\r\n\r\n        /**\r\n         * Set active theme\r\n         *\r\n         * @param themeName\r\n         */\r\n        function setActiveTheme(themeName)\r\n        {\r\n            // If theme does not exist, fallback to the default theme\r\n            if ( angular.isUndefined(service.themes.list[themeName]) )\r\n            {\r\n                // If there is no theme called \"default\"...\r\n                if ( angular.isUndefined(service.themes.list.default) )\r\n                {\r\n                    $log.error('You must have at least one theme named \"default\"');\r\n                    return;\r\n                }\r\n\r\n                $log.warn('The theme \"' + themeName + '\" does not exist! Falling back to the \"default\" theme.');\r\n\r\n                // Otherwise set theme to default theme\r\n                service.themes.active.name = 'default';\r\n                service.themes.active.theme = service.themes.list.default;\r\n                $cookies.put('selectedTheme', service.themes.active.name);\r\n\r\n                return;\r\n            }\r\n\r\n            service.themes.active.name = themeName;\r\n            service.themes.active.theme = service.themes.list[themeName];\r\n            $cookies.put('selectedTheme', themeName);\r\n        }\r\n\r\n        /**\r\n         * Set available themes list\r\n         *\r\n         * @param themeList\r\n         */\r\n        function setThemesList(themeList)\r\n        {\r\n            service.themes.list = themeList;\r\n        }\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($mdThemingProvider, fusePalettes, fuseThemes)\r\n    {\r\n        // Inject Cookies Service\r\n        var $cookies;\r\n        angular.injector(['ngCookies']).invoke([\r\n            '$cookies', function (_$cookies)\r\n            {\r\n                $cookies = _$cookies;\r\n            }\r\n        ]);\r\n\r\n        // Check if custom theme exist in cookies\r\n        var customTheme = $cookies.getObject('customTheme');\r\n        if ( customTheme )\r\n        {\r\n            fuseThemes['custom'] = customTheme;\r\n        }\r\n\r\n        $mdThemingProvider.alwaysWatchTheme(true);\r\n\r\n        // Define custom palettes\r\n        angular.forEach(fusePalettes, function (palette)\r\n        {\r\n            $mdThemingProvider.definePalette(palette.name, palette.options);\r\n        });\r\n\r\n        // Register custom themes\r\n        angular.forEach(fuseThemes, function (theme, themeName)\r\n        {\r\n            $mdThemingProvider.theme(themeName)\r\n                .primaryPalette(theme.primary.name, theme.primary.hues)\r\n                .accentPalette(theme.accent.name, theme.accent.hues)\r\n                .warnPalette(theme.warn.name, theme.warn.hues)\r\n                .backgroundPalette(theme.background.name, theme.background.hues);\r\n        });\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    var fuseThemes = {\r\n        default  : {\r\n            primary   : {\r\n                name: 'fuse-paleblue',\r\n                hues: {\r\n                    'default': '700',\r\n                    'hue-1'  : '500',\r\n                    'hue-2'  : '600',\r\n                    'hue-3'  : '400'\r\n                }\r\n            },\r\n            accent    : {\r\n                name: 'light-blue',\r\n                hues: {\r\n                    'default': '600',\r\n                    'hue-1'  : '400',\r\n                    'hue-2'  : '700',\r\n                    'hue-3'  : 'A100'\r\n                }\r\n            },\r\n            warn      : {\r\n                name: 'red'\r\n            },\r\n            background: {\r\n                name: 'grey',\r\n                hues: {\r\n                    'default': 'A100',\r\n                    'hue-1'  : 'A100',\r\n                    'hue-2'  : '100',\r\n                    'hue-3'  : '300'\r\n                }\r\n            }\r\n        },\r\n        'pinkTheme': {\r\n            primary   : {\r\n                name: 'blue-grey',\r\n                hues: {\r\n                    'default': '800',\r\n                    'hue-1'  : '600',\r\n                    'hue-2'  : '400',\r\n                    'hue-3'  : 'A100'\r\n                }\r\n            },\r\n            accent    : {\r\n                name: 'pink',\r\n                hues: {\r\n                    'default': '400',\r\n                    'hue-1'  : '300',\r\n                    'hue-2'  : '600',\r\n                    'hue-3'  : 'A100'\r\n                }\r\n            },\r\n            warn      : {\r\n                name: 'blue'\r\n            },\r\n            background: {\r\n                name: 'grey',\r\n                hues: {\r\n                    'default': 'A100',\r\n                    'hue-1'  : 'A100',\r\n                    'hue-2'  : '100',\r\n                    'hue-3'  : '300'\r\n                }\r\n            }\r\n        },\r\n        'tealTheme': {\r\n            primary   : {\r\n                name: 'fuse-paleblue', //'fuse-blue',\r\n                hues: {\r\n                    'default': '900',\r\n                    'hue-1'  : '600',\r\n                    'hue-2'  : '500',\r\n                    'hue-3'  : 'A100'\r\n                }\r\n            },\r\n            accent    : {\r\n                name: 'teal',\r\n                hues: {\r\n                    'default': '500',\r\n                    'hue-1'  : '400',\r\n                    'hue-2'  : '600',\r\n                    'hue-3'  : 'A100'\r\n                }\r\n            },\r\n            warn      : {\r\n                name: 'red'\r\n            },\r\n            background: {\r\n                name: 'grey',\r\n                hues: {\r\n                    'default': 'A100',\r\n                    'hue-1'  : 'A100',\r\n                    'hue-2'  : '100',\r\n                    'hue-3'  : '300'\r\n                }\r\n            }\r\n        },\r\n        \"sail\": {\r\n            \"primary\": {\r\n                \"name\": \"fuse-paleblue\",\r\n                \"hues\": {\"default\": \"700\", \"hue-1\": \"500\", \"hue-2\": \"600\", \"hue-3\": \"400\"}\r\n            },\r\n            \"accent\": {\"name\": \"cyan\", \"hues\": {\"default\": \"600\", \"hue-1\": \"400\", \"hue-2\": \"700\", \"hue-3\": \"A100\"}},\r\n            \"warn\": {\"name\": \"red\", \"hues\": {\"default\": \"500\", \"hue-1\": \"300\", \"hue-2\": \"800\", \"hue-3\": \"A100\"}},\r\n            \"background\": {\"name\": \"grey\", \"hues\": {\"default\": \"A100\", \"hue-1\": \"A100\", \"hue-2\": \"100\", \"hue-3\": \"300\"}}\r\n        }\r\n\r\n    };\r\n\r\n    angular\r\n        .module('app.core')\r\n        .constant('fuseThemes', fuseThemes);\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    var fusePalettes = [\r\n        {\r\n            name: 'fuse-blue',\r\n            options: {\r\n                '50': '#ebf1fa',\r\n                '100': '#c2d4ef',\r\n                '200': '#9ab8e5',\r\n                '300': '#78a0dc',\r\n                '400': '#5688d3',\r\n                '500': '#3470ca',\r\n                '600': '#2e62b1',\r\n                '700': '#275498',\r\n                '800': '#21467e',\r\n                '900': '#1a3865',\r\n                'A100': '#c2d4ef',\r\n                'A200': '#9ab8e5',\r\n                'A400': '#5688d3',\r\n                'A700': '#275498',\r\n                'contrastDefaultColor': 'light',\r\n                'contrastDarkColors': '50 100 200 A100',\r\n                'contrastStrongLightColors': '300 400'\r\n            }\r\n        },\r\n        {\r\n            name: 'fuse-paleblue',\r\n            options: {\r\n                '50': '#ececee',\r\n                '100': '#c5c6cb',\r\n                '200': '#9ea1a9',\r\n                '300': '#7d818c',\r\n                '400': '#5c616f',\r\n                '500': '#3c4252',\r\n                '600': '#353a48',\r\n                '700': '#2d323e',\r\n                '800': '#262933',\r\n                '900': '#1e2129',\r\n                'A100': '#c5c6cb',\r\n                'A200': '#9ea1a9',\r\n                'A400': '#5c616f',\r\n                'A700': '#2d323e',\r\n                'contrastDefaultColor': 'light',\r\n                'contrastDarkColors': '50 100 200 A100',\r\n                'contrastStrongLightColors': '300 400'\r\n            }\r\n        }\r\n    ];\r\n\r\n    angular\r\n        .module('app.core')\r\n        .constant('fusePalettes', fusePalettes);\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .factory('fuseGenerator', fuseGeneratorService);\r\n\r\n    /** @ngInject */\r\n    function fuseGeneratorService($cookies, $log, fuseTheming)\r\n    {\r\n        // Storage for simplified themes object\r\n        var themes = {};\r\n\r\n        var service = {\r\n            generate: generate,\r\n            rgba    : rgba\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Generate less variables for each theme from theme's\r\n         * palette by using material color naming conventions\r\n         */\r\n        function generate()\r\n        {\r\n            // Get registered themes and palettes and copy\r\n            // them so we don't modify the original objects\r\n            var registeredThemes = angular.copy(fuseTheming.getRegisteredThemes());\r\n            var registeredPalettes = angular.copy(fuseTheming.getRegisteredPalettes());\r\n\r\n            // First, create a simplified object that stores\r\n            // all registered themes and their colors\r\n\r\n            // Iterate through registered themes\r\n            angular.forEach(registeredThemes, function (registeredTheme)\r\n            {\r\n                themes[registeredTheme.name] = {};\r\n\r\n                // Iterate through color types (primary, accent, warn & background)\r\n                angular.forEach(registeredTheme.colors, function (colorType, colorTypeName)\r\n                {\r\n                    themes[registeredTheme.name][colorTypeName] = {\r\n                        'name'  : colorType.name,\r\n                        'levels': {\r\n                            'default': {\r\n                                'color'    : rgba(registeredPalettes[colorType.name][colorType.hues.default].value),\r\n                                'contrast1': rgba(registeredPalettes[colorType.name][colorType.hues.default].contrast, 1),\r\n                                'contrast2': rgba(registeredPalettes[colorType.name][colorType.hues.default].contrast, 2),\r\n                                'contrast3': rgba(registeredPalettes[colorType.name][colorType.hues.default].contrast, 3),\r\n                                'contrast4': rgba(registeredPalettes[colorType.name][colorType.hues.default].contrast, 4)\r\n                            },\r\n                            'hue1'   : {\r\n                                'color'    : rgba(registeredPalettes[colorType.name][colorType.hues['hue-1']].value),\r\n                                'contrast1': rgba(registeredPalettes[colorType.name][colorType.hues['hue-1']].contrast, 1),\r\n                                'contrast2': rgba(registeredPalettes[colorType.name][colorType.hues['hue-1']].contrast, 2),\r\n                                'contrast3': rgba(registeredPalettes[colorType.name][colorType.hues['hue-1']].contrast, 3),\r\n                                'contrast4': rgba(registeredPalettes[colorType.name][colorType.hues['hue-1']].contrast, 4)\r\n                            },\r\n                            'hue2'   : {\r\n                                'color'    : rgba(registeredPalettes[colorType.name][colorType.hues['hue-2']].value),\r\n                                'contrast1': rgba(registeredPalettes[colorType.name][colorType.hues['hue-2']].contrast, 1),\r\n                                'contrast2': rgba(registeredPalettes[colorType.name][colorType.hues['hue-2']].contrast, 2),\r\n                                'contrast3': rgba(registeredPalettes[colorType.name][colorType.hues['hue-2']].contrast, 3),\r\n                                'contrast4': rgba(registeredPalettes[colorType.name][colorType.hues['hue-2']].contrast, 4)\r\n                            },\r\n                            'hue3'   : {\r\n                                'color'    : rgba(registeredPalettes[colorType.name][colorType.hues['hue-3']].value),\r\n                                'contrast1': rgba(registeredPalettes[colorType.name][colorType.hues['hue-3']].contrast, 1),\r\n                                'contrast2': rgba(registeredPalettes[colorType.name][colorType.hues['hue-3']].contrast, 2),\r\n                                'contrast3': rgba(registeredPalettes[colorType.name][colorType.hues['hue-3']].contrast, 3),\r\n                                'contrast4': rgba(registeredPalettes[colorType.name][colorType.hues['hue-3']].contrast, 4)\r\n                            }\r\n                        }\r\n                    };\r\n                });\r\n            });\r\n\r\n            // Process themes one more time and then store them in the service for external use\r\n            processAndStoreThemes(themes);\r\n\r\n            // Iterate through simplified themes\r\n            // object and create style variables\r\n            var styleVars = {};\r\n\r\n            // Iterate through registered themes\r\n            angular.forEach(themes, function (theme, themeName)\r\n            {\r\n                styleVars = {};\r\n                styleVars['@themeName'] = themeName;\r\n\r\n                // Iterate through color types (primary, accent, warn & background)\r\n                angular.forEach(theme, function (colorTypes, colorTypeName)\r\n                {\r\n                    // Iterate through color levels (default, hue1, hue2 & hue3)\r\n                    angular.forEach(colorTypes.levels, function (colors, colorLevelName)\r\n                    {\r\n                        // Iterate through color name (color, contrast1, contrast2, contrast3 & contrast4)\r\n                        angular.forEach(colors, function (color, colorName)\r\n                        {\r\n                            styleVars['@' + colorTypeName + ucfirst(colorLevelName) + ucfirst(colorName)] = color;\r\n                        });\r\n                    });\r\n                });\r\n\r\n                // Render styles\r\n                render(styleVars);\r\n            });\r\n        }\r\n\r\n        // ---------------------------\r\n        //  INTERNAL HELPER FUNCTIONS\r\n        // ---------------------------\r\n\r\n        /**\r\n         * Process and store themes for global use\r\n         *\r\n         * @param _themes\r\n         */\r\n        function processAndStoreThemes(_themes)\r\n        {\r\n            // Here we will go through every registered theme one more time\r\n            // and try to simplify their objects as much as possible for\r\n            // easier access to their properties.\r\n            var themes = angular.copy(_themes);\r\n\r\n            // Iterate through themes\r\n            angular.forEach(themes, function (theme)\r\n            {\r\n                // Iterate through color types (primary, accent, warn & background)\r\n                angular.forEach(theme, function (colorType, colorTypeName)\r\n                {\r\n                    theme[colorTypeName] = colorType.levels;\r\n                    theme[colorTypeName].color = colorType.levels.default.color;\r\n                    theme[colorTypeName].contrast1 = colorType.levels.default.contrast1;\r\n                    theme[colorTypeName].contrast2 = colorType.levels.default.contrast2;\r\n                    theme[colorTypeName].contrast3 = colorType.levels.default.contrast3;\r\n                    theme[colorTypeName].contrast4 = colorType.levels.default.contrast4;\r\n                    delete theme[colorTypeName].default;\r\n                });\r\n            });\r\n\r\n            // Store themes and set selected theme for the first time\r\n            fuseTheming.setThemesList(themes);\r\n\r\n            // Remember selected theme.\r\n            var selectedTheme = $cookies.get('selectedTheme');\r\n\r\n            if ( selectedTheme )\r\n            {\r\n                fuseTheming.setActiveTheme(selectedTheme);\r\n            }\r\n            else\r\n            {\r\n                fuseTheming.setActiveTheme('default');\r\n            }\r\n        }\r\n\r\n\r\n        /**\r\n         * Render css files\r\n         *\r\n         * @param styleVars\r\n         */\r\n        function render(styleVars)\r\n        {\r\n            var cssTemplate = '/* Content hack because they wont fix */\\n/* https://github.com/angular/material/pull/8067 */\\n[md-theme=\"@themeName\"] md-content.md-hue-1,\\nmd-content.md-@themeName-theme.md-hue-1 {\\n    color: @backgroundHue1Contrast1;\\n    background-color: @backgroundHue1Color;\\n}\\n\\n[md-theme=\"@themeName\"] md-content.md-hue-2,\\nmd-content.md-@themeName-theme.md-hue-2 {\\n    color: @backgroundHue2Contrast1;\\n    background-color: @backgroundHue2Color;\\n}\\n\\n[md-theme=\"@themeName\"] md-content.md-hue-3,\\n md-content.md-@themeName-theme.md-hue-3 {\\n    color: @backgroundHue3Contrast1;\\n    background-color: @backgroundHue3Color;\\n}\\n\\n/* Text Colors */\\n[md-theme=\"@themeName\"] a {\\n    color: @accentDefaultColor;\\n}\\n\\n[md-theme=\"@themeName\"] .secondary-text,\\n[md-theme=\"@themeName\"] .icon {\\n    color: @backgroundDefaultContrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .hint-text,\\n[md-theme=\"@themeName\"] .disabled-text {\\n    color: @backgroundDefaultContrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .fade-text,\\n[md-theme=\"@themeName\"] .divider {\\n    color: @backgroundDefaultContrast4;\\n}\\n\\n/* Primary */\\n[md-theme=\"@themeName\"] .md-primary-bg {\\n    background-color: @primaryDefaultColor;\\n    color: @primaryDefaultContrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg .secondary-text,\\n[md-theme=\"@themeName\"] .md-primary-bg .icon {\\n    color: @primaryDefaultContrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg .hint-text,\\n[md-theme=\"@themeName\"] .md-primary-bg .disabled-text {\\n    color: @primaryDefaultContrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg .fade-text,\\n[md-theme=\"@themeName\"] .md-primary-bg .divider {\\n    color: @primaryDefaultContrast4;\\n}\\n\\n/* Primary, Hue-1 */\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-1 {\\n    background-color: @primaryHue1Color;\\n    color: @primaryHue1Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-1 .secondary-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-1 .icon {\\n    color: @primaryHue1Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-1 .hint-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-1 .disabled-text {\\n    color: @primaryHue1Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-1 .fade-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-1 .divider {\\n    color: @primaryHue1Contrast4;\\n}\\n\\n/* Primary, Hue-2 */\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-2 {\\n    background-color: @primaryHue2Color;\\n    color: @primaryHue2Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-2 .secondary-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-2 .icon {\\n    color: @primaryHue2Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-2 .hint-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-2 .disabled-text {\\n    color: @primaryHue2Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-2 .fade-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-2 .divider {\\n    color: @primaryHue2Contrast4;\\n}\\n\\n/* Primary, Hue-3 */\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-3 {\\n    background-color: @primaryHue3Color;\\n    color: @primaryHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-3 .secondary-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-3 .icon {\\n    color: @primaryHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-3 .hint-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-3 .disabled-text {\\n    color: @primaryHue3Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-3 .fade-text,\\n[md-theme=\"@themeName\"] .md-primary-bg.md-hue-3 .divider {\\n    color: @primaryHue3Contrast4;\\n}\\n\\n/* Primary foreground */\\n[md-theme=\"@themeName\"] .md-primary-fg {\\n    color: @primaryDefaultColor !important;\\n}\\n\\n/* Primary foreground, Hue-1 */\\n[md-theme=\"@themeName\"] .md-primary-fg.md-hue-1 {\\n    color: @primaryHue1Color !important;\\n}\\n\\n/* Primary foreground, Hue-2 */\\n[md-theme=\"@themeName\"] .md-primary-fg.md-hue-2 {\\n    color: @primaryHue2Color !important;\\n}\\n\\n/* Primary foreground, Hue-3 */\\n[md-theme=\"@themeName\"] .md-primary-fg.md-hue-3 {\\n    color: @primaryHue3Color !important;\\n}\\n\\n/* Accent */\\n[md-theme=\"@themeName\"] .md-accent-bg {\\n    background-color: @accentDefaultColor;\\n    color: @accentDefaultContrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg .secondary-text,\\n[md-theme=\"@themeName\"] .md-accent-bg .icon {\\n    color: @accentDefaultContrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg .hint-text,\\n[md-theme=\"@themeName\"] .md-accent-bg .disabled-text {\\n    color: @accentDefaultContrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg .fade-text,\\n[md-theme=\"@themeName\"] .md-accent-bg .divider {\\n    color: @accentDefaultContrast4;\\n}\\n\\n/* Accent, Hue-1 */\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-1 {\\n    background-color: @accentHue1Color;\\n    color: @accentHue1Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-1 .secondary-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-1 .icon {\\n    color: @accentHue1Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-1 .hint-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-1 .disabled-text {\\n    color: @accentHue1Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-1 .fade-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-1 .divider {\\n    color: @accentHue1Contrast4;\\n}\\n\\n/* Accent, Hue-2 */\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-2 {\\n    background-color: @accentHue2Color;\\n    color: @accentHue2Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-2 .secondary-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-2 .icon {\\n    color: @accentHue2Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-2 .hint-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-2 .disabled-text {\\n    color: @accentHue2Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-2 .fade-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-2 .divider {\\n    color: @accentHue2Contrast4;\\n}\\n\\n/* Accent, Hue-3 */\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-3 {\\n    background-color: @accentHue3Color;\\n    color: @accentHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-3 .secondary-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-3 .icon {\\n    color: @accentHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-3 .hint-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-3 .disabled-text {\\n    color: @accentHue3Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-3 .fade-text,\\n[md-theme=\"@themeName\"] .md-accent-bg.md-hue-3 .divider {\\n    color: @accentHue3Contrast4;\\n}\\n\\n/* Accent foreground */\\n[md-theme=\"@themeName\"] .md-accent-fg {\\n    color: @accentDefaultColor !important;\\n}\\n\\n/* Accent foreground, Hue-1 */\\n[md-theme=\"@themeName\"] .md-accent-fg.md-hue-1 {\\n    color: @accentHue1Color !important;\\n}\\n\\n/* Accent foreground, Hue-2 */\\n[md-theme=\"@themeName\"] .md-accent-fg.md-hue-2 {\\n    color: @accentHue2Color !important;\\n}\\n\\n/* Accent foreground, Hue-3 */\\n[md-theme=\"@themeName\"] .md-accent-fg.md-hue-3 {\\n    color: @accentHue3Color !important;\\n}\\n\\n/* Warn */\\n[md-theme=\"@themeName\"] .md-warn-bg {\\n    background-color: @warnDefaultColor;\\n    color: @warnDefaultContrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg .secondary-text,\\n[md-theme=\"@themeName\"] .md-warn-bg .icon {\\n    color: @warnDefaultContrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg .hint-text,\\n[md-theme=\"@themeName\"] .md-warn-bg .disabled-text {\\n    color: @warnDefaultContrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg .fade-text,\\n[md-theme=\"@themeName\"] .md-warn-bg .divider {\\n    color: @warnDefaultContrast4;\\n}\\n\\n/* Warn, Hue-1 */\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-1 {\\n    background-color: @warnHue1Color;\\n    color: @warnHue1Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-1 .secondary-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-1 .icon {\\n    color: @warnHue1Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-1 .hint-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-1 .disabled-text {\\n    color: @warnHue1Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-1 .fade-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-1 .divider {\\n    color: @warnHue1Contrast4;\\n}\\n\\n/* Warn, Hue-2 */\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-2 {\\n    background-color: @warnHue2Color;\\n    color: @warnHue2Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-2 .secondary-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-2 .icon {\\n    color: @warnHue2Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-2 .hint-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-2 .disabled-text {\\n    color: @warnHue2Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-2 .fade-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-2 .divider {\\n    color: @warnHue2Contrast4;\\n}\\n\\n/* Warn, Hue-3 */\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-3 {\\n    background-color: @warnHue3Color;\\n    color: @warnHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-3 .secondary-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-3 .icon {\\n    color: @warnHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-3 .hint-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-3 .disabled-text {\\n    color: @warnHue3Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-3 .fade-text,\\n[md-theme=\"@themeName\"] .md-warn-bg.md-hue-3 .divider {\\n    color: @warnHue3Contrast4;\\n}\\n\\n/* Warn foreground */\\n[md-theme=\"@themeName\"] .md-warn-fg {\\n    color: @warnDefaultColor !important;\\n}\\n\\n/* Warn foreground, Hue-1 */\\n[md-theme=\"@themeName\"] .md-warn-fg.md-hue-1 {\\n    color: @warnHue1Color !important;\\n}\\n\\n/* Warn foreground, Hue-2 */\\n[md-theme=\"@themeName\"] .md-warn-fg.md-hue-2 {\\n    color: @warnHue2Color !important;\\n}\\n\\n/* Warn foreground, Hue-3 */\\n[md-theme=\"@themeName\"] .md-warn-fg.md-hue-3 {\\n    color: @warnHue3Color !important;\\n}\\n\\n/* Background */\\n[md-theme=\"@themeName\"] .md-background-bg {\\n    background-color: @backgroundDefaultColor;\\n    color: @backgroundDefaultContrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg .secondary-text,\\n[md-theme=\"@themeName\"] .md-background-bg .icon {\\n    color: @backgroundDefaultContrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg .hint-text,\\n[md-theme=\"@themeName\"] .md-background-bg .disabled-text {\\n    color: @backgroundDefaultContrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg .fade-text,\\n[md-theme=\"@themeName\"] .md-background-bg .divider {\\n    color: @backgroundDefaultContrast4;\\n}\\n\\n/* Background, Hue-1 */\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-1 {\\n    background-color: @backgroundHue1Color;\\n    color: @backgroundHue1Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-1 .secondary-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-1 .icon {\\n    color: @backgroundHue1Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-1 .hint-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-1 .disabled-text {\\n    color: @backgroundHue1Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-1 .fade-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-1 .divider {\\n    color: @backgroundHue1Contrast4;\\n}\\n\\n/* Background, Hue-2 */\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-2 {\\n    background-color: @backgroundHue2Color;\\n    color: @backgroundHue2Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-2 .secondary-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-2 .icon {\\n    color: @backgroundHue2Contrast2;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-2 .hint-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-2 .disabled-text {\\n    color: @backgroundHue2Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-2 .fade-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-2 .divider {\\n    color: @backgroundHue2Contrast4;\\n}\\n\\n/* Background, Hue-3 */\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-3 {\\n    background-color: @backgroundHue3Color;\\n    color: @backgroundHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-3 .secondary-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-3 .icon {\\n    color: @backgroundHue3Contrast1;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-3 .hint-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-3 .disabled-text {\\n    color: @backgroundHue3Contrast3;\\n}\\n\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-3 .fade-text,\\n[md-theme=\"@themeName\"] .md-background-bg.md-hue-3 .divider {\\n    color: @backgroundHue3Contrast4;\\n}\\n\\n/* Background foreground */\\n[md-theme=\"@themeName\"] .md-background-fg {\\n    color: @backgroundDefaultColor !important;\\n}\\n\\n/* Background foreground, Hue-1 */\\n[md-theme=\"@themeName\"] .md-background-fg.md-hue-1 {\\n    color: @backgroundHue1Color !important;\\n}\\n\\n/* Background foreground, Hue-2 */\\n[md-theme=\"@themeName\"] .md-background-fg.md-hue-2 {\\n    color: @backgroundHue2Color !important;\\n}\\n\\n/* Background foreground, Hue-3 */\\n[md-theme=\"@themeName\"] .md-background-fg.md-hue-3 {\\n    color: @backgroundHue3Color !important;\\n}';\r\n\r\n            var regex = new RegExp(Object.keys(styleVars).join('|'), 'gi');\r\n            var css = cssTemplate.replace(regex, function (matched)\r\n            {\r\n                return styleVars[matched];\r\n            });\r\n\r\n            var headEl = angular.element('head');\r\n            var styleEl = angular.element('<style type=\"text/css\"></style>');\r\n            styleEl.html(css);\r\n            headEl.append(styleEl);\r\n        }\r\n\r\n        /**\r\n         * Convert color array to rgb/rgba\r\n         * Also apply contrasts if needed\r\n         *\r\n         * @param color\r\n         * @param _contrastLevel\r\n         * @returns {string}\r\n         */\r\n        function rgba(color, _contrastLevel)\r\n        {\r\n            var contrastLevel = _contrastLevel || false;\r\n\r\n            // Convert 255,255,255,0.XX to 255,255,255\r\n            // According to Google's Material design specs, white primary\r\n            // text must have opacity of 1 and we will fix that here\r\n            // because Angular Material doesn't care about that spec\r\n            if ( color.length === 4 && color[0] === 255 && color[1] === 255 && color[2] === 255 )\r\n            {\r\n                color.splice(3, 4);\r\n            }\r\n\r\n            // If contrast level provided, apply it to the current color\r\n            if ( contrastLevel )\r\n            {\r\n                color = applyContrast(color, contrastLevel);\r\n            }\r\n\r\n            // Convert color array to color string (rgb/rgba)\r\n            if ( color.length === 3 )\r\n            {\r\n                return 'rgb(' + color.join(',') + ')';\r\n            }\r\n            else if ( color.length === 4 )\r\n            {\r\n                return 'rgba(' + color.join(',') + ')';\r\n            }\r\n            else\r\n            {\r\n                $log.error('Invalid number of arguments supplied in the color array: ' + color.length + '\\n' + 'The array must have 3 or 4 colors.');\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Apply given contrast level to the given color\r\n         *\r\n         * @param color\r\n         * @param contrastLevel\r\n         */\r\n        function applyContrast(color, contrastLevel)\r\n        {\r\n            var contrastLevels = {\r\n                'white': {\r\n                    '1': '1',\r\n                    '2': '0.7',\r\n                    '3': '0.3',\r\n                    '4': '0.12'\r\n                },\r\n                'black': {\r\n                    '1': '0.87',\r\n                    '2': '0.54',\r\n                    '3': '0.26',\r\n                    '4': '0.12'\r\n                }\r\n            };\r\n\r\n            // If white\r\n            if ( color[0] === 255 && color[1] === 255 && color[2] === 255 )\r\n            {\r\n                color[3] = contrastLevels.white[contrastLevel];\r\n            }\r\n            // If black\r\n            else if ( color[0] === 0 && color[1] === 0 && color[2] === 0 )\r\n            {\r\n                color[3] = contrastLevels.black[contrastLevel];\r\n            }\r\n\r\n            return color;\r\n        }\r\n\r\n        /**\r\n         * Uppercase first\r\n         */\r\n        function ucfirst(string)\r\n        {\r\n            return string.charAt(0).toUpperCase() + string.slice(1);\r\n        }\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .controller('MsThemeOptionsController', MsThemeOptionsController)\r\n        .directive('msThemeOptions', msThemeOptions);\r\n\r\n    /** @ngInject */\r\n    function MsThemeOptionsController($cookies, fuseTheming)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.themes = fuseTheming.themes;\r\n\r\n        vm.layoutModes = [\r\n            {\r\n                label: 'Boxed',\r\n                value: 'boxed'\r\n            },\r\n            {\r\n                label: 'Wide',\r\n                value: 'wide'\r\n            }\r\n        ];\r\n        vm.layoutStyles = [\r\n            {\r\n                label : 'Vertical Navigation',\r\n                value : 'verticalNavigation',\r\n                figure: '/assets/images/theme-options/vertical-nav.jpg'\r\n            },\r\n            {\r\n                label : 'Vertical Navigation with Fullwidth Toolbar',\r\n                value : 'verticalNavigationFullwidthToolbar',\r\n                figure: '/assets/images/theme-options/vertical-nav-with-full-toolbar.jpg'\r\n            },\r\n            {\r\n                label : 'Vertical Navigation with Fullwidth Toolbar 2',\r\n                value : 'verticalNavigationFullwidthToolbar2',\r\n                figure: '/assets/images/theme-options/vertical-nav-with-full-toolbar-2.jpg'\r\n            },\r\n            {\r\n                label : 'Horizontal Navigation',\r\n                value : 'horizontalNavigation',\r\n                figure: '/assets/images/theme-options/horizontal-nav.jpg'\r\n            },\r\n            {\r\n                label : 'Content with Toolbar',\r\n                value : 'contentWithToolbar',\r\n                figure: '/assets/images/theme-options/content-with-toolbar.jpg'\r\n            },\r\n            {\r\n                label : 'Content Only',\r\n                value : 'contentOnly',\r\n                figure: '/assets/images/theme-options/content-only.jpg'\r\n            },\r\n        ];\r\n\r\n        vm.layoutMode = 'wide';\r\n        vm.layoutStyle = $cookies.get('layoutStyle') || 'verticalNavigation';\r\n\r\n        // Methods\r\n        vm.setActiveTheme = setActiveTheme;\r\n        vm.getActiveTheme = getActiveTheme;\r\n        vm.updateLayoutMode = updateLayoutMode;\r\n        vm.updateLayoutStyle = updateLayoutStyle;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Set active theme\r\n         *\r\n         * @param themeName\r\n         */\r\n        function setActiveTheme(themeName)\r\n        {\r\n            fuseTheming.setActiveTheme(themeName);\r\n        }\r\n\r\n        /**\r\n         * Get active theme\r\n         *\r\n         * @returns {service.themes.active|{name, theme}}\r\n         */\r\n        function getActiveTheme()\r\n        {\r\n            return fuseTheming.themes.active;\r\n        }\r\n\r\n        /**\r\n         * Update layout mode\r\n         */\r\n        function updateLayoutMode()\r\n        {\r\n            var bodyEl = angular.element('body');\r\n\r\n            // Update class on body element\r\n            bodyEl.toggleClass('boxed', (vm.layoutMode === 'boxed'));\r\n        }\r\n\r\n        /**\r\n         * Update layout style\r\n         */\r\n        function updateLayoutStyle()\r\n        {\r\n            // Update the cookie\r\n            $cookies.put('layoutStyle', vm.layoutStyle);\r\n\r\n            // Reload the page to apply the changes\r\n            location.reload();\r\n        }\r\n    }\r\n\r\n    /** @ngInject */\r\n    function msThemeOptions($mdSidenav)\r\n    {\r\n        return {\r\n            restrict   : 'E',\r\n            scope      : {},\r\n            controller : 'MsThemeOptionsController as vm',\r\n            templateUrl: 'app/core/theme-options/theme-options.html',\r\n            compile    : function (tElement)\r\n            {\r\n                tElement.addClass('ms-theme-options');\r\n\r\n                return function postLink(scope)\r\n                {\r\n                    /**\r\n                     * Toggle options sidenav\r\n                     */\r\n                    function toggleOptionsSidenav()\r\n                    {\r\n                        // Toggle the fuse theme options panel\r\n                        $mdSidenav('fuse-theme-options').toggle();\r\n                    }\r\n\r\n                    // Expose the toggle function\r\n                    scope.toggleOptionsSidenav = toggleOptionsSidenav;\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .factory('msUtils', msUtils);\r\n\r\n    /** @ngInject */\r\n    function msUtils($window)\r\n    {\r\n        // Private variables\r\n        var mobileDetect = new MobileDetect($window.navigator.userAgent),\r\n            browserInfo = null;\r\n\r\n        var service = {\r\n            exists       : exists,\r\n            detectBrowser: detectBrowser,\r\n            guidGenerator: guidGenerator,\r\n            isMobile     : isMobile,\r\n            toggleInArray: toggleInArray\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Check if item exists in a list\r\n         *\r\n         * @param item\r\n         * @param list\r\n         * @returns {boolean}\r\n         */\r\n        function exists(item, list)\r\n        {\r\n            return list.indexOf(item) > -1;\r\n        }\r\n\r\n        /**\r\n         * Returns browser information\r\n         * from user agent data\r\n         *\r\n         * Found at http://www.quirksmode.org/js/detect.html\r\n         * but modified and updated to fit for our needs\r\n         */\r\n        function detectBrowser()\r\n        {\r\n            // If we already tested, do not test again\r\n            if ( browserInfo )\r\n            {\r\n                return browserInfo;\r\n            }\r\n\r\n            var browserData = [\r\n                {\r\n                    string       : $window.navigator.userAgent,\r\n                    subString    : 'Edge',\r\n                    versionSearch: 'Edge',\r\n                    identity     : 'Edge'\r\n                },\r\n                {\r\n                    string   : $window.navigator.userAgent,\r\n                    subString: 'Chrome',\r\n                    identity : 'Chrome'\r\n                },\r\n                {\r\n                    string       : $window.navigator.userAgent,\r\n                    subString    : 'OmniWeb',\r\n                    versionSearch: 'OmniWeb/',\r\n                    identity     : 'OmniWeb'\r\n                },\r\n                {\r\n                    string       : $window.navigator.vendor,\r\n                    subString    : 'Apple',\r\n                    versionSearch: 'Version',\r\n                    identity     : 'Safari'\r\n                },\r\n                {\r\n                    prop    : $window.opera,\r\n                    identity: 'Opera'\r\n                },\r\n                {\r\n                    string   : $window.navigator.vendor,\r\n                    subString: 'iCab',\r\n                    identity : 'iCab'\r\n                },\r\n                {\r\n                    string   : $window.navigator.vendor,\r\n                    subString: 'KDE',\r\n                    identity : 'Konqueror'\r\n                },\r\n                {\r\n                    string   : $window.navigator.userAgent,\r\n                    subString: 'Firefox',\r\n                    identity : 'Firefox'\r\n                },\r\n                {\r\n                    string   : $window.navigator.vendor,\r\n                    subString: 'Camino',\r\n                    identity : 'Camino'\r\n                },\r\n                {\r\n                    string   : $window.navigator.userAgent,\r\n                    subString: 'Netscape',\r\n                    identity : 'Netscape'\r\n                },\r\n                {\r\n                    string       : $window.navigator.userAgent,\r\n                    subString    : 'MSIE',\r\n                    identity     : 'Explorer',\r\n                    versionSearch: 'MSIE'\r\n                },\r\n                {\r\n                    string       : $window.navigator.userAgent,\r\n                    subString    : 'Trident/7',\r\n                    identity     : 'Explorer',\r\n                    versionSearch: 'rv'\r\n                },\r\n                {\r\n                    string       : $window.navigator.userAgent,\r\n                    subString    : 'Gecko',\r\n                    identity     : 'Mozilla',\r\n                    versionSearch: 'rv'\r\n                },\r\n                {\r\n                    string       : $window.navigator.userAgent,\r\n                    subString    : 'Mozilla',\r\n                    identity     : 'Netscape',\r\n                    versionSearch: 'Mozilla'\r\n                }\r\n            ];\r\n\r\n            var osData = [\r\n                {\r\n                    string   : $window.navigator.platform,\r\n                    subString: 'Win',\r\n                    identity : 'Windows'\r\n                },\r\n                {\r\n                    string   : $window.navigator.platform,\r\n                    subString: 'Mac',\r\n                    identity : 'Mac'\r\n                },\r\n                {\r\n                    string   : $window.navigator.platform,\r\n                    subString: 'Linux',\r\n                    identity : 'Linux'\r\n                },\r\n                {\r\n                    string   : $window.navigator.platform,\r\n                    subString: 'iPhone',\r\n                    identity : 'iPhone'\r\n                },\r\n                {\r\n                    string   : $window.navigator.platform,\r\n                    subString: 'iPod',\r\n                    identity : 'iPod'\r\n                },\r\n                {\r\n                    string   : $window.navigator.platform,\r\n                    subString: 'iPad',\r\n                    identity : 'iPad'\r\n                },\r\n                {\r\n                    string   : $window.navigator.platform,\r\n                    subString: 'Android',\r\n                    identity : 'Android'\r\n                }\r\n            ];\r\n\r\n            var versionSearchString = '';\r\n\r\n            function searchString(data)\r\n            {\r\n                for ( var i = 0; i < data.length; i++ )\r\n                {\r\n                    var dataString = data[i].string;\r\n                    var dataProp = data[i].prop;\r\n\r\n                    versionSearchString = data[i].versionSearch || data[i].identity;\r\n\r\n                    if ( dataString )\r\n                    {\r\n                        if ( dataString.indexOf(data[i].subString) !== -1 )\r\n                        {\r\n                            return data[i].identity;\r\n\r\n                        }\r\n                    }\r\n                    else if ( dataProp )\r\n                    {\r\n                        return data[i].identity;\r\n                    }\r\n                }\r\n            }\r\n\r\n            function searchVersion(dataString)\r\n            {\r\n                var index = dataString.indexOf(versionSearchString);\r\n\r\n                if ( index === -1 )\r\n                {\r\n                    return;\r\n                }\r\n\r\n                return parseInt(dataString.substring(index + versionSearchString.length + 1));\r\n            }\r\n\r\n            var browser = searchString(browserData) || 'unknown-browser';\r\n            var version = searchVersion($window.navigator.userAgent) || searchVersion($window.navigator.appVersion) || 'unknown-version';\r\n            var os = searchString(osData) || 'unknown-os';\r\n\r\n            // Prepare and store the object\r\n            browser = browser.toLowerCase();\r\n            version = browser + '-' + version;\r\n            os = os.toLowerCase();\r\n\r\n            browserInfo = {\r\n                browser: browser,\r\n                version: version,\r\n                os     : os\r\n            };\r\n\r\n            return browserInfo;\r\n        }\r\n\r\n        /**\r\n         * Generates a globally unique id\r\n         *\r\n         * @returns {*}\r\n         */\r\n        function guidGenerator()\r\n        {\r\n            var S4 = function ()\r\n            {\r\n                return (((1 + Math.random()) * 0x10000) || 0).toString(16).substring(1);\r\n            };\r\n            return (S4() + S4() + S4() + S4() + S4() + S4());\r\n        }\r\n\r\n        /**\r\n         * Return if current device is a\r\n         * mobile device or not\r\n         */\r\n        function isMobile()\r\n        {\r\n            return mobileDetect.mobile();\r\n        }\r\n\r\n        /**\r\n         * Toggle in array (push or splice)\r\n         *\r\n         * @param item\r\n         * @param array\r\n         */\r\n        function toggleInArray(item, array)\r\n        {\r\n            if ( array.indexOf(item) === -1 )\r\n            {\r\n                array.push(item);\r\n            }\r\n            else\r\n            {\r\n                array.splice(array.indexOf(item), 1);\r\n            }\r\n        }\r\n    }\r\n}());\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .provider('msApi', msApiProvider);\r\n\r\n    /** @ngInject **/\r\n    function msApiProvider()\r\n    {\r\n        /* ----------------- */\r\n        /* Provider          */\r\n        /* ----------------- */\r\n        var provider = this;\r\n\r\n        // Inject the $log service\r\n        var $log = angular.injector(['ng']).get('$log');\r\n\r\n        // Data\r\n        var baseUrl = '';\r\n        var api = [];\r\n\r\n        // Methods\r\n        provider.setBaseUrl = setBaseUrl;\r\n        provider.getBaseUrl = getBaseUrl;\r\n        provider.getApiObject = getApiObject;\r\n        provider.register = register;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Set base url for API endpoints\r\n         *\r\n         * @param url {string}\r\n         */\r\n        function setBaseUrl(url)\r\n        {\r\n            baseUrl = url;\r\n        }\r\n\r\n        /**\r\n         * Return the base url\r\n         *\r\n         * @returns {string}\r\n         */\r\n        function getBaseUrl()\r\n        {\r\n            return baseUrl;\r\n        }\r\n\r\n        /**\r\n         * Return the api object\r\n         *\r\n         * @returns {object}\r\n         */\r\n        function getApiObject()\r\n        {\r\n            return api;\r\n        }\r\n\r\n        /**\r\n         * Register API endpoint\r\n         *\r\n         * @param key\r\n         * @param resource\r\n         */\r\n        function register(key, resource)\r\n        {\r\n            if ( !angular.isString(key) )\r\n            {\r\n                $log.error('\"path\" must be a string (eg. `dashboard.project`)');\r\n                return;\r\n            }\r\n\r\n            if ( !angular.isArray(resource) )\r\n            {\r\n                $log.error('\"resource\" must be an array and it must follow $resource definition');\r\n                return;\r\n            }\r\n\r\n            // Store the API object\r\n            api[key] = {\r\n                url          : baseUrl + (resource[0] || ''),\r\n                paramDefaults: resource[1] || [],\r\n                actions      : resource[2] || [],\r\n                options      : resource[3] || {}\r\n            };\r\n        }\r\n\r\n        /* ----------------- */\r\n        /* Service           */\r\n        /* ----------------- */\r\n        this.$get = function ($log, $q, $resource, $rootScope)\r\n        {\r\n            // Data\r\n\r\n            // Methods\r\n            var service = {\r\n                setBaseUrl: setBaseUrl,\r\n                getBaseUrl: getBaseUrl,\r\n                register  : register,\r\n                resolve   : resolve,\r\n                request   : request\r\n            };\r\n\r\n            return service;\r\n\r\n            //////////\r\n\r\n            /**\r\n             * Resolve an API endpoint\r\n             *\r\n             * @param action {string}\r\n             * @param parameters {object}\r\n             * @returns {promise|boolean}\r\n             */\r\n            function resolve(action, parameters)\r\n            {\r\n                // Emit an event\r\n                $rootScope.$broadcast('msApi::resolveStart');\r\n                \r\n                var actionParts = action.split('@'),\r\n                    resource = actionParts[0],\r\n                    method = actionParts[1],\r\n                    params = parameters || {};\r\n\r\n                if ( !resource || !method )\r\n                {\r\n                    $log.error('msApi.resolve requires correct action parameter (resourceName@methodName)');\r\n                    return false;\r\n                }\r\n\r\n                // Create a new deferred object\r\n                var deferred = $q.defer();\r\n\r\n                // Get the correct resource definition from api object\r\n                var apiObject = api[resource];\r\n\r\n                if ( !apiObject )\r\n                {\r\n                    $log.error('Resource \"' + resource + '\" is not defined in the api service!');\r\n                    deferred.reject('Resource \"' + resource + '\" is not defined in the api service!');\r\n                }\r\n                else\r\n                {\r\n                    // Generate the $resource object based on the stored API object\r\n                    var resourceObject = $resource(apiObject.url, apiObject.paramDefaults, apiObject.actions, apiObject.options);\r\n\r\n                    // Make the call...\r\n                    resourceObject[method](params,\r\n\r\n                        // Success\r\n                        function (response)\r\n                        {\r\n                            deferred.resolve(response);\r\n\r\n                            // Emit an event\r\n                            $rootScope.$broadcast('msApi::resolveSuccess');\r\n                        },\r\n\r\n                        // Error\r\n                        function (response)\r\n                        {\r\n                            deferred.reject(response);\r\n\r\n                            // Emit an event\r\n                            $rootScope.$broadcast('msApi::resolveError');\r\n                        }\r\n                    );\r\n                }\r\n\r\n                // Return the promise\r\n                return deferred.promise;\r\n            }\r\n\r\n            /**\r\n             * Make a request to an API endpoint\r\n             *\r\n             * @param action {string}\r\n             * @param [parameters] {object}\r\n             * @param [success] {function}\r\n             * @param [error] {function}\r\n             *\r\n             * @returns {promise|boolean}\r\n             */\r\n            function request(action, parameters, success, error)\r\n            {\r\n                // Emit an event\r\n                $rootScope.$broadcast('msApi::requestStart');\r\n                \r\n                var actionParts = action.split('@'),\r\n                    resource = actionParts[0],\r\n                    method = actionParts[1],\r\n                    params = parameters || {};\r\n\r\n                if ( !resource || !method )\r\n                {\r\n                    $log.error('msApi.resolve requires correct action parameter (resourceName@methodName)');\r\n                    return false;\r\n                }\r\n\r\n                // Create a new deferred object\r\n                var deferred = $q.defer();\r\n\r\n                // Get the correct resource definition from api object\r\n                var apiObject = api[resource];\r\n\r\n                if ( !apiObject )\r\n                {\r\n                    $log.error('Resource \"' + resource + '\" is not defined in the api service!');\r\n                    deferred.reject('Resource \"' + resource + '\" is not defined in the api service!');\r\n                }\r\n                else\r\n                {\r\n                    // Generate the $resource object based on the stored API object\r\n                    var resourceObject = $resource(apiObject.url, apiObject.paramDefaults, apiObject.actions, apiObject.options);\r\n\r\n                    // Make the call...\r\n                    resourceObject[method](params,\r\n\r\n                        // SUCCESS\r\n                        function (response)\r\n                        {\r\n                            // Emit an event\r\n                            $rootScope.$broadcast('msApi::requestSuccess');\r\n                            \r\n                            // Resolve the promise\r\n                            deferred.resolve(response);\r\n\r\n                            // Call the success function if there is one\r\n                            if ( angular.isDefined(success) && angular.isFunction(success) )\r\n                            {\r\n                                success(response);\r\n                            }\r\n                        },\r\n\r\n                        // ERROR\r\n                        function (response)\r\n                        {\r\n                            // Emit an event\r\n                            $rootScope.$broadcast('msApi::requestError');\r\n                            \r\n                            // Reject the promise\r\n                            deferred.reject(response);\r\n\r\n                            // Call the error function if there is one\r\n                            if ( angular.isDefined(error) && angular.isFunction(error) )\r\n                            {\r\n                                error(response);\r\n                            }\r\n                        }\r\n                    );\r\n                }\r\n\r\n                // Return the promise\r\n                return deferred.promise;\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .factory('apiResolver', apiResolverService);\r\n\r\n    /** @ngInject */\r\n    function apiResolverService($q, $log, api)\r\n    {\r\n        var service = {\r\n            resolve: resolve\r\n        };\r\n\r\n        return service;\r\n\r\n        //////////\r\n        /**\r\n         * Resolve api\r\n         * @param action\r\n         * @param parameters\r\n         */\r\n        function resolve(action, parameters)\r\n        {\r\n            var actionParts = action.split('@'),\r\n                resource = actionParts[0],\r\n                method = actionParts[1],\r\n                params = parameters || {};\r\n\r\n            if ( !resource || !method )\r\n            {\r\n                $log.error('apiResolver.resolve requires correct action parameter (ResourceName@methodName)');\r\n                return false;\r\n            }\r\n\r\n            // Create a new deferred object\r\n            var deferred = $q.defer();\r\n\r\n            // Get the correct api object from api service\r\n            var apiObject = getApiObject(resource);\r\n\r\n            if ( !apiObject )\r\n            {\r\n                $log.error('Resource \"' + resource + '\" is not defined in the api service!');\r\n                deferred.reject('Resource \"' + resource + '\" is not defined in the api service!');\r\n            }\r\n            else\r\n            {\r\n                apiObject[method](params,\r\n\r\n                    // Success\r\n                    function (response)\r\n                    {\r\n                        deferred.resolve(response);\r\n                    },\r\n\r\n                    // Error\r\n                    function (response)\r\n                    {\r\n                        deferred.reject(response);\r\n                    }\r\n                );\r\n            }\r\n\r\n            // Return the promise\r\n            return deferred.promise;\r\n        }\r\n\r\n        /**\r\n         * Get correct api object\r\n         *\r\n         * @param resource\r\n         * @returns {*}\r\n         */\r\n        function getApiObject(resource)\r\n        {\r\n            // Split the resource in case if we have a dot notated object\r\n            var resourceParts = resource.split('.'),\r\n                apiObject = api;\r\n\r\n            // Loop through the resource parts and go all the way through\r\n            // the api object and return the correct one\r\n            for ( var l = 0; l < resourceParts.length; l++ )\r\n            {\r\n                if ( angular.isUndefined(apiObject[resourceParts[l]]) )\r\n                {\r\n                    $log.error('Resource part \"' + resourceParts[l] + '\" is not defined!');\r\n                    apiObject = false;\r\n                    break;\r\n                }\r\n\r\n                apiObject = apiObject[resourceParts[l]];\r\n            }\r\n\r\n            if ( !apiObject )\r\n            {\r\n                return false;\r\n            }\r\n\r\n            return apiObject;\r\n        }\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .filter('filterByTags', filterByTags)\r\n        .filter('filterSingleByTags', filterSingleByTags);\r\n\r\n    /** @ngInject */\r\n    function filterByTags()\r\n    {\r\n        return function (items, tags)\r\n        {\r\n            if ( items.length === 0 || tags.length === 0 )\r\n            {\r\n                return items;\r\n            }\r\n\r\n            var filtered = [];\r\n\r\n            items.forEach(function (item)\r\n            {\r\n                var match = tags.every(function (tag)\r\n                {\r\n                    var tagExists = false;\r\n\r\n                    item.tags.forEach(function (itemTag)\r\n                    {\r\n                        if ( itemTag.name === tag.name )\r\n                        {\r\n                            tagExists = true;\r\n                            return;\r\n                        }\r\n                    });\r\n\r\n                    return tagExists;\r\n                });\r\n\r\n                if ( match )\r\n                {\r\n                    filtered.push(item);\r\n                }\r\n            });\r\n\r\n            return filtered;\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function filterSingleByTags()\r\n    {\r\n        return function (itemTags, tags)\r\n        {\r\n            if ( itemTags.length === 0 || tags.length === 0 )\r\n            {\r\n                return;\r\n            }\r\n\r\n            if ( itemTags.length < tags.length )\r\n            {\r\n                return [];\r\n            }\r\n\r\n            var filtered = [];\r\n\r\n            var match = tags.every(function (tag)\r\n            {\r\n                var tagExists = false;\r\n\r\n                itemTags.forEach(function (itemTag)\r\n                {\r\n                    if ( itemTag.name === tag.name )\r\n                    {\r\n                        tagExists = true;\r\n                        return;\r\n                    }\r\n                });\r\n\r\n                return tagExists;\r\n            });\r\n\r\n            if ( match )\r\n            {\r\n                filtered.push(itemTags);\r\n            }\r\n\r\n            return filtered;\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .filter('filterByPropIds', filterByPropIds);\r\n\r\n    /** @ngInject */\r\n    function filterByPropIds()\r\n    {\r\n        return function (items, parameter, ids)\r\n        {\r\n            if ( items.length === 0 || !ids || ids.length === 0 )\r\n            {\r\n                return items;\r\n            }\r\n\r\n            var filtered = [];\r\n\r\n            for ( var i = 0; i < items.length; i++ )\r\n            {\r\n                var item = items[i];\r\n                var match = false;\r\n\r\n                for ( var j = 0; j < ids.length; j++ )\r\n                {\r\n                    var id = ids[j];\r\n                    if ( item[parameter].indexOf(id) > -1 )\r\n                    {\r\n                        match = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if ( match )\r\n                {\r\n                    filtered.push(item);\r\n                }\r\n\r\n            }\r\n\r\n            return filtered;\r\n\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .filter('filterByIds', filterByIds);\r\n\r\n    /** @ngInject */\r\n    function filterByIds()\r\n    {\r\n        return function (items, ids)\r\n        {\r\n\r\n            if ( items.length === 0 || !ids )\r\n            {\r\n                return items;\r\n            }\r\n\r\n            if ( ids.length === 0 )\r\n            {\r\n                return [];\r\n            }\r\n\r\n            var filtered = [];\r\n\r\n            for ( var i = 0; i < items.length; i++ )\r\n            {\r\n                var item = items[i];\r\n                var match = false;\r\n\r\n                for ( var j = 0; j < ids.length; j++ )\r\n                {\r\n                    var id = ids[j];\r\n                    if ( item.id === id )\r\n                    {\r\n                        match = true;\r\n                        break;\r\n                    }\r\n                }\r\n\r\n                if ( match )\r\n                {\r\n                    filtered.push(item);\r\n                }\r\n\r\n            }\r\n\r\n            return filtered;\r\n\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .filter('toTrusted', toTrustedFilter)\r\n        .filter('htmlToPlaintext', htmlToPlainTextFilter)\r\n        .filter('nospace', nospaceFilter)\r\n        .filter('humanizeDoc', humanizeDocFilter);\r\n\r\n    /** @ngInject */\r\n    function toTrustedFilter($sce)\r\n    {\r\n        return function (value)\r\n        {\r\n            return $sce.trustAsHtml(value);\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function htmlToPlainTextFilter()\r\n    {\r\n        return function (text)\r\n        {\r\n            return String(text).replace(/<[^>]+>/gm, '');\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function nospaceFilter()\r\n    {\r\n        return function (value)\r\n        {\r\n            return (!value) ? '' : value.replace(/ /g, '');\r\n        };\r\n    }\r\n\r\n    /** @ngInject */\r\n    function humanizeDocFilter()\r\n    {\r\n        return function (doc)\r\n        {\r\n            if ( !doc )\r\n            {\r\n                return;\r\n            }\r\n            if ( doc.type === 'directive' )\r\n            {\r\n                return doc.name.replace(/([A-Z])/g, function ($1)\r\n                {\r\n                    return '-' + $1.toLowerCase();\r\n                });\r\n            }\r\n            return doc.label || doc.name;\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .filter('altDate', altDate);\r\n\r\n    /** @ngInject */\r\n    function altDate()\r\n    {\r\n        return function (value)\r\n        {\r\n            var diff = Date.now() - new Date(value);\r\n\r\n            /**\r\n             * If in a hour\r\n             * e.g. \"2 minutes ago\"\r\n             */\r\n            if ( diff < (60 * 60 * 1000) )\r\n            {\r\n                return moment(value).fromNow();\r\n            }\r\n            /*\r\n             * If in the day\r\n             * e.g. \"11:23\"\r\n             */\r\n            else if ( diff < (60 * 60 * 24 * 1000) )\r\n            {\r\n                return moment(value).format('HH:mm');\r\n            }\r\n            /*\r\n             * If in week\r\n             * e.g \"Tuesday\"\r\n             */\r\n            else if ( diff < (60 * 60 * 24 * 7 * 1000) )\r\n            {\r\n                return moment(value).format('dddd');\r\n            }\r\n            /*\r\n             * If more than a week\r\n             * e.g. 03/29/2016\r\n             */\r\n            else\r\n            {\r\n                return moment(value).calendar();\r\n            }\r\n\r\n        };\r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .provider('fuseConfig', fuseConfigProvider);\r\n\r\n    /** @ngInject */\r\n    function fuseConfigProvider()\r\n    {\r\n        // Default configuration\r\n        var fuseConfiguration = {\r\n            'disableCustomScrollbars'        : false,\r\n            'disableMdInkRippleOnMobile'     : true,\r\n            'disableCustomScrollbarsOnMobile': true\r\n        };\r\n\r\n        // Methods\r\n        this.config = config;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Extend default configuration with the given one\r\n         *\r\n         * @param configuration\r\n         */\r\n        function config(configuration)\r\n        {\r\n            fuseConfiguration = angular.extend({}, fuseConfiguration, configuration);\r\n        }\r\n\r\n        /**\r\n         * Service\r\n         */\r\n        this.$get = function ()\r\n        {\r\n            var service = {\r\n                getConfig: getConfig,\r\n                setConfig: setConfig\r\n            };\r\n\r\n            return service;\r\n\r\n            //////////\r\n\r\n            /**\r\n             * Returns a config value\r\n             */\r\n            function getConfig(configName)\r\n            {\r\n                if ( angular.isUndefined(fuseConfiguration[configName]) )\r\n                {\r\n                    return false;\r\n                }\r\n\r\n                return fuseConfiguration[configName];\r\n            }\r\n\r\n            /**\r\n             * Creates or updates config object\r\n             *\r\n             * @param configName\r\n             * @param configValue\r\n             */\r\n            function setConfig(configName, configValue)\r\n            {\r\n                fuseConfiguration[configName] = configValue;\r\n            }\r\n        };\r\n    }\r\n\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .directive('hljs', hljsDirective);\r\n\r\n    /** @ngInject */\r\n    function hljsDirective($timeout, $q, $interpolate) {\r\n        return {\r\n            restrict: 'E',\r\n            compile : function (element, attr) {\r\n                var code;\r\n                //No attribute? code is the content\r\n                if (!attr.code) {\r\n                    code = element.html();\r\n                    element.empty();\r\n                }\r\n\r\n                return function (scope, element, attr) {\r\n\r\n                    if (attr.code) {\r\n                        // Attribute? code is the evaluation\r\n                        code = scope.$eval(attr.code);\r\n                    }\r\n                    var shouldInterpolate = scope.$eval(attr.shouldInterpolate);\r\n\r\n                    $q.when(code).then(function (code) {\r\n                        if (code) {\r\n                            if (shouldInterpolate) {\r\n                                code = $interpolate(code)(scope);\r\n                            }\r\n                            var contentParent = angular.element(\r\n                                '<pre><code class=\"highlight\" ng-non-bindable></code></pre>'\r\n                            );\r\n                            element.append(contentParent);\r\n                            // Defer highlighting 1-frame to prevent GA interference...\r\n                            $timeout(function () {\r\n                                render(code, contentParent);\r\n                            }, 34, false);\r\n                        }\r\n                    });\r\n\r\n                    function render(contents, parent) {\r\n\r\n                        var codeElement = parent.find('code');\r\n                        var lines = contents.split('\\n');\r\n\r\n                        // Remove empty lines\r\n                        lines = lines.filter(function (line) {\r\n                            return line.trim().length;\r\n                        });\r\n\r\n                        // Make it so each line starts at 0 whitespace\r\n                        var firstLineWhitespace = lines[0].match(/^\\s*/)[0];\r\n                        var startingWhitespaceRegex = new RegExp('^' + firstLineWhitespace);\r\n                        lines = lines.map(function (line) {\r\n                            return line\r\n                                .replace(startingWhitespaceRegex, '')\r\n                                .replace(/\\s+$/, '');\r\n                        });\r\n\r\n                        var highlightedCode = hljs.highlight(attr.language || attr.lang, lines.join('\\n'), true);\r\n                        highlightedCode.value = highlightedCode.value\r\n                            .replace(/=<span class=\"hljs-value\">\"\"<\\/span>/gi, '')\r\n                            .replace('<head>', '')\r\n                            .replace('<head/>', '');\r\n                        codeElement.append(highlightedCode.value).addClass('highlight');\r\n                    }\r\n                };\r\n            }\r\n        };\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.toolbar', [])\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config()\r\n    {\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.toolbar')\r\n        .controller('ToolbarController', ToolbarController);\r\n\r\n    /** @ngInject */\r\n    function ToolbarController($rootScope, $q, $state, $timeout, $mdSidenav, $mdToast, msNavigationService, usersService, $mdDialog, $document,\r\n                               $scope, authSettings, localStorageService, AuthService, leadsService, scoresService, leadStatusService) {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.authService=AuthService;\r\n        vm.user=AuthService.currentUser;\r\n        AuthService.getCurrentUser().then(function (response) {\r\n            if (response) {\r\n                // getReadPending();\r\n            }\r\n        });\r\n\r\n        vm.bodyEl = angular.element('body');\r\n\r\n        vm.scores=scoresService.scores;\r\n        vm.lead=leadsService.lead;\r\n        vm.leadStatus=leadStatusService.leadStatus;\r\n\r\n        // Watchers\r\n        $scope.$watch('vm.authService', function(){\r\n            vm.user=AuthService.currentUser;\r\n        }, true);\r\n\r\n        // Methods\r\n        vm.toggleSidenav = toggleSidenav;\r\n        vm.logout = logout;\r\n        vm.toggleHorizontalMobileMenu = toggleHorizontalMobileMenu;\r\n        vm.toggleMsNavigationFolded = toggleMsNavigationFolded;\r\n        vm.showInfo = showInfo;\r\n        vm.toggleOnline = toggleOnline;\r\n        vm.getFullNameUser = getFullNameUser;\r\n        vm.toggleAvailable = toggleAvailable;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Toggle sidenav\r\n         *\r\n         * @param sidenavId\r\n         */\r\n        function toggleSidenav(sidenavId) {\r\n            $mdSidenav(sidenavId).toggle();\r\n        }\r\n\r\n        /**\r\n         * Devuelve si se debe mostrar el desplegable de informacion de lead\r\n         */\r\n        function showInfo() {\r\n            return ($state.current.name==='app.leads.get.edit');\r\n        }\r\n\r\n        /**\r\n         * Logout Function\r\n         */\r\n        function logout() {\r\n            // Do logout here.\r\n            AuthService.logout();\r\n        }\r\n\r\n        /**\r\n         * Toggle horizontal mobile menu\r\n         */\r\n        function toggleHorizontalMobileMenu() {\r\n            vm.bodyEl.toggleClass('ms-navigation-horizontal-mobile-menu-active');\r\n        }\r\n\r\n        /**\r\n         * Toggle msNavigation folded\r\n         */\r\n        function toggleMsNavigationFolded() {\r\n            msNavigationService.toggleFolded();\r\n        }\r\n\r\n        /**\r\n         * Marca como activo o inactivo a un usuario\r\n         */\r\n        function toggleOnline(){\r\n            AuthService.toggleOnline();\r\n        }\r\n\r\n        function getFullNameUser(user){\r\n            var text=(user.first_name || '')+\" \"+(user.last_name || '');\r\n            if(text===\" \"){\r\n                text=user.email;\r\n            }\r\n            return text;\r\n        }\r\n\r\n        /**\r\n         * Marca como disponible o no disponible a un usuario\r\n         */\r\n        function toggleAvailable(sw){\r\n            if(!sw){\r\n                openAvailableDialog(vm.user)\r\n            }else{\r\n                var obj={\r\n                    id:vm.user.id,\r\n                    is_available:sw,\r\n                    unavailable_reason:''\r\n                };\r\n                return usersService.saveUser(obj).then(function(res){\r\n                    vm.user.is_available=res.is_available;\r\n                })\r\n            }\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para crear/editar una user\r\n         *\r\n         * @param ev\r\n         * @param user\r\n         */\r\n        function openAvailableDialog(user) {\r\n            $mdDialog.show({\r\n                controller: 'AvailableDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/users/dialogs/available/available-dialog.html',\r\n                parent: angular.element($document.body),\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    User:user\r\n                }\r\n            }).then(function(res) {\r\n                vm.user.is_available=res.is_available;\r\n            });\r\n        }\r\n    }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    /**\r\n     * Main module of the Fuse\r\n     */\r\n    angular\r\n        .module('fuse', [\r\n\r\n            //MomentJS\r\n            'angularMoment',\r\n\r\n            'LocalStorageModule',\r\n\r\n            'datatables',\r\n\r\n            'flow',\r\n\r\n            'textAngular',\r\n\r\n            // Core\r\n            'app.core',\r\n\r\n            // Services\r\n            'app.services',\r\n\r\n            // Auntenticación\r\n            // Aquí se establece el baseUrl para la API, por lo que debe ser el primer módulo en cargar despues del core\r\n            'app.auth',\r\n            'app.users',\r\n\r\n            // Navigation\r\n            'app.navigation',\r\n\r\n            // Toolbar\r\n            'app.toolbar',\r\n\r\n            // Dashboard\r\n            'app.dashboard',\r\n\r\n            // Metrics\r\n            'app.metrics',\r\n\r\n            // Informes\r\n            'app.leads',\r\n\r\n            // Calendario\r\n            'app.calendar',\r\n\r\n            // Tareas\r\n            'app.tasks',\r\n\r\n            // Concessionaires\r\n            'app.concessionaires',\r\n\r\n            // Origins\r\n            'app.origins',\r\n\r\n            // Channels\r\n            'app.channels',\r\n\r\n            // Acds\r\n            'app.acds',\r\n\r\n            // SFA\r\n            'app.sfas',\r\n\r\n            // Imports\r\n            'app.imports',\r\n\r\n            // clients\r\n            'app.clients',\r\n\r\n            // videos\r\n            'app.videos',\r\n\r\n            // geopostcodes\r\n            'app.geopostcodes',\r\n\r\n            // Notificaciones\r\n            'app.utils.notify',\r\n\r\n            // Filtros\r\n            'app.utils.filters',\r\n\r\n            // Directivas\r\n            'app.utils.directives',\r\n\r\n            // Servicio para debounce\r\n            'app.utils.debounce',\r\n\r\n            'app.utils.factory',\r\n\r\n            // Paginacion\r\n            'angularUtils.directives.dirPagination',\r\n\r\n            'ngPassword',\r\n\r\n            // Traducciones\r\n            'gettext'\r\n        ]);\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('fuse')\r\n        .controller('MainController', MainController);\r\n\r\n    /** @ngInject */\r\n    function MainController($scope, $rootScope, msNavigationService, AuthService, localStorageService, $mdDialog, $document,\r\n                            concessionairesService, gettextCatalog) {\r\n        // Data\r\n        var currentUser = null;\r\n        if (AuthService.loggedIn) {\r\n            AuthService.getCurrentUser().then(function (response) {\r\n                if (response) {\r\n                    currentUser = response;\r\n                    if ($rootScope.domain === 'sail') {\r\n                        createMenuSail();\r\n                    } else {\r\n                        createMenu();\r\n                    }\r\n                }\r\n            });\r\n        }\r\n\r\n        function createMenu() {\r\n\r\n            // Navigation\r\n            msNavigationService.saveItem('leads', {\r\n                title: gettextCatalog.getString('Mis leads'),\r\n                icon: 'icon-home',\r\n                state: 'app.leads.board',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('allleads', {\r\n                title: gettextCatalog.getString('Ver todos'),\r\n                icon: 'icon-file-multiple',\r\n                state: 'app.leads.allboard',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('newleads', {\r\n                title: gettextCatalog.getString('Nuevo lead'),\r\n                icon: 'icon-plus',\r\n                state: 'app.leads.get.edit({\"lead\":0})',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('calendar', {\r\n                title: 'Calendario',\r\n                icon: 'icon-calendar-today',\r\n                state: 'app.calendar',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"calendar\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('exportleads', {\r\n                title: gettextCatalog.getString('Exportar leads'),\r\n                icon: 'icon-download',\r\n                // state : 'app.leads.get.edit({\"lead\":0})',\r\n                click: openExportLeadDialog,\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('acds', {\r\n                title: gettextCatalog.getString('Llamadas entrantes'),\r\n                icon: 'icon-phone',\r\n                state: 'app.acds',\r\n                weight: 1,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('dashboard', {\r\n                title: gettextCatalog.getString('Dashboard'),\r\n                icon: 'icon-tile-four',\r\n                // href : 'https://app.powerbi.com/view?r=eyJrIjoiMTBjZmMyMDgtZmM1Yi00YTM4LWE5NTAtYTVkMzBhYWI0MGM1IiwidCI6ImNiODM1OTFjLTBiZjAtNDg3Zi1iM2UzLWM4NzhhMDI3YTEyNiIsImMiOjh9',\r\n                state: 'app.dashboard',\r\n                weight: 2,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config', {\r\n                title: gettextCatalog.getString('Configuración'),\r\n                icon: 'icon-cog',\r\n                weight: 20,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        // if (!currentUser.is_admin){\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.concessionaires', {\r\n                title: gettextCatalog.getString('Concesionarios'),\r\n                icon: 'icon-car',\r\n                state: 'app.concessionaires',\r\n                weight: 1,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.origins', {\r\n                title: gettextCatalog.getString('Orígenes'),\r\n                icon: 'icon-voicemail',\r\n                state: 'app.origins',\r\n                weight: 2,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.channels', {\r\n                title: gettextCatalog.getString('Canales'),\r\n                icon: 'icon-checkerboard',\r\n                state: 'app.channels',\r\n                weight: 3,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.users', {\r\n                title: gettextCatalog.getString('Usuarios'),\r\n                icon: 'icon-account',\r\n                state: 'app.users.list',\r\n                weight: 4,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources', {\r\n                title: gettextCatalog.getString('Centro de recursos'),\r\n                icon: 'icon-document',\r\n                weight: 21,\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources.kit', {\r\n                title: gettextCatalog.getString('Guía desarrollador SML​'),\r\n                icon: 'icon-document',\r\n                weight: 1,\r\n                href: '/assets/documents/manual.pdf',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('videos', {\r\n                title: gettextCatalog.getString('Tutoriales'),\r\n                icon: 'icon-video',\r\n                state: 'app.videos',\r\n                weight: 22,\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources.clients', {\r\n                title: gettextCatalog.getString('Atención al clientes'),\r\n                icon: 'icon-people',\r\n                weight: 2,\r\n                href: 'https://www.artificialintelligencelead.com/atencion-al-cliente',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources.news', {\r\n                title: gettextCatalog.getString('Novedades'),\r\n                icon: 'icon-newspaper',\r\n                weight: 2,\r\n                href: 'https://www.artificialintelligencelead.com/blog',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources.academy', {\r\n                title: gettextCatalog.getString('Atención al clientes'),\r\n                icon: 'icon-bank',\r\n                weight: 2,\r\n                href: 'https://www.artificialintelligencelead.com/courses',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n\r\n        }\r\n\r\n        function createMenuSail() {\r\n\r\n            // Navigation\r\n            msNavigationService.saveItem('calendar', {\r\n                title: 'Calendario',\r\n                icon: 'icon-calendar-today',\r\n                state: 'app.calendar',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"calendar\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('leads', {\r\n                title: gettextCatalog.getString('Buscar'),\r\n                icon: 'icon-account-search',\r\n                state: 'app.leads.board',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('contacts', {\r\n                title: gettextCatalog.getString('Contactos'),\r\n                icon: 'icon-account-multiple',\r\n                state: 'app.leads.list',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('newleads', {\r\n                title: gettextCatalog.getString('Nuevo lead'),\r\n                icon: 'icon-plus',\r\n                state: 'app.leads.get.edit({\"lead\":0})',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('sfa', {\r\n                title: gettextCatalog.getString('Mis automatismos'),\r\n                icon: 'icon-arrange-bring-to-front',\r\n                state: 'app.sfas.list',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('import', {\r\n                title: gettextCatalog.getString('Importador / Exportador'),\r\n                icon: 'icon-cloud-download',\r\n                state: 'app.imports',\r\n                weight: 0,\r\n                hidden: function () {\r\n                    if (!$rootScope.hasPermission(\"leads\", \"LIST\")) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('acds', {\r\n                title: gettextCatalog.getString('Llamadas entrantes'),\r\n                icon: 'icon-phone',\r\n                state: 'app.acds',\r\n                weight: 1,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('dashboard', {\r\n                title: gettextCatalog.getString('Dashboard'),\r\n                icon: 'icon-tile-four',\r\n                // href : 'https://app.powerbi.com/view?r=eyJrIjoiMTBjZmMyMDgtZmM1Yi00YTM4LWE5NTAtYTVkMzBhYWI0MGM1IiwidCI6ImNiODM1OTFjLTBiZjAtNDg3Zi1iM2UzLWM4NzhhMDI3YTEyNiIsImMiOjh9',\r\n                state: 'app.dashboard',\r\n                weight: 2,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('metrics', {\r\n                title: gettextCatalog.getString('Métricas'),\r\n                icon: 'icon-tile-four',\r\n                state: 'app.metrics',\r\n                weight: 2,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config', {\r\n                title: gettextCatalog.getString('Configuración'),\r\n                icon: 'icon-cog',\r\n                weight: 20,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        // if (!currentUser.is_admin){\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.concessionaires', {\r\n                title: gettextCatalog.getString('Concesionarios'),\r\n                icon: 'icon-car',\r\n                state: 'app.concessionaires',\r\n                weight: 1,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.origins', {\r\n                title: gettextCatalog.getString('Orígenes'),\r\n                icon: 'icon-voicemail',\r\n                state: 'app.origins',\r\n                weight: 2,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.channels', {\r\n                title: gettextCatalog.getString('Canales'),\r\n                icon: 'icon-checkerboard',\r\n                state: 'app.channels',\r\n                weight: 3,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('config.users', {\r\n                title: gettextCatalog.getString('Usuarios'),\r\n                icon: 'icon-account',\r\n                state: 'app.users.list',\r\n                weight: 4,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources', {\r\n                title: gettextCatalog.getString('Centro de recursos'),\r\n                icon: 'icon-document',\r\n                weight: 21,\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources.kit', {\r\n                title: gettextCatalog.getString('Guía desarrollador SML'),\r\n                icon: 'icon-document',\r\n                weight: 1,\r\n                href: '/assets/documents/manual.pdf',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('resources.extension', {\r\n                title: gettextCatalog.getString('Extensión PSA'),\r\n                icon: 'icon-download',\r\n                weight: 2,\r\n                href: '/assets/documents/psa_extension.zip',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('videos', {\r\n                title: gettextCatalog.getString('Tutoriales'),\r\n                icon: 'icon-video',\r\n                state: 'app.videos',\r\n                weight: 22,\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('pbx', {\r\n                title: gettextCatalog.getString('PBX'),\r\n                icon: 'icon-link-variant',\r\n                href: 'https://pbx.smartmotorlead.net:1443/',\r\n                weight: 23,\r\n                hidden: function () {\r\n                    if (!currentUser.is_admin && !currentUser.is_concession_admin) {\r\n                        return true;\r\n                    }\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('clients', {\r\n                title: gettextCatalog.getString('Atención al cliente'),\r\n                icon: 'icon-people',\r\n                weight: 24,\r\n                href: 'https://www.artificialintelligencelead.com/atencion-al-cliente',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('news', {\r\n                title: gettextCatalog.getString('Novedades'),\r\n                icon: 'icon-newspaper',\r\n                weight: 25,\r\n                href: 'https://www.artificialintelligencelead.com/blog',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n            msNavigationService.saveItem('academy', {\r\n                title: gettextCatalog.getString('Academy'),\r\n                icon: 'icon-bank',\r\n                weight: 26,\r\n                href: 'https://www.artificialintelligencelead.com/courses',\r\n                hidden: function () {\r\n                }\r\n            });\r\n\r\n\r\n        }\r\n\r\n        /**\r\n         * Abre el dialogo para exportar leads\r\n         *\r\n         * @param ev\r\n         */\r\n        function openExportLeadDialog(ev) {\r\n            $rootScope.loadingProgress = true;\r\n            $mdDialog.show({\r\n                controller: 'ExportLeadDialogController',\r\n                controllerAs: 'vm',\r\n                templateUrl: 'app/main/leads/dialogs/exportLeads/exportLeads-dialog.html',\r\n                parent: angular.element($document.body),\r\n                targetEvent: ev,\r\n                clickOutsideToClose: true,\r\n                locals: {\r\n                    event: ev,\r\n                    Concessionaires: concessionairesService.getAllConcessionaires()\r\n                }\r\n            });\r\n        }\r\n\r\n        // Remove the splash screen\r\n        $scope.$on('$viewContentAnimationEnded', function (event) {\r\n            if (event.targetScope.$id === $scope.$id) {\r\n                $rootScope.$broadcast('msSplashScreen::remove');\r\n            }\r\n        });\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.navigation', [])\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config()\r\n    {\r\n        \r\n    }\r\n\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.navigation')\r\n        .controller('NavigationController', NavigationController);\r\n\r\n    /** @ngInject */\r\n    function NavigationController($scope)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        vm.bodyEl = angular.element('body');\r\n        vm.folded = true;\r\n        vm.msScrollOptions = {\r\n            suppressScrollX: true\r\n        };\r\n\r\n        // Methods\r\n        vm.toggleMsNavigationFolded = toggleMsNavigationFolded;\r\n\r\n        //////////\r\n\r\n        /**\r\n         * Toggle folded status\r\n         */\r\n        function toggleMsNavigationFolded()\r\n        {\r\n            vm.folded = !vm.folded;\r\n        }\r\n\r\n        // Close the mobile menu on $stateChangeSuccess\r\n        $scope.$on('$stateChangeSuccess', function ()\r\n        {\r\n            vm.bodyEl.removeClass('ms-navigation-horizontal-mobile-menu-active');\r\n        });\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .run(runBlock);\r\n\r\n    /** @ngInject */\r\n    function runBlock(msUtils, fuseGenerator, fuseConfig)\r\n    {\r\n        /**\r\n         * Generate extra classes based on registered themes so we\r\n         * can use same colors with non-angular-material elements\r\n         */\r\n        fuseGenerator.generate();\r\n\r\n        /**\r\n         * Disable md-ink-ripple effects on mobile\r\n         * if 'disableMdInkRippleOnMobile' config enabled\r\n         */\r\n        if ( fuseConfig.getConfig('disableMdInkRippleOnMobile') && msUtils.isMobile() )\r\n        {\r\n            var bodyEl = angular.element('body');\r\n            bodyEl.attr('md-no-ink', true);\r\n        }\r\n\r\n        /**\r\n         * Put isMobile() to the html as a class\r\n         */\r\n        if ( msUtils.isMobile() )\r\n        {\r\n            angular.element('html').addClass('is-mobile');\r\n        }\r\n\r\n        /**\r\n         * Put browser information to the html as a class\r\n         */\r\n        var browserInfo = msUtils.detectBrowser();\r\n        if ( browserInfo )\r\n        {\r\n            var htmlClass = browserInfo.browser + ' ' + browserInfo.version + ' ' + browserInfo.os;\r\n            angular.element('html').addClass(htmlClass);\r\n        }\r\n    }\r\n})();\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app.core')\r\n        .config(config);\r\n\r\n    /** @ngInject */\r\n    function config($ariaProvider, $logProvider, msScrollConfigProvider, fuseConfigProvider)\r\n    {\r\n        // Enable debug logging\r\n        $logProvider.debugEnabled(true);\r\n\r\n        /*eslint-disable */\r\n\r\n        // ng-aria configuration\r\n        $ariaProvider.config({\r\n            tabindex: false\r\n        });\r\n\r\n        // Fuse theme configurations\r\n        fuseConfigProvider.config({\r\n            'disableCustomScrollbars'        : false,\r\n            'disableCustomScrollbarsOnMobile': true,\r\n            'disableMdInkRippleOnMobile'     : true\r\n        });\r\n\r\n        // msScroll configuration\r\n        msScrollConfigProvider.config({\r\n            wheelPropagation: true\r\n        });\r\n\r\n        /*eslint-enable */\r\n    }\r\n})();\nangular.module('gettext').run(['gettextCatalog', function (gettextCatalog) {\r\n/* jshint -W100 */\r\n    gettextCatalog.setStrings('en', {\"Abandonar\":\"Leave\",\"Abrir lead\":\"Open lead\",\"Acción realizada correctamente\":\"Action done correctly\",\"Activado el {{ user.user_activation_date | date:'dd/MM/yyyy' }}\":\"Enabled {{User. user_activation_date | date: ' DD/MM/yyyy '}}\",\"Activos\":\"Active\",\"Administrador de concesionario\":\"Dealer administrator\",\"Administrar perfil\":\"Manage profile\",\"Alta\":\"Register\",\"Alta lead\":\"Registrer lead\",\"Alto\":\"Stop\",\"Apellidos\":\"Surname\",\"Asignación\":\"Assing\",\"Asignar\":\"Assing\",\"Asignar Lead\":\"Assing lead\",\"Asignar comercial\":\"Assing user\",\"Avanzado\":\"Advanced\",\"Ayer\":\"Yesterday\",\"Añadir concesionario\":\"Add dealer\",\"Añadir fuente\":\"Add origin\",\"Añadir icono\":\"Add icon\",\"Añadir nota\":\"Add note\",\"Añadir solicitud\":\"Add request\",\"Año\":\"Year\",\"Bajo\":\"Low\",\"Biografía\":\"Biography\",\"Borrar\":\"Delete\",\"Borrar canal\":\"Delete channel\",\"Borrar concesionario\":\"Delete dealer\",\"Borrar leada\":\"Delete lead\",\"Borrar nota\":\"Delete note\",\"Borrar solicitud\":\"Delete request\",\"Borrar tag\":\"Delete tag\",\"Buscar\":\"Search\",\"Calendario\":\"Calendar\",\"Calendario de trabajo\":\"Work calendar\",\"Calendario guardado correctamente\":\"Action done correctly\",\"Cambiar foto\":\"Edit photo\",\"Cambios realizados correctamente\":\"Action done correctly\",\"Canal\":\"Channel\",\"Canal borrado correctamente.\":\"Channel delete correctly.\",\"Canal guardado correctamente\":\"Canal save correctly\",\"Canal:\":\"Channel:\",\"Canales\":\"Channels\",\"Canales permitidos\":\"Channels allowed\",\"Cancelar\":\"Cancel\",\"Centro de recursos\":\"Resource Center\",\"Centro de trabajo\":\"Work Center\",\"Cerrar\":\"Close\",\"Cerrar sesión\":\"Sing off\",\"Cliente\":\"Client\",\"Cliente:\":\"Client:\",\"Combustible\":\"Fuel type\",\"Comercial\":\"User\",\"Concesionario\":\"Dealer\",\"Concesionario borrado correctamente.\":\"Dealer deleted correctly.\",\"Concesionario guardado correctamente\":\"Dealer saved correctly\",\"Concesionarios\":\"Dealers\",\"Concesionarios a los que pertenece:\":\"Linked dealers:\",\"Concesión\":\"Dealer\",\"Conectados\":\"Connected\",\"Conexión\":\"Connected\",\"Configuración\":\"Configuration\",\"Configuración del sitio\":\"Web configuration\",\"Confirmar\":\"Confirm\",\"Contactos\":\"Contacts\",\"Contactos comerciales:\":\"Business contacts:\",\"Continuar\":\"Continue\",\"Contraseña\":\"Password\",\"Crear\":\"Create\",\"Crear Lead\":\"Create lead\",\"Curso\":\"Apply\",\"Dados de baja\":\"Unsubscribed\",\"Dar de alta\":\"Register\",\"Dar de baja\":\"Unsubscribe\",\"Dashboard\":\"Dashboard\",\"Datos básicos\":\"Basics data\",\"Datos de lead\":\"Lead data\",\"Debe seleccionar un comercial existente.\":\"You must select an existing comercial.\",\"Debe seleccionar una opción de la lista\":\"You must select a list option\",\"Departamento / Área\":\"Department/ Area\",\"Desactivado el {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}\":\"User deactivation date {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}\",\"Descargar audio\":\"Download audio\",\"Desconectados\":\"Disconnect\",\"Descripción\":\"Description\",\"Dirección\":\"Address\",\"Domingo\":\"Sunday\",\"Duplicado\":\"Duplicate\",\"Día laborable\":\"Laborable day\",\"Editar\":\"Edit\",\"Editar canal\":\"Edit channel\",\"Editar concesionario\":\"Edit dealer\",\"Editar icono\":\"Edit icon\",\"Editar origen\":\"Edit origin\",\"Editar solicitud\":\"Edit request\",\"Editar usuario\":\"Edit user\",\"El email indicado ya existe\":\"This mail already exists\",\"El sistema ha detectado un seguimiento de este lead ¿Desea finalizar el lead?\":\"The system has detected a lead  follow-up , do you want to finish the lead?\",\"Eliminar\":\"Remove\",\"Eliminar canal\":\"Remove channel\",\"Eliminar concesionario\":\"Remove dealer\",\"Eliminar leada\":\"Remove lead\",\"Eliminar solicitud\":\"Remove request\",\"Email\":\"Email\",\"Email o nombre de usario\":\"Email or user name\",\"Entrar\":\"Enter\",\"Error al borrar concesionario.\":\"Mistake when deleting dealer.\",\"Error al borrar la fuente.\":\"Mistake when deleting origin.\",\"Error al dar de alta a este usuario.\":\"Mistake when registering a dealer.\",\"Error al dar de baja a este usuario.\":\"Mistake when deleting user.\",\"Error al exportar leads\":\"Mistake when export lead\",\"Error al finalizar lead.\":\"Mistake when end lead.\",\"Error al guardar el calendario.\":\"Mistake when saved calendar.\",\"Error al guardar el canal.\":\"Mistake when saved the cannel.\",\"Error al guardar el concesionario.\":\"Mistake when saved dealer.\",\"Error al guardar el estado.\":\"Mistake when saved status.\",\"Error al guardar el infome.\":\"Mistake when saved report.\",\"Error al guardar el informe.\":\"Mistake when saved report.\",\"Error al guardar el origen.\":\"Mistake when saved origin.\",\"Error al guardar el usuario.\":\"Mistake when saved user.\",\"Error al guardar la solicitud.\":\"Mistake when saved request.\",\"Error al guardar los datos básicos.\":\"Mistake when saved basics datas.\",\"Error al modificar foto.\":\"Mistake when edit photo.\",\"Error al obtener audio\":\"Mistake when saved\",\"Error al realizar el registro\":\"Mistake when registering\",\"Error al realizar la acción.\":\"Mistake when performing the action.\",\"Error al reasignar leads.\":\"Mistake when reassigning leads.\",\"Es administrador del concesionario\":\"Account manager of the car dealership\",\"Es gestor del concesionario\":\"Manager of a car dealership\",\"Escuela\":\"School\",\"Español\":\"Spanish\",\"Especialidad\":\"Specialty\",\"Esta semana\":\"This week\",\"Estado\":\"State\",\"Estado guardado correctamente\":\"Status saved correctly\",\"Este campo es obligatorio\":\"This field is required\",\"Este lead no tiene ninguna solicitud adjunta. ¿Desea continuar?\":\"This lead has no application attached. Do you wish to continue?\",\"Este mes\":\"This month\",\"Exportar\":\"Export\",\"Exportar Leads\":\"Export Leads\",\"Exportar leads\":\"Export leads\",\"Extranjero\":\"Foreign\",\"Extras\":\"Additional features\",\"Fecha\":\"Date\",\"Fecha de alta:\":\"Discharge date:\",\"Fecha de nacimiento\":\"Birthdate\",\"Fecha de realización:\":\"Date of realization:\",\"Fecha de seguimiento:\":\"Date of follow-up:\",\"Fecha en la que comenzó como profesor\":\"Date you started as a teacher\",\"Filtrar\":\"Filter\",\"Filtrar por score\":\"Filter by score\",\"Filtrar por solicitudes\":\"Filter by requests\",\"Finalidazo\":\"Finalized\",\"Finalizar\":\"Finalize\",\"Finalizar lead\":\"Finish lead\",\"Financiación\":\"Financing\",\"Foto modificada correctamente\":\"Photo modified correctly\",\"Francés\":\"French\",\"Fuente\":\"Source\",\"Fuentes:\":\"Sources:\",\"Garantía\":\"Warranty\",\"Gestión comercial\":\"Commercial management\",\"Gestor comercial\":\"Business manager\",\"Guardar\":\"Save\",\"Guardar lead\":\"Save lead\",\"Guía desarrollador SML​\":\"SML Developer Guide\",\"Historial de contactos\":\"Contacts history\",\"Histórico\":\"Historic\",\"Histórico de llamadas\":\"Call history\",\"Hoy\":\"Today\",\"Icono:\":\"Icon:\",\"Id click2call\":\"Id click2call\",\"Id llamada c2c\":\"Id called c2c\",\"Identificador click2call\":\"Click2call identifier\",\"Ilocalizable\":\"Ilocable\",\"Indiferente\":\"Indifferent\",\"Infoauto\":\"Infoauto\",\"Infome guardado correctamente\":\"Report saved correctly\",\"Información del vehículo\":\"Vehicle information\",\"Informe guardado correctamente\":\"Report saved correctly\",\"Inglés\":\"English\",\"Inicial\":\"Initial\",\"Inicio\":\"Start\",\"Jueves\":\"Thursday\",\"Km\":\"Km\",\"LLamada respondida:\":\"Call answered:\",\"La dirección web debe ser de la forma http://...\":\"The web address must be in the form http: // ...\",\"Las contraseñas no coinciden\":\"Passwords do not match\",\"Lead\":\"Lead\",\"Lead finalizado correctamente\":\"Lead completed correctly\",\"Lead no atendido\":\"Lead unattended\",\"Leada borrado correctamente.\":\"Lead erased correctly.\",\"Leads cerrados\":\"Closed leads\",\"Leads no atendidos\":\"Leads not attended\",\"Leads reasignados correctamente\":\"Leads reassigned correctly\",\"Listado de solicitudes\":\"List of requests\",\"Llamadas entrantes\":\"Incoming calls\",\"Llamar\":\"Call\",\"Localidad\":\"Locality\",\"Lunes\":\"Monday\",\"Marca/Modelo\":\"Make/model\",\"Martes\":\"Tuesday\",\"Matrícula\":\"Registration number\",\"Medio\":\"Means\",\"Menos de 30\":\"Less than 30\",\"Mis leads\":\"My leads\",\"Miércoles\":\"Wednesday\",\"Mujer\":\"Woman\",\"Muy bajo\":\"Very low\",\"NSA:\":\"NSA:\",\"Nacional\":\"National\",\"Negativa\":\"Negative\",\"Negativo\":\"Negative\",\"No\":\"No\",\"No disponible\":\"Not available\",\"No eres competente para realizar esta acción. Por favor contacte con atención al cliente.\":\"You are not competent to perform this action. Please contact customer service.\",\"No hay ningun comercial con ese nombre\":\"There is no commercial with that name\",\"No hay ningun provincia con ese nombre\":\"There is no province with that name\",\"No hay ninguna escuela con ese nombre\":\"There is no school with that name\",\"No hay ninguna fuente para esta búsqueda\":\"There is no source for this search\",\"No hay ninguna localidad\":\"There is no locality\",\"No hay ningún canal con ese nombre\":\"There is no channel with that name\",\"No hay ningún concesionario con ese nombre\":\"There is no dealer with that name\",\"No hay ningún concesionario con ese teléfono\":\"There is no dealer with that phone\",\"No hay ningún origen con ese nombre\":\"There is no origin with that name\",\"Nombre\":\"First name\",\"Nota\":\"Note\",\"Notas\":\"Notes\",\"Nueva alta\":\"New high\",\"Nueva solicitud\":\"New request\",\"Nuevo canal\":\"New channel\",\"Nuevo concesionario\":\"New dealer\",\"Nuevo estado\":\"New state\",\"Nuevo lead\":\"New lead\",\"Nuevo origen\":\"New origin\",\"Nuevo usuario\":\"New user\",\"Número de canales:\":\"Number of channels:\",\"Número de concesionarios:\":\"Number of dealers:\",\"Número de leads:\":\"Number of leads:\",\"Número de llamadas entrantes:\":\"Number of incoming calls:\",\"Número de orígenes:\":\"Number of origins:\",\"Número de usuarios:\":\"Number of users:\",\"Origen\":\"Origin\",\"Origen guardado correctamente\":\"Origin saved correctly\",\"Orígenes\":\"Origins\",\"Otro\":\"Other\",\"Pendiente de asignación\":\"Pending assignment\",\"Posible lead duplicado\":\"Possible duplicate lead\",\"Positiva\":\"Positive\",\"Positivo\":\"Positive\",\"Precio\":\"Price\",\"Presupuesto\":\"Budget\",\"Provincia\":\"Province\",\"Puede que esté dando de alta un lead ya creado en el sistema, compruebe si alguno de estos leads es el que usted está creando\":\"You may be registering a lead already created in the system, check if any of these leads is the one you are creating\",\"Realizado\":\"Accomplished\",\"Reasignación de leads\":\"Reassignment of leads\",\"Reasignar\":\"Reasign\",\"Registrar nuevo usuario\":\"Register new user\",\"Registro realizado correctamente\":\"Registration made correctly\",\"Reservado\":\"Reserved\",\"Respuesta a solicitud vía Email\":\"Response to request via Email\",\"Resultado\":\"Result\",\"Score\":\"Score\",\"Score:\":\"Score:\",\"Scoring\":\"Scoring\",\"Se ha producido un error.\":\"An error has occurred.\",\"Se han detectado cambios\":\"Changes have been detected\",\"Se usará para acceder al sistema\":\"It will be used to access the system\",\"Seguimiento\":\"Tracing\",\"Seguimiento programado el:\":\"Scheduled follow-up on:\",\"Selecciona un resultado de la gestión\":\"Select a result of the management\",\"Sexo\":\"Gender\",\"Si\":\"Yes\",\"Si abandona esta pantalla perderá los cambios, ¿Desea guardar los cambios?\":\"If you leave this screen you will lose the changes, do you want to save the changes?\",\"Sin canales\":\"Without channels\",\"Sin concesionarios\":\"Without dealers\",\"Sin definir\":\"Undefined\",\"Sin informes\":\"No reports\",\"Sin llamadas entrantes\":\"No incoming calls\",\"Sin notas añadidas\":\"No added notes\",\"Sin orígenes\":\"Without origins\",\"Sin solicitudes\":\"Without requests\",\"Sin tags añadidos\":\"No tags added\",\"Sin usuarios\":\"Without users\",\"Solicitud borrada correctamente.\":\"Request deleted correctly.\",\"Solicitud guardada correctamente\":\"Request saved correctly\",\"Solicitudes\":\"Request\",\"Super Administrador\":\"Super Administrator\",\"Sábado\":\"Saturday\",\"Tag\":\"Tag\",\"Tags\":\"Tags\",\"Tarea programada el:\":\"Scheduled task on:\",\"Tareas pendientes\":\"Pending tasks\",\"Tasación\":\"Assessment\",\"Teléfono\":\"Phone\",\"Teléfono de concesión oficial\":\"Official concession phone\",\"Teléfono:\":\"Phone:\",\"Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?\":\"You have pending tasks of realization and follow-up. Are you sure you want to finish the lead?\",\"Tipo\":\"Type\",\"Todas\":\"All\",\"Tutor académico\":\"Academic tutor\",\"Tutor profesional\":\"Professional tutor\",\"Url coches.net\":\"Url coches.net\",\"Usuario dado de alta correctamente\":\"User successfully registered\",\"Usuario dado de baja correctamente\":\"User successfully unsubscribed\",\"Usuario guardado correctamente\":\"User saved correctly\",\"Usuarios\":\"Users\",\"Usuarios conectados\":\"Users online\",\"Valoración media\":\"Average Rating\",\"Varón\":\"Male\",\"Vehiculo reservado\":\"Reserved vehicle\",\"Vehículo\":\"Vehicle\",\"Vehículo reservado\":\"Reserved vehicle\",\"Ver Lead\":\"See Lead\",\"Ver historial\":\"See history\",\"Ver más\":\"See more\",\"Ver todos\":\"See all\",\"Viernes\":\"Friday\",\"Visible para empresas\":\"Visible to companies\",\"Visita / Test Drive\":\"Visit / Test Drive\",\"Volver\":\"Return\",\"Web\":\"Web\",\"Ya puede realizar la baja del usuario\":\"You can now unsubscribe the user\",\"a las:\":\"at:\",\"¿Deseas dar de alta un vehículo de interés alternativo?\":\"Do you want to register a vehicle of alternative interest?\",\"¿Seguro que quieres eliminar el canal?\":\"Are you sure you want to delete the channel?\",\"¿Seguro que quieres eliminar el concesionario?\":\"Are you sure you want to delete the dealer?\",\"¿Seguro que quieres eliminar el leada?\":\"Are you sure you want to delete the leads?\",\"¿Seguro que quieres eliminar la solicitud?\":\"Are you sure you want to delete the request?\"});\r\n    gettextCatalog.setStrings('fr', {\"Abandonar\":\"Partir\",\"Abrir lead\":\"Plomb ouvert\",\"Acción realizada correctamente\":\"Action effectuée correctement\",\"Activado el {{ user.user_activation_date | date:'dd/MM/yyyy' }}\":\"Activé le {{ user.user_activation_date | date:'dd/MM/yyyy' }}\",\"Activos\":\"Les atouts\",\"Administrador de concesionario\":\"Administrateur de concessionnaire\",\"Administrar perfil\":\"Gérer le profil\",\"Alta\":\"Haute\",\"Alta lead\":\"Haute lead\",\"Alto\":\"Haute\",\"Apellidos\":\"Nom de famille\",\"Asignación\":\"Cession\",\"Asignar\":\"Assigner\",\"Asignar Lead\":\"Assigner lead\",\"Asignar comercial\":\"Attribuer commercial\",\"Avanzado\":\"Avancée\",\"Ayer\":\"Hier\",\"Añadir concesionario\":\"Ajouter un revendeur\",\"Añadir fuente\":\"Ajouter une source\",\"Añadir icono\":\"Ajouter une icône\",\"Añadir nota\":\"Ajouter une note\",\"Añadir solicitud\":\"Ajouter une demande\",\"Año\":\"Année\",\"Bajo\":\"Bas\",\"Biografía\":\"Biographie\",\"Borrar\":\"Supprimer\",\"Borrar canal\":\"Supprimer le canal\",\"Borrar concesionario\":\"Supprimer le revendeur\",\"Borrar leada\":\"Supprimer leada\",\"Borrar nota\":\"Supprimer la note\",\"Borrar solicitud\":\"Supprimer la demande\",\"Borrar tag\":\"Supprimer la balise\",\"Buscar\":\"Recherche\",\"Calendario\":\"Calendrier\",\"Calendario de trabajo\":\"Calendrier de travail\",\"Calendario guardado correctamente\":\"Calendrier enregistré correctement\",\"Cambiar foto\":\"Changer de photo\",\"Cambios realizados correctamente\":\"Changements faits correctement\",\"Canal\":\"Channel\",\"Canal borrado correctamente.\":\"Chaîne supprimée correctement.\",\"Canal guardado correctamente\":\"Chaîne enregistrée correctement\",\"Canal:\":\"Canal:\",\"Canales\":\"Canaux\",\"Canales permitidos\":\"Canaux autorisés\",\"Cancelar\":\"Annuler\",\"Centro de recursos\":\"Centre de ressources\",\"Centro de trabajo\":\"Centre de travail\",\"Cerrar\":\"Fermer\",\"Cerrar sesión\":\"Fermer la session\",\"Cliente\":\"Client\",\"Cliente:\":\"Client:\",\"Combustible\":\"Carburant\",\"Comercial\":\"Commercial\",\"Concesionario\":\"Concessionnaire\",\"Concesionario borrado correctamente.\":\"Concessionnaire supprimé correctement.\",\"Concesionario guardado correctamente\":\"Concessionnaire enregistré correctement\",\"Concesionarios\":\"Concessionnaires\",\"Concesionarios a los que pertenece:\":\"Concessionnaires auxquels il appartient:\",\"Concesión\":\"Concession\",\"Conectados\":\"Connecté\",\"Conexión\":\"Connexion\",\"Configuración\":\"Configuration\",\"Configuración del sitio\":\"Configuration du site\",\"Confirmar\":\"Confirmer\",\"Contactos\":\"Contacts\",\"Contactos comerciales:\":\"Contacts commerciaux:\",\"Continuar\":\"Continuer\",\"Contraseña\":\"Mot de passe\",\"Crear\":\"Créer\",\"Crear Lead\":\"Créer Lead\",\"Curso\":\"Cours\",\"Dados de baja\":\"Déconnexions\",\"Dar de alta\":\"S'inscrire\",\"Dar de baja\":\"Désinscription\",\"Dashboard\":\"Dashboard\",\"Datos básicos\":\"Données de base\",\"Datos de lead\":\"Données de lead\",\"Debe seleccionar un comercial existente.\":\"Vous devez sélectionner une publicité existante.\",\"Debe seleccionar una opción de la lista\":\"Vous devez sélectionner une option dans la liste\",\"Departamento / Área\":\"Département / Zone\",\"Desactivado el {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}\":\"Désactivé le {{ user.user_deactivation_date | date:'dd/MM/yyyy' }}\",\"Descargar audio\":\"Télécharger l'audio\",\"Desconectados\":\"Déconnecté\",\"Descripción\":\"Description\",\"Dirección\":\"Adresse\",\"Domingo\":\"Le dimanche\",\"Duplicado\":\"Dupliquer\",\"Día laborable\":\"Jour ouvrable\",\"Editar\":\"Éditer\",\"Editar canal\":\"Editer le canal\",\"Editar concesionario\":\"Éditer concessionnaire\",\"Editar icono\":\"Icône d'édition\",\"Editar origen\":\"Modifier l'origine\",\"Editar solicitud\":\"Demande de modification\",\"Editar usuario\":\"Modifier l'utilisateur\",\"El email indicado ya existe\":\"L'email indiqué existe déjà\",\"El sistema ha detectado un seguimiento de este lead ¿Desea finalizar el lead?\":\"Le système a détecté un suivi de cette piste. Voulez-vous la terminer?\",\"Eliminar\":\"Supprimer\",\"Eliminar canal\":\"Supprimer le canal\",\"Eliminar concesionario\":\"Supprimer le concessionnaire\",\"Eliminar leada\":\"Supprimer leada\",\"Eliminar solicitud\":\"Supprimer la demande\",\"Email\":\"Email\",\"Email o nombre de usario\":\"Email ou nom d'utilisateur\",\"Entrar\":\"Entrer\",\"Error al borrar concesionario.\":\"Erreur lors de la suppression du concessionnaire.\",\"Error al borrar la fuente.\":\"Erreur lors de la suppression de la source.\",\"Error al dar de alta a este usuario.\":\"Erreur lors de l'enregistrement de cet utilisateur.\",\"Error al dar de baja a este usuario.\":\"Échec de la désinscription de cet utilisateur.\",\"Error al exportar leads\":\"Erreur d'exportation de leads\",\"Error al finalizar lead.\":\"Erreur lors de la finalisation de lead.\",\"Error al guardar el calendario.\":\"Erreur lors de l'enregistrement du calendrier.\",\"Error al guardar el canal.\":\"Erreur lors de l'enregistrement du canal.\",\"Error al guardar el concesionario.\":\"Erreur lors de la sauvegarde du concessionnaire.\",\"Error al guardar el estado.\":\"Erreur lors de la sauvegarde de l'état.\",\"Error al guardar el infome.\":\"Erreur lors de l'enregistrement de l'infome.\",\"Error al guardar el informe.\":\"Erreur lors de l'enregistrement de l'infome.\",\"Error al guardar el origen.\":\"Échec de l'enregistrement de l'origine.\",\"Error al guardar el usuario.\":\"Erreur lors de la sauvegarde de l'utilisateur.\",\"Error al guardar la solicitud.\":\"Erreur lors de l'enregistrement de la demande.\",\"Error al guardar los datos básicos.\":\"Erreur lors de l'enregistrement des données de base.\",\"Error al modificar foto.\":\"Erreur lors de la modification de la photo.\",\"Error al obtener audio\":\"Erreur lors de l'obtention du son\",\"Error al realizar el registro\":\"Erreur lors de l'inscription\",\"Error al realizar la acción.\":\"Erreur lors de l’action.\",\"Error al reasignar leads.\":\"Erreur lors de la réaffectation des leads.\",\"Es administrador del concesionario\":\"Il est le gérant du concessionnaire\",\"Es gestor del concesionario\":\"Il est gérant de concession\",\"Escuela\":\"École\",\"Español\":\"Espagnol\",\"Especialidad\":\"Spécialité\",\"Esta semana\":\"Cette semaine\",\"Estado\":\"Statut\",\"Estado guardado correctamente\":\"Statut sauvegardé correctement\",\"Este campo es obligatorio\":\"Ce champ est obligatoire\",\"Este lead no tiene ninguna solicitud adjunta. ¿Desea continuar?\":\"Cette lead n'a pas d'application jointe. Voulez-vous continuer?\",\"Este mes\":\"Ce mois\",\"Exportar\":\"Exportation\",\"Exportar Leads\":\"Leads d'exportation\",\"Exportar leads\":\"Leads d'exportation\",\"Extranjero\":\"Étrangère\",\"Extras\":\"Extras\",\"Fecha\":\"Date\",\"Fecha de alta:\":\"Date d'inscription:\",\"Fecha de nacimiento\":\"Date de naissance\",\"Fecha de realización:\":\"Date de réalisation:\",\"Fecha de seguimiento:\":\"Date de suivi:\",\"Fecha en la que comenzó como profesor\":\"Date à laquelle vous avez commencé en tant qu'enseignant\",\"Filtrar\":\"Filtrer\",\"Filtrar por score\":\"Filtrer par score\",\"Filtrar por solicitudes\":\"Filtrer par demandes\",\"Finalidazo\":\"Finalidazo\",\"Finalizar\":\"Terminer\",\"Finalizar lead\":\"Terminer lead\",\"Financiación\":\"Financement\",\"Foto modificada correctamente\":\"Photo modifiée correctement\",\"Francés\":\"Francais\",\"Fuente\":\"Source\",\"Fuentes:\":\"Sources:\",\"Garantía\":\"Garantie\",\"Gestión comercial\":\"Gestion commerciale\",\"Gestor comercial\":\"Gérant commercial\",\"Guardar\":\"Sauvegarder\",\"Guardar lead\":\"Sauvegarder lead\",\"Guía desarrollador SML​\":\"Guide du développeur SML\",\"Historial de contactos\":\"Historique des contacts\",\"Histórico\":\"Historique\",\"Histórico de llamadas\":\"Historique des appels\",\"Hoy\":\"Aujourd'hui\",\"Icono:\":\"Icône:\",\"Id click2call\":\"Id click2call\",\"Id llamada c2c\":\"Id appel c2c\",\"Identificador click2call\":\"Identifiant click2call\",\"Ilocalizable\":\"Ilocalizable\",\"Indiferente\":\"Indifférent\",\"Infoauto\":\"Infoauto\",\"Infome guardado correctamente\":\"Infome enregistré correctement\",\"Información del vehículo\":\"Information du véhicule\",\"Informe guardado correctamente\":\"Rapport enregistré correctement\",\"Inglés\":\"Anglais\",\"Inicial\":\"Initiale\",\"Inicio\":\"Début\",\"Jueves\":\"Jeudi\",\"Km\":\"Km\",\"LLamada respondida:\":\"Appel répondu:\",\"La dirección web debe ser de la forma http://...\":\"L’adresse web doit être http://...\",\"Las contraseñas no coinciden\":\"Les mots de passe ne coïncident pas\",\"Lead\":\"Lead\",\"Lead finalizado correctamente\":\"Lead fini correctement\",\"Lead no atendido\":\"Lead pas assisté\",\"Leada borrado correctamente.\":\"Lead effacé correctement.\",\"Leads cerrados\":\"Leads fermé\",\"Leads no atendidos\":\"Leads sans surveillance\",\"Leads reasignados correctamente\":\"Leads correctement réaffecté\",\"Listado de solicitudes\":\"Listing de demandes\",\"Llamadas entrantes\":\"Appels entrants\",\"Llamar\":\"Appel\",\"Localidad\":\"Localité\",\"Lunes\":\"Lundi\",\"Marca/Modelo\":\"Marque / Modèle\",\"Martes\":\"Mardi\",\"Matrícula\":\"Inscription\",\"Medio\":\"Moyen\",\"Menos de 30\":\"Moins de 30\",\"Mis leads\":\"Mes leads\",\"Miércoles\":\"Mercredi\",\"Mujer\":\"Femme\",\"Muy bajo\":\"Très bas\",\"NSA:\":\"NSA:\",\"Nacional\":\"National\",\"Negativa\":\"Refus\",\"Negativo\":\"Négatif\",\"No\":\"Non\",\"No disponible\":\"Non disponible\",\"No eres competente para realizar esta acción. Por favor contacte con atención al cliente.\":\"Vous n’êtes pas compétent pour cette action. Veuillez contacter le service clientèle.\",\"No hay ningun comercial con ese nombre\":\"Il n'y a pas de conseiller avec ce nom\",\"No hay ningun provincia con ese nombre\":\"Aucune province ne porte ce nom\",\"No hay ninguna escuela con ese nombre\":\"Il n’y a pas d’école de ce nom\",\"No hay ninguna fuente para esta búsqueda\":\"Il n'y a pas de source pour cette recherche\",\"No hay ninguna localidad\":\"Il n'y a pas de localité\",\"No hay ningún canal con ese nombre\":\"Il n'y a pas de chaîne avec ce nom\",\"No hay ningún concesionario con ese nombre\":\"Aucun concessionnaire de ce nom\",\"No hay ningún concesionario con ese teléfono\":\"Il n’y a pas de concessionnaire avec ce téléphone\",\"No hay ningún origen con ese nombre\":\"Il n’y a pas d’origine avec ce nom\",\"Nombre\":\"Nom\",\"Nota\":\"Note\",\"Notas\":\"Notes\",\"Nueva alta\":\"Nouvelle inscription\",\"Nueva solicitud\":\"Nouvelle demande\",\"Nuevo canal\":\"Nouveau canal\",\"Nuevo concesionario\":\"Nouveau concessionnaire\",\"Nuevo estado\":\"Nouvel état\",\"Nuevo lead\":\"Nouvel lead\",\"Nuevo origen\":\"Nouvelle origine\",\"Nuevo usuario\":\"Nouvel utilisateur\",\"Número de canales:\":\"Nombre de canaux:\",\"Número de concesionarios:\":\"Nombre de concessionnaires:\",\"Número de leads:\":\"Nombre de leads:\",\"Número de llamadas entrantes:\":\"Nombre d'appels entrants:\",\"Número de orígenes:\":\"Nombre d'origines:\",\"Número de usuarios:\":\"Nombre d'utilisateurs:\",\"Origen\":\"Origine\",\"Origen guardado correctamente\":\"Origine gardée correctement\",\"Orígenes\":\"Origines\",\"Otro\":\"Autre\",\"Pendiente de asignación\":\"Pente d'assignation\",\"Posible lead duplicado\":\"Lead possible doublé\",\"Positiva\":\"Positive\",\"Positivo\":\"Positif\",\"Precio\":\"Prix\",\"Presupuesto\":\"Budget\",\"Provincia\":\"Province\",\"Puede que esté dando de alta un lead ya creado en el sistema, compruebe si alguno de estos leads es el que usted está creando\":\"Peut-être que vous enregistrez un lead déjà créé dans le système, vérifiez si l’un de ces Leads est celui que vous créez\",\"Realizado\":\"Réalisé\",\"Reasignación de leads\":\"Réassignation de leads\",\"Reasignar\":\"Réaffecter\",\"Registrar nuevo usuario\":\"Inscrire un nouvel utilisateur\",\"Registro realizado correctamente\":\"Registre réalisé correctement\",\"Reservado\":\"Réservé\",\"Respuesta a solicitud vía Email\":\"Réponse à la demande par email\",\"Resultado\":\"Résultat\",\"Score\":\"Score\",\"Score:\":\"Score:\",\"Scoring\":\"Scoring\",\"Se ha producido un error.\":\"Une erreur s'est produite.\",\"Se han detectado cambios\":\"Des changements ont été détectés\",\"Se usará para acceder al sistema\":\"Il sera utilisé pour accéder au système\",\"Seguimiento\":\"Suivi\",\"Seguimiento programado el:\":\"Suivi programmé :\",\"Selecciona un resultado de la gestión\":\"Sélectionne un résultat de gestion\",\"Sexo\":\"Genre\",\"Si\":\"Oui\",\"Si abandona esta pantalla perderá los cambios, ¿Desea guardar los cambios?\":\"Si vous quittez cet écran, vous perdrez les modifications. Voulez-vous enregistrer les modifications?\",\"Sin canales\":\"Sans canaux\",\"Sin concesionarios\":\"Sans des concessionnaires\",\"Sin definir\":\"Sans definir\",\"Sin informes\":\"Sans des rapports\",\"Sin llamadas entrantes\":\"Sans des appels entrants\",\"Sin notas añadidas\":\"Sans des notes ajoutées\",\"Sin orígenes\":\"Sans des origines\",\"Sin solicitudes\":\"Sans des demandes\",\"Sin tags añadidos\":\"Sans des tags ajoutés\",\"Sin usuarios\":\"Sans des utilisateurs\",\"Solicitud borrada correctamente.\":\"Demande supprimée correctement.\",\"Solicitud guardada correctamente\":\"Demande gardée correctement\",\"Solicitudes\":\"Demandes\",\"Super Administrador\":\"Super Administrateur\",\"Sábado\":\"Samedi\",\"Tag\":\"Tag\",\"Tags\":\"Tags\",\"Tarea programada el:\":\"Tâche programmée:\",\"Tareas pendientes\":\"Tâches pendantes\",\"Tasación\":\"Évaluation\",\"Teléfono\":\"Téléphone\",\"Teléfono de concesión oficial\":\"Teléfono de concesión oficial\",\"Teléfono:\":\"Téléphone:\",\"Tienes tareas pendientes de realización y seguimiento ¿Estás seguro de querer finalizar el lead?\":\"Vous avez des tâches à accomplir et à suivre. Êtes-vous sûr de vouloir terminer le lead?\",\"Tipo\":\"Type\",\"Todas\":\"Toutes\",\"Tutor académico\":\"Tuteur académique\",\"Tutor profesional\":\"Tuteur professionnel\",\"Url coches.net\":\"Url coches.net\",\"Usuario dado de alta correctamente\":\"Utilisateur inscrit correctement\",\"Usuario dado de baja correctamente\":\"Utilisateur résilié correctement\",\"Usuario guardado correctamente\":\"Utilisateur gardé correctement\",\"Usuarios\":\"Utilisateurs\",\"Usuarios conectados\":\"Utilisateurs branchés\",\"Valoración media\":\"Note moyenne\",\"Varón\":\"Homme\",\"Vehiculo reservado\":\"Véhicule réservé\",\"Vehículo\":\"Véhicule\",\"Vehículo reservado\":\"Vehiculo reservado\",\"Ver Lead\":\"Voir Lead\",\"Ver historial\":\"Voir l'histoire\",\"Ver más\":\"Voir plus\",\"Ver todos\":\"Voir tous\",\"Viernes\":\"Vendredi\",\"Visible para empresas\":\"Visible aux entreprises\",\"Visita / Test Drive\":\"Visite / Test Drive\",\"Volver\":\"Revenir\",\"Web\":\"Web\",\"Ya puede realizar la baja del usuario\":\"Vous pouvez maintenant désinscrire l'utilisateur\",\"a las:\":\"à :\",\"¿Deseas dar de alta un vehículo de interés alternativo?\":\"Voulez-vous ajouter un véhicule d'intérêt alternatif?\",\"¿Seguro que quieres eliminar el canal?\":\"Tu veux vraiment supprimer le canal ?\",\"¿Seguro que quieres eliminar el concesionario?\":\"Tu es sûr de vouloir supprimer le concessionnaire ?\",\"¿Seguro que quieres eliminar el leada?\":\"Tu es sûr de vouloir supprimer la lead?\",\"¿Seguro que quieres eliminar la solicitud?\":\"Êtes-vous sûr de vouloir annuler la demande?\"});\r\n/* jshint +W100 */\r\n}]);\nMimeType={};\r\nMimeType.ez=\"application/andrew-inset\";\r\nMimeType.aw=\"application/applixware\";\r\nMimeType.atom=\"application/atom+xml\";\r\nMimeType.atomcat=\"application/atomcat+xml\";\r\nMimeType.atomsvc=\"application/atomsvc+xml\";\r\nMimeType.ccxml=\"application/ccxml+xml\";\r\nMimeType.cu=\"application/cu-seeme\";\r\nMimeType.davmount=\"application/davmount+xml\";\r\nMimeType.ecma=\"application/ecmascript\";\r\nMimeType.emma=\"application/emma+xml\";\r\nMimeType.epub=\"application/epub+zip\";\r\nMimeType.pfr=\"application/font-tdpfr\";\r\nMimeType.stk=\"application/hyperstudio\";\r\nMimeType.jar=\"application/java-archive\";\r\nMimeType.ser=\"application/java-serialized-object\";\r\nMimeType.class=\"application/java-vm\";\r\nMimeType.js=\"application/javascript\";\r\nMimeType.json=\"application/json\";\r\nMimeType.lostxml=\"application/lost+xml\";\r\nMimeType.hqx=\"application/mac-binhex40\";\r\nMimeType.cpt=\"application/mac-compactpro\";\r\nMimeType.mrc=\"application/marc\";\r\nMimeType.ma=\"application/mathematica\";\r\nMimeType.nb=\"application/mathematica\";\r\nMimeType.mb=\"application/mathematica\";\r\nMimeType.mathml=\"application/mathml+xml\";\r\nMimeType.mbox=\"application/mbox\";\r\nMimeType.mscml=\"application/mediaservercontrol+xml\";\r\nMimeType.mp4s=\"application/mp4\";\r\nMimeType.doc=\"application/msword\";\r\nMimeType.dot=\"application/msword\";\r\nMimeType.mxf=\"application/mxf\";\r\nMimeType.oda=\"application/oda\";\r\nMimeType.opf=\"application/oebps-package+xml\";\r\nMimeType.ogx=\"application/ogg\";\r\nMimeType.xer=\"application/patch-ops-error+xml\";\r\nMimeType.pdf=\"application/pdf\";\r\nMimeType.pgp=\"application/pgp-encrypted\";\r\nMimeType.prf=\"application/pics-rules\";\r\nMimeType.p10=\"application/pkcs10\";\r\nMimeType.p7s=\"application/pkcs7-signature\";\r\nMimeType.cer=\"application/pkix-cert\";\r\nMimeType.crl=\"application/pkix-crl\";\r\nMimeType.pkipath=\"application/pkix-pkipath\";\r\nMimeType.pki=\"application/pkixcmp\";\r\nMimeType.pls=\"application/pls+xml\";\r\nMimeType.cww=\"application/prs.cww\";\r\nMimeType.rdf=\"application/rdf+xml\";\r\nMimeType.rif=\"application/reginfo+xml\";\r\nMimeType.rnc=\"application/relax-ng-compact-syntax\";\r\nMimeType.rl=\"application/resource-lists+xml\";\r\nMimeType.rld=\"application/resource-lists-diff+xml\";\r\nMimeType.rs=\"application/rls-services+xml\";\r\nMimeType.rsd=\"application/rsd+xml\";\r\nMimeType.rss=\"application/rss+xml\";\r\nMimeType.rtf=\"application/rtf\";\r\nMimeType.sbml=\"application/sbml+xml\";\r\nMimeType.scq=\"application/scvp-cv-request\";\r\nMimeType.scs=\"application/scvp-cv-response\";\r\nMimeType.spq=\"application/scvp-vp-request\";\r\nMimeType.spp=\"application/scvp-vp-response\";\r\nMimeType.sdp=\"application/sdp\";\r\nMimeType.setpay=\"application/set-payment-initiation\";\r\nMimeType.setreg=\"application/set-registration-initiation\";\r\nMimeType.shf=\"application/shf+xml\";\r\nMimeType.rq=\"application/sparql-query\";\r\nMimeType.srx=\"application/sparql-results+xml\";\r\nMimeType.gram=\"application/srgs\";\r\nMimeType.grxml=\"application/srgs+xml\";\r\nMimeType.ssml=\"application/ssml+xml\";\r\nMimeType.plb=\"application/vnd.3gpp.pic-bw-large\";\r\nMimeType.psb=\"application/vnd.3gpp.pic-bw-small\";\r\nMimeType.pvb=\"application/vnd.3gpp.pic-bw-var\";\r\nMimeType.tcap=\"application/vnd.3gpp2.tcap\";\r\nMimeType.pwn=\"application/vnd.3m.post-it-notes\";\r\nMimeType.aso=\"application/vnd.accpac.simply.aso\";\r\nMimeType.imp=\"application/vnd.accpac.simply.imp\";\r\nMimeType.acu=\"application/vnd.acucobol\";\r\nMimeType.air=\"application/vnd.adobe.air-application-installer-package+zip\";\r\nMimeType.xdp=\"application/vnd.adobe.xdp+xml\";\r\nMimeType.xfdf=\"application/vnd.adobe.xfdf\";\r\nMimeType.azf=\"application/vnd.airzip.filesecure.azf\";\r\nMimeType.azs=\"application/vnd.airzip.filesecure.azs\";\r\nMimeType.azw=\"application/vnd.amazon.ebook\";\r\nMimeType.acc=\"application/vnd.americandynamics.acc\";\r\nMimeType.ami=\"application/vnd.amiga.ami\";\r\nMimeType.apk=\"application/vnd.android.package-archive\";\r\nMimeType.cii=\"application/vnd.anser-web-certificate-issue-initiation\";\r\nMimeType.fti=\"application/vnd.anser-web-funds-transfer-initiation\";\r\nMimeType.atx=\"application/vnd.antix.game-component\";\r\nMimeType.mpkg=\"application/vnd.apple.installer+xml\";\r\nMimeType.swi=\"application/vnd.arastra.swi\";\r\nMimeType.aep=\"application/vnd.audiograph\";\r\nMimeType.mpm=\"application/vnd.blueice.multipass\";\r\nMimeType.bmi=\"application/vnd.bmi\";\r\nMimeType.rep=\"application/vnd.businessobjects\";\r\nMimeType.cdxml=\"application/vnd.chemdraw+xml\";\r\nMimeType.mmd=\"application/vnd.chipnuts.karaoke-mmd\";\r\nMimeType.cdy=\"application/vnd.cinderella\";\r\nMimeType.cla=\"application/vnd.claymore\";\r\nMimeType.csp=\"application/vnd.commonspace\";\r\nMimeType.cdbcmsg=\"application/vnd.contact.cmsg\";\r\nMimeType.cmc=\"application/vnd.cosmocaller\";\r\nMimeType.clkx=\"application/vnd.crick.clicker\";\r\nMimeType.clkk=\"application/vnd.crick.clicker.keyboard\";\r\nMimeType.clkp=\"application/vnd.crick.clicker.palette\";\r\nMimeType.clkt=\"application/vnd.crick.clicker.template\";\r\nMimeType.clkw=\"application/vnd.crick.clicker.wordbank\";\r\nMimeType.wbs=\"application/vnd.criticaltools.wbs+xml\";\r\nMimeType.pml=\"application/vnd.ctc-posml\";\r\nMimeType.ppd=\"application/vnd.cups-ppd\";\r\nMimeType.car=\"application/vnd.curl.car\";\r\nMimeType.pcurl=\"application/vnd.curl.pcurl\";\r\nMimeType.rdz=\"application/vnd.data-vision.rdz\";\r\nMimeType.fe_launch=\"application/vnd.denovo.fcselayout-link\";\r\nMimeType.dna=\"application/vnd.dna\";\r\nMimeType.mlp=\"application/vnd.dolby.mlp\";\r\nMimeType.dpg=\"application/vnd.dpgraph\";\r\nMimeType.dfac=\"application/vnd.dreamfactory\";\r\nMimeType.geo=\"application/vnd.dynageo\";\r\nMimeType.mag=\"application/vnd.ecowin.chart\";\r\nMimeType.nml=\"application/vnd.enliven\";\r\nMimeType.esf=\"application/vnd.epson.esf\";\r\nMimeType.msf=\"application/vnd.epson.msf\";\r\nMimeType.qam=\"application/vnd.epson.quickanime\";\r\nMimeType.slt=\"application/vnd.epson.salt\";\r\nMimeType.ssf=\"application/vnd.epson.ssf\";\r\nMimeType.ez2=\"application/vnd.ezpix-album\";\r\nMimeType.ez3=\"application/vnd.ezpix-package\";\r\nMimeType.fdf=\"application/vnd.fdf\";\r\nMimeType.mseed=\"application/vnd.fdsn.mseed\";\r\nMimeType.gph=\"application/vnd.flographit\";\r\nMimeType.ftc=\"application/vnd.fluxtime.clip\";\r\nMimeType.fnc=\"application/vnd.frogans.fnc\";\r\nMimeType.ltf=\"application/vnd.frogans.ltf\";\r\nMimeType.fsc=\"application/vnd.fsc.weblaunch\";\r\nMimeType.oas=\"application/vnd.fujitsu.oasys\";\r\nMimeType.oa2=\"application/vnd.fujitsu.oasys2\";\r\nMimeType.oa3=\"application/vnd.fujitsu.oasys3\";\r\nMimeType.fg5=\"application/vnd.fujitsu.oasysgp\";\r\nMimeType.bh2=\"application/vnd.fujitsu.oasysprs\";\r\nMimeType.ddd=\"application/vnd.fujixerox.ddd\";\r\nMimeType.xdw=\"application/vnd.fujixerox.docuworks\";\r\nMimeType.xbd=\"application/vnd.fujixerox.docuworks.binder\";\r\nMimeType.fzs=\"application/vnd.fuzzysheet\";\r\nMimeType.txd=\"application/vnd.genomatix.tuxedo\";\r\nMimeType.ggb=\"application/vnd.geogebra.file\";\r\nMimeType.ggt=\"application/vnd.geogebra.tool\";\r\nMimeType.gmx=\"application/vnd.gmx\";\r\nMimeType.kml=\"application/vnd.google-earth.kml+xml\";\r\nMimeType.kmz=\"application/vnd.google-earth.kmz\";\r\nMimeType.gac=\"application/vnd.groove-account\";\r\nMimeType.ghf=\"application/vnd.groove-help\";\r\nMimeType.gim=\"application/vnd.groove-identity-message\";\r\nMimeType.grv=\"application/vnd.groove-injector\";\r\nMimeType.gtm=\"application/vnd.groove-tool-message\";\r\nMimeType.tpl=\"application/vnd.groove-tool-template\";\r\nMimeType.vcg=\"application/vnd.groove-vcard\";\r\nMimeType.zmm=\"application/vnd.handheld-entertainment+xml\";\r\nMimeType.hbci=\"application/vnd.hbci\";\r\nMimeType.les=\"application/vnd.hhe.lesson-player\";\r\nMimeType.hpgl=\"application/vnd.hp-hpgl\";\r\nMimeType.hpid=\"application/vnd.hp-hpid\";\r\nMimeType.hps=\"application/vnd.hp-hps\";\r\nMimeType.jlt=\"application/vnd.hp-jlyt\";\r\nMimeType.pcl=\"application/vnd.hp-pcl\";\r\nMimeType.pclxl=\"application/vnd.hp-pclxl\";\r\nMimeType.x3d=\"application/vnd.hzn-3d-crossword\";\r\nMimeType.mpy=\"application/vnd.ibm.minipay\";\r\nMimeType.irm=\"application/vnd.ibm.rights-management\";\r\nMimeType.sc=\"application/vnd.ibm.secure-container\";\r\nMimeType.igl=\"application/vnd.igloader\";\r\nMimeType.ivp=\"application/vnd.immervision-ivp\";\r\nMimeType.ivu=\"application/vnd.immervision-ivu\";\r\nMimeType.qbo=\"application/vnd.intu.qbo\";\r\nMimeType.qfx=\"application/vnd.intu.qfx\";\r\nMimeType.rcprofile=\"application/vnd.ipunplugged.rcprofile\";\r\nMimeType.irp=\"application/vnd.irepository.package+xml\";\r\nMimeType.xpr=\"application/vnd.is-xpr\";\r\nMimeType.jam=\"application/vnd.jam\";\r\nMimeType.rms=\"application/vnd.jcp.javame.midlet-rms\";\r\nMimeType.jisp=\"application/vnd.jisp\";\r\nMimeType.joda=\"application/vnd.joost.joda-archive\";\r\nMimeType.karbon=\"application/vnd.kde.karbon\";\r\nMimeType.chrt=\"application/vnd.kde.kchart\";\r\nMimeType.kfo=\"application/vnd.kde.kformula\";\r\nMimeType.flw=\"application/vnd.kde.kivio\";\r\nMimeType.kon=\"application/vnd.kde.kontour\";\r\nMimeType.ksp=\"application/vnd.kde.kspread\";\r\nMimeType.htke=\"application/vnd.kenameaapp\";\r\nMimeType.kia=\"application/vnd.kidspiration\";\r\nMimeType.sse=\"application/vnd.kodak-descriptor\";\r\nMimeType.lbd=\"application/vnd.llamagraphics.life-balance.desktop\";\r\nMimeType.lbe=\"application/vnd.llamagraphics.life-balance.exchange+xml\";\r\nMimeType.apr=\"application/vnd.lotus-approach\";\r\nMimeType.pre=\"application/vnd.lotus-freelance\";\r\nMimeType.nsf=\"application/vnd.lotus-notes\";\r\nMimeType.org=\"application/vnd.lotus-organizer\";\r\nMimeType.scm=\"application/vnd.lotus-screencam\";\r\nMimeType.lwp=\"application/vnd.lotus-wordpro\";\r\nMimeType.portpkg=\"application/vnd.macports.portpkg\";\r\nMimeType.mcd=\"application/vnd.mcd\";\r\nMimeType.mc1=\"application/vnd.medcalcdata\";\r\nMimeType.cdkey=\"application/vnd.mediastation.cdkey\";\r\nMimeType.mwf=\"application/vnd.mfer\";\r\nMimeType.mfm=\"application/vnd.mfmp\";\r\nMimeType.flo=\"application/vnd.micrografx.flo\";\r\nMimeType.igx=\"application/vnd.micrografx.igx\";\r\nMimeType.mif=\"application/vnd.mif\";\r\nMimeType.daf=\"application/vnd.mobius.daf\";\r\nMimeType.dis=\"application/vnd.mobius.dis\";\r\nMimeType.mbk=\"application/vnd.mobius.mbk\";\r\nMimeType.mqy=\"application/vnd.mobius.mqy\";\r\nMimeType.msl=\"application/vnd.mobius.msl\";\r\nMimeType.plc=\"application/vnd.mobius.plc\";\r\nMimeType.txf=\"application/vnd.mobius.txf\";\r\nMimeType.mpn=\"application/vnd.mophun.application\";\r\nMimeType.mpc=\"application/vnd.mophun.certificate\";\r\nMimeType.xul=\"application/vnd.mozilla.xul+xml\";\r\nMimeType.cil=\"application/vnd.ms-artgalry\";\r\nMimeType.cab=\"application/vnd.ms-cab-compressed\";\r\nMimeType.xls=\"application/vnd.ms-excel\";\r\nMimeType.xlm=\"application/vnd.ms-excel\";\r\nMimeType.xla=\"application/vnd.ms-excel\";\r\nMimeType.xlc=\"application/vnd.ms-excel\";\r\nMimeType.xlt=\"application/vnd.ms-excel\";\r\nMimeType.xlw=\"application/vnd.ms-excel\";\r\nMimeType.xlam=\"application/vnd.ms-excel.addin.macroenabled.12\";\r\nMimeType.xlsb=\"application/vnd.ms-excel.sheet.binary.macroenabled.12\";\r\nMimeType.xlsm=\"application/vnd.ms-excel.sheet.macroenabled.12\";\r\nMimeType.xltm=\"application/vnd.ms-excel.template.macroenabled.12\";\r\nMimeType.eot=\"application/vnd.ms-fontobject\";\r\nMimeType.chm=\"application/vnd.ms-htmlhelp\";\r\nMimeType.ims=\"application/vnd.ms-ims\";\r\nMimeType.lrm=\"application/vnd.ms-lrm\";\r\nMimeType.cat=\"application/vnd.ms-pki.seccat\";\r\nMimeType.stl=\"application/vnd.ms-pki.stl\";\r\nMimeType.ppt=\"application/vnd.ms-powerpoint\";\r\nMimeType.pps=\"application/vnd.ms-powerpoint\";\r\nMimeType.pot=\"application/vnd.ms-powerpoint\";\r\nMimeType.ppam=\"application/vnd.ms-powerpoint.addin.macroenabled.12\";\r\nMimeType.pptm=\"application/vnd.ms-powerpoint.presentation.macroenabled.12\";\r\nMimeType.sldm=\"application/vnd.ms-powerpoint.slide.macroenabled.12\";\r\nMimeType.ppsm=\"application/vnd.ms-powerpoint.slideshow.macroenabled.12\";\r\nMimeType.potm=\"application/vnd.ms-powerpoint.template.macroenabled.12\";\r\nMimeType.docm=\"application/vnd.ms-word.document.macroenabled.12\";\r\nMimeType.dotm=\"application/vnd.ms-word.template.macroenabled.12\";\r\nMimeType.wpl=\"application/vnd.ms-wpl\";\r\nMimeType.xps=\"application/vnd.ms-xpsdocument\";\r\nMimeType.mseq=\"application/vnd.mseq\";\r\nMimeType.mus=\"application/vnd.musician\";\r\nMimeType.msty=\"application/vnd.muvee.style\";\r\nMimeType.nlu=\"application/vnd.neurolanguage.nlu\";\r\nMimeType.nnd=\"application/vnd.noblenet-directory\";\r\nMimeType.nns=\"application/vnd.noblenet-sealer\";\r\nMimeType.nnw=\"application/vnd.noblenet-web\";\r\nMimeType.ngdat=\"application/vnd.nokia.n-gage.data\";\r\nMimeType.rpst=\"application/vnd.nokia.radio-preset\";\r\nMimeType.rpss=\"application/vnd.nokia.radio-presets\";\r\nMimeType.edm=\"application/vnd.novadigm.edm\";\r\nMimeType.edx=\"application/vnd.novadigm.edx\";\r\nMimeType.ext=\"application/vnd.novadigm.ext\";\r\nMimeType.odc=\"application/vnd.oasis.opendocument.chart\";\r\nMimeType.otc=\"application/vnd.oasis.opendocument.chart-template\";\r\nMimeType.odb=\"application/vnd.oasis.opendocument.database\";\r\nMimeType.odf=\"application/vnd.oasis.opendocument.formula\";\r\nMimeType.odft=\"application/vnd.oasis.opendocument.formula-template\";\r\nMimeType.odg=\"application/vnd.oasis.opendocument.graphics\";\r\nMimeType.otg=\"application/vnd.oasis.opendocument.graphics-template\";\r\nMimeType.odi=\"application/vnd.oasis.opendocument.image\";\r\nMimeType.oti=\"application/vnd.oasis.opendocument.image-template\";\r\nMimeType.odp=\"application/vnd.oasis.opendocument.presentation\";\r\nMimeType.ods=\"application/vnd.oasis.opendocument.spreadsheet\";\r\nMimeType.ots=\"application/vnd.oasis.opendocument.spreadsheet-template\";\r\nMimeType.odt=\"application/vnd.oasis.opendocument.text\";\r\nMimeType.otm=\"application/vnd.oasis.opendocument.text-master\";\r\nMimeType.ott=\"application/vnd.oasis.opendocument.text-template\";\r\nMimeType.oth=\"application/vnd.oasis.opendocument.text-web\";\r\nMimeType.xo=\"application/vnd.olpc-sugar\";\r\nMimeType.dd2=\"application/vnd.oma.dd2+xml\";\r\nMimeType.oxt=\"application/vnd.openofficeorg.extension\";\r\nMimeType.pptx=\"application/vnd.openxmlformats-officedocument.presentationml.presentation\";\r\nMimeType.sldx=\"application/vnd.openxmlformats-officedocument.presentationml.slide\";\r\nMimeType.ppsx=\"application/vnd.openxmlformats-officedocument.presentationml.slideshow\";\r\nMimeType.potx=\"application/vnd.openxmlformats-officedocument.presentationml.template\";\r\nMimeType.xlsx=\"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet\";\r\nMimeType.xltx=\"application/vnd.openxmlformats-officedocument.spreadsheetml.template\";\r\nMimeType.docx=\"application/vnd.openxmlformats-officedocument.wordprocessingml.document\";\r\nMimeType.dotx=\"application/vnd.openxmlformats-officedocument.wordprocessingml.template\";\r\nMimeType.dp=\"application/vnd.osgi.dp\";\r\nMimeType.str=\"application/vnd.pg.format\";\r\nMimeType.ei6=\"application/vnd.pg.osasli\";\r\nMimeType.efif=\"application/vnd.picsel\";\r\nMimeType.plf=\"application/vnd.pocketlearn\";\r\nMimeType.pbd=\"application/vnd.powerbuilder6\";\r\nMimeType.box=\"application/vnd.previewsystems.box\";\r\nMimeType.mgz=\"application/vnd.proteus.magazine\";\r\nMimeType.qps=\"application/vnd.publishare-delta-tree\";\r\nMimeType.ptid=\"application/vnd.pvi.ptid1\";\r\nMimeType.mxl=\"application/vnd.recordare.musicxml\";\r\nMimeType.musicxml=\"application/vnd.recordare.musicxml+xml\";\r\nMimeType.cod=\"application/vnd.rim.cod\";\r\nMimeType.rm=\"application/vnd.rn-realmedia\";\r\nMimeType.link66=\"application/vnd.route66.link66+xml\";\r\nMimeType.see=\"application/vnd.seemail\";\r\nMimeType.sema=\"application/vnd.sema\";\r\nMimeType.semd=\"application/vnd.semd\";\r\nMimeType.semf=\"application/vnd.semf\";\r\nMimeType.ifm=\"application/vnd.shana.informed.formdata\";\r\nMimeType.itp=\"application/vnd.shana.informed.formtemplate\";\r\nMimeType.iif=\"application/vnd.shana.informed.interchange\";\r\nMimeType.ipk=\"application/vnd.shana.informed.package\";\r\nMimeType.mmf=\"application/vnd.smaf\";\r\nMimeType.teacher=\"application/vnd.smart.teacher\";\r\nMimeType.dxp=\"application/vnd.spotfire.dxp\";\r\nMimeType.sfs=\"application/vnd.spotfire.sfs\";\r\nMimeType.sdc=\"application/vnd.stardivision.calc\";\r\nMimeType.sda=\"application/vnd.stardivision.draw\";\r\nMimeType.sdd=\"application/vnd.stardivision.impress\";\r\nMimeType.smf=\"application/vnd.stardivision.math\";\r\nMimeType.sdw=\"application/vnd.stardivision.writer\";\r\nMimeType.vor=\"application/vnd.stardivision.writer\";\r\nMimeType.sgl=\"application/vnd.stardivision.writer-global\";\r\nMimeType.sxc=\"application/vnd.sun.xml.calc\";\r\nMimeType.stc=\"application/vnd.sun.xml.calc.template\";\r\nMimeType.sxd=\"application/vnd.sun.xml.draw\";\r\nMimeType.std=\"application/vnd.sun.xml.draw.template\";\r\nMimeType.sxi=\"application/vnd.sun.xml.impress\";\r\nMimeType.sti=\"application/vnd.sun.xml.impress.template\";\r\nMimeType.sxm=\"application/vnd.sun.xml.math\";\r\nMimeType.sxw=\"application/vnd.sun.xml.writer\";\r\nMimeType.sxg=\"application/vnd.sun.xml.writer.global\";\r\nMimeType.stw=\"application/vnd.sun.xml.writer.template\";\r\nMimeType.svd=\"application/vnd.svd\";\r\nMimeType.xsm=\"application/vnd.syncml+xml\";\r\nMimeType.bdm=\"application/vnd.syncml.dm+wbxml\";\r\nMimeType.xdm=\"application/vnd.syncml.dm+xml\";\r\nMimeType.tao=\"application/vnd.tao.intent-module-archive\";\r\nMimeType.tmo=\"application/vnd.tmobile-livetv\";\r\nMimeType.tpt=\"application/vnd.trid.tpt\";\r\nMimeType.mxs=\"application/vnd.triscape.mxs\";\r\nMimeType.tra=\"application/vnd.trueapp\";\r\nMimeType.utz=\"application/vnd.uiq.theme\";\r\nMimeType.umj=\"application/vnd.umajin\";\r\nMimeType.unityweb=\"application/vnd.unity\";\r\nMimeType.uoml=\"application/vnd.uoml+xml\";\r\nMimeType.vcx=\"application/vnd.vcx\";\r\nMimeType.vis=\"application/vnd.visionary\";\r\nMimeType.vsf=\"application/vnd.vsf\";\r\nMimeType.wbxml=\"application/vnd.wap.wbxml\";\r\nMimeType.wmlc=\"application/vnd.wap.wmlc\";\r\nMimeType.wmlsc=\"application/vnd.wap.wmlscriptc\";\r\nMimeType.wtb=\"application/vnd.webturbo\";\r\nMimeType.wpd=\"application/vnd.wordperfect\";\r\nMimeType.wqd=\"application/vnd.wqd\";\r\nMimeType.stf=\"application/vnd.wt.stf\";\r\nMimeType.xar=\"application/vnd.xara\";\r\nMimeType.xfdl=\"application/vnd.xfdl\";\r\nMimeType.hvd=\"application/vnd.yamaha.hv-dic\";\r\nMimeType.hvs=\"application/vnd.yamaha.hv-script\";\r\nMimeType.hvp=\"application/vnd.yamaha.hv-voice\";\r\nMimeType.osf=\"application/vnd.yamaha.openscoreformat\";\r\nMimeType.osfpvg=\"application/vnd.yamaha.openscoreformat.osfpvg+xml\";\r\nMimeType.saf=\"application/vnd.yamaha.smaf-audio\";\r\nMimeType.spf=\"application/vnd.yamaha.smaf-phrase\";\r\nMimeType.cmp=\"application/vnd.yellowriver-custom-menu\";\r\nMimeType.zaz=\"application/vnd.zzazz.deck+xml\";\r\nMimeType.vxml=\"application/voicexml+xml\";\r\nMimeType.hlp=\"application/winhlp\";\r\nMimeType.wsdl=\"application/wsdl+xml\";\r\nMimeType.wspolicy=\"application/wspolicy+xml\";\r\nMimeType.abw=\"application/x-abiword\";\r\nMimeType.ace=\"application/x-ace-compressed\";\r\nMimeType.aam=\"application/x-authorware-map\";\r\nMimeType.aas=\"application/x-authorware-seg\";\r\nMimeType.bcpio=\"application/x-bcpio\";\r\nMimeType.torrent=\"application/x-bittorrent\";\r\nMimeType.bz=\"application/x-bzip\";\r\nMimeType.vcd=\"application/x-cdlink\";\r\nMimeType.chat=\"application/x-chat\";\r\nMimeType.pgn=\"application/x-chess-pgn\";\r\nMimeType.cpio=\"application/x-cpio\";\r\nMimeType.csh=\"application/x-csh\";\r\nMimeType.wad=\"application/x-doom\";\r\nMimeType.ncx=\"application/x-dtbncx+xml\";\r\nMimeType.dtb=\"application/x-dtbook+xml\";\r\nMimeType.res=\"application/x-dtbresource+xml\";\r\nMimeType.dvi=\"application/x-dvi\";\r\nMimeType.bdf=\"application/x-font-bdf\";\r\nMimeType.gsf=\"application/x-font-ghostscript\";\r\nMimeType.psf=\"application/x-font-linux-psf\";\r\nMimeType.otf=\"application/x-font-otf\";\r\nMimeType.pcf=\"application/x-font-pcf\";\r\nMimeType.snf=\"application/x-font-snf\";\r\nMimeType.ttf=\"application/x-font-ttf\";\r\nMimeType.ttc=\"application/x-font-ttf\";\r\nMimeType.woff=\"application/font-woff\";\r\nMimeType.spl=\"application/x-futuresplash\";\r\nMimeType.gnumeric=\"application/x-gnumeric\";\r\nMimeType.gtar=\"application/x-gtar\";\r\nMimeType.hdf=\"application/x-hdf\";\r\nMimeType.jnlp=\"application/x-java-jnlp-file\";\r\nMimeType.latex=\"application/x-latex\";\r\nMimeType.application=\"application/x-ms-application\";\r\nMimeType.wmd=\"application/x-ms-wmd\";\r\nMimeType.wmz=\"application/x-ms-wmz\";\r\nMimeType.xbap=\"application/x-ms-xbap\";\r\nMimeType.mdb=\"application/x-msaccess\";\r\nMimeType.obd=\"application/x-msbinder\";\r\nMimeType.crd=\"application/x-mscardfile\";\r\nMimeType.clp=\"application/x-msclip\";\r\nMimeType.exe=\"application/x-msdownload\";\r\nMimeType.dll=\"application/x-msdownload\";\r\nMimeType.com=\"application/x-msdownload\";\r\nMimeType.bat=\"application/x-msdownload\";\r\nMimeType.msi=\"application/x-msdownload\";\r\nMimeType.wmf=\"application/x-msmetafile\";\r\nMimeType.mny=\"application/x-msmoney\";\r\nMimeType.pub=\"application/x-mspublisher\";\r\nMimeType.scd=\"application/x-msschedule\";\r\nMimeType.trm=\"application/x-msterminal\";\r\nMimeType.wri=\"application/x-mswrite\";\r\nMimeType.p7r=\"application/x-pkcs7-certreqresp\";\r\nMimeType.rar=\"application/x-rar-compressed\";\r\nMimeType.sh=\"application/x-sh\";\r\nMimeType.shar=\"application/x-shar\";\r\nMimeType.swf=\"application/x-shockwave-flash\";\r\nMimeType.xap=\"application/x-silverlight-app\";\r\nMimeType.sit=\"application/x-stuffit\";\r\nMimeType.sitx=\"application/x-stuffitx\";\r\nMimeType.sv4cpio=\"application/x-sv4cpio\";\r\nMimeType.sv4crc=\"application/x-sv4crc\";\r\nMimeType.tar=\"application/x-tar\";\r\nMimeType.tcl=\"application/x-tcl\";\r\nMimeType.tex=\"application/x-tex\";\r\nMimeType.tfm=\"application/x-tex-tfm\";\r\nMimeType.texinfo=\"application/x-texinfo\";\r\nMimeType.texi=\"application/x-texinfo\";\r\nMimeType.ustar=\"application/x-ustar\";\r\nMimeType.src=\"application/x-wais-source\";\r\nMimeType.fig=\"application/x-xfig\";\r\nMimeType.xpi=\"application/x-xpinstall\";\r\nMimeType.xenc=\"application/xenc+xml\";\r\nMimeType.xhtml=\"application/xhtml+xml\";\r\nMimeType.xht=\"application/xhtml+xml\";\r\nMimeType.xml=\"application/xml\";\r\nMimeType.xsl=\"application/xml\";\r\nMimeType.dtd=\"application/xml-dtd\";\r\nMimeType.xop=\"application/xop+xml\";\r\nMimeType.xslt=\"application/xslt+xml\";\r\nMimeType.xspf=\"application/xspf+xml\";\r\nMimeType.zip=\"application/zip\";\r\nMimeType.adp=\"audio/adpcm\";\r\nMimeType.mp4a=\"audio/mp4\";\r\nMimeType.m4a=\"audio/mp4a-latm\";\r\nMimeType.m4p=\"audio/mp4a-latm\";\r\nMimeType.mpga=\"audio/mpeg\";\r\nMimeType.mp2=\"audio/mpeg\";\r\nMimeType.mp2a=\"audio/mpeg\";\r\nMimeType.mp3=\"audio/mpeg\";\r\nMimeType.m2a=\"audio/mpeg\";\r\nMimeType.m3a=\"audio/mpeg\";\r\nMimeType.oga=\"audio/ogg\";\r\nMimeType.ogg=\"audio/ogg\";\r\nMimeType.spx=\"audio/ogg\";\r\nMimeType.eol=\"audio/vnd.digital-winds\";\r\nMimeType.dts=\"audio/vnd.dts\";\r\nMimeType.dtshd=\"audio/vnd.dts.hd\";\r\nMimeType.lvp=\"audio/vnd.lucent.voice\";\r\nMimeType.pya=\"audio/vnd.ms-playready.media.pya\";\r\nMimeType.ecelp4800=\"audio/vnd.nuera.ecelp4800\";\r\nMimeType.ecelp7470=\"audio/vnd.nuera.ecelp7470\";\r\nMimeType.ecelp9600=\"audio/vnd.nuera.ecelp9600\";\r\nMimeType.aac=\"audio/x-aac\";\r\nMimeType.m3u=\"audio/x-mpegurl\";\r\nMimeType.wax=\"audio/x-ms-wax\";\r\nMimeType.wma=\"audio/x-ms-wma\";\r\nMimeType.rmp=\"audio/x-pn-realaudio-plugin\";\r\nMimeType.wav=\"audio/x-wav\";\r\nMimeType.cdx=\"chemical/x-cdx\";\r\nMimeType.cif=\"chemical/x-cif\";\r\nMimeType.cmdf=\"chemical/x-cmdf\";\r\nMimeType.cml=\"chemical/x-cml\";\r\nMimeType.csml=\"chemical/x-csml\";\r\nMimeType.xyz=\"chemical/x-xyz\";\r\nMimeType.bmp=\"image/bmp\";\r\nMimeType.cgm=\"image/cgm\";\r\nMimeType.g3=\"image/g3fax\";\r\nMimeType.gif=\"image/gif\";\r\nMimeType.ief=\"image/ief\";\r\nMimeType.jp2=\"image/jp2\";\r\nMimeType.jpeg=\"image/jpeg\";\r\nMimeType.jpg=\"image/jpeg\";\r\nMimeType.jpe=\"image/jpeg\";\r\nMimeType.png=\"image/png\";\r\nMimeType.btif=\"image/prs.btif\";\r\nMimeType.svg=\"image/svg+xml\";\r\nMimeType.svgz=\"image/svg+xml\";\r\nMimeType.tiff=\"image/tiff\";\r\nMimeType.tif=\"image/tiff\";\r\nMimeType.psd=\"image/vnd.adobe.photoshop\";\r\nMimeType.dwg=\"image/vnd.dwg\";\r\nMimeType.dxf=\"image/vnd.dxf\";\r\nMimeType.fbs=\"image/vnd.fastbidsheet\";\r\nMimeType.fpx=\"image/vnd.fpx\";\r\nMimeType.fst=\"image/vnd.fst\";\r\nMimeType.mmr=\"image/vnd.fujixerox.edmics-mmr\";\r\nMimeType.rlc=\"image/vnd.fujixerox.edmics-rlc\";\r\nMimeType.mdi=\"image/vnd.ms-modi\";\r\nMimeType.npx=\"image/vnd.net-fpx\";\r\nMimeType.wbmp=\"image/vnd.wap.wbmp\";\r\nMimeType.xif=\"image/vnd.xiff\";\r\nMimeType.ras=\"image/x-cmu-raster\";\r\nMimeType.cmx=\"image/x-cmx\";\r\nMimeType.ico=\"image/x-icon\";\r\nMimeType.pcx=\"image/x-pcx\";\r\n//MimeType.pic,.pct=\"image/x-pict\";\r\nMimeType.pnm=\"image/x-portable-anymap\";\r\nMimeType.pbm=\"image/x-portable-bitmap\";\r\nMimeType.pgm=\"image/x-portable-graymap\";\r\nMimeType.ppm=\"image/x-portable-pixmap\";\r\nMimeType.rgb=\"image/x-rgb\";\r\nMimeType.xbm=\"image/x-xbitmap\";\r\nMimeType.xpm=\"image/x-xpixmap\";\r\nMimeType.xwd=\"image/x-xwindowdump\";\r\nMimeType.dwf=\"model/vnd.dwf\";\r\nMimeType.gdl=\"model/vnd.gdl\";\r\nMimeType.gtw=\"model/vnd.gtw\";\r\nMimeType.mts=\"model/vnd.mts\";\r\nMimeType.vtu=\"model/vnd.vtu\";\r\nMimeType.css=\"text/css\";\r\nMimeType.csv=\"text/csv\";\r\nMimeType.html=\"text/html\";\r\nMimeType.htm=\"text/html\";\r\nMimeType.txt=\"text/plain\";\r\nMimeType.text=\"text/plain\";\r\nMimeType.dsc=\"text/prs.lines.tag\";\r\nMimeType.rtx=\"text/richtext\";\r\nMimeType.tsv=\"text/tab-separated-values\";\r\nMimeType.curl=\"text/vnd.curl\";\r\nMimeType.dcurl=\"text/vnd.curl.dcurl\";\r\nMimeType.scurl=\"text/vnd.curl.scurl\";\r\nMimeType.mcurl=\"text/vnd.curl.mcurl\";\r\nMimeType.fly=\"text/vnd.fly\";\r\nMimeType.flx=\"text/vnd.fmi.flexstor\";\r\nMimeType.gv=\"text/vnd.graphviz\";\r\nMimeType.spot=\"text/vnd.in3d.spot\";\r\nMimeType.jad=\"text/vnd.sun.j2me.app-descriptor\";\r\nMimeType.wml=\"text/vnd.wap.wml\";\r\nMimeType.wmls=\"text/vnd.wap.wmlscript\";\r\nMimeType.java=\"text/x-java-source\";\r\nMimeType.etx=\"text/x-setext\";\r\nMimeType.uu=\"text/x-uuencode\";\r\nMimeType.vcs=\"text/x-vcalendar\";\r\nMimeType.vcf=\"text/x-vcard\";\r\nMimeType['3gp']=\"video/3gpp\";\r\nMimeType['3g2']=\"video/3gpp2\";\r\nMimeType.h261=\"video/h261\";\r\nMimeType.h263=\"video/h263\";\r\nMimeType.h264=\"video/h264\";\r\nMimeType.jpgv=\"video/jpeg\";\r\nMimeType.mp4=\"video/mp4\";\r\nMimeType.mp4v=\"video/mp4\";\r\nMimeType.mpg4=\"video/mp4\";\r\nMimeType.m4v=\"video/mp4\";\r\nMimeType.webm=\"video/webm\";\r\nMimeType.mpeg=\"video/mpeg\";\r\nMimeType.mpg=\"video/mpeg\";\r\nMimeType.mpe=\"video/mpeg\";\r\nMimeType.m1v=\"video/mpeg\";\r\nMimeType.m2v=\"video/mpeg\";\r\nMimeType.ogv=\"video/ogg\";\r\nMimeType.qt=\"video/quicktime\";\r\nMimeType.mov=\"video/quicktime\";\r\nMimeType.fvt=\"video/vnd.fvt\";\r\nMimeType.pyv=\"video/vnd.ms-playready.media.pyv\";\r\nMimeType.viv=\"video/vnd.vivo\";\r\nMimeType.f4v=\"video/x-f4v\";\r\nMimeType.fli=\"video/x-fli\";\r\nMimeType.flv=\"video/x-flv\";\r\n//MimeType.m4v=\"video/x-m4v\";\r\nMimeType.wm=\"video/x-ms-wm\";\r\nMimeType.wmv=\"video/x-ms-wmv\";\r\nMimeType.wmx=\"video/x-ms-wmx\";\r\nMimeType.wvx=\"video/x-ms-wvx\";\r\nMimeType.avi=\"video/x-msvideo\";\r\nMimeType.movie=\"video/x-sgi-movie\";\r\nMimeType.ice=\"x-conference/x-cooltalk\";\r\nMimeType.indd=\"application/x-indesign\";\r\nMimeType.dat=\"application/octet-stream\";\r\n\r\n// Compressed files\r\n// Based on notes at http://en.wikipedia.org/wiki/List_of_archive_formats\r\nMimeType.gz=\"application/x-gzip\";\r\nMimeType.tgz=\"application/x-tar\";\r\nMimeType.tar=\"application/x-tar\";\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('fuse')\r\n        .run(runBlock);\r\n\r\n    /** @ngInject */\r\n    function runBlock($rootScope, $timeout, $state, authSettings, AuthService, gettextCatalog, msNavigationService,\r\n                      NotifyService, fuseTheming, api)\r\n    {\r\n        var ln = localStorage.language||window.navigator.language||navigator.browserLanguage;\r\n        $rootScope.languageDefault=\"es\";\r\n        gettextCatalog.currentLanguage = ln || $rootScope.languageDefault;\r\n        $rootScope.languageSelected= ln || $rootScope.languageDefault;\r\n        //por si viene con la sintaxis es-ES cogemos la primera parte solo\r\n        $rootScope.languageSelected=$rootScope.languageSelected.split(\"-\")[0];\r\n\r\n        $rootScope.server = \"\";\r\n        if(window.location.host.includes(\"localhost\") || window.location.host.includes(\"192.168.2.\")){\r\n            $rootScope.server = \"http://localhost:8000\";\r\n        }\r\n\r\n        /*\r\n         *\r\n         *   LANGUAGES\r\n         *\r\n         */\r\n        $rootScope.languages = [\r\n            {\r\n                code:'es',\r\n                name:gettextCatalog.getString('Español')\r\n            },\r\n            {\r\n                code:'en',\r\n                name:gettextCatalog.getString('Inglés')\r\n            },\r\n            {\r\n                code:'fr',\r\n                name:gettextCatalog.getString('Francés')\r\n            }\r\n        ];\r\n\r\n        $rootScope.changeLanguage=function(language){\r\n            localStorage.language=language;\r\n            window.location.reload();\r\n        };\r\n\r\n\r\n        /*\r\n         *  Esta función nos permitirá llevar el control de permisos mediante URLs\r\n         *\r\n         * @param module\r\n         * @param action\r\n         */\r\n        $rootScope.hasPermission=function(module,action){\r\n            if(AuthService.currentUser && AuthService.currentUser.urlPermissions){\r\n                var url=api.URLs[module];\r\n                var method=action;\r\n                if(action===\"LIST\" || action===\"POST\"){\r\n                    url = url.replace(/:([^\\/]*)[\\/]$/g, \"\");\r\n                    if(action===\"LIST\"){\r\n                        method=\"GET\";\r\n                    }\r\n                }\r\n                url = url.replace(/:([^\\/]*)[\\/]/g, \":/\");\r\n\r\n\r\n                var urlPermission=\"/\"+url+\"[\"+method.toLowerCase()+\"]\"; //Ya tenemos formada la url para compararla con la de los permisos que nos da el backend\r\n\r\n                return !!AuthService.currentUser.urlPermissions[urlPermission];\r\n            }\r\n\r\n            return true;\r\n            // return false;\r\n        };\r\n\r\n        //Muestra mensaje de error\r\n        $rootScope.showError=function(msg){\r\n            NotifyService.errorMessage(msg);\r\n        };\r\n\r\n\r\n        // Activate loading indicator\r\n        var stateChangeStartEvent = $rootScope.$on('$stateChangeStart', function ()\r\n        {\r\n            $rootScope.loadingProgress = true;\r\n        });\r\n\r\n        // De-activate loading indicator\r\n        var stateChangeSuccessEvent = $rootScope.$on('$stateChangeSuccess', function ()\r\n        {\r\n            $timeout(function ()\r\n            {\r\n                $rootScope.loadingProgress = false;\r\n            });\r\n            $timeout(function ()\r\n            {\r\n                if(msNavigationService.getActiveItem()){\r\n                    var node=msNavigationService.getActiveItem().node;\r\n                    if(node.hidden()){\r\n                        $rootScope.$broadcast(authSettings.ON_UNAUTHORIZED_REQUEST, AuthService.currentUser);\r\n                    }\r\n                }\r\n            },500);\r\n        });\r\n\r\n        // Store state in the root scope for easy access\r\n        $rootScope.state = $state;\r\n\r\n        // Cleanup\r\n        $rootScope.$on('$destroy', function ()\r\n        {\r\n            stateChangeStartEvent();\r\n            stateChangeSuccessEvent();\r\n        });\r\n\r\n        // Si se detecta una petición no autorizada redirigir al login\r\n        $rootScope.$on(authSettings.ON_UNAUTHORIZED_REQUEST, function (event, currentUser) {\r\n            if (authSettings.LOGIN_STATE) {\r\n                if(currentUser){\r\n                    $state.go(authSettings.LOGIN_STATE_SUCCESS);\r\n                }else{\r\n                    $state.go(authSettings.LOGIN_STATE);\r\n                }\r\n            } else {\r\n                console.warn(\"No ha definido una ruta para el formulario de login\");\r\n            }\r\n        });\r\n\r\n        // Si se detecta un logout, redirigir al login\r\n        $rootScope.$on(authSettings.ON_LOGOUT_BROADCAST, function () {\r\n            if (authSettings.LOGIN_STATE) {\r\n                $state.go(authSettings.LOGIN_STATE);\r\n                window.location.reload();\r\n            } else {\r\n                console.warn(\"No ha definido una ruta para el formulario de login\");\r\n            }\r\n        });\r\n\r\n        //creacion de eventos relacionados con las acciones login y logout\r\n        $rootScope.$on(authSettings.ON_LOGIN_BROADCAST, function(event, currentUser){\r\n            if (authSettings.LOGIN_STATE_SUCCESS) {\r\n                if (currentUser.type_user === 'Manager'){\r\n                    $state.go('app.programs');\r\n                }else{\r\n                    $state.go(authSettings.LOGIN_STATE_SUCCESS);\r\n                }\r\n            } else {\r\n                console.warn(\"No ha definido una ruta para la redirección despues del login\");\r\n            }\r\n        });\r\n\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('fuse')\r\n        .config(routeConfig);\r\n\r\n    /** @ngInject */\r\n    function routeConfig($stateProvider, $urlRouterProvider, $locationProvider)\r\n    {\r\n        $locationProvider.html5Mode(true);\r\n\r\n        /*$urlRouterProvider\r\n                .otherwise(function ($injector) {\r\n                    if($injector.get('localStorageService').get('token') && $injector.get('AuthService').getCurrentUser()){\r\n                        $injector.get('$state').go('app.jobs.list');\r\n                    }else{\r\n                        $injector.get('$state').go('app.auth.login');\r\n                    }\r\n                });/*/\r\n\r\n        $urlRouterProvider\r\n                .otherwise(function ($injector) {\r\n                        $injector.get('$state').go('app.leads.board');\r\n                });\r\n\r\n\r\n        /**\r\n         * Layout Style Switcher\r\n         *\r\n         * This code is here for demonstration purposes.\r\n         * If you don't need to switch between the layout\r\n         * styles like in the demo, you can set one manually by\r\n         * typing the template urls into the `State definitions`\r\n         * area and remove this code\r\n         */\r\n        // Inject $cookies\r\n        var $cookies;\r\n\r\n        angular.injector(['ngCookies']).invoke([\r\n            '$cookies', function (_$cookies)\r\n            {\r\n                $cookies = _$cookies;\r\n            }\r\n        ]);\r\n\r\n        // Get active layout\r\n        var layoutStyle = $cookies.get('layoutStyle') || 'verticalNavigation';\r\n\r\n        var layouts = {\r\n            verticalNavigation  : {\r\n                main      : 'app/core/layouts/vertical-navigation.html',\r\n                toolbar   : 'app/toolbar/layouts/vertical-navigation/toolbar.html',\r\n                navigation: 'app/navigation/layouts/vertical-navigation/navigation.html'\r\n            },\r\n            verticalNavigationFullwidthToolbar  : {\r\n                main      : 'app/core/layouts/vertical-navigation-fullwidth-toolbar.html',\r\n                toolbar   : 'app/toolbar/layouts/vertical-navigation-fullwidth-toolbar/toolbar.html',\r\n                navigation: 'app/navigation/layouts/vertical-navigation/navigation.html'\r\n            },\r\n            verticalNavigationFullwidthToolbar2  : {\r\n                main      : 'app/core/layouts/vertical-navigation-fullwidth-toolbar-2.html',\r\n                toolbar   : 'app/toolbar/layouts/vertical-navigation-fullwidth-toolbar-2/toolbar.html',\r\n                navigation: 'app/navigation/layouts/vertical-navigation/navigation.html'\r\n            },\r\n            horizontalNavigation: {\r\n                main      : 'app/core/layouts/horizontal-navigation.html',\r\n                toolbar   : 'app/toolbar/layouts/horizontal-navigation/toolbar.html',\r\n                navigation: 'app/navigation/layouts/horizontal-navigation/navigation.html'\r\n            },\r\n            contentOnly         : {\r\n                main      : 'app/core/layouts/content-only.html',\r\n                toolbar   : '',\r\n                navigation: ''\r\n            },\r\n            contentWithToolbar  : {\r\n                main      : 'app/core/layouts/content-with-toolbar.html',\r\n                toolbar   : 'app/toolbar/layouts/content-with-toolbar/toolbar.html',\r\n                navigation: ''\r\n            }\r\n        };\r\n        // END - Layout Style Switcher\r\n\r\n        // State definitions\r\n        $stateProvider\r\n            .state('app', {\r\n                abstract: true,\r\n                views   : {\r\n                    'main@'         : {\r\n                        templateUrl: layouts[layoutStyle].main,\r\n                        controller : 'MainController as vm'\r\n                    },\r\n                    'toolbar@app'   : {\r\n                        templateUrl: layouts[layoutStyle].toolbar,\r\n                        controller : 'ToolbarController as vm'\r\n                    },\r\n                    'navigation@app': {\r\n                        templateUrl: layouts[layoutStyle].navigation,\r\n                        controller : 'NavigationController as vm'\r\n                    }\r\n                }\r\n            });\r\n    }\r\n\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('fuse')\r\n        .controller('IndexController', IndexController);\r\n\r\n    /** @ngInject */\r\n    function IndexController($rootScope, fuseTheming)\r\n    {\r\n        var vm = this;\r\n\r\n        // Data\r\n        $rootScope.domain='';\r\n        vm.themes = fuseTheming.themes;\r\n        if(window.location.host.includes(\"sail\") || true){\r\n            fuseTheming.setActiveTheme('sail');\r\n            $rootScope.domain='sail';\r\n        }else{\r\n            fuseTheming.setActiveTheme('default');\r\n        }\r\n\r\n\r\n    }\r\n})();\r\n\n(function ()\r\n{\r\n    'use strict';\r\n\r\n    angular\r\n        .module('fuse');\r\n})();\r\n\n(function () {\r\n  'use strict';\r\n\r\n  angular\r\n    .module('fuse')\r\n    .config(config);\r\n\r\n  /** @ngInject */\r\n  function config($httpProvider, $resourceProvider, $mdThemingProvider, $provide, $mdDateLocaleProvider, moment,\r\n                  paginationTemplateProvider, localStorageServiceProvider, flowFactoryProvider, NotifyServiceProvider) {\r\n\r\n    // Configura el CSRF_TOKEN\r\n    $httpProvider.defaults.xsrfHeaderName = 'X-CSRFToken';\r\n    $httpProvider.defaults.xsrfCookieName = 'csrftoken';\r\n\r\n    localStorageServiceProvider.setPrefix('config');\r\n\r\n    // Don't strip trailing slashes from calculated URLs\r\n    $resourceProvider.defaults.stripTrailingSlashes = false;\r\n\r\n    $mdThemingProvider.theme('toast-error');\r\n    $mdThemingProvider.theme('toast-success');\r\n\r\n    // Configuración del datepicker en español\r\n    $mdDateLocaleProvider.months = ['Enero', 'Febrero', 'Marzo', 'Abril', 'Mayo', 'Junio',\r\n      'Julio', 'Agosto', 'Septiembre', 'Octubre', 'Noviembre', 'Diciembre'];\r\n    $mdDateLocaleProvider.shortMonths = ['Ene', 'Feb', 'Mar', 'Abr', 'May', 'Jun',\r\n      'Jul', 'Ago', 'Sep', 'Oct', 'Nov', 'Dic'];\r\n    $mdDateLocaleProvider.days = ['Domingo', 'Lunes', 'Martes', 'Miercoles', 'Jueves', 'Viernes', 'Sábado'];\r\n    $mdDateLocaleProvider.shortDays = ['Do', 'Lu', 'Ma', 'Mi', 'Ju', 'Vi', 'Sá'];\r\n    // Can change week display to start on Monday.\r\n    $mdDateLocaleProvider.firstDayOfWeek = 1;\r\n    // Optional.\r\n    //$mdDateLocaleProvider.dates = [1, 2, 3, 4, 5, 6, 7,8,9,10,11,12,13,14,15,16,17,18,19,\r\n    //                               20,21,22,23,24,25,26,27,28,29,30,31];\r\n    // In addition to date display, date components also need localized messages\r\n    // for aria-labels for screen-reader users.\r\n    $mdDateLocaleProvider.weekNumberFormatter = function (weekNumber) {\r\n      return 'Semana ' + weekNumber;\r\n    };\r\n    $mdDateLocaleProvider.msgCalendar = 'Calendario';\r\n    $mdDateLocaleProvider.msgOpenCalendar = 'Abrir calendario';\r\n\r\n    $mdDateLocaleProvider.parseDate = function (dateString) {\r\n      var m = moment(dateString, 'D/M/YYYY', true);\r\n      return m.isValid() ? m.toDate() : new Date(NaN);\r\n    };\r\n\r\n    $mdDateLocaleProvider.formatDate = function (date) {\r\n      var m = moment(date);\r\n      return m.isValid() ? m.format('D/M/YYYY') : '';\r\n    };\r\n\r\n    paginationTemplateProvider.setPath('app/utils/templates/dirPagination.tpl.html');\r\n\r\n\r\n\r\n    // Modifica la directiva md-button para permitir hacer un debouce\r\n    // automático del click\r\n    $provide.decorator('mdButtonDirective', function ($delegate) {\r\n      var directive = $delegate[0];\r\n      var oldTemplate = directive.template;   // Guarda el antiguo template\r\n      var i = 0;                              // Contador para nombrar de forma automática la variable del estado de la promesa\r\n      var varName = \"__promiseStatusVar\";     // Nombre de la variable que contiene el estado de la promesa\r\n\r\n      directive.template = getTemplate;       // Asigna el nuevo template\r\n\r\n      function getTemplate(element, attr) {\r\n        if (angular.isUndefined(attr.debouceClick)) {\r\n          return oldTemplate(element, attr);\r\n        }\r\n\r\n        // El atributo debouce-click permite definir el nombre de la variable que se usará para\r\n        // guardar el estado de la promesa\r\n        if (attr.debouceClick !== \"\") {\r\n          varName = attr.debouceClick;\r\n        }\r\n\r\n        // Aumentamos el contador en cada instancia de la directiva\r\n        i++;\r\n\r\n        // Modifica el atributo ng-click para guardar el estado de la promesa\r\n        attr.ngClick = varName + i + ' = (' + attr.ngClick + ' | promiseStatus)';\r\n\r\n        // Modifica el atributo ng-disabled para incluir el estado de la promesa\r\n        var ngDisabledString = \"\";\r\n        if (attr.ngDisabled === undefined) {\r\n          ngDisabledString = 'ng-disabled=\"' + varName + i + '.inProgress\"';\r\n        } else {\r\n          attr.ngDisabled = \"(\" + attr.ngDisabled + \") || (\" + varName + i + \".inProgress )\";\r\n        }\r\n\r\n        // Modificaciones del template\r\n        var btnType = (typeof attr.type === 'undefined') ? 'button' : attr.type;\r\n        var layout = (typeof attr.layout === 'undefined') ? 'row' : attr.layout;\r\n        var layoutAlign = (typeof attr.layoutAlign === 'undefined') ? 'center center' : attr.layoutAlign;\r\n        return '<button ' + ngDisabledString + ' class=\"md-button\" type=\"' + btnType + '\"><ng-transclude layout=\"' + layout + '\" layout-align=\"' + layoutAlign + '\"></ng-transclude><md-progress-circular ng-show=\"' + varName + i + '.inProgress\" class=\"for-button\" md-diameter=\"16\" md-mode=\"indeterminate\"></md-progress-circular> </button>';\r\n      }\r\n\r\n      return $delegate;\r\n    });\r\n\r\n    // Modifica la directiva input para eliminar os errores de servidor cuando el usuario modifica el contenido\r\n    $provide.decorator('inputDirective', function ($delegate) {\r\n      var directive = $delegate[0];\r\n\r\n      // Override del link\r\n      directive.compile = function () {\r\n        return function (scope, element, attrs, ctrl) {\r\n          directive.link.pre.apply(this, arguments);\r\n          element.on('change', function () {\r\n            if (ctrl[0]) {\r\n              scope.$apply(function () {\r\n                ctrl[0].$setValidity('serverError', true);\r\n              });\r\n            }\r\n          });\r\n          element.on('focus', function () {\r\n            if (ctrl[0]) {\r\n              ctrl[0].$setValidity('serverError', true);\r\n            }\r\n          });\r\n          element.on('keydown', function () {\r\n            if (ctrl[1]) {\r\n              scope.$apply(function () {\r\n                ctrl[1].$setValidity('serverError', true);\r\n              });\r\n            }\r\n          });\r\n\r\n        };\r\n      };\r\n\r\n      return $delegate;\r\n    });\r\n\r\n    // Modifica la directiva input para eliminar os errores de servidor cuando el usuario modifica el contenido\r\n    $provide.decorator('textareaDirective', function ($delegate) {\r\n      var directive = $delegate[0];\r\n\r\n      // Override del link\r\n      directive.compile = function () {\r\n        return function (scope, element, attrs, ctrl) {\r\n          directive.link.pre.apply(this, arguments);\r\n          element.on('change', function () {\r\n            if (ctrl[0]) {\r\n              scope.$apply(function () {\r\n                ctrl[0].$setValidity('serverError', true);\r\n              });\r\n            }\r\n          });\r\n          element.on('focus', function () {\r\n            if (ctrl[0]) {\r\n              ctrl[0].$setValidity('serverError', true);\r\n            }\r\n          });\r\n          element.on('keydown', function () {\r\n            if (ctrl[1]) {\r\n              scope.$apply(function () {\r\n                ctrl[1].$setValidity('serverError', true);\r\n              });\r\n            }\r\n          });\r\n\r\n        };\r\n      };\r\n\r\n      return $delegate;\r\n    });\r\n\r\n    // Modifica la directiva select para eliminar os errores de servidor cuando el usuario modifica el contenido\r\n    $provide.decorator('selectDirective', function ($delegate) {\r\n      var directive = $delegate[0];\r\n\r\n      // Override del link\r\n      directive.compile = function () {\r\n        return function (scope, element, attrs, ctrl) {\r\n          var $directiveElement=element.parent().find(\"md-select\");\r\n          var form=element.closest(\"form\").attr(\"name\");\r\n          var name=$directiveElement.attr(\"name\");\r\n          directive.link.pre.apply(this, arguments);\r\n          $directiveElement.on('focus', function () {\r\n            if (scope[form] && scope[form][name]) {\r\n                scope[form][name].$setValidity('serverError', true);\r\n            }\r\n          });\r\n\r\n        };\r\n      };\r\n\r\n      return $delegate;\r\n    });\r\n\r\n    // Text Angular options\r\n    $provide.decorator('taOptions', [\r\n      '$delegate', function (taOptions) {\r\n        taOptions.toolbar = [\r\n          ['bold', 'italics', 'underline', 'ul', 'ol', 'quote']\r\n        ];\r\n\r\n        taOptions.classes = {\r\n          focussed: 'focussed',\r\n          toolbar: 'ta-toolbar',\r\n          toolbarGroup: 'ta-group',\r\n          toolbarButton: 'md-button',\r\n          toolbarButtonActive: 'active',\r\n          disabled: '',\r\n          textEditor: 'form-control',\r\n          htmlEditor: 'form-control'\r\n        };\r\n\r\n        return taOptions;\r\n      }\r\n    ]);\r\n\r\n    // Text Angular tools\r\n    $provide.decorator('taTools', [\r\n      '$delegate', function (taTools) {\r\n        taTools.quote.iconclass = 'icon-format-quote';\r\n        taTools.bold.iconclass = 'icon-format-bold';\r\n        taTools.italics.iconclass = 'icon-format-italic';\r\n        taTools.underline.iconclass = 'icon-format-underline';\r\n        taTools.strikeThrough.iconclass = 'icon-format-strikethrough';\r\n        taTools.ul.iconclass = 'icon-format-list-bulleted';\r\n        taTools.ol.iconclass = 'icon-format-list-numbers';\r\n        taTools.redo.iconclass = 'icon-redo';\r\n        taTools.undo.iconclass = 'icon-undo';\r\n        taTools.clear.iconclass = 'icon-close-circle-outline';\r\n        taTools.justifyLeft.iconclass = 'icon-format-align-left';\r\n        taTools.justifyCenter.iconclass = 'icon-format-align-center';\r\n        taTools.justifyRight.iconclass = 'icon-format-align-right';\r\n        taTools.justifyFull.iconclass = 'icon-format-align-justify';\r\n        taTools.indent.iconclass = 'icon-format-indent-increase';\r\n        taTools.outdent.iconclass = 'icon-format-indent-decrease';\r\n        taTools.html.iconclass = 'icon-code-tags';\r\n        taTools.insertImage.iconclass = 'icon-file-image-box';\r\n        taTools.insertLink.iconclass = 'icon-link';\r\n        taTools.insertVideo.iconclass = 'icon-filmstrip';\r\n\r\n        return taTools;\r\n      }\r\n    ]);\r\n\r\n    // Modifica la directiva radio-group para eliminar os errores de servidor cuando el usuario modifica el valor\r\n    $provide.decorator('mdRadioGroupDirective', function ($delegate) {\r\n      var directive = $delegate[0];\r\n\r\n      // Override del link\r\n      directive.compile = function () {\r\n        return function (scope, element, attrs, ctrl) {\r\n          directive.link.pre.apply(this, arguments);\r\n          element.on('mousedown', function () {\r\n            if (ctrl[1]) {\r\n              scope.$apply(function () {\r\n                ctrl[1].$setValidity('serverError', true);\r\n              });\r\n            }\r\n          });\r\n          element.on('keydown', function () {\r\n            if (ctrl[1]) {\r\n              scope.$apply(function () {\r\n                ctrl[1].$setValidity('serverError', true);\r\n              });\r\n            }\r\n          });\r\n\r\n        };\r\n      };\r\n\r\n      return $delegate;\r\n\r\n    });\r\n\r\n    function utf8Encode(unicodeString) {\r\n        if (typeof unicodeString != 'string') throw new TypeError('parameter ‘unicodeString’ is not a string');\r\n        const utf8String = unicodeString.replace(\r\n            /[\\u0080-\\u07ff]/g,  // U+0080 - U+07FF => 2 bytes 110yyyyy, 10zzzzzz\r\n            function(c) {\r\n                var cc = c.charCodeAt(0);\r\n                return String.fromCharCode(0xc0 | cc>>6, 0x80 | cc&0x3f); }\r\n        ).replace(\r\n            /[\\u0800-\\uffff]/g,  // U+0800 - U+FFFF => 3 bytes 1110xxxx, 10yyyyyy, 10zzzzzz\r\n            function(c) {\r\n                var cc = c.charCodeAt(0);\r\n                return String.fromCharCode(0xe0 | cc>>12, 0x80 | cc>>6&0x3F, 0x80 | cc&0x3f); }\r\n        );\r\n        return utf8String;\r\n    }\r\n\r\n    flowFactoryProvider.defaults = {\r\n        target: \"/api/documents/\",\r\n        headers: function (file, chunk, isTest) {\r\n            return {\r\n                'Authorization': 'Token ' + ((localStorage['config.token']) ? localStorage['config.token'].split('\"')[1] : '')\r\n            };\r\n        },\r\n        testChunks: false,\r\n        chunkSize: 1024*1024*1024*1024*1024,\r\n        fileParameterName: \"document\",\r\n        query:function(file){\r\n            return {name:utf8Encode(file.name)};\r\n        }\r\n    };\r\n\r\n    flowFactoryProvider.on('catchAll', function (event,e) {\r\n      if(event===\"error\"){\r\n        var error = JSON.parse(e);\r\n        NotifyServiceProvider.$get().errorMessage(error.detail);\r\n\r\n      }\r\n    });\r\n\r\n  }\r\n\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('fuse')\r\n        .factory('api', apiService);\r\n\r\n    /** @ngInject */\r\n    function apiService($resource) {\r\n        var api = {};\r\n        var queryAll = {\r\n            method: 'GET',\r\n            params: {\r\n                page: 'all'\r\n            },\r\n            isArray: true\r\n        };\r\n\r\n        var queryAllObj = {\r\n            method: 'GET',\r\n            params: {\r\n                page: 'all'\r\n            }\r\n        };\r\n\r\n        var defaultObj={\r\n            queryAll: queryAll,\r\n            queryAllObj: queryAllObj,\r\n            create: {method: 'POST'},\r\n            update: {method: 'PATCH'}\r\n        };\r\n\r\n        // Base Url\r\n        api.baseUrl = 'api/';\r\n\r\n        api.URLs={};\r\n\r\n        api.URLs.users=api.baseUrl + 'user/:id/';\r\n        api.URLs.usersComplexCreate=api.baseUrl + 'user/complex_create/';\r\n        api.URLs.usersComplexUpdate=api.baseUrl + 'user/:id/complex_update/';\r\n        api.URLs.sessionStatus=api.baseUrl + 'session_historic/change_forced_online_status/';\r\n        api.URLs.removeConcessionaire=api.baseUrl + 'user_concession/:id/';\r\n        api.URLs.removeSFA=api.baseUrl + 'sfa/:id/';\r\n        api.URLs.admins=api.baseUrl + 'user/:concessionaire/concession_manager_or_admin/';\r\n        api.URLs.leads=api.baseUrl + 'lead/:id/';\r\n        api.URLs.leadsReactivate=api.baseUrl + 'lead/:id/reactivate/';\r\n        api.URLs.leadsMail=api.baseUrl + 'lead/:id/email/';\r\n        api.URLs.leadsStatus=api.baseUrl + 'lead/:id/change_status/';\r\n        api.URLs.kpis=api.baseUrl + 'lead_calendar/kpis/';\r\n        api.URLs.leadActions=api.baseUrl + 'lead_actions/';\r\n        api.URLs.leadActionsColumn=api.baseUrl + 'lead_actions/get_column/';\r\n        api.URLs.leadsByUser=api.baseUrl + 'user/:id/list_user_leads/';\r\n        api.URLs.setLeadsByUser=api.baseUrl + 'user/:id/set_user_leads/';\r\n        api.URLs.vehicles=api.baseUrl + 'vehicles/:id/';\r\n        api.URLs.appraisals=api.baseUrl + 'appraisal/:id/';\r\n\r\n        api.URLs.leadsNews=api.baseUrl + 'lead_col/?status=new';\r\n        api.URLs.leadsAttended=api.baseUrl + 'lead_col/?status=attended';\r\n        api.URLs.leadsCommercialManagements=api.baseUrl + 'lead_col/?status=commercial_management';\r\n        api.URLs.leadsTracings=api.baseUrl + 'lead_col/?status=tracing';\r\n        api.URLs.leadsEnds=api.baseUrl + 'lead_col/?status=end';\r\n\r\n        api.URLs.leadsHistory=api.baseUrl + 'lead_history/:id/get_history/';\r\n        api.URLs.leadsIncomingCalls=api.baseUrl + 'lead-historic/:id/incoming_calls/';\r\n        api.URLs.leadsOutgoingCalls=api.baseUrl + 'lead-historic/:id/outgoing_calls/';\r\n\r\n        api.URLs.leadsClone=api.baseUrl + 'lead/:id/clone/';\r\n        api.URLs.tasks=api.baseUrl + 'task/:id/';\r\n        api.URLs.taskTypes=api.baseUrl + 'task/options/:id/';\r\n        api.URLs.concessionaires=api.baseUrl + 'concessionaire/:id/';\r\n        api.URLs.concessionairesConfig=api.baseUrl + 'concessionaire/config/';\r\n        api.URLs.removeSource=api.baseUrl + 'source/:id/';\r\n        api.URLs.gasTypes=api.baseUrl + 'gas_type/:id/';\r\n        api.URLs.provinces=api.baseUrl + 'provinces/:id/';\r\n        api.URLs.localities=api.baseUrl + 'localities/:id/';\r\n        api.URLs.countries=api.baseUrl + 'countries/:id/';\r\n\r\n        api.URLs.brands=api.baseUrl + 'vehicles_brand/:id/';\r\n        api.URLs.models=api.baseUrl + 'vehicles_model/:id/';\r\n        api.URLs.versions=api.baseUrl + 'vehicles_version/:id/';\r\n\r\n        api.URLs.clients=api.baseUrl + 'clients/:id/';\r\n        api.URLs.businessActivity=api.baseUrl + 'business_activity/:id/';\r\n        api.URLs.sectors=api.baseUrl + 'business_sector/:id/';\r\n        api.URLs.whatsapp=api.baseUrl + 'lead_whatsapp_message/:id/';\r\n\r\n        api.URLs.origins=api.baseUrl + 'origin/:id/';\r\n        api.URLs.channels=api.baseUrl + 'channel/:id/';\r\n        api.URLs.sources=api.baseUrl + 'source/:id/';\r\n        api.URLs.acds=api.baseUrl + 'netelip/call_manager/:id/';\r\n        api.URLs.netelip=api.baseUrl + 'netelip/call_control_lead/:id/';\r\n        api.URLs.phones=api.baseUrl + 'phone/:id/';\r\n        api.URLs.emails=api.baseUrl + 'email/:id/';\r\n        api.URLs.calendar=api.baseUrl + 'lead_calendar/';\r\n\r\n        api.URLs.dashboards=api.baseUrl + 'concession-dashboard/:id/';\r\n        api.URLs.benchmark=api.baseUrl + 'lead/dashboard_benchmark/:id/';\r\n        api.URLs.servicelevel=api.baseUrl + 'lead/dashboard_service_level/:id/';\r\n        api.URLs.voiceService=api.baseUrl + 'lead/dashboard_voice_service_level/:id/';\r\n        api.URLs.digitalService=api.baseUrl + 'lead/dashboard_digital_service_level/:id/';\r\n\r\n        api.URLs.click2calls=api.baseUrl + 'netelip/call_control_lead/click2call/:id/';\r\n        api.URLs.leadsHubspot=api.baseUrl + 'lead/:id/update_hubspot/';\r\n\r\n        var ws_scheme = window.location.protocol === \"https:\" ? \"wss\" : \"ws\";\r\n        api.socket = ws_scheme +'://' + window.location.host + '/websocket/';\r\n        if(window.location.host.includes(\"localhost\") || window.location.host.includes(\"192.168.2.\")){\r\n            api.socket=ws_scheme +'://localhost:8000/ws/';\r\n        }\r\n        api.wsAcds=api.socket+'netelip/';\r\n\r\n        // $resources\r\n        api.users = $resource(api.URLs.users, {id: '@id'}, {\r\n            queryAll: queryAll,\r\n            queryAllObj: queryAllObj,\r\n            create: {\r\n                url:api.URLs.usersComplexCreate,\r\n                method: 'POST'\r\n            },\r\n            update: {\r\n                url:api.URLs.usersComplexUpdate,\r\n                method: 'PATCH'\r\n            },\r\n            removeConcessionaire: {\r\n                url:api.URLs.removeConcessionaire,\r\n                method: 'DELETE'\r\n            },\r\n            removeSFA: {\r\n                url:api.URLs.removeSFA,\r\n                method: 'DELETE'\r\n            },\r\n            sessionStatus: {\r\n                url:api.URLs.sessionStatus,\r\n                method: 'PATCH'\r\n            }\r\n        });\r\n\r\n        api.admins = $resource(api.URLs.admins, {concessionaire: '@concessionaire'}, defaultObj);\r\n\r\n        api.leads = $resource(api.URLs.leads, {id: '@id'}, {\r\n            queryAll: queryAll,\r\n            queryAllObj: queryAllObj,\r\n            create: {method: 'POST'},\r\n            update: {method: 'PATCH'},\r\n            clone: {\r\n                url:api.URLs.leadsClone,\r\n                method: 'POST'\r\n            },\r\n            leadsStatus: {\r\n                url:api.URLs.leadsStatus,\r\n                method: 'PATCH'\r\n            },\r\n            leadsHubspot: {\r\n                url:api.URLs.leadsHubspot,\r\n                method: 'POST'\r\n            },\r\n            kpis: {\r\n                url:api.URLs.kpis,\r\n                method: 'GET'\r\n            }\r\n        });\r\n\r\n        api.leadActions = $resource(api.URLs.leadActions, {id: '@id'}, defaultObj);\r\n        api.leadActionsColumn = $resource(api.URLs.leadActionsColumn, {id: '@id'}, defaultObj);\r\n        api.leadsNews = $resource(api.URLs.leadsNews, {id: '@id'}, defaultObj);\r\n        api.leadsReactivate = $resource(api.URLs.leadsReactivate, {id: '@id'}, defaultObj);\r\n        api.leadsMail = $resource(api.URLs.leadsMail, {id: '@id'}, defaultObj);\r\n        api.leadsAttended = $resource(api.URLs.leadsAttended, {id: '@id'}, defaultObj);\r\n        api.leadsCommercialManagements = $resource(api.URLs.leadsCommercialManagements, {id: '@id'}, defaultObj);\r\n        api.leadsTracings = $resource(api.URLs.leadsTracings, {id: '@id'}, defaultObj);\r\n        api.leadsEnds = $resource(api.URLs.leadsEnds, {id: '@id'}, defaultObj);\r\n\r\n        api.leadsHistory = $resource(api.URLs.leadsHistory, {id: '@id'}, defaultObj);\r\n        api.leadsIncomingCalls = $resource(api.URLs.leadsIncomingCalls, {id: '@id'}, defaultObj);\r\n        api.leadsOutgoingCalls = $resource(api.URLs.leadsOutgoingCalls, {id: '@id'}, defaultObj);\r\n\r\n        api.leadsByUser = $resource(api.URLs.leadsByUser, {id: '@id'}, defaultObj);\r\n        api.setLeadsByUser = $resource(api.URLs.setLeadsByUser, {id: '@id'}, defaultObj);\r\n\r\n        api.vehicles = $resource(api.URLs.vehicles, {id: '@id'}, defaultObj);\r\n        api.appraisals = $resource(api.URLs.appraisals, {id: '@id'}, defaultObj);\r\n\r\n        api.tasks = $resource(api.URLs.tasks, {id: '@id'}, defaultObj);\r\n        api.taskTypes = $resource(api.URLs.taskTypes, {id: '@id'}, defaultObj);\r\n\r\n        api.concessionaires = $resource(api.URLs.concessionaires, {id: '@id'}, {\r\n            queryAll: queryAll,\r\n            queryAllObj: queryAllObj,\r\n            create: {method: 'POST'},\r\n            update: {method: 'PATCH'},\r\n            removeSource: {\r\n                url:api.URLs.removeSource,\r\n                method: 'DELETE'\r\n            },\r\n            config:{\r\n                url:api.URLs.concessionairesConfig,\r\n                method:'GET'\r\n            }\r\n        });\r\n\r\n        api.gasTypes = $resource(api.URLs.gasTypes, {id: '@id'}, defaultObj);\r\n\r\n        api.provinces = $resource(api.URLs.provinces, {id: '@id'}, defaultObj);\r\n        api.localities = $resource(api.URLs.localities, {id: '@id'}, defaultObj);\r\n        api.countries = $resource(api.URLs.countries, {id: '@id'}, defaultObj);\r\n\r\n        api.brands = $resource(api.URLs.brands, {id: '@id'}, defaultObj);\r\n        api.models = $resource(api.URLs.models, {id: '@id'}, defaultObj);\r\n        api.versions = $resource(api.URLs.versions, {id: '@id'}, defaultObj);\r\n\r\n        api.clients = $resource(api.URLs.clients, {id: '@id'}, defaultObj);\r\n        api.businessActivity = $resource(api.URLs.businessActivity, {id: '@id'}, defaultObj);\r\n        api.sectors = $resource(api.URLs.sectors, {id: '@id'}, defaultObj);\r\n        api.whatsapp = $resource(api.URLs.whatsapp, {id: '@id'}, defaultObj);\r\n\r\n        api.origins = $resource(api.URLs.origins, {id: '@id'}, defaultObj);\r\n\r\n        api.channels = $resource(api.URLs.channels, {id: '@id'}, defaultObj);\r\n\r\n        api.sources = $resource(api.URLs.sources, {id: '@id'}, defaultObj);\r\n\r\n        api.acds = $resource(api.URLs.acds, {id: '@id'}, {\r\n            queryAll: queryAll,\r\n            queryAllObj: queryAllObj,\r\n            create: {\r\n                url:api.URLs.netelip,\r\n                method: 'POST'\r\n            },\r\n            update: {\r\n                url:api.URLs.netelip,\r\n                method: 'PATCH'\r\n            }\r\n        });\r\n\r\n        api.phones = $resource(api.URLs.phones, {id: '@id'}, defaultObj);\r\n        api.emails = $resource(api.URLs.emails, {id: '@id'}, defaultObj);\r\n\r\n        api.dashboards = $resource(api.URLs.dashboards, {id: '@id'}, defaultObj);\r\n        api.benchmark = $resource(api.URLs.benchmark, {id: '@id'}, defaultObj);\r\n        api.servicelevel = $resource(api.URLs.servicelevel, {id: '@id'}, defaultObj);\r\n        api.voiceService = $resource(api.URLs.voiceService, {id: '@id'}, defaultObj);\r\n        api.digitalService = $resource(api.URLs.digitalService, {id: '@id'}, defaultObj);\r\n\r\n        api.click2calls = $resource(api.URLs.click2calls, {id: '@id'}, defaultObj);\r\n\r\n        return api;\r\n    }\r\n\r\n})();\r\n\nangular.module(\"fuse\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/core/layouts/content-only.html\",\"<div id=\\\"layout-content-only\\\" class=\\\"template-layout\\\" layout=\\\"column\\\" flex><md-content id=\\\"content\\\" \\nclass=\\\"animate-slide-up md-hue-2\\\" ui-view=\\\"content\\\" flex></md-content></div>\");\n$templateCache.put(\"app/core/layouts/content-with-toolbar.html\",\"<div id=\\\"layout-content-with-toolbar\\\" class=\\\"template-layout\\\" layout=\\\"column\\\" flex><md-toolbar id=\\\"toolbar\\\" \\nclass=\\\"md-menu-toolbar md-whiteframe-1dp\\\" ui-view=\\\"toolbar\\\"></md-toolbar><md-content id=\\\"content\\\" \\nclass=\\\"animate-slide-up md-hue-2\\\" ui-view=\\\"content\\\" flex></md-content><md-sidenav id=\\\"quick-panel\\\" \\nclass=\\\"md-sidenav-right md-whiteframe-4dp\\\" md-component-id=\\\"quick-panel\\\" ms-scroll ui-view=\\\"quickPanel\\\"></md-sidenav>\\n</div>\");\n$templateCache.put(\"app/core/layouts/horizontal-navigation.html\",\"<div id=\\\"layout-horizontal-navigation\\\" class=\\\"template-layout\\\" layout=\\\"column\\\" flex><div \\nid=\\\"toolbar-navigation-container\\\" class=\\\"md-whiteframe-1dp\\\" layout=\\\"column\\\" layout-align=\\\"space-between start\\\">\\n<md-toolbar id=\\\"toolbar\\\" class=\\\"md-menu-toolbar md-whiteframe-1dp\\\" ui-view=\\\"toolbar\\\"></md-toolbar><div \\nid=\\\"horizontal-navigation\\\" ui-view=\\\"navigation\\\" layout=\\\"row\\\" layout-align=\\\"start end\\\" flex></div><ms-breadcrumb \\nid=\\\"breadcrumb\\\" hide-xs hide-sm></ms-breadcrumb></div><ms-breadcrumb id=\\\"breadcrumb\\\" hide-gt-sm></ms-breadcrumb><div \\nid=\\\"content-container\\\" flex layout=\\\"column\\\"><md-content id=\\\"content\\\" class=\\\"animate-slide-up md-hue-2\\\" ms-scroll \\nui-view=\\\"content\\\" flex></md-content></div><md-sidenav id=\\\"quick-panel\\\" class=\\\"md-sidenav-right md-whiteframe-4dp\\\" \\nmd-component-id=\\\"quick-panel\\\" ms-scroll ui-view=\\\"quickPanel\\\"></md-sidenav></div>\");\n$templateCache.put(\"app/core/layouts/vertical-navigation-fullwidth-toolbar-2.html\",\"<div id=\\\"layout-vertical-navigation-fullwidth-toolbar-2\\\" class=\\\"template-layout\\\" layout=\\\"column\\\" flex><md-toolbar \\nid=\\\"toolbar\\\" class=\\\"md-menu-toolbar md-whiteframe-1dp md-accent\\\" ui-view=\\\"toolbar\\\"></md-toolbar><div \\nid=\\\"main-container\\\" layout=\\\"row\\\" flex><md-sidenav id=\\\"vertical-navigation\\\" class=\\\"md-primary-bg\\\" \\nmd-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" md-component-id=\\\"navigation\\\" ms-scroll ui-view=\\\"navigation\\\"></md-sidenav><div \\nid=\\\"content-container\\\" flex layout=\\\"column\\\"><md-content id=\\\"content\\\" class=\\\"animate-slide-up md-hue-2\\\" ms-scroll \\nui-view=\\\"content\\\" flex></md-content></div><md-sidenav id=\\\"quick-panel\\\" class=\\\"md-sidenav-right md-whiteframe-4dp\\\" \\nmd-component-id=\\\"quick-panel\\\" ms-scroll ui-view=\\\"quickPanel\\\"></md-sidenav></div></div>\");\n$templateCache.put(\"app/core/layouts/vertical-navigation-fullwidth-toolbar.html\",\"<div id=\\\"layout-vertical-navigation-fullwidth-toolbar\\\" class=\\\"template-layout\\\" layout=\\\"column\\\" flex><md-toolbar \\nid=\\\"toolbar\\\" class=\\\"md-menu-toolbar md-whiteframe-1dp md-accent\\\" ui-view=\\\"toolbar\\\"></md-toolbar><div \\nid=\\\"main-container\\\" layout=\\\"row\\\" flex><md-sidenav id=\\\"vertical-navigation\\\" class=\\\"md-primary-bg\\\" \\nmd-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" md-component-id=\\\"navigation\\\" ms-scroll ui-view=\\\"navigation\\\"></md-sidenav><div \\nid=\\\"content-container\\\" flex layout=\\\"column\\\"><md-content id=\\\"content\\\" class=\\\"animate-slide-up md-hue-2\\\" ms-scroll \\nui-view=\\\"content\\\" flex></md-content></div><md-sidenav id=\\\"quick-panel\\\" class=\\\"md-sidenav-right md-whiteframe-4dp\\\" \\nmd-component-id=\\\"quick-panel\\\" ms-scroll ui-view=\\\"quickPanel\\\"></md-sidenav></div></div>\");\n$templateCache.put(\"app/core/layouts/vertical-navigation.html\",\"<div id=\\\"layout-vertical-navigation\\\" class=\\\"template-layout\\\" data-layout=\\\"row\\\" data-flex><md-sidenav \\nid=\\\"vertical-navigation\\\" class=\\\"md-primary-bg\\\" data-md-is-locked-open=\\\"$mdMedia(\\'gt-sm\\')\\\" \\ndata-md-component-id=\\\"navigation\\\" data-ms-scroll data-ui-view=\\\"navigation\\\"></md-sidenav><div id=\\\"content-container\\\" \\ndata-flex data-layout=\\\"column\\\"><md-toolbar id=\\\"toolbar\\\" class=\\\"md-menu-toolbar md-whiteframe-1dp\\\" \\ndata-ui-view=\\\"toolbar\\\"></md-toolbar><md-content id=\\\"content\\\" class=\\\"animate-slide-up md-hue-2\\\" data-ms-scroll \\ndata-ui-view=\\\"content\\\" data-flex></md-content></div><md-sidenav id=\\\"quick-panel\\\" \\nclass=\\\"md-sidenav-right md-whiteframe-4dp\\\" data-md-component-id=\\\"quick-panel\\\" data-ms-scroll data-ui-view=\\\"quickPanel\\\">\\n</md-sidenav></div>\");\n$templateCache.put(\"app/core/theme-options/theme-options.html\",\"<div class=\\\"ms-theme-options-button md-primary-bg\\\" ng-click=\\\"toggleOptionsSidenav()\\\"><md-icon md-font-icon=\\\"icon-cog\\\" \\nclass=\\\"white-text\\\"></md-icon></div><md-sidenav md-component-id=\\\"fuse-theme-options\\\" class=\\\"md-sidenav-right\\\"><div \\nclass=\\\"ms-theme-options-list\\\" layout=\\\"column\\\"><div class=\\\"theme-option layout-options\\\"><div class=\\\"option-title\\\">\\nLayout Style:</div><md-radio-group layout=\\\"row\\\" layout-align=\\\"start start\\\" layout-wrap ng-model=\\\"vm.layoutStyle\\\" \\nng-change=\\\"vm.updateLayoutStyle()\\\"><md-radio-button ng-repeat=\\\"layoutStyle in vm.layoutStyles\\\" \\nng-value=\\\"layoutStyle.value\\\"><div layout=\\\"column\\\" layout-align=\\\"center center\\\"><img ng-src=\\\"{{layoutStyle.figure}}\\\"> \\n<span class=\\\"text-center font-size-12 mt-8\\\">{{layoutStyle.label}}</span></div></md-radio-button></md-radio-group></div>\\n<md-divider></md-divider><div class=\\\"theme-option\\\"><div class=\\\"option-title\\\">Layout Mode:</div><md-radio-group \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\" ng-model=\\\"vm.layoutMode\\\" ng-change=\\\"vm.updateLayoutMode()\\\"><md-radio-button \\nng-repeat=\\\"layoutMode in vm.layoutModes\\\" ng-value=\\\"layoutMode.value\\\">{{layoutMode.label}}</md-radio-button>\\n</md-radio-group></div><md-divider></md-divider><div class=\\\"theme-option color-palettes\\\"><div class=\\\"option-title\\\">\\nColor Palette:</div><div layout=\\\"row\\\" layout-align=\\\"start start\\\" layout-wrap><md-button \\nng-repeat=\\\"(themeName, theme) in vm.themes.list\\\" class=\\\"md-raised theme-button\\\" layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\" aria-label=\\\"{{themeName}}\\\" ng-click=\\\"vm.setActiveTheme(themeName)\\\" \\nng-style=\\\"{\\'background-color\\': theme.primary.color,\\'border-color\\': theme.accent.color,\\'color\\': theme.primary.contrast1}\\\" \\nng-class=\\\"{active: vm.getActiveTheme().name === themeName}\\\"><md-icon ng-style=\\\"{\\'color\\': theme.primary.contrast1}\\\" \\nmd-font-icon=\\\"icon-palette\\\" class=\\\"icon s32\\\"></md-icon></md-button></div></div></div></md-sidenav>\");\n$templateCache.put(\"app/main/acds/acds.html\",\"<div id=\\\"acds\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\"></div><div \\nclass=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div\\n class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-phone\\\"></md-icon><span data-translate>Llamadas entrantes</span></div><div \\nclass=\\\"count secondary-text\\\"><span data-translate>Número de llamadas entrantes:</span> <span>{{vm.acds.count}}</span>\\n</div></div></div><div class=\\\"content-card\\\" data-layout=\\\"column\\\" data-flex><md-content class=\\\"content p-20\\\" flex \\nms-scroll><div layout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div class=\\\"no-results text-center\\\" \\nng-if=\\\"vm.acds.count == 0\\\"><div class=\\\"message\\\"><md-icon class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-phone\\\"></md-icon>\\n<div class=\\\"message-text\\\" translate>Sin llamadas entrantes</div></div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-class=\\\"{\\'grey-200-bg\\':vm.lastAcds===acd.ID}\\\" \\ndata-dir-paginate=\\\"acd in vm.acds.data | itemsPerPage: 10 | orderBy:\\'order\\'\\\" data-total-items=\\\"vm.acds.count\\\" \\ndata-current-page=\\\"vm.acds.filters.page\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><div class=\\\"info\\\" \\nflex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" layout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"space-between start\\\"><div class=\\\"mr-40 w-100\\\" ng-if=\\\"acd.source.origin_data.icon\\\"><img \\nng-src=\\\"{{ server }}{{ acd.source.origin_data.icon }}\\\" alt=\\\"origen\\\" class=\\\"image\\\"></div><div class=\\\"mr-40\\\"><div \\nclass=\\\"title mb-5\\\"><span>{{acd.ID}}</span></div><div class=\\\"mb-5\\\" ng-if=\\\"acd.concessionaire.name\\\"><span \\nclass=\\\"text-boxed m-0 indigo-bg white-fg\\\">{{ acd.concessionaire.name }}</span></div><div class=\\\"mb-5\\\" \\nng-if=\\\"acd.source.origin_data.name\\\"><span class=\\\"text-boxed m-0 deep-purple-bg white-fg\\\">\\n{{ acd.source.origin_data.name }}</span></div><div ng-if=\\\"acd.user\\\" layout=\\\"row\\\"><div \\nclass=\\\"text-boxed m-0 md-purple-800-bg white-fg mb-5\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"s16\\\"></md-icon><span>\\n{{ acd.user.first_name }} {{ acd.user.last_name }}</span></div></div></div><div><div class=\\\"title mb-5\\\"><md-icon \\nmd-font-icon=\\\"icon-phone-outgoing\\\"></md-icon><span>{{acd.src}}</span></div><div class=\\\"title mb-5\\\"><md-icon \\nmd-font-icon=\\\"icon-phone-incoming\\\"></md-icon><span>{{acd.dst}}</span></div><div class=\\\"tags\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" layout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nng-if=\\\"acd.startcall\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\">\\n{{acd.startcall | date:\\'dd/MM/yyyy HH:mm\\'}}</div></div><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nng-if=\\\"acd.durationcallanswered\\\"><md-icon md-font-icon=\\\"icon-clock\\\" class=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\">\\n{{acd.durationcallanswered}}</div></div><div ng-repeat=\\\"status in vm.status\\\" ng-if=\\\"status.id===acd.statuscall\\\" \\nclass=\\\"text-boxed m-0 white-fg mr-5\\\" ng-class=\\\"status.color\\\"><md-icon md-font-icon=\\\"icon-phone\\\" class=\\\"s16\\\"></md-icon>\\n<span>{{ status.name }}</span></div><div ng-repeat=\\\"origin in vm.origins\\\" ng-if=\\\"origin.id===acd.call_origin\\\" \\nclass=\\\"text-boxed m-0 white-fg\\\" ng-class=\\\"origin.color\\\"><md-icon md-font-icon=\\\"icon-phone\\\" class=\\\"s16\\\"></md-icon><span>\\n{{ origin.name }}</span></div></div></div></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"end center\\\" ng-if=\\\"!acd.callcontrolleadmodel.lead\\\"><md-button data-layout=\\\"column\\\" class=\\\"md-accent\\\" \\ndata-layout-align=\\\"start center\\\" data-ng-click=\\\"vm.createLead(acd)\\\"><md-icon class=\\\"pt-5\\\" \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-plus-circle\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Crear Lead\\n</span></md-button><md-button data-layout=\\\"column\\\" class=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" \\nng-if=\\\"acd.possible_leads.length>0\\\" data-ng-click=\\\"vm.openAcdDialog($event, acd)\\\"><md-icon class=\\\"pt-5\\\" \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-arrow-right\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Duplicado\\n</span></md-button></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\" ng-if=\\\"acd.callcontrolleadmodel.lead\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" \\ndata-ui-sref=\\\"app.leads.get.edit({lead:\\'{{ acd.callcontrolleadmodel.lead }}\\'})\\\"><md-icon class=\\\"pt-5\\\" \\ntitle=\\\"{{\\'Ver Lead\\' | translate}}\\\" md-font-icon=\\\"icon-eye\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Ver Lead</span>\\n</md-button></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\" ng-if=\\\"acd.has_audio\\\"><md-button data-layout=\\\"column\\\" \\nclass=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" data-debouce-click data-ng-click=\\\"vm.getAudio(acd)\\\"><md-icon \\nclass=\\\"pt-5 green-700-fg\\\" title=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-download\\\"></md-icon><span \\nclass=\\\"pt-5 green-700-fg\\\" data-translate>Descargar audio</span></md-button></div></div></div></div></div></div>\\n<dir-pagination-controls class=\\\"bottomFixed\\\"></dir-pagination-controls></div></md-content></div></div></div>\");\n$templateCache.put(\"app/main/calendar/calendar.html\",\"<div id=\\\"calendar\\\" class=\\\"page-layout fullwidth\\\" layout=\\\"column\\\"><div class=\\\"header\\\" ng-class=\\\"vm.currentMonthShort\\\">\\n<div class=\\\"header-content\\\" layout=\\\"column\\\" layout-align=\\\"space-between\\\"><div class=\\\"header-top\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\" layout-xs=\\\"column\\\"><div class=\\\"logo\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><span\\n class=\\\"logo-icon\\\"><md-icon md-font-icon=\\\"icon-calendar-today\\\"></md-icon></span><span class=\\\"logo-text\\\" translate>\\nCalendario</span></div><div><md-autocomplete placeholder=\\\"{{\\'Usuario\\' | translate }}\\\" md-delay=\\\"300\\\" \\nmd-input-name=\\\"user\\\" md-no-cache=\\\"true\\\" md-min-length=\\\"3\\\" md-search-text=\\\"searchTextUser\\\" \\nmd-selected-item=\\\"vm.leads.filters.user_data\\\" md-items=\\\"user in vm.getUsers(searchTextUser)\\\" \\nmd-item-text=\\\"vm.getFullUserName(user)\\\"><md-item-template><span md-highlight-text=\\\"vm.searchTextUser\\\">\\n{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ningun usuario con ese nombre</span></md-not-found></md-autocomplete></div><div class=\\\"toolbar\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\"><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.calendar.today()\\\" aria-label=\\\"Hoy\\\"><md-icon \\nmd-font-icon=\\\"icon-calendar-today\\\"></md-icon><md-tooltip><span translate>Hoy</span></md-tooltip></md-button><md-button \\nclass=\\\"md-icon-button\\\" ng-click=\\\"vm.calendar.changeView(\\'agendaDay\\')\\\"><md-icon md-font-icon=\\\"icon-view-day\\\"></md-icon>\\n<md-tooltip><span translate>Dia</span></md-tooltip></md-button><md-button class=\\\"md-icon-button\\\" \\nng-click=\\\"vm.calendar.changeView(\\'agendaWeek\\')\\\"><md-icon md-font-icon=\\\"icon-view-week\\\"></md-icon><md-tooltip><span \\ntranslate>Semana</span></md-tooltip></md-button><md-button class=\\\"md-icon-button\\\" \\nng-click=\\\"vm.calendar.changeView(\\'month\\')\\\"><md-icon md-font-icon=\\\"icon-view-module\\\"></md-icon><md-tooltip><span \\ntranslate>Mes</span></md-tooltip></md-button></div></div><div class=\\\"fullwidth\\\" \\nng-include=\\\"\\'app/main/leads/views/list/kpis.html\\'\\\"></div><div class=\\\"header-bottom\\\" layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\"><md-button class=\\\"md-icon-button arrow\\\" ng-click=\\\"vm.calendar.prev()\\\" \\naria-label=\\\"Anterior\\\"><md-icon md-font-icon=\\\"icon-chevron-left\\\"></md-icon></md-button><div class=\\\"title\\\">\\n{{vm.calendarView.title}}</div><md-button class=\\\"md-icon-button arrow\\\" ng-click=\\\"vm.calendar.next()\\\" \\naria-label=\\\"Siguiente\\\"><md-icon md-font-icon=\\\"icon-chevron-right\\\"></md-icon></md-button></div></div></div><div \\nclass=\\\"content\\\"><div id=\\\"calendarView\\\" ui-calendar=\\\"vm.calendarUiConfig.calendar\\\" ng-model=\\\"vm.events\\\" calendar=\\\"main\\\">\\n</div></div></div>\");\n$templateCache.put(\"app/main/channels/channels.html\",\"<div id=\\\"channels\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\"></div><div \\nclass=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div\\n class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-checkerboard\\\"></md-icon><span data-translate>Canales</span></div><div \\nclass=\\\"count secondary-text\\\"><span data-translate>Número de canales:</span> <span>{{vm.channels.count}}</span></div>\\n</div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" data-layout-wrap><div class=\\\"actions\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"end center\\\" data-ng-if=\\\"hasPermission(\\'channels\\',\\'POST\\')\\\"><md-button \\nclass=\\\"md-raised\\\" aria-label=\\\"{{\\'Nuevo canal\\' | translate}}\\\" data-ng-click=\\\"vm.openChannelDialog($event)\\\"><md-icon \\nmd-font-icon=\\\"icon-plus-circle-outline\\\"></md-icon><span data-translate>Nuevo canal</span></md-button></div></div></div>\\n<div class=\\\"content-card\\\" data-layout=\\\"column\\\" data-flex><md-content class=\\\"content p-20\\\" flex ms-scroll><div \\nlayout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div class=\\\"no-results text-center\\\" ng-if=\\\"vm.channels.count == 0\\\">\\n<div class=\\\"message\\\"><md-icon class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-checkerboard\\\"></md-icon><div \\nclass=\\\"message-text\\\" translate>Sin canales</div></div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" data-dir-paginate=\\\"channel in vm.channels.data | itemsPerPage: 10 | orderBy:\\'order\\'\\\" \\ndata-total-items=\\\"vm.channels.count\\\" data-current-page=\\\"vm.channels.filters.page\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"title\\\">\\n<span>{{channel.name}}</span></div></div></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" data-ng-if=\\\"hasPermission(\\'channels\\',\\'PATCH\\')\\\" \\ndata-ng-click=\\\"vm.openChannelDialog($event, channel)\\\"><md-icon class=\\\"pt-5\\\" title=\\\"{{\\'Editar\\' | translate}}\\\" \\nmd-font-icon=\\\"icon-pencil\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Editar</span></md-button></div></div></div>\\n</div></div><dir-pagination-controls class=\\\"bottomFixed\\\"></dir-pagination-controls></div></md-content></div></div>\\n</div>\");\n$templateCache.put(\"app/main/dashboard/dashboard.html\",\"<div id=\\\"dashboard\\\" class=\\\"page-layout simple tabbed\\\" id=\\\"diary\\\"><div class=\\\"content\\\"><md-tabs md-dynamic-height>\\n<md-tab ng-repeat=\\\"concessionaire in vm.concessionaires\\\" ng-if=\\\"concessionaire.iframe_content\\\" \\nlabel=\\\"{{ concessionaire.name }}\\\"><div ng-bind-html=\\\"vm.trustAsHtml(concessionaire.iframe_content)\\\"></div></md-tab>\\n</md-tabs></div></div>\");\n$templateCache.put(\"app/main/concessionaires/concessionaires.html\",\"<div id=\\\"concessionaires\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\">\\n</div><div class=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><div class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-car\\\"></md-icon><span data-translate>Concesionarios\\n</span></div><div class=\\\"count secondary-text\\\"><span data-translate>Número de concesionarios:</span> <span>\\n{{vm.concessionaires.count}}</span></div></div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" \\ndata-layout-wrap><div class=\\\"actions\\\" data-layout=\\\"row\\\" data-layout-align=\\\"end center\\\" data-ng-if=\\\"vm.user.is_admin\\\">\\n<md-button class=\\\"md-raised\\\" aria-label=\\\"{{\\'Nuevo concesionario\\' | translate}}\\\" \\ndata-ng-click=\\\"vm.openConcessionaireDialog($event)\\\"><md-icon md-font-icon=\\\"icon-plus-circle-outline\\\"></md-icon><span \\ndata-translate>Nuevo concesionario</span></md-button></div></div></div><div class=\\\"content-card\\\" data-layout=\\\"column\\\" \\ndata-flex><md-content class=\\\"content p-20\\\" flex ms-scroll><div layout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div \\nclass=\\\"no-results text-center\\\" ng-if=\\\"vm.concessionaires.count == 0\\\"><div class=\\\"message\\\"><md-icon \\nclass=\\\"message-icon s96\\\" md-font-icon=\\\"icon-car\\\"></md-icon><div class=\\\"message-text\\\" translate>Sin concesionarios</div>\\n</div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\ndata-dir-paginate=\\\"concessionaire in vm.concessionaires.data | itemsPerPage: 10 | orderBy:\\'order\\'\\\" \\ndata-total-items=\\\"vm.concessionaires.count\\\" data-current-page=\\\"vm.concessionaires.filters.page\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"title\\\">\\n<span>{{concessionaire.name}}</span></div></div></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" \\ndata-ng-if=\\\"vm.user.is_admin || vm.user.is_concession_admin\\\" \\ndata-ui-sref=\\\"app.users.list({concessionaire:\\'{{ concessionaire.id }}\\'})\\\"><md-icon class=\\\"pt-5 purple-700-fg\\\" \\ntitle=\\\"{{\\'Usuarios\\' | translate}}\\\" md-font-icon=\\\"icon-account\\\"></md-icon><span class=\\\"pt-5 purple-700-fg\\\" \\ndata-translate>Usuarios</span></md-button><md-button data-layout=\\\"column\\\" class=\\\"md-accent\\\" \\ndata-layout-align=\\\"start center\\\" data-ng-if=\\\"hasPermission(\\'concessionaires\\',\\'PATCH\\')\\\" \\ndata-ng-click=\\\"vm.openConcessionaireNotesDialog($event, concessionaire)\\\"><md-icon class=\\\"pt-5 green-700-fg\\\" \\ntitle=\\\"{{\\'Notas\\' | translate}}\\\" md-font-icon=\\\"icon-document\\\"></md-icon><span class=\\\"pt-5 green-700-fg\\\" data-translate>\\nNotas</span></md-button><md-button data-layout=\\\"column\\\" class=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" \\ndata-ng-if=\\\"hasPermission(\\'concessionaires\\',\\'PATCH\\')\\\" \\ndata-ng-click=\\\"vm.openConcessionaireCalendarDialog($event, concessionaire)\\\"><md-icon class=\\\"pt-5 brown-700-fg\\\" \\ntitle=\\\"{{\\'Calendario\\' | translate}}\\\" md-font-icon=\\\"icon-calendar\\\"></md-icon><span class=\\\"pt-5 brown-700-fg\\\" \\ndata-translate>Calendario</span></md-button><md-button data-layout=\\\"column\\\" class=\\\"md-accent\\\" \\ndata-layout-align=\\\"start center\\\" data-ng-if=\\\"hasPermission(\\'concessionaires\\',\\'PATCH\\')\\\" \\ndata-ng-click=\\\"vm.openConcessionaireDialog($event, concessionaire)\\\"><md-icon class=\\\"pt-5\\\" \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-pencil\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Editar</span>\\n</md-button></div></div></div></div></div><dir-pagination-controls class=\\\"bottomFixed\\\"></dir-pagination-controls></div>\\n</md-content></div></div></div>\");\n$templateCache.put(\"app/main/imports/imports-view.html\",\"<div id=\\\"imports\\\" class=\\\"md-accent-bg\\\" layout=\\\"column\\\" flex><div id=\\\"import-selector\\\" layout=\\\"column\\\" \\nlayout-align=\\\"start center\\\" flex><h1 translate>IMPORTADOR/EXPORTADOR DE LEADS</h1><div class=\\\"import-list\\\" \\nlayout=\\\"row\\\" layout-align=\\\"center center\\\" layout-wrap><div class=\\\"import-list-item add-new-import\\\" layout=\\\"column\\\" \\nlayout-align=\\\"center center\\\" ng-click=\\\"vm.getDocument()\\\"><md-icon md-font-icon=\\\"icon-download\\\" \\nclass=\\\"icon s64 white-fg\\\"></md-icon><div class=\\\"import-name\\\" translate>Descargar plantilla</div></div><div \\nclass=\\\"import-list-item add-new-import\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" ng-click=\\\"vm.openFiles()\\\" \\ndata-ng-disabled=\\\"vm.loadingImport\\\"><md-icon ng-show=\\\"!vm.loadingImport\\\" md-font-icon=\\\"icon-upload\\\" \\nclass=\\\"icon s64 white-fg\\\"></md-icon><md-progress-circular ng-show=\\\"vm.loadingImport\\\" class=\\\"for-button\\\" \\nmd-diameter=\\\"16\\\" md-mode=\\\"indeterminate\\\"></md-progress-circular><div class=\\\"import-name\\\" translate>Importar leads</div>\\n</div><input type=\\\"file\\\" id=\\\"file-uploader\\\" ng-show=\\\"false\\\"><div class=\\\"import-list-item add-new-import\\\" \\nlayout=\\\"column\\\" layout-align=\\\"center center\\\" ng-click=\\\"vm.openExportLeadDialog($event)\\\"><md-icon \\nmd-font-icon=\\\"icon-export\\\" class=\\\"icon s64 white-fg\\\"></md-icon><div class=\\\"import-name\\\" translate>Exportar Leads</div>\\n</div></div></div></div>\");\n$templateCache.put(\"app/main/metrics/metrics.html\",\"<div id=\\\"metrics\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"column\\\"><div class=\\\"header\\\"><div \\nclass=\\\"header-content\\\" layout=\\\"column\\\" layout-align=\\\"space-between\\\"><div class=\\\"header-top\\\" layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\" layout-xs=\\\"column\\\"><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.calendar.today()\\\" aria-label=\\\"Hoy\\\"><md-icon \\nmd-font-icon=\\\"icon-calendar-today\\\"></md-icon><md-tooltip><span translate>Hoy</span></md-tooltip></md-button><md-button \\nclass=\\\"md-icon-button\\\" ng-click=\\\"vm.calendar.changeView(\\'agendaDay\\')\\\"><md-icon md-font-icon=\\\"icon-view-day\\\"></md-icon>\\n<md-tooltip><span translate>Dia</span></md-tooltip></md-button><md-button class=\\\"md-icon-button\\\" \\nng-click=\\\"vm.calendar.changeView(\\'agendaWeek\\')\\\"><md-icon md-font-icon=\\\"icon-view-week\\\"></md-icon><md-tooltip><span \\ntranslate>Semana</span></md-tooltip></md-button><md-button class=\\\"md-icon-button\\\" \\nng-click=\\\"vm.calendar.changeView(\\'month\\')\\\"><md-icon md-font-icon=\\\"icon-view-module\\\"></md-icon><md-tooltip><span \\ntranslate>Mes</span></md-tooltip></md-button></div></div><div class=\\\"header-bottom\\\" layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\"><md-button class=\\\"md-icon-button arrow\\\" ng-click=\\\"vm.calendar.prev()\\\" \\naria-label=\\\"Anterior\\\"><md-icon md-font-icon=\\\"icon-chevron-left\\\"></md-icon></md-button><div class=\\\"font-size-20\\\">\\n{{vm.calendarView.title}}</div><md-button class=\\\"md-icon-button arrow\\\" ng-click=\\\"vm.calendar.next()\\\" \\naria-label=\\\"Siguiente\\\"><md-icon md-font-icon=\\\"icon-chevron-right\\\"></md-icon></md-button></div></div><div \\nclass=\\\"w-0 h-0 overflow-hidden\\\"><div id=\\\"calendarView\\\" ui-calendar=\\\"vm.calendarUiConfig.calendar\\\" \\nng-model=\\\"vm.calendarModel\\\" calendar=\\\"main\\\"></div></div></div><div class=\\\"filters\\\"><div data-layout=\\\"row\\\" \\ndata-layout-wrap><div data-flex class=\\\"mb-25\\\" style=\\\"min-width: 220px\\\"><md-chips \\nng-model=\\\"vm.metrics.filters.user_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete \\nplaceholder=\\\"{{\\'Usuario\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"user\\\" md-no-cache=\\\"true\\\" md-min-length=\\\"0\\\" \\nmd-dropdown-items=\\\"50\\\" md-search-text=\\\"vm.searchTextUser\\\" md-items=\\\"user in vm.getUsers(vm.searchTextUser)\\\" \\nmd-item-text=\\\"vm.copySearch(\\'searchTextUser\\')\\\"><md-item-template><span md-highlight-text=\\\"vm.searchTextUser\\\">\\n{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ningun usuario con ese nombre</span></md-not-found></md-autocomplete><md-chip-template><span>\\n{{vm.getFullUserName($chip)}}</span></md-chip-template></md-chips></div><div data-flex class=\\\"pt-20 text-right\\\" \\nstyle=\\\"min-width: 220px\\\"><md-checkbox ng-model=\\\"vm.metrics.filters.useful\\\" aria-label=\\\"{{\\'Solo útiles\\' | translate}}\\\" \\nclass=\\\"md-align-top-left no-margin\\\" flex><span data-translate>Solo útiles</span></md-checkbox></div></div></div><div \\nclass=\\\"fullwidth mb-20\\\" ng-include=\\\"\\'app/main/metrics/views/benchmark/benchmark.html\\'\\\"></div><div \\nclass=\\\"fullwidth mb-20\\\" ng-include=\\\"\\'app/main/metrics/views/servicelevel/servicelevel.html\\'\\\"></div><div \\nclass=\\\"fullwidth mb-20\\\" ng-include=\\\"\\'app/main/metrics/views/voiceservice/voiceservice.html\\'\\\"></div><div \\nclass=\\\"fullwidth mb-20\\\" ng-include=\\\"\\'app/main/metrics/views/digitalservice/digitalservice.html\\'\\\"></div></div>\");\n$templateCache.put(\"app/main/origins/origins.html\",\"<div id=\\\"origins\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\"></div><div \\nclass=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div\\n class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-voicemail\\\"></md-icon><span data-translate>Orígenes</span></div><div \\nclass=\\\"count secondary-text\\\"><span data-translate>Número de orígenes:</span> <span>{{vm.origins.count}}</span></div>\\n</div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" data-layout-wrap><div class=\\\"actions\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"end center\\\" data-ng-if=\\\"hasPermission(\\'origins\\',\\'POST\\')\\\"><md-button \\nclass=\\\"md-raised\\\" aria-label=\\\"{{\\'Nuevo origen\\' | translate}}\\\" data-ng-click=\\\"vm.openOriginDialog($event)\\\"><md-icon \\nmd-font-icon=\\\"icon-plus-circle-outline\\\"></md-icon><span data-translate>Nuevo origen</span></md-button></div></div>\\n</div><div class=\\\"content-card\\\" data-layout=\\\"column\\\" data-flex><md-content class=\\\"content p-20\\\" flex ms-scroll><div \\nlayout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div class=\\\"no-results text-center\\\" ng-if=\\\"vm.origins.count == 0\\\">\\n<div class=\\\"message\\\"><md-icon class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-voicemail\\\"></md-icon><div \\nclass=\\\"message-text\\\" translate>Sin orígenes</div></div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" data-dir-paginate=\\\"origin in vm.origins.data | itemsPerPage: 10 | orderBy:\\'order\\'\\\" \\ndata-total-items=\\\"vm.origins.count\\\" data-current-page=\\\"vm.origins.filters.page\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"title\\\">\\n<span>{{origin.name}}</span></div></div></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" data-ng-if=\\\"hasPermission(\\'origins\\',\\'PATCH\\')\\\" \\ndata-ng-click=\\\"vm.openOriginDialog($event, origin)\\\"><md-icon class=\\\"pt-5\\\" title=\\\"{{\\'Editar\\' | translate}}\\\" \\nmd-font-icon=\\\"icon-pencil\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Editar</span></md-button></div></div></div>\\n</div></div><dir-pagination-controls class=\\\"bottomFixed\\\"></dir-pagination-controls></div></md-content></div></div>\\n</div>\");\n$templateCache.put(\"app/main/tasks/tasks.html\",\"<div layout=\\\"column\\\" layout-align=\\\"space-between start\\\" class=\\\"container-tasks\\\"><div class=\\\"no-results text-center\\\" \\nng-if=\\\"filtered.length == 0\\\"><div class=\\\"message\\\"><md-icon class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-document\\\">\\n</md-icon><div class=\\\"message-text\\\" translate>Sin solicitudes</div></div></div><div class=\\\"fullwidth\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" layout-margin \\nng-repeat=\\\"task in filtered = (vm.tasks.data | filter:{is_traking_task: tracing})\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex id=\\\"task-{{task.id}}\\\" class=\\\"item-task\\\"><div class=\\\"info\\\" flex=\\\"auto\\\"><div>\\n<md-input-container data-layout=\\\"column\\\" flex=\\\"50\\\" class=\\\"mt-0\\\"><md-checkbox ng-model=\\\"task.realization_date_check\\\" \\naria-label=\\\"{{\\'Marcar como realizada\\' | translate}}\\\" class=\\\"realization_date_check\\\" \\nclass=\\\"md-align-top-left no-margin\\\" ng-change=\\\"vm.saveTask(task)\\\" flex data-ng-disabled=\\\"task.realization_date_check\\\">\\n<span class=\\\"font-size-12\\\" data-translate>Marcar como realizada</span></md-checkbox></md-input-container></div><div \\nlayout=\\\"row\\\" data-layout-xs=\\\"column\\\" layout-align=\\\"start end\\\"><div data-layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nclass=\\\"mb-20 w-165 mr-15\\\"><div flex><label class=\\\"input-label\\\" data-translate>Fecha programada</label><div class=\\\"bb\\\">\\n<md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span class=\\\"planified_realization_date\\\" \\nng-if=\\\"task.planified_realization_date\\\">{{ task.planified_realization_date | date:\\'dd/MM/yyyy HH:mm\\' }}</span> <span \\nclass=\\\"planified_realization_date\\\" ng-if=\\\"!task.planified_realization_date\\\" translate>Sin definir</span></div><span \\nclass=\\\"error\\\">{{ vm.serverErrors.date[$index] }}</span></div></div><div data-layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nclass=\\\"mb-20 w-165 mr-15\\\"><div flex><label class=\\\"input-label\\\" data-translate>Medio</label><div class=\\\"bb\\\"><md-icon \\nmd-font-icon=\\\"icon-whatsapp\\\" ng-if=\\\"task.media===\\'Whatsapp\\'\\\"></md-icon><md-icon md-font-icon=\\\"icon-phone\\\" \\nng-if=\\\"task.media===\\'Phone\\'\\\"></md-icon><md-icon md-font-icon=\\\"icon-message-text-outline\\\" ng-if=\\\"task.media===\\'SMS\\'\\\">\\n</md-icon><md-icon md-font-icon=\\\"icon-email\\\" ng-if=\\\"task.media===\\'E-mail\\'\\\"></md-icon><md-icon \\nmd-font-icon=\\\"icon-account-multiple\\\" ng-if=\\\"task.media===\\'face\\'\\\"></md-icon><span class=\\\"media\\\" \\nng-if=\\\"task.media===\\'Phone\\'\\\" data-translate>Teléfono</span> <span class=\\\"media\\\" ng-if=\\\"task.media===\\'face\\'\\\" \\ndata-translate>Presencial</span> <span class=\\\"media\\\" ng-if=\\\"task.media!==\\'Phone\\' && task.media!==\\'face\\'\\\">\\n{{ task.media }}</span></div></div></div><div data-layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"mb-20 w-165 mr-15\\\">\\n<div flex><label class=\\\"input-label\\\" data-translate>Tipo de tarea</label><div class=\\\"bb\\\"><span class=\\\"type\\\" \\nng-repeat=\\\"type in vm.taskTypes\\\" ng-if=\\\"type.key===task.type\\\">{{ type.name }}</span></div></div></div><div \\ndata-layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"mb-20 w-165 mr-15\\\"><div flex><label class=\\\"input-label\\\" \\ndata-translate>Categoría</label><div class=\\\"bb\\\"><span class=\\\"subtype\\\" ng-repeat=\\\"type in vm.taskTypes\\\" \\nng-if=\\\"type.key===task.type\\\">{{ type.subtype }}</span></div></div></div><div data-layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" class=\\\"mb-20 mr-15\\\" flex><div flex><label class=\\\"input-label\\\" data-translate>Descripción\\n</label><div class=\\\"bb\\\"><span class=\\\"description\\\">{{ task.description || \\\"-\\\"}}</span></div></div></div><div \\ndata-layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"mb-20 mr-15\\\" ng-if=\\\"task.realization_date\\\"><div flex><label \\nclass=\\\"input-label\\\" data-translate>Realizada</label><div class=\\\"bb realization_date\\\" data-translate>\\n{{ task.realization_date | date:\\'dd/MM/yyyy HH:mm\\' }}</div></div></div></div></div><div layout=\\\"row\\\" \\nlayout-align=\\\"end center\\\" ng-hide=\\\"vm.isDisabled()\\\"><md-button data-layout=\\\"column\\\" class=\\\"md-icon-button md-accent\\\" \\ndata-layout-align=\\\"start center\\\" data-ng-if=\\\"hasPermission(\\'tasks\\',\\'PATCH\\')\\\" \\ndata-ng-click=\\\"vm.openTaskDialog($event, tracing, task)\\\"><md-icon title=\\\"{{ \\'Editar\\' | translate }}\\\" \\nmd-font-icon=\\\"icon-pencil\\\"></md-icon></md-button><md-button data-layout=\\\"column\\\" class=\\\"md-icon-button md-warn\\\" \\ndata-layout-align=\\\"start center\\\" data-ng-if=\\\"hasPermission(\\'tasks\\',\\'DELETE\\')\\\" \\ndata-ng-click=\\\"vm.removeTask($event, task)\\\"><md-icon title=\\\"{{ \\'Eliminar\\' | translate }}\\\" md-font-icon=\\\"icon-delete\\\">\\n</md-icon></md-button></div></div></div></div>\");\n$templateCache.put(\"app/main/videos/videos.html\",\"<div id=\\\"videos\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\"></div><div \\nclass=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div\\n class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-video\\\"></md-icon><span data-translate>Tutoriales</span></div></div></div><div \\nclass=\\\"content-card\\\" data-layout=\\\"column\\\" data-flex><md-content class=\\\"content p-20\\\" flex ms-scroll><div layout=\\\"row\\\" \\nlayout-align=\\\"space-between start\\\" layout-wrap><div flex=\\\"45\\\" flex-xs=\\\"100\\\" class=\\\"mb-40\\\"><div class=\\\"title\\\" translate>\\nBreve recorrido SML</div><video src=\\\"assets/movies/breve_recorrido_sml.webm\\\" controls></video></div><div flex=\\\"45\\\" \\nflex-xs=\\\"100\\\" class=\\\"mb-40\\\"><div class=\\\"title\\\" translate>Crear lead</div><video src=\\\"assets/movies/crear_lead.webm\\\" \\ncontrols></video></div><div flex=\\\"45\\\" flex-xs=\\\"100\\\" class=\\\"mb-40\\\"><div class=\\\"title\\\" translate>Vista rápida SML</div>\\n<video src=\\\"assets/movies/vista_rapida_sml.webm\\\" controls></video></div></div></md-content></div></div></div>\");\n$templateCache.put(\"app/utils/templates/dirPagination.tpl.html\",\"<div class=\\\"pagination\\\" ng-if=\\\"1 < pages.length || !autoHide\\\"><md-button class=\\\"md-icon-button first\\\" \\nng-if=\\\"boundaryLinks\\\" ng-disabled=\\\"pagination.current == 1\\\" ng-click=\\\"setCurrent(1)\\\" aria-label=\\\"Ir al inicio\\\"><md-icon\\n md-font-icon=\\\"icon-chevron-double-left\\\"></md-icon></md-button><md-button class=\\\"md-icon-button prev\\\" \\nng-if=\\\"directionLinks\\\" ng-disabled=\\\"pagination.current == 1\\\" ng-click=\\\"setCurrent(pagination.current - 1)\\\" \\naria-label=\\\"Anterior\\\"><md-icon md-font-icon=\\\"icon-chevron-left\\\"></md-icon></md-button><md-button \\nclass=\\\"md-icon-button number\\\" ng-repeat=\\\"pageNumber in pages track by tracker(pageNumber, $index)\\\" \\nng-class=\\\"{ \\'md-accent\\' : pagination.current == pageNumber, \\'md-disabled\\' : pageNumber == \\'...\\'}\\\" \\nng-click=\\\"setCurrent(pageNumber)\\\">{{pageNumber}}</md-button><md-button class=\\\"md-icon-button next\\\" \\nng-if=\\\"directionLinks\\\" ng-disabled=\\\"pagination.current == pagination.last\\\" \\nng-click=\\\"setCurrent(pagination.current + 1)\\\" aria-label=\\\"Siguiente\\\"><md-icon md-font-icon=\\\"icon-chevron-right\\\">\\n</md-icon></md-button><md-button class=\\\"md-icon-button last\\\" ng-if=\\\"boundaryLinks\\\" \\nng-disabled=\\\"pagination.current == pagination.last\\\" ng-click=\\\"setCurrent(pagination.last)\\\" aria-label=\\\"Último\\\"><md-icon\\n md-font-icon=\\\"icon-chevron-double-right\\\"></md-icon></md-button></div>\");\n$templateCache.put(\"app/core/directives/ms-info-bar/ms-info-bar.html\",\"<div id=\\\"ms-info-bar\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><div id=\\\"ms-info-bar-message\\\" ng-transclude flex>\\n</div><md-button id=\\\"ms-info-bar-close\\\" class=\\\"md-icon-button\\\" aria-label=\\\"Close\\\" ng-click=\\\"removeInfoBar()\\\"><md-icon \\nmd-font-icon=\\\"icon-close s24\\\"></md-icon></md-button></div>\");\n$templateCache.put(\"app/core/directives/ms-material-color-picker/ms-material-color-picker.html\",\"<md-menu md-position-mode=\\\"target-right target\\\"><div ng-click=\\\"$mdOpenMenu($event)\\\"><ms-color-picker-button><md-button \\naria-label=\\\"Row Color\\\" md-menu-origin ng-click=\\\"$mdOpenMenu($event)\\\" ng-class=\\\"vm.selectedColor.class\\\"><span \\nng-show=\\\"vm.selectedColor.palette\\\">{{vm.selectedColor.palette}} {{vm.selectedColor.hue}} </span><span \\nng-show=\\\"!vm.selectedColor.palette\\\">Select Color</span></md-button></ms-color-picker-button></div><md-menu-content \\nclass=\\\"ms-material-color-picker-menu-content\\\" layout-column><header \\nng-class=\\\"vm.selectedColor.class || \\'md-accent-bg\\'\\\" class=\\\"md-whiteframe-4dp\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><md-button md-prevent-menu-close ng-click=\\\"vm.activateHueSelection(false,false)\\\" \\nclass=\\\"md-icon-button\\\" ng-class=\\\"{\\'hidden\\':!vm.selectedPalette}\\\" aria-label=\\\"Palette\\\"><md-icon \\nmd-font-icon=\\\"icon-arrow-left\\\" class=\\\"s20\\\"></md-icon></md-button><span ng-if=\\\"vm.selectedColor.palette\\\">\\n{{vm.selectedColor.palette}} {{vm.selectedColor.hue}} </span><span ng-if=\\\"!vm.selectedColor.palette\\\">Select Color\\n</span><md-button class=\\\"remove-color-button md-icon-button\\\" ng-click=\\\"vm.removeColor()\\\" aria-label=\\\"Remove Color\\\">\\n<md-icon md-font-icon=\\\"icon-delete\\\" class=\\\"s20\\\"></md-icon></md-button></header><div class=\\\"colors\\\" ms-scroll><div \\nng-show=\\\"!vm.selectedPalette\\\" layout=\\\"row\\\" layout-wrap><div class=\\\"color\\\" ng-class=\\\"\\'md-\\'+palette+\\'-500-bg\\'\\\" \\nng-repeat=\\\"(palette, hues) in vm.palettes\\\" ng-click=\\\"vm.activateHueSelection(palette,hues)\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start end\\\" md-prevent-menu-close md-ink-ripple><span class=\\\"label\\\">{{palette}}</span></div></div><div \\nng-show=\\\"vm.selectedPalette\\\" layout=\\\"row\\\" layout-wrap><div class=\\\"color\\\" \\nng-class=\\\"\\'md-\\'+vm.selectedPalette+\\'-\\'+hue+\\'-bg\\'\\\" ng-repeat=\\\"(hue, values) in vm.selectedHues\\\" \\nng-click=\\\"vm.selectColor(vm.selectedPalette,hue)\\\" layout=\\\"row\\\" layout-align=\\\"start end\\\" md-ink-ripple><span \\nclass=\\\"label\\\">{{hue}} </span><i ng-if=\\\"vm.selectedPalette == vm.selectedColor.palette && hue == vm.selectedColor.hue\\\" \\nclass=\\\"s16 icon-check\\\"></i></div></div></div></md-menu-content></md-menu>\");\n$templateCache.put(\"app/core/directives/ms-search-bar/ms-search-bar.html\",\"<div flex layout=\\\"row\\\" layout-align=\\\"start center\\\"><label for=\\\"ms-search-bar-input\\\"><md-button \\nclass=\\\"ms-search-bar-expander md-icon-button\\\" aria-label=\\\"Expand Search Bar\\\" ng-click=\\\"MsSearchBar.expand()\\\" \\nng-if=\\\"!MsSearchBar.resultsLoading || MsSearchBar.collapsed\\\"><md-icon md-font-icon=\\\"icon-magnify\\\" class=\\\"icon s24\\\">\\n</md-icon></md-button><div class=\\\"ms-search-bar-loader\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\" \\nng-if=\\\"MsSearchBar.resultsLoading && !MsSearchBar.collapsed\\\"><md-progress-circular class=\\\"md-accent\\\" md-diameter=\\\"32\\\" \\nmd-mode=\\\"indeterminate\\\"></md-progress-circular></div></label><input id=\\\"ms-search-bar-input\\\" type=\\\"text\\\" \\nplaceholder=\\\"Search\\\" flex ng-model=\\\"MsSearchBar.query\\\" ng-model-options=\\\"MsSearchBar.queryOptions\\\" \\nng-blur=\\\"MsSearchBar.collapse()\\\" ng-keydown=\\\"MsSearchBar.handleKeydown($event)\\\"><md-button \\nclass=\\\"ms-search-bar-collapser md-icon-button\\\" ng-click=\\\"MsSearchBar.collapse()\\\" aria-label=\\\"Collapse Search Bar\\\">\\n<md-icon md-font-icon=\\\"icon-close\\\" class=\\\"icon s24\\\"></md-icon></md-button><div class=\\\"ms-search-bar-results\\\" \\nng-if=\\\"MsSearchBar.results\\\" ms-scroll><div class=\\\"no-results\\\" ng-if=\\\"MsSearchBar.results.length === 0\\\">No Results!\\n</div><div class=\\\"result\\\" ng-repeat=\\\"result in MsSearchBar.results\\\" ng-click=\\\"MsSearchBar.handleResultClick(result)\\\" \\nng-mouseenter=\\\"MsSearchBar.handleMouseenter($index)\\\" ng-mousedown=\\\"MsSearchBar.absorbEvent($event)\\\" \\nng-class=\\\"{\\'selected\\': $index == MsSearchBar.selectedResultIndex}\\\" md-ink-ripple><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\"><div class=\\\"icon-container\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><i \\nng-if=\\\"result.icon\\\" class=\\\"icon {{result.icon}}\\\"></i><div ng-if=\\\"!result.icon\\\" class=\\\"square md-accent-bg\\\"></div></div>\\n<div><div class=\\\"title\\\">{{result.title}}</div><div class=\\\"description\\\" ng-if=\\\"result.description\\\">\\n{{result.description}}</div></div></div></div></div></div>\");\n$templateCache.put(\"app/core/directives/ms-shortcuts/ms-shortcuts.html\",\"<div class=\\\"shortcuts-container\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\" flex \\nng-class=\\\"{\\'mobile-bar-active\\': MsShortcuts.mobileBarActive}\\\"><div class=\\\"flex-noshrink\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"shortcuts hide show-gt-xs\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nms-scroll ng-if=\\\"MsShortcuts.shortcuts.length > 0\\\" ng-sortable=\\\"MsShortcuts.sortableOptions\\\"><div \\nng-repeat=\\\"shortcut in MsShortcuts.shortcuts\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><md-button \\nclass=\\\"md-icon-button shortcut\\\" aria-label=\\\"{{shortcut.title}}\\\" ui-sref=\\\"{{shortcut.uisref}}\\\"><md-icon \\nng-if=\\\"shortcut.icon\\\" md-font-icon=\\\"{{shortcut.icon}}\\\" class=\\\"icon s24\\\"></md-icon><div ng-if=\\\"!shortcut.icon\\\" \\nclass=\\\"first-letter\\\">{{shortcut.title.charAt(0)}}</div><md-tooltip md-direction=\\\"bottom\\\">{{shortcut.title}}\\n</md-tooltip></md-button></div></div><md-menu md-offset=\\\"8 56\\\" class=\\\"shortcut-menu hide show-gt-xs\\\"><md-button \\nclass=\\\"md-icon-button add-shortcut-button\\\" aria-label=\\\"Add shortcut\\\" ng-click=\\\"$mdOpenMenu($event)\\\"><md-icon \\nmd-menu-origin md-font-icon=\\\"icon-star\\\" class=\\\"icon amber-600-fg s24\\\"></md-icon><md-tooltip md-direction=\\\"bottom\\\">\\nClick to add/remove shortcut</md-tooltip></md-button><md-menu-content><div id=\\\"ms-shortcut-add-menu\\\"><div \\nclass=\\\"shortcut-search\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><div class=\\\"search-icon\\\" layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\" ng-if=\\\"!MsShortcuts.resultsLoading\\\"><md-icon md-menu-align-target \\nmd-font-icon=\\\"icon-magnify\\\" class=\\\"icon s24\\\"></md-icon></div><div class=\\\"shortcut-loader\\\" layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\" ng-if=\\\"MsShortcuts.resultsLoading\\\"><md-progress-circular class=\\\"md-accent\\\" \\nmd-diameter=\\\"20\\\" md-mode=\\\"indeterminate\\\"></md-progress-circular></div><input type=\\\"text\\\" placeholder=\\\"Search\\\" flex \\nng-model=\\\"MsShortcuts.query\\\" ng-model-options=\\\"MsShortcuts.queryOptions\\\" \\nng-keydown=\\\"MsShortcuts.handleKeydown($event)\\\"></div><div class=\\\"results\\\" ng-if=\\\"MsShortcuts.results\\\" ms-scroll><div \\nclass=\\\"no-results\\\" ng-if=\\\"MsShortcuts.results.length === 0\\\">No Results!</div><div class=\\\"result\\\" \\nng-repeat=\\\"result in MsShortcuts.results\\\" ng-click=\\\"MsShortcuts.handleResultClick(result)\\\" \\nng-mouseenter=\\\"MsShortcuts.handleMouseenter($index)\\\" ng-mousedown=\\\"MsShortcuts.absorbEvent($event)\\\" \\nng-class=\\\"{\\'selected\\': $index == MsShortcuts.selectedResultIndex}\\\" md-prevent-menu-close=\\\"md-prevent-menu-close\\\" \\nmd-ink-ripple><div layout=\\\"row\\\" layout-align=\\\"start space-between\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n<div class=\\\"icon icon-container\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><i ng-if=\\\"result.icon\\\" \\nclass=\\\"{{result.icon}}\\\"></i><div ng-if=\\\"!result.icon\\\" class=\\\"square md-accent-bg\\\"></div></div><div><div class=\\\"title\\\">\\n{{result.title}}</div></div></div><md-icon md-font-icon=\\\"icon-pin\\\" class=\\\"icon s18\\\" \\nng-class=\\\"{\\'fade-text\\': !result.hasShortcut}\\\"></md-icon></div></div></div></div></md-menu-content></md-menu></div>\\n<md-button class=\\\"md-icon-button toggle-mobile-menu hide-gt-xs\\\" aria-label=\\\"Add shortcut\\\" \\nng-click=\\\"MsShortcuts.toggleMobileBar()\\\"><md-icon md-menu-origin md-font-icon=\\\"icon-star\\\" \\nclass=\\\"icon amber-600-fg s24\\\" ng-hide=\\\"MsShortcuts.mobileBarActive\\\"></md-icon><md-icon md-menu-origin \\nmd-font-icon=\\\"icon-close\\\" class=\\\"icon s24\\\" ng-hide=\\\"!MsShortcuts.mobileBarActive\\\"></md-icon></md-button></div>\");\n$templateCache.put(\"app/toolbar/layouts/vertical-navigation-fullwidth-toolbar/toolbar.html\",\"<div layout=\\\"row\\\" layout-align=\\\"start center\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><md-button \\nid=\\\"navigation-toggle\\\" class=\\\"md-icon-button\\\" ng-click=\\\"vm.toggleSidenav(\\'navigation\\')\\\" hide-gt-sm \\naria-label=\\\"Toggle navigation\\\"><md-icon md-font-icon=\\\"icon-menu\\\" class=\\\"icon\\\"></md-icon></md-button><ms-search-bar \\non-search=\\\"vm.search(query)\\\" on-result-click=\\\"vm.searchResultClick(item)\\\" debounce=\\\"300\\\"></ms-search-bar><div \\nclass=\\\"toolbar-separator\\\"></div><ms-shortcuts></ms-shortcuts><div class=\\\"toolbar-separator\\\"></div></div><div \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><md-progress-circular id=\\\"toolbar-progress\\\" ng-if=\\\"$root.loadingProgress\\\" \\nclass=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular><md-menu-bar id=\\\"user-menu\\\"><md-menu \\nmd-position-mode=\\\"left bottom\\\"><md-button class=\\\"user-button\\\" ng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"User settings\\\"><div \\nlayout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div class=\\\"avatar-wrapper\\\"><img md-menu-align-target class=\\\"avatar\\\" \\nsrc=\\\"assets/images/avatars/profile.jpg\\\"></div><span class=\\\"username\\\" hide-sm>{{ vm.user.first_name }}</span><md-icon \\nmd-font-icon=\\\"icon-chevron-down\\\" class=\\\"icon s16\\\" hide-sm></md-icon></div></md-button><md-menu-content width=\\\"3\\\">\\n<md-menu-item class=\\\"md-indent\\\" ui-sref=\\\"app.users\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"icon\\\"></md-icon>\\n<md-button>Mi perfil</md-button></md-menu-item><md-menu-divider></md-menu-divider><md-menu-item class=\\\"md-indent\\\">\\n<md-icon md-font-icon=\\\"icon-logout\\\" class=\\\"icon\\\"></md-icon><md-button ng-click=\\\"vm.logout()\\\">Cerrar sesión</md-button>\\n</md-menu-item></md-menu-content></md-menu></md-menu-bar><div class=\\\"toolbar-separator\\\"></div><md-menu \\nid=\\\"language-menu\\\" md-offset=\\\"0 72\\\" md-position-mode=\\\"target-right target\\\"><md-button class=\\\"language-button\\\" \\nng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"Language\\\" md-menu-origin md-menu-align-target><div layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\"><img class=\\\"flag\\\" ng-src=\\\"assets/images/flags/{{vm.selectedLanguage.flag}}.png\\\"> <span \\nclass=\\\"iso\\\">{{vm.selectedLanguage.code}}</span></div></md-button><md-menu-content width=\\\"3\\\" id=\\\"language-menu-content\\\">\\n<md-menu-item ng-repeat=\\\"(iso, lang) in vm.languages\\\"><md-button ng-click=\\\"vm.changeLanguage(lang)\\\" \\naria-label=\\\"{{lang.title}}\\\"><span layout=\\\"row\\\" layout-align=\\\"start center\\\"><img class=\\\"flag\\\" \\nng-src=\\\"assets/images/flags/{{lang.flag}}.png\\\"> <span>{{lang.title}}</span></span></md-button></md-menu-item>\\n</md-menu-content></md-menu><div class=\\\"toolbar-separator\\\"></div><md-button id=\\\"quick-panel-toggle\\\" \\nclass=\\\"md-icon-button\\\" ng-click=\\\"vm.toggleSidenav(\\'quick-panel\\')\\\" aria-label=\\\"Toggle quick panel\\\"><md-icon \\nmd-font-icon=\\\"icon-format-list-bulleted\\\" class=\\\"icon\\\"></md-icon></md-button></div></div>\");\n$templateCache.put(\"app/toolbar/layouts/horizontal-navigation/toolbar.html\",\"<div class=\\\"top-row\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<div class=\\\"navigation-toggle\\\" hide-gt-sm><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.toggleHorizontalMobileMenu()\\\" \\naria-label=\\\"Toggle Mobile Navigation\\\"><md-icon md-font-icon=\\\"icon-menu\\\"></md-icon></md-button></div><div class=\\\"logo\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><span class=\\\"logo-image\\\">I</span> <span class=\\\"logo-text\\\">Infoauto</span>\\n</div></div><div layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-progress-circular id=\\\"toolbar-progress\\\" \\nng-if=\\\"$root.loadingProgress\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular>\\n<md-button aria-label=\\\"Emails\\\" ui-sref=\\\"app.notifications\\\"><span class=\\\"badge\\\" \\nstyle=\\\"background: {{getEmailsBadge().color}}\\\">{{vm.notifications.unread_messages}}</span><md-icon \\nmd-font-icon=\\\"icon-bell\\\" class=\\\"icon\\\"></md-icon></md-button><div class=\\\"toolbar-separator\\\"></div><md-menu-bar \\nid=\\\"user-menu\\\"><md-menu data-md-position-mode=\\\"left bottom\\\"><md-button class=\\\"user-button\\\" \\ndata-ng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"User settings\\\"><span data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"avatar-wrapper\\\"><img data-md-menu-align-target class=\\\"avatar\\\" \\nsrc=\\\"assets/images/avatars/profile.jpg\\\" alt=\\\"Imágen de perfil\\\"></span><md-icon md-font-icon=\\\"icon-chevron-down\\\" \\nclass=\\\"icon s16\\\" data-hide-xs></md-icon></span></md-button><md-menu-content width=\\\"3\\\"><md-menu-item class=\\\"md-indent\\\">\\n<md-icon md-font-icon=\\\"icon-logout\\\" class=\\\"icon\\\"></md-icon><md-button data-ng-click=\\\"vm.logout()\\\" data-translate>\\nCerrar sesión</md-button></md-menu-item></md-menu-content></md-menu></md-menu-bar></div></div>\");\n$templateCache.put(\"app/toolbar/layouts/content-with-toolbar/toolbar.html\",\"<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\"><div class=\\\"logo\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><span class=\\\"logo-image\\\">F</span> <span class=\\\"logo-text\\\">FUSE</span></div>\\n<div class=\\\"toolbar-separator\\\"></div><ms-shortcuts></ms-shortcuts><div class=\\\"toolbar-separator\\\"></div></div><div \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><md-progress-circular id=\\\"toolbar-progress\\\" ng-if=\\\"$root.loadingProgress\\\" \\nclass=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular><div class=\\\"toolbar-separator\\\"></div>\\n<md-menu-bar id=\\\"user-menu\\\"><md-menu md-position-mode=\\\"left bottom\\\"><md-button class=\\\"user-button\\\" \\nng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"User settings\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div \\nclass=\\\"avatar-wrapper\\\"><img md-menu-align-target class=\\\"avatar\\\" src=\\\"assets/images/avatars/profile.jpg\\\"></div><span \\nclass=\\\"username\\\" hide-sm>{{ vm.user.first_name }}</span><md-icon md-font-icon=\\\"icon-chevron-down\\\" class=\\\"icon s16\\\" \\nhide-sm></md-icon></div></md-button><md-menu-content width=\\\"3\\\"><md-menu-item class=\\\"md-indent\\\" ui-sref=\\\"app.users\\\">\\n<md-icon md-font-icon=\\\"icon-account\\\" class=\\\"icon\\\"></md-icon><md-button>Mi perfil</md-button></md-menu-item>\\n<md-menu-divider></md-menu-divider><md-menu-item class=\\\"md-indent\\\"><md-icon md-font-icon=\\\"icon-logout\\\" class=\\\"icon\\\">\\n</md-icon><md-button ng-click=\\\"vm.logout()\\\">Cerrar sesión</md-button></md-menu-item></md-menu-content></md-menu>\\n</md-menu-bar><div class=\\\"toolbar-separator\\\"></div><ms-search-bar on-search=\\\"vm.search(query)\\\" \\non-result-click=\\\"vm.searchResultClick(item)\\\" debounce=\\\"300\\\"></ms-search-bar><div class=\\\"toolbar-separator\\\"></div>\\n<md-menu id=\\\"language-menu\\\" md-offset=\\\"0 72\\\" md-position-mode=\\\"target-right target\\\"><md-button class=\\\"language-button\\\" \\nng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"Language\\\" md-menu-origin md-menu-align-target><div layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\"><img class=\\\"flag\\\" ng-src=\\\"assets/images/flags/{{vm.selectedLanguage.flag}}.png\\\"> <span \\nclass=\\\"iso\\\">{{vm.selectedLanguage.code}}</span></div></md-button><md-menu-content width=\\\"3\\\" id=\\\"language-menu-content\\\">\\n<md-menu-item ng-repeat=\\\"(iso, lang) in vm.languages\\\"><md-button ng-click=\\\"vm.changeLanguage(lang)\\\" \\naria-label=\\\"{{lang.title}}\\\"><span layout=\\\"row\\\" layout-align=\\\"start center\\\"><img class=\\\"flag\\\" \\nng-src=\\\"assets/images/flags/{{lang.flag}}.png\\\"> <span>{{lang.title}}</span></span></md-button></md-menu-item>\\n</md-menu-content></md-menu><div class=\\\"toolbar-separator\\\"></div><md-button id=\\\"quick-panel-toggle\\\" \\nclass=\\\"md-icon-button\\\" ng-click=\\\"vm.toggleSidenav(\\'quick-panel\\')\\\" aria-label=\\\"Toggle quick panel\\\"><md-icon \\nmd-font-icon=\\\"icon-format-list-bulleted\\\" class=\\\"icon\\\"></md-icon></md-button></div></div>\");\n$templateCache.put(\"app/toolbar/layouts/vertical-navigation/toolbar.html\",\"<div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\" \\ndata-flex><md-button id=\\\"navigation-toggle\\\" class=\\\"md-icon-button\\\" data-ng-click=\\\"vm.toggleSidenav(\\'navigation\\')\\\" \\ndata-hide-gt-sm aria-label=\\\"Toggle navigation\\\"><md-icon md-font-icon=\\\"icon-menu\\\" class=\\\"icon\\\"></md-icon></md-button>\\n<div class=\\\"toolbar-separator\\\"></div><md-menu-bar id=\\\"user-menu\\\"><md-menu data-md-position-mode=\\\"left bottom\\\">\\n<md-button class=\\\"user-button\\\" data-ng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"User settings\\\"><span data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"avatar-wrapper\\\"><div class=\\\"user-asign\\\" \\nng-if=\\\"vm.user.first_name\\\"><span>{{vm.user.first_name[0]}}{{vm.user.last_name[0]}}</span></div><img \\nng-if=\\\"!vm.user.first_name\\\" data-md-menu-align-target class=\\\"avatar\\\" src=\\\"assets/images/avatars/profile.jpg\\\" \\nalt=\\\"Imágen de perfil\\\"> </span><span class=\\\"username\\\" data-hide data-show-gt-sm>{{ vm.getFullNameUser(vm.user) }}\\n</span><md-icon md-font-icon=\\\"icon-chevron-down\\\" class=\\\"icon s16\\\" data-hide-xs></md-icon></span></md-button>\\n<md-menu-content width=\\\"3\\\"><md-menu-divider></md-menu-divider><md-menu-item class=\\\"md-indent\\\"><md-icon \\nmd-font-icon=\\\"icon-logout\\\" class=\\\"icon\\\"></md-icon><md-button data-ng-click=\\\"vm.logout()\\\">Cerrar sesión</md-button>\\n</md-menu-item></md-menu-content></md-menu></md-menu-bar><div class=\\\"toolbar-separator\\\"></div><md-button \\ndata-ng-click=\\\"vm.toggleAvailable(true)\\\" ng-class=\\\"(vm.user.is_available) ? \\'md-green-700-bg\\':\\'grey-300-bg\\'\\\" \\nclass=\\\"md-raised white-fg available\\\" data-debouce-click aria-label=\\\"{{\\'Disponible\\' | translate}}\\\"><span data-translate \\nhide-xs>Disponible</span> <span data-translate hide-gt-xs>Disp.</span></md-button><md-button \\ndata-ng-click=\\\"vm.toggleAvailable(false)\\\" ng-class=\\\"(!vm.user.is_available) ? \\'md-warn\\':\\'grey-300-bg\\'\\\" \\nclass=\\\"md-raised available\\\" data-debouce-click aria-label=\\\"{{\\'No disponible\\' | translate}}\\\"><span data-translate \\nhide-xs>No disponible</span> <span data-translate hide-gt-xs>No Disp.</span></md-button><div hide-xs><span \\ndata-translate ng-if=\\\"vm.user.is_available\\\">Disponible para gestionar leads </span><span data-translate \\nng-if=\\\"!vm.user.is_available\\\">Por favor conectate para recibir leads</span></div></div><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\"><md-progress-circular id=\\\"toolbar-progress\\\" data-ng-disabled=\\\"!$root.loadingProgress\\\" \\nclass=\\\"md-accent\\\" data-md-diameter=\\\"32\\\"></md-progress-circular><md-menu id=\\\"info-lead\\\" \\ndata-md-position-mode=\\\"left bottom\\\" ng-show-start=\\\"vm.lead.data.id && vm.showInfo()\\\"><md-button \\nng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"lead\\\" md-menu-origin md-menu-align-target><md-icon \\nmd-font-icon=\\\"icon-information\\\" class=\\\"icon blue-700-fg\\\"></md-icon></md-button><md-menu-content width=\\\"3\\\" \\nid=\\\"lead-menu-content\\\"><md-menu-item><md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span data-translate>Alta lead\\n</span> <span>{{ vm.lead.data.created | date:\\'dd/MM/yyyy\\'}}</span></md-menu-item><md-menu-item><md-icon \\nmd-font-icon=\\\"icon-trending-up\\\"></md-icon><span data-translate>Score</span> <span data-ng-repeat=\\\"score in vm.scores\\\" \\nng-if=\\\"score.id===vm.lead.data.score\\\">{{ score.name }}</span></md-menu-item><md-menu-item ng-if=\\\"vm.lead.data.result\\\">\\n<md-icon md-font-icon=\\\"icon-car\\\"></md-icon><span data-translate>Resultado</span> <span \\nng-if=\\\"vm.lead.data.result===\\'positive\\'\\\" data-translate>Positivo</span> <span ng-if=\\\"vm.lead.data.result===\\'negative\\'\\\" \\ndata-translate>Negativo</span></md-menu-item><md-menu-item><md-icon md-font-icon=\\\"icon-tag\\\"></md-icon><span \\ndata-translate>Nuevo estado</span> <span ng-repeat=\\\"status in vm.leadStatus\\\" ng-if=\\\"status.id===vm.lead.data.status\\\">\\n{{status.name}}</span></md-menu-item></md-menu-content></md-menu><div class=\\\"toolbar-separator\\\" ng-show-end></div>\\n<md-menu id=\\\"language-menu\\\" md-offset=\\\"0 72\\\" md-position-mode=\\\"target-right target\\\"><md-button class=\\\"language-button\\\" \\nng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"Language\\\" md-menu-origin md-menu-align-target><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"center center\\\"><img class=\\\"flag\\\" data-ng-src=\\\"assets/images/flags/{{languageSelected}}.png\\\" \\nalt=\\\"{{languageSelected}}\\\"> <span class=\\\"iso\\\">{{languageSelected}}</span></div></md-button><md-menu-content width=\\\"3\\\" \\nid=\\\"language-menu-content\\\"><md-menu-item ng-repeat=\\\"language in languages\\\"><md-button \\nng-click=\\\"changeLanguage(language.code)\\\" aria-label=\\\"{{language.name}}\\\"><span data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\"><img class=\\\"flag\\\" data-ng-src=\\\"assets/images/flags/{{language.code}}.png\\\" \\nalt=\\\"{{language.name}}\\\"> <span>{{language.name}}</span></span></md-button></md-menu-item></md-menu-content></md-menu>\\n</div></div>\");\n$templateCache.put(\"app/toolbar/layouts/vertical-navigation-fullwidth-toolbar-2/toolbar.html\",\"<div layout=\\\"row\\\" layout-align=\\\"start center\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><div class=\\\"logo\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><span class=\\\"logo-image\\\">F</span> <span class=\\\"logo-text\\\">FUSE</span></div>\\n<div class=\\\"toolbar-separator\\\"></div><md-button id=\\\"navigation-toggle\\\" class=\\\"md-icon-button\\\" \\nng-click=\\\"vm.toggleSidenav(\\'navigation\\')\\\" hide-gt-sm aria-label=\\\"Toggle navigation\\\"><md-icon md-font-icon=\\\"icon-menu\\\" \\nclass=\\\"icon\\\"></md-icon></md-button><md-button class=\\\"md-icon-button navigation-fold-toggle\\\" hide show-gt-sm \\naria-label=\\\"Toggle navigation fold\\\" ng-click=\\\"vm.toggleMsNavigationFolded()\\\"><md-icon class=\\\"s18\\\" \\nmd-font-icon=\\\"icon-backburger\\\"></md-icon></md-button><ms-shortcuts></ms-shortcuts><div class=\\\"toolbar-separator\\\"></div>\\n</div><div layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-progress-circular id=\\\"toolbar-progress\\\" \\nng-if=\\\"$root.loadingProgress\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular>\\n<md-menu-bar id=\\\"user-menu\\\"><md-menu md-position-mode=\\\"left bottom\\\"><md-button class=\\\"user-button\\\" \\nng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"User settings\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div \\nclass=\\\"avatar-wrapper\\\"><img md-menu-align-target class=\\\"avatar\\\" src=\\\"assets/images/avatars/profile.jpg\\\"></div><span \\nclass=\\\"username\\\" hide-sm>{{ vm.user.first_name }}</span><md-icon md-font-icon=\\\"icon-chevron-down\\\" class=\\\"icon s16\\\" \\nhide-sm></md-icon></div></md-button><md-menu-content width=\\\"3\\\"><md-menu-item class=\\\"md-indent\\\" ui-sref=\\\"app.users\\\">\\n<md-icon md-font-icon=\\\"icon-account\\\" class=\\\"icon\\\"></md-icon><md-button>Mi perfil</md-button></md-menu-item>\\n<md-menu-divider></md-menu-divider><md-menu-item class=\\\"md-indent\\\"><md-icon md-font-icon=\\\"icon-logout\\\" class=\\\"icon\\\">\\n</md-icon><md-button ng-click=\\\"vm.logout()\\\">Cerrar sesión</md-button></md-menu-item></md-menu-content></md-menu>\\n</md-menu-bar><div class=\\\"toolbar-separator\\\"></div><ms-search-bar on-search=\\\"vm.search(query)\\\" \\non-result-click=\\\"vm.searchResultClick(item)\\\" debounce=\\\"300\\\"></ms-search-bar><div class=\\\"toolbar-separator\\\"></div>\\n<md-menu id=\\\"language-menu\\\" md-offset=\\\"0 72\\\" md-position-mode=\\\"target-right target\\\"><md-button class=\\\"language-button\\\" \\nng-click=\\\"$mdOpenMenu()\\\" aria-label=\\\"Language\\\" md-menu-origin md-menu-align-target><div layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\"><img class=\\\"flag\\\" ng-src=\\\"assets/images/flags/{{vm.selectedLanguage.flag}}.png\\\"> <span \\nclass=\\\"iso\\\">{{vm.selectedLanguage.code}}</span></div></md-button><md-menu-content width=\\\"3\\\" id=\\\"language-menu-content\\\">\\n<md-menu-item ng-repeat=\\\"(iso, lang) in vm.languages\\\"><md-button ng-click=\\\"vm.changeLanguage(lang)\\\" \\naria-label=\\\"{{lang.title}}\\\"><span layout=\\\"row\\\" layout-align=\\\"start center\\\"><img class=\\\"flag\\\" \\nng-src=\\\"assets/images/flags/{{lang.flag}}.png\\\"> <span>{{lang.title}}</span></span></md-button></md-menu-item>\\n</md-menu-content></md-menu><div class=\\\"toolbar-separator\\\"></div><md-button id=\\\"quick-panel-toggle\\\" \\nclass=\\\"md-icon-button\\\" ng-click=\\\"vm.toggleSidenav(\\'quick-panel\\')\\\" aria-label=\\\"Toggle quick panel\\\"><md-icon \\nmd-font-icon=\\\"icon-format-list-bulleted\\\" class=\\\"icon\\\"></md-icon></md-button></div></div>\");\n$templateCache.put(\"app/navigation/layouts/horizontal-navigation/navigation.html\",\"<div layout=\\\"row\\\" layout-align=\\\"start center\\\"><ms-navigation-horizontal></ms-navigation-horizontal></div>\");\n$templateCache.put(\"app/navigation/layouts/vertical-navigation/navigation.html\",\"<md-toolbar class=\\\"navigation-header md-whiteframe-1dp\\\" data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><a \\ndata-ui-sref=\\\"app.leads.board\\\" class=\\\"logo\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><h1 data-hide-xs \\ndata-hide-gt-xs data-translate>Infoauto</h1><img class=\\\"open-navigation\\\" src=\\\"assets/logo/logo{{domain}}.png\\\" \\nalt=\\\"{{\\'Configuración del sitio\\' | translate}}\\\" title=\\\"{{\\'Inicio\\' | translate}}\\\"> <img class=\\\"close-navigation\\\" \\nsrc=\\\"assets/logo/logowhite{{domain}}.png\\\" alt=\\\"{{\\'Configuración del sitio\\' | translate}}\\\" \\ntitle=\\\"{{\\'Inicio\\' | translate}}\\\"></a><md-icon class=\\\"fold-toggle s18\\\" data-md-font-icon=\\\"icon-backburger\\\" hide \\nshow-gt-sm ng-click=\\\"vm.toggleMsNavigationFolded()\\\"></md-icon></md-toolbar><ms-navigation class=\\\"scrollable\\\" \\nfolded=\\\"vm.folded\\\" ms-scroll=\\\"vm.msScrollOptions\\\"></ms-navigation>\");\n$templateCache.put(\"app/core/directives/ms-navigation/templates/horizontal.html\",\"<div class=\\\"navigation-toggle\\\" hide-gt-sm><md-button class=\\\"md-icon-button\\\" ng-click=\\\"vm.toggleHorizontalMobileMenu()\\\" \\naria-label=\\\"Toggle Mobile Navigation\\\"><md-icon md-font-icon=\\\"icon-menu\\\"></md-icon></md-button></div><ul \\nclass=\\\"horizontal\\\"><li ng-repeat=\\\"node in vm.navigation\\\" ms-navigation-horizontal-node=\\\"node\\\" \\nng-class=\\\"{\\'has-children\\': vm.hasChildren}\\\" ng-include=\\\"\\'navigation-horizontal-nested.html\\'\\\"></li></ul><script \\ntype=\\\"text/ng-template\\\" id=\\\"navigation-horizontal-nested.html\\\">\\n<div ms-navigation-horizontal-item layout=\\\"row\\\" ng-if=\\\"!vm.isHidden()\\\">\\r\\n\\r\\n        <div class=\\\"ms-navigation-horizontal-button\\\" ng-if=\\\"!node.uisref && node.title\\\"\\r\\n             ng-class=\\\"{\\'active md-accent-bg md-accent-fg\\': vm.isActive}\\\">\\r\\n            <i class=\\\"icon s18 {{node.icon}}\\\" ng-if=\\\"node.icon\\\"></i>\\r\\n            <span class=\\\"title\\\" flex>{{node.title}}</span>\\r\\n            <span class=\\\"badge white-fg\\\" style=\\\"background: {{node.badge.color}}\\\" ng-if=\\\"node.badge\\\">{{node.badge.content}}</span>\\r\\n            <i class=\\\"icon-chevron-right s18 arrow\\\" ng-if=\\\"vm.hasChildren\\\"></i>\\r\\n        </div>\\r\\n\\r\\n        <a class=\\\"ms-navigation-horizontal-button\\\" ui-sref=\\\"{{node.uisref}}\\\" ui-sref-active=\\\"active md-accent-bg\\\"\\r\\n           ng-class=\\\"{\\'active md-accent-bg md-accent-fg\\': vm.isActive}\\\"\\r\\n           ng-if=\\\"node.uisref && node.title\\\">\\r\\n            <i class=\\\"icon s18 {{node.icon}}\\\" ng-if=\\\"node.icon\\\"></i>\\r\\n            <span class=\\\"title\\\" flex>{{node.title}}</span>\\r\\n            <span class=\\\"badge white-fg\\\" style=\\\"background: {{node.badge.color}}\\\" ng-if=\\\"node.badge\\\">{{node.badge.content}}</span>\\r\\n            <i class=\\\"icon-chevron-right s18 arrow\\\" ng-if=\\\"vm.hasChildren\\\"></i>\\r\\n        </a>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <ul ng-if=\\\"vm.hasChildren && !vm.isHidden()\\\">\\r\\n        <li ng-repeat=\\\"node in node.children\\\" ms-navigation-horizontal-node=\\\"node\\\"\\r\\n            ng-class=\\\"{\\'has-children\\': vm.hasChildren}\\\"\\r\\n            ng-include=\\\"\\'navigation-horizontal-nested.html\\'\\\"></li>\\r\\n    </ul>\\n</script>\");\n$templateCache.put(\"app/core/directives/ms-navigation/templates/vertical.html\",\"<ul><li data-ng-repeat=\\\"node in vm.navigation\\\" data-ms-navigation-node=\\\"node\\\" \\ndata-ng-class=\\\"{\\'collapsed\\': vm.collapsed, \\'has-children\\': vm.hasChildren}\\\" data-ng-include=\\\"\\'navigation-nested.html\\'\\\">\\n</li></ul><script type=\\\"text/ng-template\\\" id=\\\"navigation-nested.html\\\">\\n<div data-ms-navigation-item data-layout=\\\"row\\\" data-ng-if=\\\"!vm.isHidden()\\\">\\r\\n\\r\\n        <div class=\\\"ms-navigation-button\\\" data-ng-if=\\\"!node.uisref && node.title && !node.href && !node.click\\\">\\r\\n            <i class=\\\"icon s16 {{node.icon}}\\\" data-ng-if=\\\"node.icon\\\"></i>\\r\\n            <span class=\\\"title\\\" data-flex>{{node.title}}</span>\\r\\n            <span class=\\\"badge white-fg\\\" data-ng-style=\\\"{\\'background\\': node.badge.color}\\\" data-ng-if=\\\"node.badge\\\">{{node.badge.content}}</span>\\r\\n            <i class=\\\"icon-chevron-right s16 arrow\\\" data-ng-if=\\\"vm.collapsable && vm.hasChildren\\\"></i>\\r\\n        </div>\\r\\n\\r\\n        <a class=\\\"ms-navigation-button\\\" data-ui-sref=\\\"{{node.uisref}}\\\" data-ui-sref-active=\\\"active md-accent-bg\\\"\\r\\n           data-ng-if=\\\"node.uisref && node.title && !node.href\\\">\\r\\n            <i class=\\\"icon s16 {{node.icon}}\\\" data-ng-if=\\\"node.icon\\\"></i>\\r\\n            <span class=\\\"title\\\" data-flex>{{node.title}}</span>\\r\\n            <span class=\\\"badge white-fg\\\" data-ng-style=\\\"{\\'background\\': node.badge.color}\\\" data-ng-if=\\\"node.badge\\\">{{node.badge.content}}</span>\\r\\n            <i class=\\\"icon-chevron-right s16 arrow\\\" data-ng-if=\\\"vm.collapsable && vm.hasChildren\\\"></i>\\r\\n        </a>\\r\\n\\r\\n        <a class=\\\"ms-navigation-button\\\" href=\\\"{{node.href}}\\\" target=\\\"_blank\\\"\\r\\n           data-ng-if=\\\"node.href && node.title\\\">\\r\\n            <i class=\\\"icon s16 {{node.icon}}\\\" data-ng-if=\\\"node.icon\\\"></i>\\r\\n            <span class=\\\"title\\\" data-flex>{{node.title}}</span>\\r\\n            <span class=\\\"badge white-fg\\\" data-ng-style=\\\"{\\'background\\': node.badge.color}\\\" data-ng-if=\\\"node.badge\\\">{{node.badge.content}}</span>\\r\\n            <i class=\\\"icon-chevron-right s16 arrow\\\" data-ng-if=\\\"vm.collapsable && vm.hasChildren\\\"></i>\\r\\n        </a>\\r\\n\\r\\n        <a class=\\\"ms-navigation-button\\\" ng-click=\\\"node.click()\\\"\\r\\n           data-ng-if=\\\"node.click && node.title\\\">\\r\\n            <i class=\\\"icon s16 {{node.icon}}\\\" data-ng-if=\\\"node.icon\\\"></i>\\r\\n            <span class=\\\"title\\\" data-flex>{{node.title}}</span>\\r\\n            <span class=\\\"badge white-fg\\\" data-ng-style=\\\"{\\'background\\': node.badge.color}\\\" data-ng-if=\\\"node.badge\\\">{{node.badge.content}}</span>\\r\\n            <i class=\\\"icon-chevron-right s16 arrow\\\" data-ng-if=\\\"vm.collapsable && vm.hasChildren\\\"></i>\\r\\n        </a>\\r\\n\\r\\n    </div>\\r\\n\\r\\n    <ul data-ng-if=\\\"vm.hasChildren && !vm.isHidden()\\\">\\r\\n        <li data-ng-repeat=\\\"node in node.children\\\" data-ms-navigation-node=\\\"node\\\"\\r\\n            data-ng-class=\\\"{\\'collapsed\\': vm.collapsed, \\'has-children\\': vm.hasChildren}\\\"\\r\\n            data-ng-include=\\\"\\'navigation-nested.html\\'\\\"></li>\\r\\n    </ul>\\n</script>\");\n$templateCache.put(\"app/main/auth/views/register/register.html\",\"<div id=\\\"register\\\" class=\\\"flex-scrollable\\\" data-layout=\\\"column\\\" ms-scroll><div id=\\\"register-form-wrapper\\\" \\ndata-layout=\\\"column\\\" data-layout-align=\\\"center center\\\"><div id=\\\"register-form\\\" class=\\\"md-whiteframe-8dp\\\"><img \\nsrc=\\\"assets/logo/logo-color{{domain}}.png\\\" alt=\\\"Lantia\\\"><h1 class=\\\"title\\\" data-translate>Registrar nuevo usuario</h1>\\n<form name=\\\"registerForm\\\" novalidate><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between start\\\"><md-input-container\\n flex=\\\"100\\\"><label data-translate>Nombre</label><input name=\\\"first_name\\\" data-ng-model=\\\"vm.form.first_name\\\" required>\\n<error-messages field=\\\"registerForm.first_name\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between start\\\"><md-input-container \\nflex=\\\"100\\\"><label data-translate>Apellidos</label><input name=\\\"last_name\\\" data-ng-model=\\\"vm.form.last_name\\\" required>\\n<error-messages field=\\\"registerForm.last_name\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between start\\\"><md-input-container \\nflex=\\\"100\\\"><label data-translate>Email</label><input name=\\\"email\\\" data-ng-model=\\\"vm.form.email\\\" required>\\n<error-messages field=\\\"registerForm.email\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between start\\\"><md-input-container \\nflex=\\\"50\\\"><label data-translate>Contraseña</label><input type=\\\"password\\\" name=\\\"password\\\" \\ndata-ng-model=\\\"vm.form.password\\\" required><error-messages field=\\\"registerForm.password\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container><md-input-container flex=\\\"50\\\"><input \\nmatch-password=\\\"password\\\" type=\\\"password\\\" name=\\\"password2\\\" ng-model=\\\"vm.form.repeat_password\\\" \\nplaceholder=\\\"Repite la contraseña\\\"><error-messages field=\\\"registerForm.password2\\\" server-errors=\\\"vm.serverErrors\\\" \\npassword-match></error-messages></md-input-container></div><md-button data-debouce-click data-ng-click=\\\"vm.register()\\\" \\ntype=\\\"submit\\\" class=\\\"md-raised md-accent submit-button\\\" aria-label=\\\"RESET MY PASSWORD\\\" \\ndata-ng-disabled=\\\"registerForm.$invalid || registerForm.$pristine\\\"><span data-translate>Crear</span></md-button></form>\\n<div class=\\\"login\\\" data-layout=\\\"row\\\" data-layout-align=\\\"center center\\\"><a class=\\\"link\\\" data-ui-sref=\\\"app.auth.login\\\" \\ndata-translate>Volver</a></div></div></div></div>\");\n$templateCache.put(\"app/main/auth/views/login/login.html\",\"<div id=\\\"login\\\" class=\\\"flex-scrollable\\\" data-layout=\\\"column\\\" ms-scroll><div id=\\\"login-form-wrapper\\\" \\ndata-layout=\\\"column\\\" data-layout-align=\\\"center center\\\"><div id=\\\"login-form\\\" class=\\\"md-whiteframe-8dp\\\"><img \\nsrc=\\\"assets/logo/logo-color{{domain}}.png\\\" alt=\\\"Info auto\\\"><form name=\\\"loginForm\\\" novalidate><md-input-container \\nclass=\\\"md-block\\\" md-no-float><input name=\\\"username\\\" data-ng-model=\\\"vm.username\\\" \\nplaceholder=\\\"{{\\'Email o nombre de usario\\' | translate}}\\\" required><div ng-messages=\\\"loginForm.username.$error\\\" \\nrole=\\\"alert\\\" multiple=\\\"multiple\\\"><div ng-message=\\\"required\\\"><span data-translate>Este campo es obligatorio</span></div>\\n</div></md-input-container><md-input-container class=\\\"md-block\\\" md-no-float><input type=\\\"password\\\" name=\\\"password\\\" \\ndata-ng-model=\\\"vm.password\\\" placeholder=\\\"{{\\'Contraseña\\' | translate}}\\\" required><div \\nng-messages=\\\"loginForm.password.$error\\\" role=\\\"alert\\\"><div ng-message=\\\"required\\\"><span data-translate>\\nEste campo es obligatorio</span></div></div></md-input-container><md-button data-debouce-click \\ndata-ng-click=\\\"vm.login()\\\" type=\\\"submit\\\" class=\\\"md-raised md-accent submit-button\\\" aria-label=\\\"LOG IN\\\" \\ndata-ng-disabled=\\\"loginForm.$invalid || loginForm.$pristine\\\"><span data-translate>Entrar</span></md-button></form>\\n</div></div></div>\");\n$templateCache.put(\"app/main/acds/dialogs/acd/acd-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"acdForm\\\" class=\\\"md-inline-form\\\" novalidate><md-toolbar\\n class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\">\\n<span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon \\nmd-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button></div></md-toolbar><md-dialog-content \\nms-scroll><div data-layout=\\\"column\\\"><md-input-container flex=\\\"30\\\" flex-xs=\\\"100\\\"><label data-translate>Lead</label>\\n<md-select name=\\\"lead\\\" data-ng-model=\\\"vm.acd.lead\\\"><md-option data-ng-repeat=\\\"lead in vm.acd.possible_leads\\\" \\ndata-ng-value=\\\"lead.id\\\">{{lead.vehicle_name}} - {{lead.client_name}}</md-option></md-select><error-messages \\nfield=\\\"acdForm.lead\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></md-dialog-content>\\n<md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveAcd()\\\" \\nclass=\\\"send-button md-accent md-raised\\\" data-ng-disabled=\\\"acdForm.$invalid || acdForm.$pristine\\\" \\naria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\\n</md-dialog>\");\n$templateCache.put(\"app/main/channels/dialogs/channel/channel-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"channelForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><md-input-container flex=\\\"100\\\"><input \\ntype=\\\"text\\\" name=\\\"name\\\" data-ng-model=\\\"vm.channel.name\\\" placeholder=\\\"{{\\'Nombre\\' | translate}}\\\" required md-autofocus>\\n<error-messages field=\\\"channelForm.name\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button \\ndata-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveChannel()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"channelForm.$invalid || channelForm.$pristine\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span \\ndata-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/concessionaires/dialogs/concessionaireNotes/concessionaireNotes-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"concessionaireForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><div class=\\\"no-results text-center\\\" \\nng-if=\\\"vm.concessionaire.notes_data.length == 0\\\"><div class=\\\"message\\\"><md-icon class=\\\"message-icon s96\\\" \\nmd-font-icon=\\\"icon-document\\\"></md-icon><div class=\\\"message-text\\\" translate>Sin notas añadidas</div></div></div><div \\nng-repeat=\\\"note in vm.concessionaire.notes_data\\\" layout=\\\"row\\\" layout-wrap class=\\\"fullwidth\\\" \\nng-init=\\\"note.historyShow=false\\\"><div flex=\\\"80\\\"><div class=\\\"mb-10\\\"><md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon>\\n<span>{{ note.modified | date:\\'dd/MM/yyyy HH:mm\\' }}</span></div><md-input-container flex=\\\"100\\\" \\nng-init=\\\"name=\\'notes_data___\\'+$index+\\'___content\\'\\\" class=\\\"fullwidth\\\"><label data-translate>Nota</label><input \\ntype=\\\"text\\\" data-ng-model=\\\"vm.concessionaire.notes_data[$index].content\\\" name=\\\"{{ name }}\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"concessionaireForm[name]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><div class=\\\"pl-50\\\" ng-show=\\\"note.historyShow\\\"><div \\nng-repeat=\\\"history in note.history\\\"><div class=\\\"mb-10\\\"><md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span>\\n{{ history.modified | date:\\'dd/MM/yyyy HH:mm\\' }}</span></div><div class=\\\"mb-20\\\">{{ history.content }}</div></div></div>\\n</div><div flex=\\\"20\\\"><md-button ng-click=\\\"note.historyShow=!note.historyShow\\\" ng-if=\\\"note.history.length>0\\\" \\nclass=\\\"md-fab md-mini md-accent\\\" aria-label=\\\"{{\\'Ver historial\\' | translate}}\\\"><md-icon md-font-icon=\\\"icon-history\\\">\\n</md-icon><md-tooltip><span data-translate>Ver historial</span></md-tooltip></md-button><md-button \\nng-click=\\\"vm.deleteNote(note)\\\" ng-hide=\\\"vm.isDisabled()\\\" ng-if=\\\"!note.id\\\" class=\\\"md-fab md-mini md-warn\\\" \\naria-label=\\\"{{\\'Borrar nota\\' | translate}}\\\"><md-icon md-font-icon=\\\"icon-delete\\\"></md-icon></md-button></div></div><div \\nclass=\\\"mt-20\\\"><md-button ng-click=\\\"vm.addNote()\\\" class=\\\"md-accent md-raised\\\" \\naria-label=\\\"{{\\'Añadir nota\\' | translate}}\\\"><span data-translate>Añadir nota</span></md-button></div></div>\\n</md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.saveConcessionaire()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"concessionaireForm.$invalid || concessionaireForm.$pristine\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\">\\n<span data-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/concessionaires/dialogs/concessionaire/concessionaire-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"concessionaireForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><md-input-container flex=\\\"100\\\"><input \\ntype=\\\"text\\\" name=\\\"name\\\" data-ng-model=\\\"vm.concessionaire.name\\\" placeholder=\\\"{{\\'Nombre\\' | translate}}\\\" required \\nmd-autofocus><error-messages field=\\\"concessionaireForm.name\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container><md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"address\\\" \\ndata-ng-model=\\\"vm.concessionaire.address\\\" placeholder=\\\"{{\\'Dirección\\' | translate}}\\\"><error-messages \\nfield=\\\"concessionaireForm.address\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"web\\\" data-ng-model=\\\"vm.concessionaire.web\\\" \\nplaceholder=\\\"{{\\'Web\\' | translate}}\\\"><error-messages field=\\\"concessionaireForm.web\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"web_coches_net\\\" \\ndata-ng-model=\\\"vm.concessionaire.web_coches_net\\\" placeholder=\\\"{{\\'Url coches.net\\' | translate}}\\\"><error-messages \\nfield=\\\"concessionaireForm.web_coches_net\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"schedule\\\" data-ng-model=\\\"vm.concessionaire.schedule\\\" \\nplaceholder=\\\"{{\\'Dashboard\\' | translate}}\\\"><error-messages field=\\\"concessionaireForm.schedule\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container flex=\\\"100\\\"><input \\ntype=\\\"text\\\" name=\\\"mask_c2c\\\" data-ng-model=\\\"vm.concessionaire.mask_c2c\\\" placeholder=\\\"{{\\'Id llamada c2c\\' | translate}}\\\">\\n<error-messages field=\\\"concessionaireForm.mask_c2c\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"concession_phone\\\" \\ndata-ng-model=\\\"vm.concessionaire.concession_phone\\\" placeholder=\\\"{{\\'Teléfono de concesión oficial\\' | translate}}\\\">\\n<error-messages field=\\\"concessionaireForm.concession_phone\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"hubspot_api_key\\\" \\ndata-ng-model=\\\"vm.concessionaire.hubspot_api_key\\\" placeholder=\\\"{{\\'Hubspot Api Key\\' | translate}}\\\"><error-messages \\nfield=\\\"concessionaireForm.hubspot_api_key\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"concession_phhubspot_idone\\\" \\ndata-ng-model=\\\"vm.concessionaire.hubspot_id\\\" placeholder=\\\"{{\\'Hubspot ID\\' | translate}}\\\"><error-messages \\nfield=\\\"concessionaireForm.hubspot_id\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><p \\ndata-translate>Fuentes:</p><div ng-repeat=\\\"source in vm.concessionaire.sources\\\" layout=\\\"row\\\" layout-wrap>\\n<md-input-container flex=\\\"30\\\" ng-init=\\\"name=\\'sources___\\'+$index+\\'___data\\'\\\"><input type=\\\"text\\\" name=\\\"{{ name }}\\\" \\ndata-ng-model=\\\"source.data\\\" placeholder=\\\"{{\\'Fuente\\' | translate}} {{ $index+1 }}\\\"><error-messages \\nfield=\\\"concessionaireForm[name]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><div \\nng-init=\\\"nameOrigin=\\'sources___\\'+$index+\\'___origin\\'\\\" flex=\\\"30\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Origen\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{ nameOrigin }}\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"0\\\" md-selected-item=\\\"source.origin_data\\\" md-search-text=\\\"searchTextOrigin\\\" \\nmd-items=\\\"origin in vm.getOrigins(searchTextOrigin)\\\" md-item-text=\\\"origin.name\\\"><md-item-template><span \\nmd-highlight-text=\\\"searchTextOrigin\\\">{{origin.name}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex=\\\"100\\\" \\nclass=\\\"no-margin\\\" ng-show=\\\"vm.serverErrors\\\"><error-messages field=\\\"concessionaireForm[nameOrigin]\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><div \\nng-init=\\\"nameChannel=\\'sources___\\'+$index+\\'___channel\\'\\\" flex=\\\"30\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Canal\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{ nameChannel }}\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"0\\\" ng-disabled=\\\"!source.origin_data\\\" md-selected-item=\\\"source.channel_data\\\" \\nmd-search-text=\\\"searchTextChannel\\\" md-items=\\\"channel in vm.getChannels(searchTextChannel,source.origin_data)\\\" \\nmd-item-text=\\\"channel.name\\\"><md-item-template><span md-highlight-text=\\\"searchTextChannel\\\">{{channel.name}}</span>\\n</md-item-template><md-not-found><span data-translate>No hay ningún canal con ese nombre</span></md-not-found>\\n</md-autocomplete><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\" ng-show=\\\"vm.serverErrors\\\"><error-messages \\nfield=\\\"concessionaireForm[nameChannel]\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container>\\n</div><div flex=\\\"10\\\"><md-button ng-click=\\\"vm.removeSource($index,concessionaireForm, source)\\\" \\nclass=\\\"md-fab md-mini md-warn\\\" aria-label=\\\"{{\\'Borrar\\' | translate}}\\\"><md-icon md-font-icon=\\\"icon-delete\\\"></md-icon>\\n</md-button></div></div><div><md-button ng-click=\\\"vm.addSource()\\\" class=\\\"md-accent md-raised\\\" \\naria-label=\\\"{{\\'Añadir fuente\\' | translate}}\\\"><span data-translate>Añadir fuente</span></md-button></div></div>\\n</md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.saveConcessionaire()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"concessionaireForm.$invalid || concessionaireForm.$pristine\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\">\\n<span data-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/concessionaires/dialogs/concessionaireCalendar/concessionaireCalendar-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"concessionaireForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><div><div \\nng-repeat=\\\"(day,work_calendar) in vm.concessionaire.work_calendar\\\" ng-if=\\\"vm.week[day]\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\" class=\\\"bb\\\"><div class=\\\"mr-40\\\">{{ vm.week[day] }}</div><div layout=\\\"row\\\" \\nclass=\\\"date-row\\\"><md-input-container class=\\\"md-block mr-40\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" \\nng-init=\\\"nameDate=\\'work_calendar___\\'+day+\\'___working_day\\'\\\"><div data-translate>Día laborable</div><div class=\\\"ml-35\\\">\\n<md-checkbox name=\\\"{{ nameDate }}\\\" ng-model=\\\"work_calendar.working_day\\\" aria-label=\\\"{{\\'Día laborable\\' | translate}}\\\">\\n</md-checkbox></div><error-messages field=\\\"concessionaireForm[nameDate]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container ng-show=\\\"work_calendar.working_day\\\" \\nclass=\\\"no-errors-spacer mr-40\\\" flex md-no-float ng-init=\\\"nameDate=\\'work_calendar___\\'+day+\\'___start_hour\\'\\\"><span>\\nHora de apertura</span> <input name=\\\"{{ nameDate }}\\\" type=\\\"time\\\" ng-model=\\\"work_calendar.start_hour\\\"><error-messages \\nfield=\\\"concessionaireForm[nameDate]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container ng-show=\\\"work_calendar.working_day\\\" class=\\\"no-errors-spacer\\\" flex md-no-float \\nng-init=\\\"nameDate=\\'work_calendar___\\'+day+\\'___end_hour\\'\\\"><span>Hora de cierre</span> <input name=\\\"{{ nameDate }}\\\" \\ntype=\\\"time\\\" ng-model=\\\"work_calendar.end_hour\\\"><error-messages field=\\\"concessionaireForm[nameDate]\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></div></div></div></md-dialog-content>\\n<md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveConcessionaire()\\\" \\nclass=\\\"send-button md-accent md-raised\\\" data-ng-disabled=\\\"concessionaireForm.$invalid || concessionaireForm.$pristine\\\" \\naria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\\n</md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/duplicateLeads/duplicateLeads-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"duplicateLeadsForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><p data-translate>\\nPuede que esté dando de alta un lead ya creado en el sistema, compruebe si alguno de estos leads es el que usted está creando\\n</p><md-input-container flex=\\\"30\\\" flex-xs=\\\"100\\\"><label data-translate>Lead</label><md-select name=\\\"lead\\\" \\ndata-ng-model=\\\"vm.lead\\\"><md-option data-ng-repeat=\\\"lead in vm.duplicateLeads\\\" data-ng-value=\\\"lead.id\\\"><span>\\n{{lead.client.name}}</span> <span>- </span><span>{{lead.concessionaire_data.name}}</span> <span>- </span><span>\\n{{lead.created | date:\\'dd/MM/yyyy\\'}}</span> <span>- </span><span ng-repeat=\\\"status in vm.status\\\" \\nng-if=\\\"status.id===lead.status\\\">{{status.name}}</span></md-option></md-select><error-messages \\nfield=\\\"duplicateLeadsForm.lead\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div>\\n</md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button type=\\\"submit\\\" data-ng-click=\\\"vm.goToLead()\\\" \\nclass=\\\"send-button md-accent md-raised\\\" data-ng-disabled=\\\"duplicateLeadsForm.$invalid || duplicateLeadsForm.$pristine\\\" \\naria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>Abrir lead</span></md-button><md-button \\ndata-ng-click=\\\"vm.closeDialog()\\\" class=\\\"md-accent md-raised\\\" aria-label=\\\"{{\\'Nuevo lead\\' | translate}}\\\"><span \\ndata-translate>Nuevo lead</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/finishLead/finishLead-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\" style=\\\"max-width: 900px; width: 900px\\\"><form name=\\\"leadForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button \\nclass=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\">\\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\" data-translate \\nng-if=\\\"!vm.actionError\\\">Selecciona un resultado de la gestión</div><div data-layout=\\\"column\\\" data-translate \\nng-if=\\\"vm.actionError\\\">Indique por favor el motivo del cierre del lead</div></md-dialog-content><md-dialog-actions \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" ng-if=\\\"!vm.actionError\\\"><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\"><md-button data-debouce-click data-ng-click=\\\"vm.saveLead(\\'negative\\')\\\" \\nclass=\\\"md-warn md-raised\\\" data-ng-disabled=\\\"leadForm.$invalid\\\" aria-label=\\\"{{\\'Negativo\\' | translate}}\\\"><span \\ndata-translate>Negativo</span></md-button><md-button data-debouce-click \\ndata-ng-click=\\\"vm.saveLead(\\'reserved_vehicle\\')\\\" class=\\\"green-700-bg white-fg md-raised\\\" \\ndata-ng-disabled=\\\"leadForm.$invalid\\\" aria-label=\\\"{{\\'Vehículo reservado\\' | translate}}\\\"><span data-translate>\\nVehículo reservado</span></md-button><md-button data-debouce-click data-ng-click=\\\"vm.saveLead(\\'unreachable\\')\\\" \\nclass=\\\"md-accent md-raised\\\" data-ng-disabled=\\\"leadForm.$invalid\\\" aria-label=\\\"{{\\'Ilocalizable\\' | translate}}\\\"><span \\ndata-translate>Ilocalizable</span></md-button><md-button data-debouce-click data-ng-click=\\\"vm.saveLead(\\'wrong\\')\\\" \\nclass=\\\"md-primary md-raised\\\" data-ng-disabled=\\\"leadForm.$invalid\\\" aria-label=\\\"{{\\'Duplicado\\' | translate}}\\\"><span \\ndata-translate>Duplicado</span></md-button><md-button data-debouce-click data-ng-click=\\\"vm.saveLead(\\'not_available\\')\\\" \\nclass=\\\"yellow-700-bg white-fg md-raised\\\" data-ng-disabled=\\\"leadForm.$invalid\\\" \\naria-label=\\\"{{\\'No disponible\\' | translate}}\\\"><span data-translate>No disponible</span></md-button><md-button \\ndata-debouce-click data-ng-click=\\\"vm.saveLead(\\'error\\')\\\" class=\\\"purple-700-bg white-fg md-raised\\\" \\ndata-ng-disabled=\\\"leadForm.$invalid\\\" aria-label=\\\"{{\\'Error\\' | translate}}\\\"><span data-translate>Error</span></md-button>\\n</div></md-dialog-actions><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" \\nng-if=\\\"vm.actionError\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button \\nng-repeat=\\\"button in vm.buttonErros\\\" ng-if=\\\"button.status===vm.lead.result\\\" data-debouce-click \\ndata-ng-click=\\\"vm.saveLeadError(button.id)\\\" class=\\\"md-primary md-raised\\\" data-ng-disabled=\\\"leadForm.$invalid\\\" \\naria-label=\\\"{{button.name}}\\\"><span>{{button.name}}</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/exportLeads/exportLeads-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"exportLeadForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><md-input-container flex=\\\"30\\\" flex-xs=\\\"100\\\">\\n<label data-translate>Concesión</label><md-select name=\\\"concessionaire__in\\\" \\ndata-ng-model=\\\"vm.exportLead.concessionaire__in\\\" multiple=\\\"multiple\\\"><md-option \\ndata-ng-repeat=\\\"concessionaire in vm.concessionaires\\\" data-ng-value=\\\"concessionaire.id\\\">{{ concessionaire.name }}\\n</md-option></md-select><error-messages field=\\\"exportLeadForm.concessionaire__in\\\" server-errors=\\\"vm.serverErrors\\\" \\nrequired></error-messages></md-input-container><div><label class=\\\"font-size-12 secondary-text\\\" data-translate>\\nCreados desde</label><md-datepicker name=\\\"created_start_date\\\" data-ng-model=\\\"vm.exportLead.created_start_date\\\" \\nmd-placeholder=\\\"{{\\'Creados desde\\' | translate}}\\\"></md-datepicker><error-messages \\nfield=\\\"exportLeadForm.created_start_date\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></div><div><label \\nclass=\\\"font-size-12 secondary-text\\\" data-translate>Creados hasta</label><md-datepicker name=\\\"created_end_date\\\" \\ndata-ng-model=\\\"vm.exportLead.created_end_date\\\" md-placeholder=\\\"{{\\'Creados hasta\\' | translate}}\\\"></md-datepicker>\\n<error-messages field=\\\"exportLeadForm.created_end_date\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</div></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.getDocument()\\\" class=\\\"send-button md-accent md-raised\\\" data-ng-disabled=\\\"exportLeadForm.$invalid\\\" \\naria-label=\\\"{{\\'Exportar\\' | translate}}\\\"><span data-translate>Exportar</span></md-button></div></md-dialog-actions>\\n</form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/lead/lead-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\" style=\\\"width: 1000px; max-width: 1000px\\\"><form name=\\\"leadForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button \\nclass=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\">\\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><table><thead><tr><th \\ndata-translate>Comercial</th><th data-translate>Activo/Inactivo</th><th data-translate>Leads asignados hoy</th><th \\ndata-translate>Leads no atendidos</th><th data-translate>Tareas atrasadas</th><th data-translate>Seguimientos atrasados\\n</th><th data-translate>Acciones</th></tr></thead><tbody><tr data-ng-repeat=\\\"user in vm.users\\\"><td><span>\\n{{vm.getFullUserName(user)}}</span> <span ng-if=\\\"user.emails_received\\\"><md-icon md-font-icon=\\\"icon-email\\\"></md-icon>\\n</span><span ng-if=\\\"user.lost_calls\\\"><md-icon md-font-icon=\\\"icon-phone\\\"></md-icon></span></td><td class=\\\"text-center\\\">\\n<span ng-if=\\\"user.is_online\\\" class=\\\"green-fg\\\">Activo</span> <span ng-if=\\\"!user.is_online\\\" class=\\\"red-fg\\\">Inactivo\\n</span></td><td class=\\\"text-center\\\">{{user.today_lead_number}}</td><td class=\\\"text-center\\\">{{user.unattended_leads}}\\n</td><td class=\\\"text-center\\\">{{user.delayed_tasks}}</td><td class=\\\"text-center\\\">{{user.delayed_trackings}}</td><td><div\\n data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.saveLead(user)\\\" class=\\\"send-button md-accent md-raised\\\" aria-label=\\\"{{\\'Asignar\\' | translate}}\\\"><span \\ndata-translate>Asignar</span></md-button></div></td></tr></tbody></table></div></md-dialog-content><md-dialog-actions \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\">\\n<md-button data-ng-click=\\\"vm.closeDialog()\\\" class=\\\"md-raised\\\" aria-label=\\\"{{\\'Cancelar\\' | translate}}\\\"><span \\ndata-translate>Cancelar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/leadActivity/leadActivity-dialog.html\",\"<md-dialog id=\\\"leadActivities\\\" class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"leadActivityForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button \\nclass=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\">\\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><div class=\\\"todo-item\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\" ng-repeat=\\\"activity in vm.leadActivities.data\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"title mb-5\\\">\\n<md-icon md-font-icon=\\\"icon-account\\\"></md-icon><span>{{activity.user_data.username}}</span></div><div \\nclass=\\\"title mb-5\\\"><md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span>{{activity.date | date:\\'dd/MM/yyyy\\'}}</span>\\n</div><div layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap><span ng-repeat=\\\"status in vm.activityStatus\\\" \\nng-if=\\\"status.id===activity.lead_status_planing\\\">{{status.name}}</span></div></div></div><div \\nng-if=\\\"activity.status===\\'done\\'\\\"><md-icon class=\\\"green-700-fg\\\" md-font-icon=\\\"icon-check-circle\\\"></md-icon></div></div>\\n</div></div></div></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button \\ndata-ng-click=\\\"vm.closeDialog()\\\" class=\\\"md-accent md-raised\\\" aria-label=\\\"{{\\'Cerrar\\' | translate}}\\\"><span \\ndata-translate>Cerrar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/leadHistory/leadHistory-dialog.html\",\"<md-dialog id=\\\"leadHistories\\\" class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"leadHistoryForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button \\nclass=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\">\\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><div class=\\\"todo-item\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\" ng-repeat=\\\"history in vm.leadHistories.data\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"title mb-5\\\">\\n<md-icon md-font-icon=\\\"icon-account\\\"></md-icon><span>{{history.history_user}}</span></div><div class=\\\"title mb-5\\\">\\n<md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span>{{history.history_date | date:\\'dd/MM/yyyy\\'}}</span></div><div \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap><div ng-bind-html=\\\"history.history_change_reason\\\"></div></div>\\n</div></div></div></div></div></div></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button \\ndata-ng-click=\\\"vm.closeDialog()\\\" class=\\\"md-accent md-raised\\\" aria-label=\\\"{{\\'Cerrar\\' | translate}}\\\"><span \\ndata-translate>Cerrar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/leadContact/leadContact-dialog.html\",\"<md-dialog id=\\\"leadContacts\\\" class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"leadContactForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button \\nclass=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\">\\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><div class=\\\"todo-item\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\" ng-repeat=\\\"acd in vm.leadContacts\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"title mb-5\\\">\\n<md-icon md-font-icon=\\\"icon-phone-outgoing\\\"></md-icon><span>{{acd.orig_phone}}</span></div><div class=\\\"title mb-5\\\">\\n<md-icon md-font-icon=\\\"icon-phone-incoming\\\"></md-icon><span>{{acd.concession.name}}</span> <span>({{acd.dest_phone}})\\n</span></div><div class=\\\"tags\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-if=\\\"acd.date_contact\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\">{{acd.date_contact | date:\\'dd/MM/yyyy HH:mm\\'}}</div></div><div class=\\\"tag\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-if=\\\"acd.duration\\\"><md-icon md-font-icon=\\\"icon-clock\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\">{{acd.duration}}</div></div><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><span \\ndata-translate>LLamada respondida:</span><div class=\\\"ml-10 tag-label\\\" ng-if=\\\"acd.answered_call\\\" data-translate>Si</div>\\n<div class=\\\"ml-10 tag-label\\\" ng-if=\\\"!acd.answered_call\\\" data-translate>No</div></div></div></div></div></div></div>\\n</div></div></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\">\\n<div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button data-ng-click=\\\"vm.closeDialog()\\\" \\nclass=\\\"md-accent md-raised\\\" aria-label=\\\"{{\\'Cerrar\\' | translate}}\\\"><span data-translate>Cerrar</span></md-button></div>\\n</md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/leadStatus/leadStatus-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"leadStatusForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><md-input-container><label data-translate>\\nEstado</label><md-select name=\\\"status\\\" data-ng-model=\\\"vm.lead.status\\\"><md-option data-ng-repeat=\\\"status in vm.status\\\" \\ndata-ng-value=\\\"status.id\\\">{{status.name}}</md-option></md-select><error-messages field=\\\"leadStatusForm.status\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></md-dialog-content><md-dialog-actions \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\">\\n<md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveLeadStatus()\\\" \\nclass=\\\"send-button md-accent md-raised\\\" data-ng-disabled=\\\"leadStatusForm.$invalid\\\" \\naria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\\n</md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/leadStatusDate/leadStatusDate-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"leadStatusForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div layout=\\\"row\\\" layout-align=\\\"start end\\\"><md-input-container>\\n<md-datepicker name=\\\"{{vm.field}}\\\" data-ng-model=\\\"vm.lead[vm.field]\\\" md-placeholder=\\\"dd/mm/yyyy\\\"></md-datepicker>\\n<error-messages field=\\\"saveLeadForm[vm.field]\\\" server-errors=\\\"vm.serverErrors\\\" forcechange></error-messages>\\n</md-input-container><md-input-container class=\\\"ml-20\\\"><input class=\\\"mb-10\\\" type=\\\"time\\\" \\ndata-ng-model=\\\"vm.lead[vm.field]\\\" md-placeholder=\\\"hh:mm\\\" step=\\\"60\\\"></md-input-container></div></md-dialog-content>\\n<md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveLeadStatus()\\\" \\nclass=\\\"send-button md-accent md-raised\\\" data-ng-disabled=\\\"leadStatusForm.$invalid\\\" \\naria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>Guardar</span></md-button></div></md-dialog-actions></form>\\n</md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/saveLead/saveLead-dialog.html\",\"<md-dialog id=\\\"lead-edit-dialog\\\" class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"saveLeadForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\" data-translate>Siguientes pasos</span>\\n<md-button class=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" \\naria-label=\\\"Close dialog\\\"></md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div \\ndata-layout=\\\"column\\\"><label data-translate>Por favor valora el lead</label><md-input-container><div \\nclass=\\\"mt-10 tag pointer\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon style=\\\"margin: 0\\\" \\nng-click=\\\"vm.lead.score=1\\\" class=\\\"amber-fg\\\" md-font-icon=\\\"{{ vm.lead.score >0 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\">\\n</md-icon><md-icon style=\\\"margin: 0\\\" ng-click=\\\"vm.lead.score=2\\\" class=\\\"amber-fg\\\" \\nmd-font-icon=\\\"{{ vm.lead.score >1 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\"></md-icon><md-icon style=\\\"margin: 0\\\" \\nng-click=\\\"vm.lead.score=3\\\" class=\\\"amber-fg\\\" md-font-icon=\\\"{{ vm.lead.score >2 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\">\\n</md-icon><md-icon style=\\\"margin: 0\\\" ng-click=\\\"vm.lead.score=4\\\" class=\\\"amber-fg\\\" \\nmd-font-icon=\\\"{{ vm.lead.score >3 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\"></md-icon></div><input type=\\\"hidden\\\" \\nname=\\\"score\\\" ng-model=\\\"vm.lead.score\\\"><error-messages field=\\\"saveLeadForm.score\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><div class=\\\"fullwidth\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-margin \\nng-repeat=\\\"task in vm.tasks.data\\\" ng-if=\\\"!task.realization_date\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex>\\n<div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" layout-align=\\\"start end\\\"><div \\ndata-layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"mb-20 w-165 mr-15\\\"><div flex><label class=\\\"input-label\\\" \\ndata-translate>Fecha</label><div class=\\\"bb\\\"><md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span \\nng-if=\\\"vm.lead.last_lead_action.date\\\">{{ vm.lead.last_lead_action.date | date:\\'dd/MM/yyyy HH:mm\\' }}</span> <span \\nng-if=\\\"!vm.lead.last_lead_action.date\\\" translate>Sin definir</span></div></div></div><div data-layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" class=\\\"mb-20 w-165 mr-15\\\"><div flex><label class=\\\"input-label\\\" data-translate>Medio</label>\\n<div class=\\\"bb\\\"><md-icon md-font-icon=\\\"icon-whatsapp\\\" ng-if=\\\"task.media===\\'Whatsapp\\'\\\"></md-icon><md-icon \\nmd-font-icon=\\\"icon-phone\\\" ng-if=\\\"task.media===\\'Phone\\'\\\"></md-icon><md-icon md-font-icon=\\\"icon-message-text-outline\\\" \\nng-if=\\\"task.media===\\'SMS\\'\\\"></md-icon><md-icon md-font-icon=\\\"icon-email\\\" ng-if=\\\"task.media===\\'E-mail\\'\\\"></md-icon>\\n<md-icon md-font-icon=\\\"icon-account-multiple\\\" ng-if=\\\"task.media===\\'face\\'\\\"></md-icon><span ng-if=\\\"task.media===\\'Phone\\'\\\" \\ndata-translate>Teléfono</span> <span ng-if=\\\"task.media===\\'face\\'\\\" data-translate>Presencial</span> <span \\nng-if=\\\"task.media!==\\'Phone\\' && task.media!==\\'face\\'\\\">{{ task.media }}</span></div></div></div><div data-layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" class=\\\"mb-20 w-165 mr-15\\\"><div flex><label class=\\\"input-label\\\" data-translate>Tipo de tarea\\n</label><div class=\\\"bb\\\"><span ng-repeat=\\\"type in vm.taskTypes\\\" ng-if=\\\"type.id===task.type\\\">{{ type.name }}</span></div>\\n</div></div></div></div></div></div><div layout=\\\"row\\\" layout-align=\\\"start end\\\"><md-input-container><h4 data-translate>\\nPrograma la fecha de la siguiente gestión:</h4><md-datepicker name=\\\"date\\\" data-ng-model=\\\"vm.leadAction.date\\\" \\nmd-placeholder=\\\"dd/mm/yyyy\\\"></md-datepicker><error-messages field=\\\"saveLeadForm.date\\\" server-errors=\\\"vm.serverErrors\\\" \\nforcechange></error-messages></md-input-container><md-input-container class=\\\"mr-20\\\" style=\\\"margin-left: -40px\\\"><input \\nclass=\\\"mb-10\\\" type=\\\"time\\\" data-ng-model=\\\"vm.leadAction.date\\\" md-placeholder=\\\"hh:mm\\\" step=\\\"60\\\"></md-input-container><div\\n class=\\\"mb-30\\\"><md-button data-ng-click=\\\"vm.setDate(1)\\\" class=\\\"md-raised\\\" aria-label=\\\"{{ \\'1 DIA\\' | translate }}\\\"><span \\ndata-translate>1 DIA</span></md-button><md-button data-ng-click=\\\"vm.setDate(2)\\\" class=\\\"md-raised\\\" \\naria-label=\\\"{{ \\'2 DIAS\\' | translate }}\\\"><span data-translate>2 DIAS</span></md-button><md-button \\ndata-ng-click=\\\"vm.setDate(7)\\\" class=\\\"md-raised\\\" aria-label=\\\"{{ \\'1 SEMANA\\' | translate }}\\\"><span data-translate>1 SEMANA\\n</span></md-button></div></div><div class=\\\"content-status-lead\\\"><div class=\\\"step step-new\\\" \\nng-class=\\\"{\\'active\\': vm.leadAction.lead_status_planing===\\'new\\'}\\\"><div class=\\\"content-circle\\\"><div \\nclass=\\\"circle pointer\\\" ng-click=\\\"vm.leadAction.lead_status_planing=\\'new\\'\\\"><md-icon md-font-icon=\\\"icon-chevron-right\\\">\\n</md-icon></div><div class=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\" hide-xs><span translate>Alta</span>\\n</div></div><div class=\\\"step step-pending\\\" \\nng-class=\\\"{\\'active\\': vm.leadAction.lead_status_planing===\\'commercial_management\\'}\\\"><div class=\\\"content-circle\\\"><div \\nclass=\\\"circle pointer\\\" ng-click=\\\"vm.leadAction.lead_status_planing=\\'commercial_management\\'\\\"><md-icon \\nmd-font-icon=\\\"icon-chevron-right\\\"></md-icon></div><div class=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\"><span\\n translate>Tareas pendientes</span></div></div><div class=\\\"step step-tracing\\\" \\nng-class=\\\"{\\'active\\': vm.leadAction.lead_status_planing===\\'tracing\\'}\\\"><div class=\\\"content-circle\\\"><div \\nclass=\\\"circle pointer\\\" ng-click=\\\"vm.leadAction.lead_status_planing=\\'tracing\\'\\\"><md-icon \\nmd-font-icon=\\\"icon-chevron-right\\\"></md-icon></div><div class=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\"><span\\n translate>Seguimiento</span></div></div><div class=\\\"step step-end\\\" \\nng-class=\\\"{\\'active\\': vm.leadAction.lead_status_planing===\\'end\\'}\\\"><div class=\\\"content-circle\\\"><div class=\\\"circle\\\" \\nng-click=\\\"vm.leadAction.lead_status_planing=\\'end\\';vm.finishLead()\\\"><md-icon md-font-icon=\\\"icon-close\\\"></md-icon></div>\\n<div class=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\" hide-xs><span translate>Finalizar</span></div></div>\\n</div><md-input-container><input type=\\\"hidden\\\" name=\\\"lead_status_planing\\\" ng-model=\\\"vm.leadAction.lead_status_planing\\\">\\n<error-messages field=\\\"saveLeadForm.lead_status_planing\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"end center\\\"><div\\n data-layout=\\\"row\\\" data-layout-align=\\\"end center\\\" class=\\\"fullwidth\\\"><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\" class=\\\"send-button md-raised\\\" aria-label=\\\"{{ \\'Cancelar\\' | translate }}\\\"><span \\ndata-translate>Cancelar</span></md-button><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.saveSaveLead()\\\" class=\\\"send-button md-accent md-raised\\\" aria-label=\\\"{{ \\'Confirmar\\' | translate }}\\\">\\n<span data-translate>Confirmar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/dialogs/sendWhatsapp/sendWhatsapp-dialog.html\",\"<md-dialog id=\\\"lead-edit-dialog\\\" class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"sendWhatsappForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\" data-translate \\nng-if=\\\"!vm.manageTemplates\\\">Enviar whatsapp</span> <span class=\\\"title\\\" data-translate ng-if=\\\"vm.manageTemplates\\\">\\nGestión de plantillas de Whatsapp</span><md-button class=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon \\nmd-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button></div></md-toolbar><md-dialog-content \\nms-scroll><div data-layout=\\\"column\\\" ng-if=\\\"!vm.manageTemplates\\\"><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\" class=\\\"fullwidth\\\"><md-input-container \\nng-if=\\\"vm.lead.user_data.whatsapp_templates.length\\\" class=\\\"w-400\\\"><label data-translate>Plantillas</label><md-select \\nng-change=\\\"vm.updateTemplate()\\\" ng-model=\\\"vm.templateSelected\\\"><md-option \\nng-repeat=\\\"template in vm.lead.user_data.whatsapp_templates\\\" ng-value=\\\"template.text\\\">{{template.alias}}</md-option>\\n</md-select></md-input-container><md-button data-debouce-click data-ng-click=\\\"vm.startManageTemplates()\\\" \\nclass=\\\"send-button md-raised\\\" aria-label=\\\"{{ \\'Gestionar plantillas\\' | translate }}\\\"><span data-translate>\\nGestionar plantillas</span></md-button></div><md-input-container><label data-translate>Mensaje de Whatsapp</label>\\n<textarea class=\\\"dynamic\\\" data-ng-model=\\\"vm.whatsappMsg\\\"></textarea></md-input-container></div><div \\ndata-layout=\\\"column\\\" ng-if=\\\"vm.manageTemplates\\\"><div class=\\\"md-grey-300-bg grey-600-fg\\\" \\nstyle=\\\"padding: 12px;margin-bottom: 24px\\\"><p>Puede usar las siguientes variables de sustitución</p><ul><li><strong>\\n[Nombre vendedor]</strong>: Su propio nombre y apellido</li><li><strong>[Telefono del vendedor]</strong>\\n: Su propio teléfono</li><li><strong>[Vehículo solicitado]</strong>: El vehículo solicitado por el cliente</li><li>\\n<strong>[Url anuncio]</strong>: La URL del anuncio de este vehículo</li><li><strong>[Origen del lead]</strong>\\n: El origen de captación de este lead</li><li><strong>[Nombre del concesionario]</strong>\\n: El nombre del concesionario vinculado al lead</li></ul><p><strong>Ejemplo:</strong>\\n Hola! Soy [Nombre vendedor] y le ayudaré en el proceso de compra del vehículo [Vehículo solicitado] en el concesionario [Nombre del concesionario]. Para cualquier duda puede llamarme al [Telefono del vendedor]\\n</p></div><div data-layout=\\\"row\\\" data-layout-align=\\\"start start\\\" class=\\\"fullwidth\\\" \\nng-repeat=\\\"template in vm.templates\\\"><md-input-container><label data-translate>Alias de la plantilla</label><input \\ntype=\\\"text\\\" data-ng-model=\\\"template.alias\\\"></md-input-container><md-input-container class=\\\"w-400\\\"><label \\ndata-translate>Mensaje de Whatsapp</label><textarea class=\\\"dynamic\\\" data-ng-model=\\\"template.text\\\"></textarea>\\n</md-input-container></div></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" \\ndata-layout-align=\\\"end center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"end center\\\" class=\\\"fullwidth\\\" \\nng-if=\\\"!vm.manageTemplates\\\"><md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.closeDialog()\\\" \\nclass=\\\"send-button md-raised\\\" aria-label=\\\"{{ \\'Cancelar\\' | translate }}\\\"><span data-translate>Cancelar</span>\\n</md-button><md-button class=\\\"md-raised md-accent\\\" aria-label=\\\"{{\\'Enviar\\' | translate}}\\\" \\ndata-ng-click=\\\"vm.sendWhatsapp()\\\"><span data-translate>Enviar</span></md-button></div><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"end center\\\" class=\\\"fullwidth\\\" ng-if=\\\"vm.manageTemplates\\\"><md-button data-debouce-click \\ntype=\\\"submit\\\" data-ng-click=\\\"vm.manageTemplates = false\\\" class=\\\"send-button md-raised\\\" \\naria-label=\\\"{{ \\'Cancelar\\' | translate }}\\\"><span data-translate>Cancelar</span></md-button><md-button \\ndata-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.templates.push({alias: \\'\\',text: \\'\\'})\\\" class=\\\"send-button md-raised\\\" \\naria-label=\\\"{{ \\'Añadir plantilla\\' | translate }}\\\"><span data-translate>Añadir plantilla</span></md-button><md-button \\nclass=\\\"md-raised md-accent\\\" aria-label=\\\"{{\\'Enviar\\' | translate}}\\\" data-ng-click=\\\"vm.sendWhatsappTemplates()\\\"><span \\ndata-translate>Guardar plantillas</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/leads/views/detail/lead-company.html\",\"<div class=\\\"mb-20 detail-company\\\" data-ng-if=\\\"!hasPermission(\\'companyList\\',\\'GET\\')\\\"><md-icon md-font-icon=\\\"icon-domain\\\">\\n</md-icon><span class=\\\"ml-20\\\">{{vm.lead.offer.company.business_name}}</span></div><div \\nui-sref=\\\"app.company.detail({id:\\'{{vm.lead.offer.company.id}}\\'})\\\" class=\\\"mb-20 detail-company pointer\\\" \\ndata-ng-if=\\\"hasPermission(\\'companyList\\',\\'GET\\')\\\"><md-icon md-font-icon=\\\"icon-domain\\\"></md-icon><span class=\\\"ml-20\\\">\\n{{vm.lead.offer.company.business_name}}</span></div><div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" \\nlayout-wrap><div class=\\\"border-bottom fullwidth\\\"><h2 data-translate>Centro de trabajo</h2><span>\\n{{vm.lead.seat_data.name}} {{vm.lead.seat_data.address}}</span></div><div class=\\\"pl-20 mb-20 mt-20\\\" \\nng-if=\\\"vm.lead.seat_data\\\"><div class=\\\"secondary-text\\\" data-ng-if=\\\"vm.lead.seat_data.address\\\"><md-icon \\nmd-font-icon=\\\"icon-map-marker\\\" class=\\\"icon\\\"></md-icon><span>{{vm.lead.seat_data.address}}</span></div><div \\nclass=\\\"secondary-text\\\" data-ng-if=\\\"vm.lead.seat_data.email\\\"><md-icon md-font-icon=\\\"icon-email\\\" class=\\\"icon\\\"></md-icon>\\n<span>{{vm.lead.seat_data.email}}</span></div><div class=\\\"secondary-text\\\" data-ng-if=\\\"vm.lead.seat_data.phone\\\"><md-icon\\n md-font-icon=\\\"icon-phone\\\" class=\\\"icon\\\"></md-icon><span>{{vm.lead.seat_data.phone}}</span></div></div></div><div \\nclass=\\\"border-bottom fullwidth\\\"><h4 data-translate>Departamento / Área</h4><span>{{vm.lead.department}}</span></div>\\n<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" layout-wrap><h2 data-translate>Contactos</h2><div \\nclass=\\\"border-bottom fullwidth\\\" ng-if=\\\"vm.lead.professional_tutor_data\\\"><h4 data-translate>Tutor profesional</h4><span>\\n{{vm.lead.professional_tutor_data.name}} {{vm.lead.professional_tutor_data.surname}} {{vm.lead.professional_tutor_data.second_surname}}\\n</span></div><div class=\\\"pl-20 mb-20 mt-20\\\" ng-if=\\\"vm.lead.professional_tutor_data\\\"><div class=\\\"secondary-text\\\" \\ndata-ng-if=\\\"vm.lead.professional_tutor_data.user.email\\\"><md-icon md-font-icon=\\\"icon-email\\\" class=\\\"icon\\\"></md-icon>\\n<span>{{vm.lead.professional_tutor_data.user.email}}</span></div><div class=\\\"secondary-text\\\" \\ndata-ng-if=\\\"vm.lead.professional_tutor_data.phone\\\"><md-icon md-font-icon=\\\"icon-phone\\\" class=\\\"icon\\\"></md-icon><span>\\n{{vm.lead.professional_tutor_data.phone}}</span></div><div class=\\\"secondary-text\\\" \\ndata-ng-if=\\\"vm.lead.professional_tutor_data.mobile\\\"><md-icon md-font-icon=\\\"icon-cellphone-iphone\\\" class=\\\"icon\\\">\\n</md-icon><span>{{vm.lead.professional_tutor_data.mobile}}</span></div></div><div class=\\\"border-bottom fullwidth\\\" \\nng-if=\\\"vm.lead.academic_tutor_data\\\"><h4 data-translate>Tutor académico</h4><span>\\n{{vm.lead.academic_tutor_data.name}} {{vm.lead.academic_tutor_data.surname}} {{vm.lead.academic_tutor_data.second_surname}}\\n</span></div><div class=\\\"pl-20 mb-20 mt-20\\\" ng-if=\\\"vm.lead.academic_tutor_data\\\"><div class=\\\"secondary-text\\\" \\ndata-ng-if=\\\"vm.lead.academic_tutor_data.email\\\"><md-icon md-font-icon=\\\"icon-email\\\" class=\\\"icon\\\"></md-icon><span>\\n{{vm.lead.academic_tutor_data.email}}</span></div><div class=\\\"secondary-text\\\" \\ndata-ng-if=\\\"vm.lead.academic_tutor_data.phone\\\"><md-icon md-font-icon=\\\"icon-phone\\\" class=\\\"icon\\\"></md-icon><span>\\n{{vm.lead.academic_tutor_data.phone}}</span></div><div class=\\\"secondary-text\\\" \\ndata-ng-if=\\\"vm.lead.academic_tutor_data.mobile\\\"><md-icon md-font-icon=\\\"icon-cellphone-iphone\\\" class=\\\"icon\\\"></md-icon>\\n<span>{{vm.lead.academic_tutor_data.mobile}}</span></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/detail/lead.html\",\"<div id=\\\"lead-detail\\\" class=\\\"page-layout carded left-sidenav\\\" layout=\\\"row\\\"></div>\");\n$templateCache.put(\"app/main/leads/views/board/board-columns.html\",\"<div id=\\\"board\\\" layout=\\\"row\\\"><div class=\\\"list-wrapper\\\" ng-repeat=\\\"list in vm.board.lists\\\" ng-show=\\\"list.show\\\"><div \\nclass=\\\"list md-whiteframe-1dp\\\" layout=\\\"column\\\"><div class=\\\"list-header\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><div class=\\\"list-header-name\\\"><span>{{list.name}}</span></div><div class=\\\"p-20\\\">\\n{{ vm.leads[list.id].count }}</div></div><div class=\\\"list-content\\\" layout=\\\"column\\\"><div class=\\\"list-cards\\\" ms-scroll><a\\n class=\\\"list-card md-whiteframe-2dp\\\" ng-repeat=\\\"lead in vm.leads[list.id].data\\\" \\ndata-ui-sref=\\\"app.leads.get.edit({\\'lead\\':\\'{{ lead.id }}\\'})\\\" target=\\\"_blank\\\"><div class=\\\"list-card-details mb-10\\\"><div \\nclass=\\\"list-card-labels\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\" layout-wrap><div class=\\\"mb-10\\\"><stars \\nscore=\\\"lead.score\\\"></stars></div><span ng-if=\\\"list.id===\\'end\\'\\\"><span class=\\\"list-card-label white-fg result-info\\\" \\nng-repeat=\\\"result in vm.leadResults\\\" ng-if=\\\"result.id===lead.result\\\" style=\\\"background: {{ result.color }}\\\"><span \\nng-if=\\\"lead.result!==\\'negative\\' && lead.result!==\\'not_available\\' && lead.result!==\\'error\\' && lead.result!==\\'positive\\'\\\">\\n{{ result.name }}</span> <span \\nng-if=\\\"(lead.result===\\'negative\\' || lead.result===\\'not_available\\' || lead.result===\\'error\\' || lead.result===\\'positive\\') &&\\r\\n                                        result_reason.id===lead.result_reason\\\" \\nng-repeat=\\\"result_reason in vm.leadResultsErrors\\\">{{result_reason.name}} </span><span \\nng-if=\\\"(lead.result===\\'negative\\' || lead.result===\\'not_available\\' || lead.result===\\'error\\' || lead.result===\\'positive\\') &&\\r\\n                                        !lead.result_reason\\\">\\n{{result.name}}</span></span></span><div class=\\\"user-asign\\\"><span ng-if=\\\"lead.user_data.first_name\\\">\\n{{lead.user_data.first_name[0]}}{{lead.user_data.last_name[0]}} </span><span ng-if=\\\"!lead.user_data.first_name\\\">-\\n</span></div></div><div layout=\\\"row\\\" layout-align=\\\"space-between start\\\"><div><div><i class=\\\"icon-account s16\\\"></i> \\n<span ng-if=\\\"lead.client_name\\\">{{lead.client_name}} {{lead.client_surname}}</span> <span ng-if=\\\"!lead.client_name\\\">\\n{{\\'No definido\\' | translate}}</span></div><div ng-if=\\\"lead.client_business_name\\\"><i class=\\\"icon-domain s16\\\"></i> <span>\\n{{lead.client_business_name}}</span></div><div ng-if=\\\"lead.client_phone\\\"><i class=\\\"icon-phone s16\\\"></i> <span>\\n{{lead.client_phone | limitTo:5}}xxxx</span></div></div><div><div layout=\\\"row\\\" layout-align=\\\"start center\\\"><div \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\" ng-show=\\\"lead.channel\\\"><span class=\\\"list-card-footer-item\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" data-translate>Canal:</span> <span class=\\\"list-card-footer-item\\\" \\nng-if=\\\"lead.channel===\\'email\\' || lead.channel===\\'both\\'\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><i \\nclass=\\\"icon-email s18\\\"></i> </span><span class=\\\"list-card-footer-item\\\" \\nng-if=\\\"lead.channel===\\'phone\\' || lead.channel===\\'both\\'\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><i \\nclass=\\\"icon-phone s18\\\"></i> </span><span class=\\\"list-card-footer-item\\\" \\nng-if=\\\"lead.channel===\\'chat\\' || lead.channel===\\'both\\'\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><i \\nclass=\\\"icon-comment s18\\\"></i> </span><span class=\\\"list-card-footer-item\\\" \\nng-if=\\\"lead.channel===\\'exposition\\' || lead.channel===\\'both\\'\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><i \\nclass=\\\"icon-map-marker s18\\\"></i> </span><span class=\\\"list-card-footer-item\\\" \\nng-if=\\\"lead.channel===\\'web_home\\' || lead.channel===\\'both\\'\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><i \\nclass=\\\"icon-web s18\\\"></i></span></div><div class=\\\"origin-icon ml-10\\\"><img ng-src=\\\"{{ lead.origin }}\\\"></div></div></div>\\n</div></div><div class=\\\"list-card-footer\\\" ng-if=\\\"lead.last_lead_action.last_task.type\\\"><div><div \\nng-init=\\\"task=lead.last_lead_action.last_task\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"tags mt-10 mb-10\\\">\\n<strong class=\\\"mr-20\\\" ng-repeat=\\\"type in vm.taskTypes\\\" ng-if=\\\"task.type===type.id && task.type\\\">{{ type.name }}\\n</strong> <strong ng-if=\\\"!task.type\\\" class=\\\"mr-20\\\" translate>Sin solicitudes</strong><div layout=\\\"row\\\" \\nlayout-align=\\\"start start\\\"><div class=\\\"ml-10 tag-label\\\"><span>\\n{{ lead.last_lead_action.date | date:\\'dd/MM/yyyy HH:mm\\' }}</span></div></div></div></div></div><div \\nclass=\\\"list-card-footer\\\"><div class=\\\"list-card-name pt-10 pb-10\\\" ng-repeat=\\\"vehicle in lead.vehicles_names\\\"><i \\nclass=\\\"icon-car s16\\\"></i> <span>{{vehicle | vehicle}}</span></div></div><div class=\\\"list-card-footer\\\"><div \\nclass=\\\"pt-10 pb-10\\\"><div data-translate>Lead managements:</div><div \\nng-repeat=\\\"lead_management in lead.lead_managements_data\\\"><div class=\\\"mt-5\\\"><strong class=\\\"title\\\">\\n{{lead_management.message}}</strong></div><div class=\\\"tags\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap><div \\nclass=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\"><span translate>Fecha:</span> {{lead_management.created | date:\\'dd/MM/yyyy\\'}}</div></div><div \\nclass=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\"><span translate>Hora:</span> {{lead_management.created | date:\\'HH:mm\\'}}</div></div></div></div>\\n</div></div></a><div class=\\\"p-5 text-right pointer\\\"><a ng-show=\\\"vm.leads[list.id].data.length<vm.leads[list.id].count\\\" \\nng-click=\\\"vm.showMore(list.id)\\\" data-translate>Ver más</a></div></div></div></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/board/board-view.html\",\"<div id=\\\"scrumboard\\\" class=\\\"page-layout simple fullwidth center\\\" layout=\\\"column\\\"><div class=\\\"header bb\\\" \\nlayout=\\\"column\\\"><div class=\\\"header-content\\\" layout=\\\"row\\\" layout-align=\\\"space-between\\\" layout-wrap flex><div \\nlayout=\\\"row\\\" layout-align=\\\"center center\\\" flex-order=\\\"1\\\" flex-order-xs=\\\"2\\\"><form name=\\\"search\\\" layout=\\\"row\\\" \\nlayout-xs=\\\"column\\\" layout-wrap novalidate class=\\\"mr-40\\\"><div layout=\\\"row\\\"><label class=\\\"search\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\" data-flex><span data-hide-xs data-hide-gt-xs data-translate>Buscar</span><input \\nclass=\\\"search-input-black\\\" type=\\\"text\\\" placeholder=\\\"{{\\'Buscar\\' | translate }}\\\" data-ng-model=\\\"vm.filters.search\\\" \\ndata-flex></label><md-button type=\\\"submit\\\" class=\\\"md-raised search-button\\\" \\nng-click=\\\"vm.changeFilter(\\'search\\',vm.filters.search)\\\"><md-icon md-font-icon=\\\"icon-magnify\\\" class=\\\"icon\\\"></md-icon>\\n</md-button></div></form><div ng-if=\\\"vm.user.is_admin || vm.user.is_concession_admin\\\"><md-button \\nclass=\\\"md-raised md-hue-2 header-boards-button mr-40\\\" ng-class=\\\"{\\'md-accent\\':!vm.leads.new.filters.with_concession}\\\" \\nng-click=\\\"vm.changeFilter(\\'with_concession\\', null); vm.filters.user_data=[vm.user]\\\" aria-label=\\\"Mis leads\\\"><span \\ndata-translate>Mis leads</span></md-button><md-button class=\\\"md-raised md-hue-2 header-boards-button\\\" \\nng-class=\\\"{\\'md-accent\\':vm.leads.new.filters.with_concession}\\\" \\nng-click=\\\"vm.changeFilter(\\'with_concession\\', true); vm.filters.user_data=[]\\\" aria-label=\\\"Todos\\\"><span data-translate>\\nTodos</span></md-button></div></div><div class=\\\"toolbar\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\" \\nflex-order=\\\"3\\\"><p ng-if=\\\"vm.hasFilterAdvance\\\" class=\\\"orange-700-fg mr-40\\\"><md-icon md-font-icon=\\\"icon-alert\\\" \\nclass=\\\"icon orange-700-fg\\\"></md-icon><span translate>Filtros avanzados aplicados</span></p><md-button \\nclass=\\\"md-accent md-raised md-hue-2 header-boards-button\\\" ng-click=\\\"vm.toggleSidenav(\\'filters-sidenav\\')\\\" \\naria-label=\\\"Filtrar\\\"><md-icon md-font-icon=\\\"icon-filter-variant\\\" class=\\\"icon\\\"></md-icon><span data-translate>Filtrar\\n</span></md-button><md-button class=\\\"md-raised md-hue-2 header-boards-button\\\" ng-click=\\\"vm.getDocument()\\\" \\ndata-debouce-click aria-label=\\\"Exportar\\\"><md-icon md-font-icon=\\\"icon-export\\\" class=\\\"icon\\\"></md-icon><span \\ndata-translate>Exportar</span></md-button></div></div></div><md-content class=\\\"content\\\" flex layout=\\\"column\\\"><div \\nclass=\\\"fullwidth\\\" ng-include=\\\"\\'app/main/leads/views/board/board-columns.html\\'\\\"></div></md-content><md-sidenav \\nclass=\\\"filters-sidenav md-sidenav-right\\\" md-component-id=\\\"filters-sidenav\\\" \\nng-include=\\\"\\'app/main/leads/sidenavs/filters/filters-sidenav.html\\'\\\" ms-sidenav-helper></md-sidenav></div>\");\n$templateCache.put(\"app/main/leads/views/edit/appraisals.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-car\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Vehículos actuales</span></h2><md-icon ng-hide=\\\"vm.isDisabled()\\\" ng-click=\\\"vm.addAppraisal()\\\" \\nmd-font-icon=\\\"icon-plus-circle-outline\\\" class=\\\"pointer black-fg no-margin\\\"></md-icon></div></md-toolbar><md-content \\nclass=\\\"fullwidth\\\"><div ng-repeat=\\\"appraisal in vm.lead.appraisals\\\" flex layout-padding data-layout-xs=\\\"column\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between start\\\" layout-wrap class=\\\"fullwidth\\\" ng-init=\\\"appraisal.field={}\\\">\\n<div layout-margin-lg flex=\\\"80\\\" data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" layout-wrap><div class=\\\"h-30\\\" \\ndata-layout=\\\"column\\\" data-layout-align=\\\"center start\\\" \\nng-init=\\\"appraisal.field[\\'brand\\']=\\'appraisals___\\'+$index+\\'___brand\\'\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Marca\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{appraisal.field[\\'brand\\']}}\\\" \\nmd-no-cache=\\\"true\\\" ng-disabled=\\\"vm.isDisabled()\\\" required md-selected-item=\\\"appraisal.brand_data\\\" \\nmd-search-text=\\\"searchTextBrand\\\" md-items=\\\"brand in vm.getBrands(searchTextBrand)\\\" md-min-length=\\\"0\\\" \\nmd-item-text=\\\"brand.name\\\"><md-item-template><span md-highlight-text=\\\"searchTextBrand\\\">{{brand.name}}</span>\\n</md-item-template><md-not-found><span data-translate>No hay ninguna marca con ese nombre</span></md-not-found>\\n</md-autocomplete><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'brand\\']]\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div><div class=\\\"h-30\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\" \\nng-init=\\\"appraisal.field[\\'model\\']=\\'appraisals___\\'+$index+\\'___model\\'\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Modelo\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{appraisal.field[\\'model\\']}}\\\" \\nmd-no-cache=\\\"true\\\" ng-disabled=\\\"vm.isDisabled() || !appraisal.brand_data\\\" md-selected-item=\\\"appraisal.model_data\\\" \\nmd-search-text=\\\"searchTextModel\\\" md-items=\\\"model in vm.getModels(appraisal.brand_data.id, searchTextModel)\\\" \\nmd-min-length=\\\"0\\\" md-item-text=\\\"model.model_name\\\"><md-item-template><span md-highlight-text=\\\"searchTextModel\\\">\\n{{model.model_name}}</span></md-item-template><md-not-found><span data-translate>No hay ningun modelo con ese nombre\\n</span></md-not-found></md-autocomplete><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'model\\']]\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div><div class=\\\"h-30\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\" \\nng-init=\\\"appraisal.field[\\'version\\']=\\'appraisals___\\'+$index+\\'___version\\'\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Version\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{appraisal.field[\\'version\\']}}\\\" \\nmd-no-cache=\\\"true\\\" ng-disabled=\\\"vm.isDisabled() || !appraisal.model_data\\\" \\nmd-selected-item-change=\\\"vm.changeVehicleVersion(appraisal,\\'cv\\',\\'gas\\')\\\" md-selected-item=\\\"appraisal.version_data\\\" \\nmd-search-text=\\\"searchTextVersion\\\" md-items=\\\"version in vm.getVersions(appraisal.model_data.id, searchTextVersion)\\\" \\nmd-min-length=\\\"0\\\" md-item-text=\\\"vm.getFullNameVersion(version)\\\"><md-item-template><span \\nmd-highlight-text=\\\"searchTextVersion\\\">{{vm.getFullNameVersion(version)}}</span></md-item-template><md-not-found><span \\ndata-translate>No hay ninguna versión con ese nombre</span></md-not-found></md-autocomplete><md-input-container \\nflex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages field=\\\"leadForm[appraisal.field[\\'version\\']]\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><md-input-container \\nng-init=\\\"appraisal.field[\\'km\\']=\\'appraisals___\\'+$index+\\'___km\\'\\\"><label data-translate>Km</label><input type=\\\"text\\\" \\nname=\\\"{{appraisal.field[\\'km\\']}}\\\" data-ng-model=\\\"appraisal.km\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'km\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container ng-init=\\\"appraisal.field[\\'cv\\']=\\'appraisals___\\'+$index+\\'___cv\\'\\\"><label data-translate>CV</label>\\n<input type=\\\"text\\\" name=\\\"{{appraisal.field[\\'cv\\']}}\\\" data-ng-model=\\\"appraisal.cv\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n<error-messages field=\\\"leadForm[appraisal.field[\\'cv\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><div class=\\\"w-205\\\" \\nng-init=\\\"appraisal.field[\\'circulation_date\\']=\\'appraisals___\\'+$index+\\'___circulation_date\\'\\\"><label \\nclass=\\\"font-size-12 secondary-text\\\" data-translate>Fecha de circulación</label><md-datepicker \\nname=\\\"{{appraisal.field[\\'circulation_date\\']}}\\\" data-ng-model=\\\"appraisal.circulation_date\\\" \\nmd-placeholder=\\\"{{\\'Fecha de circulación\\' | translate}}\\\"></md-datepicker><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'circulation_date\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></div><div \\nclass=\\\"w-205\\\" ng-init=\\\"appraisal.field[\\'buy_date\\']=\\'appraisals___\\'+$index+\\'___buy_date\\'\\\"><label \\nclass=\\\"font-size-12 secondary-text\\\" data-translate>Fecha de compra</label><md-datepicker \\nname=\\\"{{appraisal.field[\\'buy_date\\']}}\\\" data-ng-model=\\\"appraisal.buy_date\\\" \\nmd-placeholder=\\\"{{\\'Fecha de compra\\' | translate}}\\\"></md-datepicker><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'buy_date\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></div><div \\nclass=\\\"w-205\\\" ng-init=\\\"appraisal.field[\\'registration_date\\']=\\'appraisals___\\'+$index+\\'___registration_date\\'\\\"><label \\nclass=\\\"font-size-12 secondary-text\\\" data-translate>Fecha de matriculación</label><md-datepicker \\nname=\\\"{{appraisal.field[\\'registration_date\\']}}\\\" data-ng-model=\\\"appraisal.registration_date\\\" \\nmd-placeholder=\\\"{{\\'Fecha de matriculación\\' | translate}}\\\"></md-datepicker><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'registration_date\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></div><div \\nclass=\\\"w-205\\\" ng-init=\\\"appraisal.field[\\'last_mechanic_date\\']=\\'appraisals___\\'+$index+\\'___last_mechanic_date\\'\\\"><label \\nclass=\\\"font-size-12 secondary-text\\\" data-translate>Última visita taller</label><md-datepicker \\nname=\\\"{{appraisal.field[\\'last_mechanic_date\\']}}\\\" data-ng-model=\\\"appraisal.last_mechanic_date\\\" \\nmd-placeholder=\\\"{{\\'Última visita taller\\' | translate}}\\\"></md-datepicker><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'last_mechanic_date\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></div>\\n<md-input-container class=\\\"w-200\\\" ng-init=\\\"appraisal.field[\\'is_finance\\']=\\'appraisals___\\'+$index+\\'___is_finance\\'\\\">\\n<md-checkbox data-ng-model=\\\"appraisal.is_finance\\\" class=\\\"md-align-top-left no-margin\\\" flex><span data-translate>\\nFinanciado</span></md-checkbox><error-messages field=\\\"leadForm[appraisal.field[\\'is_finance\\']]\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container \\nng-init=\\\"appraisal.field[\\'status\\']=\\'appraisals___\\'+$index+\\'___status\\'\\\"><label data-translate>Estado</label><input \\ntype=\\\"text\\\" name=\\\"{{appraisal.field[\\'status\\']}}\\\" data-ng-model=\\\"appraisal.status\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n<error-messages field=\\\"leadForm[appraisal.field[\\'status\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container ng-init=\\\"appraisal.field[\\'features\\']=\\'appraisals___\\'+$index+\\'___features\\'\\\">\\n<label data-translate>Acabado del Vehiculo</label><input type=\\\"text\\\" name=\\\"{{appraisal.field[\\'features\\']}}\\\" \\ndata-ng-model=\\\"appraisal.features\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'features\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container ng-init=\\\"appraisal.field[\\'license_plate\\']=\\'appraisals___\\'+$index+\\'___license_plate\\'\\\"><label \\ndata-translate>Matrícula</label><input type=\\\"text\\\" name=\\\"{{appraisal.field[\\'license_plate\\']}}\\\" \\ndata-ng-model=\\\"appraisal.license_plate\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'license_plate\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container \\nng-init=\\\"appraisal.field[\\'evaluation_vo_price\\']=\\'appraisals___\\'+$index+\\'___evaluation_vo_price\\'\\\"><label data-translate>\\nPrecio de evaluación para VO</label><input type=\\\"text\\\" name=\\\"{{appraisal.field[\\'evaluation_vo_price\\']}}\\\" \\ndata-ng-model=\\\"appraisal.evaluation_vo_price\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'evaluation_vo_price\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container \\nng-init=\\\"appraisal.field[\\'total_vehicles\\']=\\'appraisals___\\'+$index+\\'___total_vehicles\\'\\\"><label data-translate>\\nNº de vehículos</label><input type=\\\"text\\\" name=\\\"{{appraisal.field[\\'total_vehicles\\']}}\\\" \\ndata-ng-model=\\\"appraisal.total_vehicles\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'total_vehicles\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container \\nng-init=\\\"appraisal.field[\\'total_comercial_vehicles\\']=\\'appraisals___\\'+$index+\\'___total_comercial_vehicles\\'\\\"><label \\ndata-translate>Nº de vehículos comerciales</label><input type=\\\"text\\\" \\nname=\\\"{{appraisal.field[\\'total_comercial_vehicles\\']}}\\\" data-ng-model=\\\"appraisal.total_comercial_vehicles\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"leadForm[appraisal.field[\\'total_comercial_vehicles\\']]\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container \\nng-init=\\\"appraisal.field[\\'total_tourism_vehicles\\']=\\'appraisals___\\'+$index+\\'___total_tourism_vehicles\\'\\\"><label \\ndata-translate>Nº de vehículos turismos</label><input type=\\\"text\\\" name=\\\"{{appraisal.field[\\'total_tourism_vehicles\\']}}\\\" \\ndata-ng-model=\\\"appraisal.total_tourism_vehicles\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'total_tourism_vehicles\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container class=\\\"input-long\\\" flex \\nng-init=\\\"appraisal.field[\\'fleet_notes\\']=\\'appraisals___\\'+$index+\\'___fleet_notes\\'\\\"><label data-translate>\\nNotas de la flota</label><input type=\\\"text\\\" name=\\\"{{appraisal.field[\\'fleet_notes\\']}}\\\" \\ndata-ng-model=\\\"appraisal.fleet_notes\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[appraisal.field[\\'fleet_notes\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n</div><div layout=\\\"row\\\" layout-align=\\\"end center\\\" ng-hide=\\\"vm.isDisabled()\\\"><md-button data-layout=\\\"column\\\" \\nclass=\\\"md-icon-button md-warn\\\" data-layout-align=\\\"start center\\\" ng-if=\\\"vm.lead.appraisals.length>1\\\" \\ndata-ng-click=\\\"vm.deleteAppraisal($index,appraisal)\\\"><md-icon title=\\\"{{\\'Eliminar\\' | translate}}\\\" \\nmd-font-icon=\\\"icon-delete\\\"></md-icon></md-button></div></div><div data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\" ng-if=\\\"vm.serverErrors\\\"><md-input-container \\nflex=\\\"100\\\" class=\\\"no-margin\\\"><input type=\\\"hidden\\\" name=\\\"appraisals___non_field_errors\\\" \\ndata-ng-model=\\\"vm.lead.appraisals.non_field_errors\\\"><error-messages field=\\\"leadForm.appraisals___non_field_errors\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/asign-user.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Asignado a</span></h2><md-icon \\nng-if=\\\"(vm.lead.cur_user_can_assign || !vm.lead.id) && vm.selectedTab===0\\\" \\ndata-ng-click=\\\"vm.openLeadDialog($event,vm.lead,\\'tracing\\')\\\" md-font-icon=\\\"icon-pencil\\\" \\nclass=\\\"pointer white-fg no-margin\\\"></md-icon></div></md-toolbar><md-content flex layout-padding data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\"><div>{{vm.getFullUserName(vm.lead.user_data)}}\\n</div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/client.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Cliente</span></h2></div></md-toolbar><md-content flex data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start start\\\" layout-wrap class=\\\"fullwidth\\\"><div style=\\\"max-width: 250px\\\" layout-margin \\nlayout-padding><div data-layout=\\\"row\\\" data-layout-align=\\\"center center\\\"><md-input-container ng-if=\\\"!vm.isDisabled()\\\">\\n<div class=\\\"mt-10 tag pointer\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon ng-click=\\\"vm.lead.score=1\\\" \\nclass=\\\"amber-fg\\\" md-font-icon=\\\"{{vm.lead.score >0 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\"></md-icon><md-icon \\nng-click=\\\"vm.lead.score=2\\\" class=\\\"amber-fg\\\" md-font-icon=\\\"{{vm.lead.score >1 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\">\\n</md-icon><md-icon ng-click=\\\"vm.lead.score=3\\\" class=\\\"amber-fg\\\" \\nmd-font-icon=\\\"{{vm.lead.score >2 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\"></md-icon><md-icon ng-click=\\\"vm.lead.score=4\\\" \\nclass=\\\"amber-fg\\\" md-font-icon=\\\"{{vm.lead.score >3 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\"></md-icon></div><input \\ntype=\\\"hidden\\\" name=\\\"score\\\" ng-model=\\\"vm.lead.score\\\"><error-messages field=\\\"leadForm.score\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><div ng-if=\\\"vm.isDisabled()\\\"><stars \\nscore=\\\"vm.lead.score\\\"></stars></div></div><div id=\\\"extra-button\\\"></div><div id=\\\"has-changes\\\" ng-show=\\\"false\\\">\\n{{leadForm.$dirty}}</div><input type=\\\"text\\\" id=\\\"psa-id\\\" name=\\\"psa_id\\\" data-ng-model=\\\"vm.lead.psa_id\\\" ng-show=\\\"false\\\">\\n</div><div flex layout-padding data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start end\\\" \\ndata-layout-align-xs=\\\"start start\\\" layout-wrap layout-margin><div class=\\\"m-0 p-0\\\" layout-padding \\ndata-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start end\\\" data-layout-align-xs=\\\"start start\\\" layout-wrap \\nlayout-margin class=\\\"fullwidth\\\"><div class=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\">\\n<md-input-container><label data-translate>Tipo</label><md-select data-ng-model=\\\"vm.lead.client.client_type\\\" \\nname=\\\"client___client_type\\\" class=\\\"w-200\\\"><md-option data-ng-repeat=\\\"type in vm.clientTypes\\\" data-ng-value=\\\"type.id\\\">\\n{{ type.name }}</md-option></md-select><error-messages field=\\\"leadForm.client___client_type\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div><div class=\\\"h-60\\\" data-layout=\\\"column\\\" \\ndata-layout-align=\\\"center start\\\"><md-input-container><label data-translate>CIF/NIF/DNI/PASAPORTE</label><input \\ntype=\\\"text\\\" name=\\\"client___identification\\\" data-ng-model=\\\"vm.lead.client.identification\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n<error-messages field=\\\"leadForm.client___identification\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container></div><div class=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><md-input-container>\\n<label data-translate>Nombre de empresa</label><input type=\\\"text\\\" name=\\\"client___business_name\\\" \\ndata-ng-model=\\\"vm.lead.client.business_name\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm.client___business_name\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div>\\n<div class=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><md-input-container><label data-translate>Cargo\\n</label><input type=\\\"text\\\" name=\\\"client___position\\\" data-ng-model=\\\"vm.lead.client.position\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"leadForm.client___position\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container></div><div class=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\">\\n<md-autocomplete md-floating-label=\\\"{{\\'Sector\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"sector\\\" \\nmd-no-cache=\\\"true\\\" ng-disabled=\\\"vm.isDisabled()\\\" md-selected-item=\\\"vm.lead.client.sector_data\\\" \\nmd-search-text=\\\"searchTextSector\\\" md-items=\\\"sector in vm.getSectors(searchTextSector)\\\" md-min-length=\\\"0\\\" \\nmd-item-text=\\\"sector.name\\\"><md-item-template><span md-highlight-text=\\\"searchTextSector\\\">{{sector.name}}</span>\\n</md-item-template><md-not-found><span data-translate>No hay ningun sector con ese nombre</span></md-not-found>\\n</md-autocomplete><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages field=\\\"leadForm.client___sector\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><div class=\\\"h-60\\\" \\ndata-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Actividad\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"business_activity\\\" md-no-cache=\\\"true\\\" \\nng-disabled=\\\"vm.isDisabled() || !vm.lead.client.sector_data.id\\\" \\nmd-selected-item=\\\"vm.lead.client.business_activity_data\\\" md-search-text=\\\"searchTextActivity\\\" \\nmd-items=\\\"activity in vm.getBusinessActivity(vm.lead.client.sector_data.id, searchTextActivity)\\\" md-min-length=\\\"0\\\" \\nmd-item-text=\\\"activity.activity\\\"><md-item-template><span md-highlight-text=\\\"searchTextActivity\\\">{{activity.activity}}\\n</span></md-item-template><md-not-found><span data-translate>No hay ninguna actividad con ese nombre</span>\\n</md-not-found></md-autocomplete><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages \\nfield=\\\"leadForm.client___business_activity\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div></div><div class=\\\"m-0 p-0\\\" layout-padding data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start end\\\" data-layout-align-xs=\\\"start start\\\" layout-wrap layout-margin class=\\\"fullwidth\\\"><div \\nclass=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><md-input-container><label data-translate>Nombre\\n</label><input id=\\\"client-name\\\" type=\\\"text\\\" name=\\\"client___name\\\" data-ng-model=\\\"vm.lead.client.name\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"leadForm.client___name\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container></div><div class=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\">\\n<md-input-container><label data-translate>Apellidos</label><input id=\\\"client-surname\\\" type=\\\"text\\\" \\nname=\\\"client___surname\\\" data-ng-model=\\\"vm.lead.client.surname\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm.client___surname\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div><div \\nclass=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><div id=\\\"client-phone\\\" data-layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" layout-margin><md-input-container><label data-translate>Teléfono</label><input type=\\\"text\\\" \\nng-focus=\\\"vm.setExtension()\\\" ng-blur=\\\"vm.eventClientBlur()\\\" name=\\\"client___phone\\\" data-ng-model=\\\"vm.lead.client.phone\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"leadForm.client___phone\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-button data-layout=\\\"column\\\" class=\\\"md-icon-button md-accent\\\" \\ndata-layout-align=\\\"start center\\\" data-ng-if=\\\"vm.lead.id && vm.lead.client.phone\\\" data-ng-click=\\\"vm.call(vm.lead)\\\">\\n<md-icon title=\\\"{{\\'LLamar\\' | translate}}\\\" md-font-icon=\\\"icon-phone\\\"></md-icon></md-button><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-icon-button md-accent\\\" data-layout-align=\\\"start center\\\" \\ndata-ng-if=\\\"vm.lead.id && vm.lead.client.phone\\\" data-ng-click=\\\"vm.sendWhatsapp($event)\\\"><md-icon class=\\\"green-400-fg\\\" \\ntitle=\\\"{{\\'Whatsapp\\' | translate}}\\\" md-font-icon=\\\"icon-whatsapp\\\"></md-icon></md-button></div><error-messages \\nfield=\\\"leadForm.client___phone\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></div><div data-layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" layout-margin class=\\\"h-60\\\"><md-input-container><label data-translate>Email</label><input \\nid=\\\"client-email\\\" type=\\\"text\\\" name=\\\"client___email\\\" data-ng-model=\\\"vm.lead.client.email\\\" ng-disabled=\\\"vm.isDisabled()\\\" \\nng-blur=\\\"vm.eventClientEmailBlur()\\\"><error-messages field=\\\"leadForm.client___email\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><div><a \\nng-href=\\\"mailto:{{vm.lead.client.email}}?bcc=vomotorscoring@info-auto.es\\\" ng-click=\\\"vm.sendMail(vm.lead)\\\" \\ndata-ng-if=\\\"vm.lead.id && vm.lead.client.email\\\" class=\\\"md-raised md-accent\\\" data-debouce-click \\naria-label=\\\"{{\\'Enviar\\' | translate}}\\\"><md-icon title=\\\"{{\\'Enviar email\\' | translate}}\\\" class=\\\"md-warn\\\" \\nmd-font-icon=\\\"icon-gmail\\\"></md-icon></a></div></div><div class=\\\"h-60\\\" data-layout=\\\"column\\\" \\ndata-layout-align=\\\"center start\\\"><md-input-container><label data-translate>Teléfono alternativo</label><input \\ntype=\\\"text\\\" name=\\\"client___desk_phone\\\" data-ng-model=\\\"vm.lead.client.desk_phone\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n<error-messages field=\\\"leadForm.client___desk_phone\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container></div></div><div class=\\\"m-0 p-0\\\" layout-padding data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start end\\\" data-layout-align-xs=\\\"start start\\\" layout-wrap layout-margin class=\\\"fullwidth\\\"><div \\nclass=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><md-input-container><label data-translate>\\nCódigo postal</label><input id=\\\"client-postal-code\\\" type=\\\"text\\\" name=\\\"client___postal_code\\\" \\nng-blur=\\\"vm.completeAddress()\\\" data-ng-model=\\\"vm.lead.client.postal_code\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages\\n field=\\\"leadForm.client___postal_code\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div><div\\n class=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\" id=\\\"client-province\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Provincia\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"province\\\" md-no-cache=\\\"true\\\" \\nng-disabled=\\\"vm.isDisabled()\\\" md-selected-item=\\\"vm.lead.client.province_data\\\" md-search-text=\\\"searchTextProvince\\\" \\nmd-items=\\\"province in vm.getProvinces(searchTextProvince)\\\" md-min-length=\\\"0\\\" md-item-text=\\\"province.name\\\">\\n<md-item-template><span md-highlight-text=\\\"searchTextProvince\\\">{{province.name}}</span></md-item-template>\\n<md-not-found><span data-translate>No hay ningun provincia con ese nombre</span></md-not-found></md-autocomplete>\\n<md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages field=\\\"leadForm.client___province\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><div class=\\\"h-60\\\" \\ndata-layout=\\\"column\\\" data-layout-align=\\\"center start\\\" id=\\\"client-location\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Localidad\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"location\\\" md-no-cache=\\\"true\\\" \\nng-disabled=\\\"vm.isDisabled()\\\" md-selected-item=\\\"vm.lead.client.location_data\\\" md-search-text=\\\"searchTextLocation\\\" \\nmd-items=\\\"location in vm.getLocalities(searchTextLocation)\\\" md-min-length=\\\"0\\\" md-item-text=\\\"location.name\\\">\\n<md-item-template><span md-highlight-text=\\\"searchTextLocation\\\">{{location.name}}</span></md-item-template>\\n<md-not-found><span data-translate>No hay ninguna localidad</span></md-not-found></md-autocomplete><md-input-container \\nflex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages field=\\\"leadForm.client___location\\\" server-errors=\\\"vm.serverErrors\\\" \\nrequired></error-messages></md-input-container></div><div class=\\\"h-60\\\" data-layout=\\\"column\\\" \\ndata-layout-align=\\\"center start\\\"><md-input-container><label data-translate>Dirección</label><input type=\\\"text\\\" \\nname=\\\"client___address1\\\" data-ng-model=\\\"vm.lead.client.address1\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm.client___address1\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div><div \\nclass=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><md-input-container><label data-translate>\\nDirección 2</label><input type=\\\"text\\\" name=\\\"client___address2\\\" data-ng-model=\\\"vm.lead.client.address2\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"leadForm.client___address2\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container></div></div><div class=\\\"m-0 p-0\\\" layout-padding data-layout-xs=\\\"column\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start start\\\" data-layout-align-xs=\\\"start start\\\" layout-wrap layout-margin \\nclass=\\\"fullwidth\\\"><div data-layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"mb-25 h-60\\\" layout-margin><div flex \\nstyle=\\\"min-width: 150px\\\" class=\\\"mr-0\\\"><label class=\\\"input-label\\\" data-translate>Usuario</label><div class=\\\"bb\\\" \\nid=\\\"client-seller\\\">{{vm.getFullUserName(vm.lead.user_data)}}</div></div><div class=\\\"ml-0\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-icon-button md-accent\\\" data-layout-align=\\\"start center\\\" \\nng-if=\\\"vm.lead.cur_user_can_assign || !vm.lead.id\\\" data-ng-click=\\\"vm.openLeadDialog($event,vm.lead,\\'tracing\\')\\\"><md-icon\\n title=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-account-box\\\"></md-icon></md-button></div></div><div \\ndata-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><div layout=\\\"row\\\"><div class=\\\"mr-30\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Concesionario\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"concessionaire\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"0\\\" flex=\\\"100\\\" \\nmd-selected-item-change=\\\"vm.lead.source_data_prov=null;vm.lead.source_data.origin_data=null\\\" \\nmd-selected-item=\\\"vm.lead.concessionaire_data\\\" md-search-text=\\\"searchTextConcessionaire\\\" \\nmd-items=\\\"concessionaire in vm.getConcessionaires(searchTextConcessionaire)\\\" md-item-text=\\\"concessionaire.name\\\">\\n<md-item-template><span md-highlight-text=\\\"searchTextConcessionaire\\\">{{concessionaire.name}}</span></md-item-template>\\n<md-not-found><span data-translate>No hay ningún concesionario con ese nombre</span></md-not-found></md-autocomplete>\\n<md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\" ng-if=\\\"vm.serverErrors\\\"><error-messages \\nfield=\\\"leadForm.concessionaire\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div>\\n<div class=\\\"mr-30\\\"><md-autocomplete md-floating-label=\\\"{{\\'Origen\\' | translate }}\\\" md-delay=\\\"300\\\" \\nmd-input-name=\\\"origin\\\" md-no-cache=\\\"true\\\" md-min-length=\\\"0\\\" ng-disabled=\\\"!vm.lead.concessionaire_data.id\\\" \\nmd-selected-item-change=\\\"vm.lead.source_data_prov=null;vm.lead.source_data.channel_data=null\\\" \\nmd-selected-item=\\\"vm.lead.source_data.origin_data\\\" md-search-text=\\\"searchTextOrigin\\\" \\nmd-items=\\\"origin in vm.getOrigins(searchTextOrigin, vm.lead.concessionaire_data)\\\" md-item-text=\\\"origin.name\\\">\\n<md-item-template><span md-highlight-text=\\\"searchTextOrigin\\\">{{origin.name}}</span></md-item-template><md-not-found>\\n<span data-translate>No hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-input-container \\nflex=\\\"100\\\" class=\\\"no-margin\\\" ng-if=\\\"vm.serverErrors\\\"><error-messages field=\\\"leadForm.origin\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><div class=\\\"mr-30\\\">\\n<md-autocomplete md-floating-label=\\\"{{\\'Canal\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"channel\\\" \\nmd-no-cache=\\\"true\\\" md-min-length=\\\"0\\\" ng-disabled=\\\"!vm.lead.source_data.origin_data.id\\\" \\nmd-selected-item-change=\\\"vm.lead.source_data_prov=null;vm.lead.source=null;vm.changeChannel(vm.lead.concessionaire_data,vm.lead.source_data.origin_data, vm.lead.source_data.channel_data)\\\" \\nmd-selected-item=\\\"vm.lead.source_data.channel_data\\\" md-search-text=\\\"searchTextChannel\\\" \\nmd-items=\\\"channel in vm.getChannels(searchTextChannel, vm.lead.concessionaire_data,vm.lead.source_data.origin_data)\\\" \\nmd-item-text=\\\"channel.name\\\"><md-item-template><span md-highlight-text=\\\"searchTextChannel\\\">{{channel.name}}</span>\\n</md-item-template><md-not-found><span data-translate>No hay ningún canal con ese nombre</span></md-not-found>\\n</md-autocomplete><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\" ng-if=\\\"vm.serverErrors\\\"><error-messages \\nfield=\\\"leadForm.channel\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><div \\nclass=\\\"mr-30\\\" data-layout=\\\"column\\\"><md-autocomplete ng-if=\\\"vm.lead.source_data.channel_data.id\\\" \\nmd-floating-label=\\\"{{\\'Fuente\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"source\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"0\\\" ng-disabled=\\\"!vm.lead.source_data.channel_data.id\\\" md-selected-item=\\\"vm.lead.source_data_prov\\\" \\nmd-search-text=\\\"searchTextSource\\\" \\nmd-items=\\\"source in vm.getSources(searchTextSource, vm.lead.concessionaire_data ,vm.lead.source_data.origin_data, vm.lead.source_data.channel_data)\\\" \\nmd-item-text=\\\"source.data\\\"><md-item-template><span md-highlight-text=\\\"searchTextSource\\\">{{source.data}}</span>\\n</md-item-template><md-not-found><span data-translate>No hay ninguna fuente con ese nombre</span></md-not-found>\\n</md-autocomplete><md-input-container ng-if=\\\"!vm.lead.source_data.channel_data.id\\\"><label data-translate>Fuente</label>\\n<input type=\\\"text\\\" name=\\\"source\\\" ng-model=\\\"vm.lead.source\\\" ng-disabled=\\\"!vm.lead.source_data.channel_data.id\\\">\\n</md-input-container><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\" ng-if=\\\"vm.serverErrors\\\"><error-messages \\nfield=\\\"leadForm.source\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div></div>\\n</div><div class=\\\"h-60 mr-100\\\" data-layout=\\\"row\\\" data-layout-align=\\\"center start\\\"><div class=\\\"mr-30\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Origen publicidad\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"origin2\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"0\\\" md-selected-item=\\\"vm.lead.origin2_data\\\" md-search-text=\\\"searchTextAllOrigin\\\" \\nmd-items=\\\"origin in vm.getAllOrigins(searchTextAllOrigin)\\\" md-item-text=\\\"origin.name\\\"><md-item-template><span \\nmd-highlight-text=\\\"searchTextAllOrigin\\\">{{origin.name}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex=\\\"100\\\" \\nclass=\\\"no-margin\\\" ng-if=\\\"vm.serverErrors\\\"><error-messages field=\\\"leadForm.origin2\\\" server-errors=\\\"vm.serverErrors\\\" \\nrequired></error-messages></md-input-container></div><div><md-button data-debouce-click \\nng-if=\\\"vm.lead.channel2_data.id!==vm.getExposicion().id\\\" data-ng-click=\\\"vm.lead.channel2_data=vm.getExposicion()\\\" \\nclass=\\\"md-raised\\\" aria-label=\\\"{{\\'Exposición\\' | translate}}\\\"><md-icon md-font-icon=\\\"icon-map-marker\\\" class=\\\"mr-4\\\">\\n</md-icon><span data-translate>Exposición</span></md-button><div class=\\\"green-700-bg white-fg p-5\\\" \\nng-if=\\\"vm.lead.channel2_data.id===vm.getExposicion().id\\\"><md-icon md-font-icon=\\\"icon-check\\\" class=\\\"white-fg mr-4\\\">\\n</md-icon><span data-translate>Exposición</span></div></div></div></div><div data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\" ng-if=\\\"vm.serverErrors\\\"><md-input-container \\nflex=\\\"100\\\" class=\\\"no-margin\\\"><input type=\\\"hidden\\\" name=\\\"client___non_field_errors\\\" \\ndata-ng-model=\\\"vm.lead.client.non_field_errors\\\"><error-messages field=\\\"leadForm.client___non_field_errors\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/concession-basic.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-document\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Datos básicos</span></h2></div></md-toolbar><div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" \\nlayout-wrap class=\\\"fullwidth\\\"><div class=\\\"p-20 fullwidth\\\" layout=\\\"row\\\" layout-align=\\\"space-between start\\\" layout-wrap>\\n<div flex=\\\"40\\\" flex-xs=\\\"100\\\"><div class=\\\"bb p-10\\\"><span><md-icon md-font-icon=\\\"icon-web\\\"></md-icon></span><span>\\n{{ concessionaire.web || (\\'Web no especificada\\' | translate)}}</span></div><div class=\\\"bb p-10\\\"><span><md-icon \\nmd-font-icon=\\\"icon-map-marker\\\"></md-icon></span><span>\\n{{ concessionaire.address || (\\'Dirección no especificada\\' | translate)}}</span></div><div class=\\\"mt-20\\\"><strong \\ndata-translate>Orígenes</strong><div class=\\\"bb p-10\\\" ng-repeat=\\\"source in concessionaire.sources | unique : \\'origin\\'\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><span><img class=\\\"img-origin\\\" ng-src=\\\"{{source.origin_data.icon}}\\\"> </span>\\n<span>{{ source.origin_data.name }}</span></div></div></div><div flex=\\\"40\\\" flex-xs=\\\"100\\\"><strong data-translate>\\nCalendario de trabajo</strong><div><div ng-repeat=\\\"(day,work_calendar) in concessionaire.work_calendar\\\" \\nng-if=\\\"vm.week[day]\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\" class=\\\"bb p-10\\\"><div class=\\\"mr-40\\\">\\n{{ vm.week[day] }}</div><div layout=\\\"row\\\" class=\\\"date-row\\\"><div><span ng-if=\\\"work_calendar.start_hour\\\">\\n{{ work_calendar.start_hour | formatTime }}</span> <span ng-if=\\\"!work_calendar.start_hour\\\" data-translate>Sin definir\\n</span></div><div class=\\\"ml-20 mr-20\\\"><span>-</span></div><div><span ng-if=\\\"work_calendar.end_hour\\\">\\n{{ work_calendar.end_hour | formatTime }}</span> <span ng-if=\\\"!work_calendar.end_hour\\\" data-translate>Sin definir\\n</span></div></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/concession-notes.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-document\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Notas</span></h2></div></md-toolbar><div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" \\nlayout-wrap class=\\\"fullwidth\\\"><div layout=\\\"column\\\" layout-align=\\\"space-between start\\\" class=\\\"fullwidth p-20\\\"><div \\nclass=\\\"no-results text-center\\\" ng-if=\\\"concessionaire.notes_data.length == 0\\\"><div class=\\\"message\\\"><md-icon \\nclass=\\\"message-icon s96\\\" md-font-icon=\\\"icon-document\\\"></md-icon><div class=\\\"message-text\\\" translate>Sin notas añadidas\\n</div></div></div><div ng-repeat=\\\"note in concessionaire.notes_data\\\" layout=\\\"row\\\" layout-wrap class=\\\"fullwidth\\\" \\nng-init=\\\"note.historyShow=false\\\"><div flex=\\\"80\\\"><div class=\\\"fullwidth\\\"><div class=\\\"mb-10\\\"><md-icon \\nmd-font-icon=\\\"icon-calendar\\\"></md-icon><span>{{ note.modified | date:\\'dd/MM/yyyy HH:mm\\' }}</span></div><div \\nclass=\\\"mb-20\\\">{{ note.content }}</div></div><div class=\\\"pl-50\\\" ng-show=\\\"note.historyShow\\\"><div \\nng-repeat=\\\"history in note.history\\\"><div class=\\\"mb-10\\\"><md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span>\\n{{ history.modified | date:\\'dd/MM/yyyy HH:mm\\' }}</span></div><div class=\\\"mb-20\\\">{{ history.content }}</div></div></div>\\n</div><div flex=\\\"20\\\"><md-button ng-click=\\\"note.historyShow=!note.historyShow\\\" ng-if=\\\"note.history.length>0\\\" \\nclass=\\\"md-fab md-mini md-accent\\\" aria-label=\\\"{{\\'Ver historial\\' | translate}}\\\"><md-icon md-font-icon=\\\"icon-history\\\">\\n</md-icon><md-tooltip><span data-translate>Ver historial</span></md-tooltip></md-button><md-button \\nng-click=\\\"vm.deleteNote(note)\\\" ng-hide=\\\"vm.isDisabled()\\\" ng-if=\\\"!note.id\\\" class=\\\"md-fab md-mini md-warn\\\" \\naria-label=\\\"{{\\'Borrar nota\\' | translate}}\\\"><md-icon md-font-icon=\\\"icon-delete\\\"></md-icon></md-button></div></div></div>\\n</div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/concession-users.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Usuarios conectados</span></h2></div></md-toolbar><div data-layout=\\\"column\\\" \\ndata-layout-align=\\\"start start\\\" layout-wrap class=\\\"fullwidth\\\"><div layout=\\\"column\\\" layout-align=\\\"space-between start\\\" \\nclass=\\\"fullwidth pt-10 pb-10\\\"><div class=\\\"no-results text-center\\\" ng-if=\\\"filtered.length == 0\\\"><div class=\\\"message\\\">\\n<md-icon class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-account\\\"></md-icon><div class=\\\"message-text\\\" translate>\\nSin usuarios</div></div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nng-repeat=\\\"user in concessionaire.related_users | filter:{user_data:{online:true}} as filtered\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><span \\nclass=\\\"avatar-wrapper mr-20\\\"><img data-md-menu-align-target class=\\\"avatar\\\" src=\\\"assets/images/avatars/profile.jpg\\\" \\nalt=\\\"Imágen de perfil\\\"><md-icon ng-if=\\\"user.user_data.online\\\" md-font-icon ng-style=\\\"{\\'color\\': \\'#4CAF50\\' }\\\" \\nclass=\\\"icon icon-checkbox-marked-circle status s16\\\"></md-icon><md-icon ng-if=\\\"!user.user_data.online\\\" md-font-icon \\nng-style=\\\"{\\'color\\': \\'#F44336\\' }\\\" class=\\\"icon icon-minus-circle status s16\\\"></md-icon></span><div><div class=\\\"mb-5\\\">\\n<span class=\\\"title\\\">{{user.user_data.first_name}} {{user.user_data.last_name}}</span> <span class=\\\"ml-10\\\"><span \\nclass=\\\"text-boxed m-0 green-bg white-fg\\\" ng-show=\\\"user.is_admin\\\" data-translate>Super Administrador</span> <span \\nclass=\\\"text-boxed m-0 green-bg white-fg\\\" ng-show=\\\"user.is_concession_admin\\\" data-translate>\\nAdministrador de concesionario</span> <span class=\\\"text-boxed m-0 green-bg white-fg\\\" \\nng-show=\\\"user.is_business_manager\\\" data-translate>Gestor comercial</span></span></div><div class=\\\"tags\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" layout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon \\nmd-font-icon=\\\"icon-email\\\" class=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\">{{user.user_data.email}}</div></div></div>\\n<div class=\\\"tags\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-repeat=\\\"concessionaire in user.user_data.related_concessionaires\\\"><md-icon \\nmd-font-icon=\\\"icon-car\\\" class=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\">{{concessionaire.concessionaire_data.name}}\\n</div></div></div></div></div></div></div></div></div></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/finish-lead.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Lead cerrado</span></h2></div></md-toolbar><md-content flex data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start start\\\" layout-wrap class=\\\"fullwidth\\\"><div flex layout-padding data-layout-xs=\\\"column\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start end\\\" data-layout-align-xs=\\\"start start\\\" layout-wrap layout-margin><div \\nclass=\\\"m-0 p-0\\\" layout-padding data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start end\\\" \\ndata-layout-align-xs=\\\"start start\\\" layout-wrap layout-margin class=\\\"fullwidth\\\"><div class=\\\"h-60\\\" data-layout=\\\"column\\\" \\ndata-layout-align=\\\"center start\\\"><md-input-container><label data-translate>Resultado</label><md-select \\ndata-ng-model=\\\"vm.lead.result\\\" name=\\\"result\\\" class=\\\"w-200\\\" ng-disabled=\\\"vm.isDisabled()\\\"><md-option \\ndata-ng-repeat=\\\"result in vm.results\\\" data-ng-value=\\\"result.id\\\">{{ result.name }}</md-option></md-select>\\n<error-messages field=\\\"leadForm.result\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div>\\n<div class=\\\"h-60\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\"><md-input-container><label data-translate>\\nMotivo</label><md-select data-ng-model=\\\"vm.lead.result_reason\\\" name=\\\"result_reason\\\" class=\\\"w-200\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><md-option data-ng-repeat=\\\"reason in vm.resultReasons[vm.lead.result] | orderBy:\\'name\\'\\\" \\ndata-ng-value=\\\"reason.id\\\">{{ reason.name }}</md-option></md-select><error-messages field=\\\"leadForm.result_reason\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div><div data-layout=\\\"column\\\" \\ndata-layout-align=\\\"center start\\\" flex=\\\"100\\\"><md-input-container class=\\\"w-500\\\"><label data-translate>Comentarios</label>\\n<textarea class=\\\"dynamic\\\" name=\\\"result_comments\\\" data-ng-model=\\\"vm.lead.result_comments\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n</textarea><error-messages field=\\\"leadForm.result_comments\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container></div></div></div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/lead.html\",\"<div id=\\\"lead-edit\\\" class=\\\"page-layout simple\\\" layout=\\\"row\\\"><div class=\\\"center\\\" flex ms-scroll><div \\nclass=\\\"content white-bg\\\"><md-tabs md-dynamic-height md-selected=\\\"vm.selectedTab\\\"><md-tab \\nlabel=\\\"{{ \\'Datos de lead\\' | translate }}\\\"><div layout=\\\"column\\\" flex><form name=\\\"leadForm\\\" \\nclass=\\\"md-inline-form ms-form-wizard-form full-width p-20\\\" novalidate><div layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<div class=\\\"fullwidth\\\" ng-include=\\\"\\'app/main/leads/views/edit/status.html\\'\\\"></div><div layout=\\\"row\\\" \\nlayout-align=\\\"end end\\\" class=\\\"mb-50\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-button \\nng-click=\\\"vm.openSaveLeadDialog()\\\" data-debouce-click ng-hide=\\\"vm.isDisabled()\\\" \\ndata-ng-if=\\\"hasPermission(\\'leads\\',\\'PATCH\\') && vm.canEdit()\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\" class=\\\"md-fab\\\">\\n<md-icon md-font-icon=\\\"icon-content-save\\\"></md-icon></md-button></div></div></div><div layout=\\\"row\\\" \\nlayout-align=\\\"space-between start\\\" layout-wrap><div flex=\\\"100\\\" flex-xs=\\\"100\\\" data-layout=\\\"column\\\" \\ndata-layout-align=\\\"start start\\\"><div class=\\\"fullwidth mb-20\\\" \\nng-if=\\\"vm.isOpenFinishLeadBox || vm.lead.status_end_datetime\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/finish-lead.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/client.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/vehicle.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/appraisals.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/tags.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/request.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/tracing.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/notes.html\\'\\\"></div><div class=\\\"fullwidth mb-20\\\" \\nng-if=\\\"vm.lead.lead_managements.length>0\\\" ng-include=\\\"\\'app/main/leads/views/edit/lead_managements.html\\'\\\"></div></div>\\n</div></form></div></md-tab><md-tab ng-if=\\\"vm.lead.id && vm.lead.vehicles && vm.lead.vehicles[0]\\\"><md-tab-label><span \\ndata-translate>Anuncio</span></md-tab-label><md-tab-body><form class=\\\"p-20\\\"><div class=\\\"fullwidth mb-20\\\" \\nng-include=\\\"\\'app/main/leads/views/edit/vehicle.html\\'\\\"></div><iframe id=\\\"iframe-ad-link\\\" ng-if=\\\"vm.iframeAdLink\\\" \\nsrc=\\\"{{vm.trustSrc(vm.iframeAdLink)}}\\\"></iframe></form></md-tab-body></md-tab><md-tab \\nng-if=\\\"((vm.lead.client.phone && vm.lead.client.phone.length > 8) || (vm.lead.client.email && vm.lead.client.email.length > 5)) &&\\r\\n                        (vm.leads.new.count>0 || vm.leads.attended.count>0 || vm.leads.commercial_management.count>0 || vm.leads.tracing.count>0 || vm.leads.end.count>0)\\\">\\n<md-tab-label><span data-translate>Coincidentes</span></md-tab-label><md-tab-body><div class=\\\"p-20\\\" id=\\\"scrumboard\\\">\\n<div class=\\\"fullwidth\\\" style=\\\"height: 80vh\\\" ng-include=\\\"\\'app/main/leads/views/board/board-columns.html\\'\\\"></div></div>\\n</md-tab-body></md-tab><md-tab ng-if=\\\"vm.leadsActivity.count>0\\\"><md-tab-label><span data-translate>Actividades</span> \\n<span class=\\\"badge\\\">{{ vm.leadsActivity.count }}</span></md-tab-label><md-tab-body><div class=\\\"p-20\\\"><div \\nclass=\\\"fullwidth\\\" ng-include=\\\"\\'app/main/leads/views/edit/activity/timeline-right.html\\'\\\"></div></div></md-tab-body>\\n</md-tab><md-tab \\nng-if=\\\"vm.lead.id && vm.lead.concessionaire_data.hubspot_api_key && vm.lead.concessionaire_data.hubspot_id\\\">\\n<md-tab-label><span data-translate>Hubspot</span></md-tab-label><md-tab-body><div class=\\\"p-20\\\"><md-button \\nclass=\\\"md-raised md-accent mt-10\\\" aria-label=\\\"{{\\'Sincronizar\\' | translate}}\\\" data-debouce-click \\ndata-ng-click=\\\"vm.hubspot()\\\"><md-icon md-font-icon=\\\"icon-sync\\\"></md-icon><span data-translate>Sincronizar</span>\\n</md-button></div></md-tab-body></md-tab></md-tabs></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/lead_managements.html\",\"<div layout=\\\"column\\\" layout-align=\\\"space-between start\\\" class=\\\"mb-20 md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><span>Lead managements</span></h2></div></md-toolbar><md-content flex layout-padding \\ndata-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\"><div \\nclass=\\\"todo-item\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" ng-repeat=\\\"lead_management in vm.lead.lead_managements\\\"><div\\n layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"mb-5\\\"><span \\nclass=\\\"title\\\">{{lead_management.message}}</span></div><div class=\\\"tags\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nlayout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"s16\\\">\\n</md-icon><div class=\\\"ml-10 tag-label\\\">{{lead_management.user_data.first_name}} {{lead_management.user_data.last_name}}\\n</div></div><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" \\nclass=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\"><span translate>Fecha:</span>\\n {{lead_management.created | date:\\'dd/MM/yyyy\\'}}</div></div><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\"><span translate>Hora:</span>\\n {{lead_management.created | date:\\'HH:mm\\'}}</div></div><div class=\\\"tag white-fg\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" style=\\\"background:{{status.color}}\\\" ng-repeat=\\\"status in vm.leadStatus\\\" \\nng-if=\\\"status.id===lead_management.status\\\"><md-icon md-font-icon=\\\"icon-tag\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\"><span>{{status.name}}</span></div></div></div></div></div></div></div></div></div></md-content>\\n</div>\");\n$templateCache.put(\"app/main/leads/views/edit/notes.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-document\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Comentarios</span></h2><md-icon ng-hide=\\\"vm.isDisabled()\\\" ng-click=\\\"vm.addNote()\\\" \\nmd-font-icon=\\\"icon-plus-circle-outline\\\" class=\\\"pointer black-fg no-margin\\\"></md-icon></div></md-toolbar><md-content \\nflex layout-padding data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" layout-wrap \\nclass=\\\"fullwidth\\\"><div class=\\\"no-results text-center\\\" ng-if=\\\"vm.lead.note.length == 0\\\"><div class=\\\"message\\\"><md-icon \\nclass=\\\"message-icon s96\\\" md-font-icon=\\\"icon-document\\\"></md-icon><div class=\\\"message-text\\\" translate>\\nSin comentarios añadidos</div></div></div><div ng-repeat=\\\"note in vm.lead.note\\\" layout=\\\"row\\\" layout-wrap \\nclass=\\\"fullwidth\\\" ng-init=\\\"note.historyShow=false\\\"><div flex=\\\"80\\\" layout=\\\"row\\\"><div data-layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" class=\\\"mb-20 w-165 mr-15\\\"><div flex><label class=\\\"input-label\\\" data-translate>Fecha</label>\\n<div class=\\\"bb\\\"><md-icon md-font-icon=\\\"icon-calendar\\\"></md-icon><span>{{ note.modified | date:\\'dd/MM/yyyy HH:mm\\' }}\\n</span></div></div></div><div data-layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"mb-20 w-165 mr-15\\\"><div flex><label \\nclass=\\\"input-label\\\" data-translate>Usuario</label><div class=\\\"bb\\\"><md-icon md-font-icon=\\\"icon-account\\\"></md-icon><span \\nng-if=\\\"note.user\\\">{{ note.user.first_name }} {{ note.user.last_name }}</span> <span ng-if=\\\"!note.user\\\">\\n{{ vm.user.first_name }} {{ vm.user.last_name }}</span></div></div></div><md-input-container flex=\\\"100\\\" \\nng-init=\\\"name=\\'note___\\'+$index+\\'___content\\'\\\" class=\\\"fullwidth\\\"><label data-translate>Comentario</label><textarea \\nclass=\\\"dynamic\\\" data-ng-model=\\\"vm.lead.note[$index].content\\\" name=\\\"{{ name }}\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n</textarea><error-messages field=\\\"leadForm[name]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container></div><div flex=\\\"20\\\"><md-button ng-click=\\\"vm.deleteNote(note)\\\" ng-hide=\\\"vm.isDisabled()\\\" \\nng-if=\\\"!note.id\\\" class=\\\"md-fab md-mini md-warn\\\" aria-label=\\\"{{\\'Borrar comentario\\' | translate}}\\\"><md-icon \\nmd-font-icon=\\\"icon-delete\\\"></md-icon></md-button></div></div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/request.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\" ng-init=\\\"tracing=false\\\">\\n<md-toolbar class=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><h2 class=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-document\\\" \\nclass=\\\"black-fg no-margin\\\"></md-icon><span data-translate>Tareas programadas</span></h2><md-icon \\nng-click=\\\"vm.openTaskDialog($event, tracing)\\\" md-font-icon=\\\"icon-plus-circle-outline\\\" \\nclass=\\\"pointer black-fg no-margin\\\"></md-icon></div></md-toolbar><div data-layout=\\\"column\\\" \\ndata-layout-align=\\\"start start\\\" layout-wrap class=\\\"fullwidth\\\" ng-init=\\\"form=leadForm\\\"><div class=\\\"fullwidth\\\" \\nng-include=\\\"\\'app/main/tasks/tasks.html\\'\\\"></div><div data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\"><md-input-container flex=\\\"100\\\" \\nclass=\\\"no-margin\\\"><input type=\\\"hidden\\\" name=\\\"request___non_field_errors\\\" \\ndata-ng-model=\\\"vm.lead.request.non_field_errors\\\"><error-messages field=\\\"leadForm.request___non_field_errors\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/score.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\"><h2 class=\\\"md-flex text-uppercase\\\"><md-icon \\nmd-font-icon=\\\"icon-trending-up\\\" class=\\\"black-fg no-margin\\\"></md-icon><span data-translate>Score</span></h2></div>\\n</md-toolbar><md-content flex layout-padding data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\" ng-if=\\\"!vm.lead.id || vm.user.is_admin || true\\\">\\n</md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/status.html\",\"<div class=\\\"content-status-lead\\\"><div class=\\\"step step-new\\\" ng-class=\\\"{\\'active\\': vm.lead.status_new_datetime }\\\"><div \\nclass=\\\"content-circle\\\"><div class=\\\"circle\\\" ng-click=\\\"vm.changeStatus(vm.lead,\\'new\\')\\\"><md-icon \\nmd-font-icon=\\\"icon-chevron-right\\\"></md-icon></div><div class=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\" \\ndata-layout-align=\\\"start center\\\" hide-xs><span translate>Lead no atendido</span><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"center center\\\"><md-button data-layout=\\\"column\\\" class=\\\"md-icon-button\\\" \\ndata-layout-align=\\\"start center\\\" ng-if=\\\"vm.lead.status_new_datetime\\\" \\nng-click=\\\"vm.openLeadStatusDateDialog($event, vm.lead, \\'status_new_datetime\\')\\\"><md-icon \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-calendar\\\"></md-icon></md-button><span>\\n{{vm.lead.status_new_datetime | date:\\'dd/MM/yyyy HH:mm\\'}}</span></div></div></div><div class=\\\"step step-attended\\\" \\nng-class=\\\"{\\'active\\': vm.lead.status_attended_datetime }\\\"><div class=\\\"content-circle\\\"><div class=\\\"circle\\\" \\nng-click=\\\"vm.changeStatus(vm.lead,\\'attended\\')\\\"><md-icon md-font-icon=\\\"icon-chevron-right\\\"></md-icon></div><div \\nclass=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\" data-layout-align=\\\"start center\\\" hide-xs><span translate>\\nLead atendido por comercial</span><div data-layout=\\\"row\\\" data-layout-align=\\\"center center\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-icon-button\\\" data-layout-align=\\\"start center\\\" ng-if=\\\"vm.lead.status_attended_datetime\\\" \\nng-click=\\\"vm.openLeadStatusDateDialog($event, vm.lead, \\'status_attended_datetime\\')\\\"><md-icon \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-calendar\\\"></md-icon></md-button><span>\\n{{vm.lead.status_attended_datetime | date:\\'dd/MM/yyyy HH:mm\\'}}</span></div></div></div><div class=\\\"step step-pending\\\" \\nng-class=\\\"{\\'active\\': vm.lead.status_pending_datetime}\\\"><div class=\\\"content-circle\\\"><div class=\\\"circle\\\" \\nng-click=\\\"vm.changeStatus(vm.lead,\\'commercial_management\\')\\\"><md-icon md-font-icon=\\\"icon-chevron-right\\\"></md-icon></div>\\n<div class=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\" data-layout-align=\\\"start center\\\" hide-xs><span \\ntranslate>Tareas pendientes</span><div data-layout=\\\"row\\\" data-layout-align=\\\"center center\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-icon-button\\\" data-layout-align=\\\"start center\\\" ng-if=\\\"vm.lead.status_pending_datetime\\\" \\nng-click=\\\"vm.openLeadStatusDateDialog($event, vm.lead, \\'status_pending_datetime\\')\\\"><md-icon \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-calendar\\\"></md-icon></md-button><span>\\n{{vm.lead.status_pending_datetime | date:\\'dd/MM/yyyy HH:mm\\'}}</span></div></div></div><div class=\\\"step step-tracing\\\" \\nng-class=\\\"{\\'active\\': vm.lead.status_tracing_datetime}\\\"><div class=\\\"content-circle\\\"><div class=\\\"circle\\\" \\nng-click=\\\"vm.changeStatus(vm.lead,\\'tracing\\')\\\"><md-icon md-font-icon=\\\"icon-chevron-right\\\"></md-icon></div><div \\nclass=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\" data-layout-align=\\\"start center\\\" hide-xs><span translate>\\nSeguimiento</span><div data-layout=\\\"row\\\" data-layout-align=\\\"center center\\\"><md-button data-layout=\\\"column\\\" \\nclass=\\\"md-icon-button\\\" data-layout-align=\\\"start center\\\" ng-if=\\\"vm.lead.status_tracing_datetime\\\" \\nng-click=\\\"vm.openLeadStatusDateDialog($event, vm.lead, \\'status_tracing_datetime\\')\\\"><md-icon \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-calendar\\\"></md-icon></md-button><span>\\n{{vm.lead.status_tracing_datetime | date:\\'dd/MM/yyyy HH:mm\\'}}</span></div></div></div><div class=\\\"step step-end\\\" \\nng-class=\\\"{\\'active\\': vm.lead.status_end_datetime}\\\"><div class=\\\"content-circle\\\"><div class=\\\"circle\\\" \\nng-click=\\\"vm.changeStatus(vm.lead,\\'end\\')\\\" ng-class=\\\"{\\'pointer\\': vm.lead.id}\\\"><md-icon md-font-icon=\\\"icon-close\\\">\\n</md-icon></div><div class=\\\"line\\\"></div></div><div class=\\\"text\\\" layout=\\\"column\\\" data-layout-align=\\\"start center\\\" \\nhide-xs><span translate>Lead cerrado</span><div data-layout=\\\"row\\\" data-layout-align=\\\"center center\\\"><md-button \\ndata-layout=\\\"column\\\" class=\\\"md-icon-button\\\" data-layout-align=\\\"start center\\\" ng-if=\\\"vm.lead.status_end_datetime\\\" \\nng-click=\\\"vm.openLeadStatusDateDialog($event, vm.lead, \\'status_end_datetime\\')\\\"><md-icon \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-calendar\\\"></md-icon></md-button><span>\\n{{vm.lead.status_end_datetime | date:\\'dd/MM/yyyy HH:mm\\'}}</span></div></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/tags.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-tag\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Solicitudes</span></h2></div></md-toolbar><md-content flex layout-padding data-layout-xs=\\\"column\\\" \\ndata-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" layout-wrap class=\\\"fullwidth\\\"><div class=\\\"mt-10\\\" layout=\\\"row\\\" \\nlayout-wrap><div ng-repeat=\\\"tag in vm.getNumber(5) track by $index\\\" layout-margin><md-input-container flex=\\\"100\\\" \\nng-init=\\\"name=\\'tags___\\'+$index+\\'___content\\'\\\"><label data-translate>Tag</label><input type=\\\"text\\\" \\ndata-ng-model=\\\"vm.lead.tags[$index].content\\\" name=\\\"{{ name }}\\\" ng-disabled=\\\"vm.isDisabled()\\\"><error-messages \\nfield=\\\"leadForm[name]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></div><div \\nlayout=\\\"row\\\" class=\\\"w-100-p\\\"><div layout-margin class=\\\"w-100-p\\\"><md-input-container class=\\\"w-100-p\\\"><label \\ndata-translate>Comentarios del cliente</label><textarea class=\\\"dynamic\\\" name=\\\"request_notes\\\" \\ndata-ng-model=\\\"vm.lead.request_notes\\\" ng-disabled=\\\"vm.isDisabled()\\\"></textarea><error-messages \\nfield=\\\"leadForm.request_notes\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></div>\\n</md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/tracing.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\" ng-init=\\\"tracing=true\\\">\\n<md-toolbar class=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><h2 class=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-document\\\" \\nclass=\\\"black-fg no-margin\\\"></md-icon><span data-translate>Seguimiento programado</span></h2><md-icon \\nng-click=\\\"vm.openTaskDialog($event, tracing)\\\" md-font-icon=\\\"icon-plus-circle-outline\\\" \\nclass=\\\"pointer black-fg no-margin\\\"></md-icon></div></md-toolbar><div data-layout=\\\"column\\\" \\ndata-layout-align=\\\"start start\\\" layout-wrap class=\\\"fullwidth\\\" ng-init=\\\"form=leadForm\\\"><div class=\\\"fullwidth\\\" \\nng-include=\\\"\\'app/main/tasks/tasks.html\\'\\\"></div><div data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\"><md-input-container flex=\\\"100\\\" \\nclass=\\\"no-margin\\\"><input type=\\\"hidden\\\" name=\\\"request___non_field_errors\\\" \\ndata-ng-model=\\\"vm.lead.request.non_field_errors\\\"><error-messages field=\\\"leadForm.request___non_field_errors\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/vehicle.html\",\"<div data-layout=\\\"column\\\" data-layout-align=\\\"start start\\\" flex=\\\"100\\\" class=\\\"md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-car\\\" class=\\\"black-fg no-margin\\\"></md-icon><span \\ndata-translate>Producto</span></h2><md-icon ng-hide=\\\"vm.isDisabled()\\\" ng-click=\\\"vm.addVehicle()\\\" \\nmd-font-icon=\\\"icon-plus-circle-outline\\\" class=\\\"pointer black-fg no-margin\\\"></md-icon></div></md-toolbar><md-content \\nclass=\\\"fullwidth\\\"><div ng-repeat=\\\"vehicle in vm.lead.vehicles\\\" flex layout-padding data-layout-xs=\\\"column\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between start\\\" layout-wrap class=\\\"fullwidth\\\" ng-init=\\\"vehicle.field={}\\\"><div\\n layout-margin-lg flex=\\\"80\\\" data-layout=\\\"row\\\" layout-wrap><div class=\\\"h-30\\\" data-layout=\\\"column\\\" \\ndata-layout-align=\\\"center start\\\" ng-init=\\\"vehicle.field[\\'brand_model\\']=\\'vehicles___\\'+$index+\\'___brand_model\\'\\\">\\n<md-autocomplete md-floating-label=\\\"{{\\'Marca\\' | translate }}\\\" md-delay=\\\"300\\\" \\nmd-input-name=\\\"{{vehicle.field[\\'brand_model\\']}}\\\" md-no-cache=\\\"true\\\" ng-disabled=\\\"vm.isDisabled()\\\" required \\nmd-selected-item=\\\"vehicle.brand_model_data\\\" md-search-text=\\\"searchTextBrand\\\" \\nmd-items=\\\"brand in vm.getBrands(searchTextBrand)\\\" md-min-length=\\\"0\\\" md-item-text=\\\"brand.name\\\"><md-item-template><span \\nmd-highlight-text=\\\"searchTextBrand\\\">{{brand.name}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ninguna marca con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex=\\\"100\\\" \\nclass=\\\"no-margin\\\"><error-messages field=\\\"leadForm[vehicle.field[\\'brand_model\\']]\\\" server-errors=\\\"vm.serverErrors\\\" \\nrequired></error-messages></md-input-container></div><div class=\\\"h-30\\\" data-layout=\\\"column\\\" \\ndata-layout-align=\\\"center start\\\" ng-init=\\\"vehicle.field[\\'model\\']=\\'vehicles___\\'+$index+\\'___model\\'\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Modelo\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{vehicle.field[\\'model\\']}}\\\" \\nmd-no-cache=\\\"true\\\" ng-disabled=\\\"vm.isDisabled() || !vehicle.brand_model_data\\\" md-selected-item=\\\"vehicle.model_data\\\" \\nmd-search-text=\\\"searchTextModel\\\" md-items=\\\"model in vm.getModels(vehicle.brand_model_data.id, searchTextModel)\\\" \\nmd-min-length=\\\"0\\\" md-item-text=\\\"model.model_name\\\"><md-item-template><span md-highlight-text=\\\"searchTextModel\\\">\\n{{model.model_name}}</span></md-item-template><md-not-found><span data-translate>No hay ningun modelo con ese nombre\\n</span></md-not-found></md-autocomplete><md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages \\nfield=\\\"leadForm[vehicle.field[\\'model\\']]\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div><div class=\\\"h-30\\\" data-layout=\\\"column\\\" data-layout-align=\\\"center start\\\" \\nng-init=\\\"vehicle.field[\\'version\\']=\\'vehicles___\\'+$index+\\'___version\\'\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Version\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{vehicle.field[\\'version\\']}}\\\" \\nmd-no-cache=\\\"true\\\" ng-disabled=\\\"vm.isDisabled() || !vehicle.model_data\\\" \\nmd-selected-item-change=\\\"vm.changeVehicleVersion(vehicle,\\'power\\',\\'gas\\')\\\" md-selected-item=\\\"vehicle.version_data\\\" \\nmd-search-text=\\\"searchTextVersion\\\" md-items=\\\"version in vm.getVersions(vehicle.model_data.id, searchTextVersion)\\\" \\nmd-min-length=\\\"0\\\" md-item-text=\\\"vm.getFullNameVersion(version)\\\"><md-item-template><span \\nmd-highlight-text=\\\"searchTextVersion\\\">{{vm.getFullNameVersion(version)}}</span></md-item-template><md-not-found><span \\ndata-translate>No hay ninguna versión con ese nombre</span></md-not-found></md-autocomplete><md-input-container \\nflex=\\\"100\\\" class=\\\"no-margin\\\"><error-messages field=\\\"leadForm[vehicle.field[\\'version\\']]\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><md-input-container \\nng-init=\\\"vehicle.field[\\'price\\']=\\'vehicles___\\'+$index+\\'___price\\'\\\"><label data-translate>Precio</label><input \\ntype=\\\"text\\\" name=\\\"{{vehicle.field[\\'price\\']}}\\\" data-ng-model=\\\"vehicle.price\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n<error-messages field=\\\"leadForm[vehicle.field[\\'price\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container ng-init=\\\"vehicle.field[\\'km\\']=\\'vehicles___\\'+$index+\\'___km\\'\\\"><label \\ndata-translate>Km</label><input type=\\\"text\\\" name=\\\"{{vehicle.field[\\'km\\']}}\\\" data-ng-model=\\\"vehicle.km\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"leadForm[vehicle.field[\\'km\\']]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container \\nng-init=\\\"vehicle.field[\\'power\\']=\\'vehicles___\\'+$index+\\'___power\\'\\\"><label data-translate>Potencia</label><input \\ntype=\\\"text\\\" name=\\\"{{vehicle.field[\\'power\\']}}\\\" data-ng-model=\\\"vehicle.power\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n<error-messages field=\\\"leadForm[vehicle.field[\\'power\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container ng-init=\\\"vehicle.field[\\'year\\']=\\'vehicles___\\'+$index+\\'___year\\'\\\"><label \\ndata-translate>Año</label><input type=\\\"text\\\" name=\\\"{{vehicle.field[\\'year\\']}}\\\" data-ng-model=\\\"vehicle.year\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><error-messages field=\\\"leadForm[vehicle.field[\\'year\\']]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container ng-init=\\\"vehicle.field[\\'gas\\']=\\'vehicles___\\'+$index+\\'___gas\\'\\\">\\n<label data-translate>Combustible</label><md-select name=\\\"{{vehicle.field[\\'gas\\']}}\\\" data-ng-model=\\\"vehicle.gas\\\" \\nng-disabled=\\\"vm.isDisabled()\\\"><md-option data-ng-repeat=\\\"gas in vm.gasTypes.data\\\" data-ng-value=\\\"gas.id\\\">{{gas.name}}\\n</md-option></md-select><error-messages field=\\\"leadForm[vehicle.field[\\'gas\\']]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container \\nng-init=\\\"vehicle.field[\\'vehicle_type\\']=\\'vehicles___\\'+$index+\\'___vehicle_type\\'\\\"><label data-translate>Tipo</label>\\n<md-select name=\\\"{{vehicle.field[\\'vehicle_type\\']}}\\\" data-ng-model=\\\"vehicle.vehicle_type\\\" ng-disabled=\\\"vm.isDisabled()\\\" \\nng-change=\\\"leadForm[vehicle.field[\\'vehicle_type\\']].$setValidity(\\'serverError\\', true);\\\"><md-option \\ndata-ng-repeat=\\\"type in vm.vehicleTypes\\\" data-ng-value=\\\"type.id\\\">{{type.name}}</md-option></md-select><error-messages \\nfield=\\\"leadForm[vehicle.field[\\'vehicle_type\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container ng-init=\\\"vehicle.field[\\'comercial_category\\']=\\'vehicles___\\'+$index+\\'___comercial_category\\'\\\"><label \\ndata-translate>Categoría comercial</label><md-select name=\\\"{{vehicle.field[\\'comercial_category\\']}}\\\" \\ndata-ng-model=\\\"vehicle.comercial_category\\\" ng-disabled=\\\"vm.isDisabled()\\\"><md-option \\ndata-ng-repeat=\\\"category in vm.comercialCategories\\\" data-ng-value=\\\"category.id\\\">{{category.name}}</md-option>\\n</md-select><error-messages field=\\\"leadForm[vehicle.field[\\'comercial_category\\']]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container \\nng-init=\\\"vehicle.field[\\'gear_shift\\']=\\'vehicles___\\'+$index+\\'___gear_shift\\'\\\"><label data-translate>Cambio</label>\\n<md-select name=\\\"{{vehicle.field[\\'gear_shift\\']}}\\\" data-ng-model=\\\"vehicle.gear_shift\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n<md-option data-ng-repeat=\\\"gearShift in vm.gearShifts\\\" data-ng-value=\\\"gearShift.id\\\">{{gearShift.name}}</md-option>\\n</md-select><error-messages field=\\\"leadForm[vehicle.field[\\'gear_shift\\']]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container \\nng-init=\\\"vehicle.field[\\'note\\']=\\'vehicles___\\'+$index+\\'___note\\'\\\" class=\\\"w-400\\\"><label data-translate>Descripción</label>\\n<textarea class=\\\"dynamic\\\" name=\\\"{{vehicle.field[\\'note\\']}}\\\" data-ng-model=\\\"vehicle.note\\\" ng-disabled=\\\"vm.isDisabled()\\\">\\n</textarea><error-messages field=\\\"leadForm[vehicle.field[\\'note\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container ng-init=\\\"vehicle.field[\\'ad_link\\']=\\'vehicles___\\'+$index+\\'___ad_link\\'\\\" \\nclass=\\\"w-400 md-icon-float md-icon-right\\\"><label data-translate>Link anuncio</label><input type=\\\"text\\\" \\nname=\\\"{{vehicle.field[\\'ad_link\\']}}\\\" data-ng-model=\\\"vehicle.ad_link\\\" ng-disabled=\\\"vm.isDisabled()\\\"><md-icon \\nng-if=\\\"vehicle.ad_link && vm.selectedTab===1\\\" title=\\\"{{\\'Ir al anuncio\\' | translate}}\\\" md-font-icon=\\\"icon-open-in-new\\\" \\nclass=\\\"md-accent pointer\\\" data-ng-click=\\\"vm.iframeAdLink=vehicle.ad_link\\\"></md-icon><error-messages \\nfield=\\\"leadForm[vehicle.field[\\'ad_link\\']]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div>\\n<div layout=\\\"row\\\" layout-align=\\\"end center\\\" ng-hide=\\\"vm.isDisabled()\\\"><md-button data-layout=\\\"column\\\" \\nclass=\\\"md-icon-button md-warn\\\" data-layout-align=\\\"start center\\\" ng-if=\\\"vm.lead.vehicles.length>1\\\" \\ndata-ng-click=\\\"vm.deleteVehicle($index,vehicle)\\\"><md-icon title=\\\"{{\\'Eliminar\\' | translate}}\\\" \\nmd-font-icon=\\\"icon-delete\\\"></md-icon></md-button></div></div><div data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\" ng-if=\\\"vm.serverErrors\\\"><md-input-container \\nflex=\\\"100\\\" class=\\\"no-margin\\\"><input type=\\\"hidden\\\" name=\\\"vehicles___non_field_errors\\\" \\ndata-ng-model=\\\"vm.lead.vehicles.non_field_errors\\\"><error-messages field=\\\"leadForm.vehicles___non_field_errors\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/list/kpis.html\",\"<div id=\\\"kpis\\\" class=\\\"fullwidth\\\"><md-tabs md-dynamic-height md-selected=\\\"vm.selectedTabIndex\\\"><md-tab \\nlabel=\\\"{{kpi.name}}\\\" ng-repeat=\\\"kpi in vm.kpis.data\\\" md-on-select=\\\"vm.togglePositive()\\\"><div class=\\\"widget-group\\\" \\nlayout=\\\"row\\\" flex=\\\"100\\\" layout-wrap><ms-widget layout=\\\"column\\\" flex=\\\"100\\\" flex-gt-xs=\\\"50\\\" flex-gt-md=\\\"20\\\" \\nclass=\\\"pointer\\\" ng-repeat=\\\"k in kpi.kpis\\\" ng-click=\\\"vm.toggleKpi(k)\\\" title=\\\"{{\\'Filtrar\\' | translate}}\\\"><ms-widget-front\\n class=\\\"white-bg\\\" ng-class=\\\"{\\'active\\':k.active}\\\"><div class=\\\"ph-8 pv-16 h-55\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><span>{{k.name}}</span></div><div class=\\\"pt-8 pb-32\\\" layout=\\\"column\\\" \\nlayout-align=\\\"center center\\\"><div class=\\\"font-size-72 line-height-72\\\" ng-class=\\\"(k.danger ? \\'red-fg\\':\\'light-blue-fg\\')\\\">\\n{{k.value}}</div></div><div class=\\\"p-16 grey-50-bg border-top\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><span \\nclass=\\\"h4 secondary-text text-truncate\\\">{{k.second_name}}:</span> <span class=\\\"h4 ml-8\\\">{{k.done}}</span></div>\\n</ms-widget-front></ms-widget></div></md-tab><md-tab label=\\\"{{\\'Ganado\\' | translate}}\\\" \\nng-repeat=\\\"kpi in vm.kpisPositive.data\\\" md-on-select=\\\"vm.togglePositive()\\\"><div class=\\\"widget-group\\\" layout=\\\"row\\\" \\nflex=\\\"100\\\" layout-wrap><ms-widget layout=\\\"column\\\" flex=\\\"100\\\" flex-gt-xs=\\\"50\\\" flex-gt-md=\\\"20\\\" class=\\\"pointer\\\" \\nng-repeat=\\\"k in kpi.kpis\\\" ng-click=\\\"vm.toggleKpiPositive(k)\\\" title=\\\"{{\\'Filtrar\\' | translate}}\\\"><ms-widget-front \\nclass=\\\"white-bg\\\" ng-class=\\\"{\\'active\\':k.active}\\\"><div class=\\\"ph-8 pv-16 h-55\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><span>{{k.name}}</span></div><div class=\\\"pt-8 pb-32\\\" layout=\\\"column\\\" \\nlayout-align=\\\"center center\\\"><div class=\\\"font-size-72 line-height-72\\\" ng-class=\\\"(k.danger ? \\'red-fg\\':\\'light-blue-fg\\')\\\">\\n{{k.value}}</div></div><div class=\\\"p-16 grey-50-bg border-top\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><span \\nclass=\\\"h4 secondary-text text-truncate\\\">{{k.second_name}}:</span> <span class=\\\"h4 ml-8\\\">{{k.done}}</span></div>\\n</ms-widget-front></ms-widget></div></md-tab></md-tabs></div>\");\n$templateCache.put(\"app/main/leads/views/list/leads.html\",\"<div id=\\\"leads\\\" class=\\\"page-layout carded left-sidenav\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\"></div><div \\nclass=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div\\n class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-document\\\"></md-icon><span>LEADS</span></div><div class=\\\"count secondary-text\\\"><span \\ndata-translate>Número de leads:</span> <span>{{ vm.leads.count }}</span></div></div><div><md-button \\nclass=\\\"md-raised md-hue-2 header-boards-button\\\" ng-click=\\\"vm.toggleSidenav(\\'filters-sidenav\\')\\\" aria-label=\\\"Filtrar\\\">\\n<md-icon md-font-icon=\\\"icon-filter-variant\\\" class=\\\"icon\\\"></md-icon><span data-translate>Filtrar</span></md-button>\\n<md-button class=\\\"md-raised md-hue-2 header-boards-button\\\" ng-click=\\\"vm.getDocument()\\\" data-debouce-click \\naria-label=\\\"Exportar\\\"><md-icon md-font-icon=\\\"icon-export\\\" class=\\\"icon\\\"></md-icon><span data-translate>Exportar</span>\\n</md-button></div></div><div class=\\\"content-card\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"toolbar\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" hide-gt-md><md-button class=\\\"md-icon-button sidenav-toggle\\\" \\nng-click=\\\"vm.toggleSidenav(\\'filters-sidenav\\')\\\" aria-label=\\\"Toggle left sidenav\\\"><md-icon \\nmd-font-icon=\\\"icon-filter-variant\\\" class=\\\"icon\\\"></md-icon></md-button></div><md-content class=\\\"content no-padding\\\" \\nflex ms-scroll><div layout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div class=\\\"fullwidth\\\" data-layout=\\\"column\\\" \\ndata-flex><div style=\\\"overflow-x:auto\\\"><div table-fixed-header ms-scroll class=\\\"dataTables_scroll\\\"><table \\nclass=\\\"dataTable row-border hover\\\"><thead><tr><th class=\\\"pointer\\\" ng-click=\\\"vm.changeOrder(\\'created\\')\\\"><span \\ndata-translate>Fecha de alta</span><md-icon ng-if=\\\"vm.leads.filters.ordering===\\'created\\'\\\" \\nmd-font-icon=\\\"icon-sort-ascending\\\" class=\\\"icon\\\"></md-icon><md-icon ng-if=\\\"vm.leads.filters.ordering===\\'-created\\'\\\" \\nmd-font-icon=\\\"icon-sort-descending\\\" class=\\\"icon\\\"></md-icon></th><th class=\\\"pointer\\\" \\nng-click=\\\"vm.changeOrder(\\'modified\\')\\\"><span data-translate>Última modificación</span><md-icon \\nng-if=\\\"vm.leads.filters.ordering===\\'modified\\'\\\" md-font-icon=\\\"icon-sort-ascending\\\" class=\\\"icon\\\"></md-icon><md-icon \\nng-if=\\\"vm.leads.filters.ordering===\\'-modified\\'\\\" md-font-icon=\\\"icon-sort-descending\\\" class=\\\"icon\\\"></md-icon></th><th \\nclass=\\\"pointer\\\" ng-click=\\\"vm.changeOrder(\\'client__name\\')\\\"><span data-translate>Nombre</span><md-icon \\nng-if=\\\"vm.leads.filters.ordering===\\'client__name\\'\\\" md-font-icon=\\\"icon-sort-ascending\\\" class=\\\"icon\\\"></md-icon><md-icon \\nng-if=\\\"vm.leads.filters.ordering===\\'-client__name\\'\\\" md-font-icon=\\\"icon-sort-descending\\\" class=\\\"icon\\\"></md-icon></th><th\\n class=\\\"pointer\\\" ng-click=\\\"vm.changeOrder(\\'status\\')\\\"><span data-translate>Estado</span><md-icon \\nng-if=\\\"vm.leads.filters.ordering===\\'status\\'\\\" md-font-icon=\\\"icon-sort-ascending\\\" class=\\\"icon\\\"></md-icon><md-icon \\nng-if=\\\"vm.leads.filters.ordering===\\'-status\\'\\\" md-font-icon=\\\"icon-sort-descending\\\" class=\\\"icon\\\"></md-icon></th><th \\ndata-translate>Nº de llamadas realizadas</th><th data-translate>Nº de mails enviados</th><th data-translate>\\nNº de whatsapps</th><th data-translate>Nº de tareas realizadas</th><th data-translate>Nº de seguimientos realizados\\n</th><th data-translate>Asignado a</th></tr></thead><tbody><tr data-ng-show=\\\"vm.leads.count === 0\\\"><td colspan=\\\"9\\\" \\nclass=\\\"text-center\\\" data-translate>No se han encontrado leads</td></tr><tr \\ndata-dir-paginate=\\\"lead in vm.leads.data | itemsPerPage: 10\\\" ng-click=\\\"vm.goLead(lead)\\\" class=\\\"pointer\\\" \\ndata-total-items=\\\"vm.leads.count\\\" data-current-page=\\\"vm.leads.filters.page\\\"><td>\\n{{ lead.created | date:\\'dd/MM/yyyy HH:mm\\'}}</td><td>{{ lead.modified | date:\\'dd/MM/yyyy HH:mm\\'}}</td><td>\\n{{ lead.client.name }} {{ lead.client.surname }}</td><td><span ng-repeat=\\\"status in vm.leadStatus\\\" \\nng-if=\\\"status.id===lead.status\\\">{{ status.name }}</span></td><td>{{ lead.sent_phone_call_count }}</td><td>\\n{{ lead.sent_emails_count }}</td><td>{{ lead.sent_whatsapp_count }}</td><td>{{ lead.task_count }}</td><td>\\n{{ lead.tracking_count }}</td><td>{{ lead.user_data.first_name }} {{ lead.user_data.last_name }}</td></tr></tbody>\\n</table></div></div><dir-pagination-controls max-size=\\\"5\\\" class=\\\"bottomFixed\\\"></dir-pagination-controls></div></div>\\n</md-content></div></div><md-sidenav class=\\\"filters-sidenav md-sidenav-right\\\" md-component-id=\\\"filters-sidenav\\\" \\nng-include=\\\"\\'app/main/leads/sidenavs/filters/filters-sidenav.html\\'\\\" ms-sidenav-helper></md-sidenav></div>\");\n$templateCache.put(\"app/main/leads/sidenavs/filters/filters-sidenav.html\",\"<md-toolbar class=\\\"md-accent\\\" ng-class=\\\"\\'md-\\'+vm.board.settings.color+\\'-bg\\'\\\"><div class=\\\"md-toolbar-tools\\\"><span flex \\nclass=\\\"menu-title\\\" data-translate>Filtro avanzado</span></div></md-toolbar><md-content class=\\\"\\\" ms-scroll><md-list>\\n<md-subheader class=\\\"md-no-sticky\\\" data-translate>Filtrar por fecha de alta</md-subheader><md-list-item class=\\\"label\\\">\\n<label class=\\\"mb-20\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\" data-flex><md-datepicker \\ndata-ng-model=\\\"vm.filters.created_start_date\\\" md-max-date=\\\"vm.filters.created_end_date\\\" \\nmd-placeholder=\\\"{{\\'Desde\\' | translate}}\\\"></md-datepicker></label><label class=\\\"mb-20\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"start center\\\" data-flex><md-datepicker data-ng-model=\\\"vm.filters.created_end_date\\\" \\nmd-min-date=\\\"vm.filters.created_start_date\\\" md-placeholder=\\\"{{\\'Hasta\\' | translate}}\\\"></md-datepicker></label>\\n</md-list-item><md-subheader class=\\\"md-no-sticky\\\" data-translate>Filtrar por fecha de última modificación\\n</md-subheader><md-list-item class=\\\"label\\\"><label class=\\\"mb-20\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\" \\ndata-flex><md-datepicker data-ng-model=\\\"vm.filters.date_start\\\" md-min-date=\\\"vm.minDate\\\" \\nmd-max-date=\\\"vm.filters.date_end\\\" md-placeholder=\\\"{{\\'Desde\\' | translate}}\\\"></md-datepicker></label><label \\nclass=\\\"mb-20\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\" data-flex><md-datepicker \\ndata-ng-model=\\\"vm.filters.date_end\\\" md-min-date=\\\"vm.filters.date_start\\\" md-max-date=\\\"vm.maxDate\\\" \\nmd-placeholder=\\\"{{\\'Hasta\\' | translate}}\\\"></md-datepicker></label></md-list-item><md-list-item class=\\\"label\\\"><div \\nclass=\\\"mb-10 mr-40\\\"><div translate>Rating</div><div class=\\\"mt-10 tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon\\n ng-click=\\\"vm.setScore(1)\\\" md-font-icon=\\\"{{vm.filters.score >0 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\" class=\\\"amber-fg\\\">\\n</md-icon><md-icon ng-click=\\\"vm.setScore(2)\\\" \\nmd-font-icon=\\\"{{vm.filters.score >1 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\" class=\\\"amber-fg\\\"></md-icon><md-icon \\nng-click=\\\"vm.setScore(3)\\\" md-font-icon=\\\"{{vm.filters.score >2 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\" class=\\\"amber-fg\\\">\\n</md-icon><md-icon ng-click=\\\"vm.setScore(4)\\\" \\nmd-font-icon=\\\"{{vm.filters.score >3 ? \\'icon-star\\' : \\'icon-star-outline\\'}}\\\" class=\\\"amber-fg\\\"></md-icon></div></div><div>\\n<md-chips ng-model=\\\"vm.filters.status_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete \\nplaceholder=\\\"{{\\'Estado\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"status\\\" md-no-cache=\\\"true\\\" md-min-length=\\\"0\\\" \\nmd-search-text=\\\"vm.searchTextStatus\\\" md-items=\\\"s in vm.getStatusLead()\\\" \\nmd-item-text=\\\"vm.copySearch(\\'searchTextStatus\\')\\\"><md-item-template><span md-highlight-text=\\\"vm.searchTextStatus\\\">\\n{{s.name}}</span></md-item-template></md-autocomplete><md-chip-template><span>{{$chip.name}}</span></md-chip-template>\\n</md-chips></div></md-list-item><md-list-item ng-if=\\\"vm.user.is_admin || vm.user.is_concession_admin\\\"><div \\nclass=\\\"mt-20\\\"><md-button class=\\\"md-raised md-hue-2 header-boards-button\\\" \\nng-class=\\\"{\\'md-accent\\':!vm.filters.with_concession}\\\" \\nng-click=\\\"vm.filters.with_concession=null; vm.filters.user_data=[vm.user]\\\" aria-label=\\\"Mis leads\\\"><span data-translate>\\nMis leads</span></md-button><md-button class=\\\"md-raised md-hue-2 header-boards-button\\\" \\nng-class=\\\"{\\'md-accent\\':vm.filters.with_concession}\\\" \\nng-click=\\\"vm.filters.with_concession=true; vm.filters.user_data=[]\\\" aria-label=\\\"Todos\\\"><span data-translate>Todos\\n</span></md-button></div></md-list-item><md-list-item><md-chips ng-model=\\\"vm.filters.user_data\\\" md-autocomplete-snap \\nmd-require-match=\\\"true\\\" readonly=\\\"!vm.filters.with_concession\\\"><md-autocomplete \\nplaceholder=\\\"{{\\'Usuario\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"user\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"vm.filters.user_data.length>0 ? 0:1\\\" md-search-text=\\\"vm.searchTextUser\\\" \\nmd-items=\\\"user in vm.getUsers(vm.searchTextUser)\\\" md-item-text=\\\"vm.copySearch(\\'searchTextUser\\')\\\"><md-item-template>\\n<span md-highlight-text=\\\"vm.searchTextUser\\\">{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span \\ndata-translate>No hay ningun usuario con ese nombre</span></md-not-found></md-autocomplete><md-chip-template><span>\\n{{vm.getFullUserName($chip)}}</span></md-chip-template></md-chips></md-list-item><md-list-item><md-chips \\nng-model=\\\"vm.filters.concessionaire__in_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete \\nmd-no-cache=\\\"true\\\" md-delay=\\\"300\\\" md-min-length=\\\"vm.filters.concessionaire__in_data.length>0 ? 0:1\\\" \\nmd-search-text=\\\"vm.searchTextConcessionaire\\\" \\nmd-items=\\\"concessionaire in vm.getConcessionaires(vm.searchTextConcessionaire)\\\" \\nmd-item-text=\\\"vm.copySearch(\\'searchTextConcessionaire\\')\\\" placeholder=\\\"{{\\'Concesionario\\' | translate }}\\\">\\n<md-item-template><span md-highlight-text=\\\"vm.searchTextConcessionaire\\\">{{concessionaire.name}}</span>\\n</md-item-template><md-not-found><span data-translate>No hay ningún concesionario con ese nombre</span></md-not-found>\\n</md-autocomplete><md-chip-template><span>{{$chip.name}}</span></md-chip-template></md-chips></md-list-item>\\n<md-list-item><md-chips ng-model=\\\"vm.filters.origin_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete\\n placeholder=\\\"{{\\'Origen\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"origin\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"vm.filters.origin_data.length>0 ? 0:1\\\" md-search-text=\\\"vm.searchTextOrigin\\\" \\nmd-items=\\\"origin in vm.getOrigins(vm.searchTextOrigin)\\\" md-item-text=\\\"vm.copySearch(\\'searchTextOrigin\\')\\\">\\n<md-item-template><span md-highlight-text=\\\"vm.searchTextOrigin\\\">{{origin.name}}</span></md-item-template><md-not-found>\\n<span data-translate>No hay ningún origen con ese nombre</span></md-not-found></md-autocomplete><md-chip-template>\\n<span>{{$chip.name}}</span></md-chip-template></md-chips></md-list-item><md-list-item><md-chips \\nng-model=\\\"vm.filters.channel_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete \\nplaceholder=\\\"{{\\'Canal\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"channel\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"vm.filters.channel_data.length>0 ? 0:1\\\" md-search-text=\\\"vm.searchTextChannel\\\" \\nmd-items=\\\"channel in vm.getChannels(vm.searchTextChannel)\\\" md-item-text=\\\"vm.copySearch(\\'searchTextChannel\\')\\\">\\n<md-item-template><span md-highlight-text=\\\"vm.searchTextChannel\\\">{{channel.name}}</span></md-item-template>\\n<md-not-found><span data-translate>No hay ningún canal con ese nombre</span></md-not-found></md-autocomplete>\\n<md-chip-template><span>{{$chip.name}}</span></md-chip-template></md-chips></md-list-item><md-list-item><md-chips \\nng-model=\\\"vm.filters.tasks_media_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete \\nplaceholder=\\\"{{\\'Medio\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"media\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"vm.filters.tasks_media_data.length>0 ? 0:1\\\" md-search-text=\\\"searchTextMedia\\\" \\nmd-items=\\\"media in vm.getTaskMedia(searchTextMedia)\\\" md-item-text=\\\"media.name\\\"><md-item-template><span \\nmd-highlight-text=\\\"searchTextMedia\\\">{{media.name}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ningún medio con ese nombre</span></md-not-found></md-autocomplete><md-chip-template><span>{{$chip.name}}</span>\\n</md-chip-template></md-chips></md-list-item><md-list-item><md-chips ng-model=\\\"vm.filters.brand_data\\\" \\nmd-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete placeholder=\\\"{{\\'Marca\\' | translate }}\\\" md-delay=\\\"300\\\" \\nmd-input-name=\\\"brand\\\" md-no-cache=\\\"true\\\" md-min-length=\\\"vm.filters.brand_data.length>0 ? 0:1\\\" \\nmd-search-text=\\\"vm.searchTextBrand\\\" md-items=\\\"brand in vm.getBrands(vm.searchTextBrand)\\\" \\nmd-item-text=\\\"vm.copySearch(\\'searchTextBrand\\')\\\"><md-item-template><span md-highlight-text=\\\"vm.searchTextBrand\\\">\\n{{brand.name}}</span></md-item-template><md-not-found><span data-translate>No hay ninguna marca con ese nombre</span>\\n</md-not-found></md-autocomplete><md-chip-template><span>{{$chip.name}}</span></md-chip-template></md-chips>\\n</md-list-item><md-list-item><md-input-container><label data-translate>Modelo</label><input type=\\\"text\\\" name=\\\"model\\\" \\ndata-ng-model=\\\"vm.filters.model\\\"></md-input-container></md-list-item><md-list-item><md-input-container><label \\ndata-translate>Versión</label><input type=\\\"text\\\" name=\\\"version\\\" data-ng-model=\\\"vm.filters.version\\\">\\n</md-input-container></md-list-item><md-list-item><div class=\\\"content-task\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Tipo de solicitud\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"task\\\" \\nmd-selected-item-change=\\\"vm.filters.tasks_tracing_data=[];vm.filters.tasks_type_data=[];vm.filters.overdue=null\\\" \\nmd-no-cache=\\\"true\\\" md-min-length=\\\"0\\\" md-selected-item=\\\"vm.filters.tasktype\\\" md-items=\\\"t in vm.getRequestTypes()\\\" \\nmd-item-text=\\\"t.name\\\"><md-item-template><span>{{t.name}}</span></md-item-template></md-autocomplete></div>\\n</md-list-item><md-list-item ng-if=\\\"vm.filters.tasktype.id===\\'tarea\\'\\\"><div class=\\\"content-task\\\"><md-chips \\nng-model=\\\"vm.filters.tasks_type_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete \\nplaceholder=\\\"{{\\'Tarea\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"task\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"vm.filters.tasks_type_data.length>0 ? 0:1\\\" md-search-text=\\\"vm.searchTextTask\\\" \\nmd-items=\\\"task in vm.getTaskTypes(false, vm.searchTextTask)\\\" md-item-text=\\\"vm.copySearch(\\'searchTextTask\\')\\\">\\n<md-item-template><span md-highlight-text=\\\"vm.searchTextTask\\\">{{task.name}}</span></md-item-template><md-not-found>\\n<span data-translate>No hay ninguna tarea con ese nombre</span></md-not-found></md-autocomplete><md-chip-template>\\n<span>{{$chip.name}}</span></md-chip-template></md-chips></div></md-list-item><md-list-item \\nng-if=\\\"vm.filters.tasktype.id===\\'seguimiento\\'\\\"><div class=\\\"content-task\\\"><md-chips \\nng-model=\\\"vm.filters.tasks_tracing_data\\\" md-autocomplete-snap md-require-match=\\\"true\\\"><md-autocomplete \\nplaceholder=\\\"{{\\'Seguimiento\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"task\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"vm.filters.tasks_tracing_data.length>0 ? 0:1\\\" md-search-text=\\\"vm.searchTextTask\\\" \\nmd-items=\\\"task in vm.getTaskTypes(true,vm.searchTextTask)\\\" md-item-text=\\\"vm.copySearch(\\'searchTextTask\\')\\\">\\n<md-item-template><span md-highlight-text=\\\"vm.searchTextTask\\\">{{task.name}}</span></md-item-template><md-not-found>\\n<span data-translate>No hay ningún seguimiento con ese nombre</span></md-not-found></md-autocomplete><md-chip-template>\\n<span>{{$chip.name}}</span></md-chip-template></md-chips></div></md-list-item><md-list-item \\nng-if=\\\"vm.filters.tasktype.id\\\"><div class=\\\"content-task\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Vencida\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"overdue\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"0\\\" md-selected-item=\\\"vm.filters.overdue\\\" md-items=\\\"b in vm.getBooleans()\\\" md-item-text=\\\"b.name\\\">\\n<md-item-template><span>{{b.name}}</span></md-item-template></md-autocomplete></div></md-list-item><md-list-item \\nng-if=\\\"vm.filters\\\"><md-input-container><label data-translate>Resultado</label><md-select \\ndata-ng-model=\\\"vm.filters.result\\\" name=\\\"result\\\" ng-change=\\\"vm.filters.result_reason=null\\\"><md-option \\ndata-ng-value=\\\"null\\\" data-translate>Ver todos</md-option><md-option data-ng-repeat=\\\"result in vm.results\\\" \\ndata-ng-value=\\\"result.id\\\">{{ result.name }}</md-option></md-select></md-input-container></md-list-item><md-list-item \\nng-if=\\\"vm.filters && vm.filters.result\\\"><md-input-container><label data-translate>Motivo</label><md-select \\ndata-ng-model=\\\"vm.filters.result_reason\\\" name=\\\"result_reason\\\"><md-option data-ng-value=\\\"null\\\" data-translate>Ver todos\\n</md-option><md-option data-ng-repeat=\\\"reason in vm.resultReasons[vm.filters.result]\\\" data-ng-value=\\\"reason.id\\\">\\n{{ reason.name }}</md-option></md-select></md-input-container></md-list-item><md-list-item class=\\\"mt-20\\\"><md-button \\nclass=\\\"md-accent md-raised md-hue-2 header-boards-button\\\" ng-click=\\\"vm.setFilters()\\\" aria-label=\\\"search\\\"><md-icon \\nmd-font-icon=\\\"icon-magnify\\\" class=\\\"icon\\\"></md-icon><span data-translate>Buscar</span></md-button><md-button \\nclass=\\\"md-accent md-raised md-hue-2 header-boards-button\\\" ng-click=\\\"vm.getDocument()\\\" data-debouce-click \\naria-label=\\\"Exportar\\\"><md-icon md-font-icon=\\\"icon-export\\\" class=\\\"icon\\\"></md-icon><span data-translate>Exportar</span>\\n</md-button></md-list-item></md-list></md-content>\");\n$templateCache.put(\"app/main/metrics/views/voiceservice/voiceservice.html\",\"<div id=\\\"voiceService\\\"><h2>Niveles de servicio de voz</h2><div><p class=\\\"text-bold secondary-text\\\" translate>Llamadas\\n</p><div><div class=\\\"md-accent-fg font-size-26 pl-40\\\">{{vm.voiceService.data.totales.total}}</div><div><p \\nclass=\\\"pl-40 secondary-text\\\"><span translate>No atendidas:</span>{{vm.voiceService.data.totales.no_atendidas}}</p>\\n</div></div></div><div class=\\\"llamdas-recibidas mt-40\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><p \\nclass=\\\"text-bold secondary-text\\\" translate>LLamadas Recibidas</p></div><div><md-button \\nui-sref=\\\"app.leads.list(vm.concatFilters({source__channel_id__in:1, with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\" class=\\\"md-icon-button md-primary\\\" aria-label=\\\"Percentage\\\"><md-tooltip md-delay=\\\"300\\\">Ver llamadas\\n</md-tooltip><md-icon md-font-icon=\\\"icon-eye\\\"></md-icon></md-button></div></div><div \\nng-if=\\\"!vm.metrics.loading && vm.voiceService.data.llamadas.labels.length>0\\\"><div class=\\\"card\\\" ng-init=\\\"vm.getChart()\\\">\\n<chartist class=\\\"ct-chart ct-golden-section\\\" chartist-data=\\\"vm.stackedBarChart.data\\\" chartist-chart-type=\\\"Bar\\\" \\nchartist-chart-options=\\\"vm.stackedBarChart.options\\\" chartist-events=\\\"vm.stackedBarChart.events\\\"></chartist><div \\nclass=\\\"foot\\\"><div class=\\\"item\\\"><div class=\\\"box atendidas\\\"></div><div translate>Atendidas</div></div><div class=\\\"item\\\">\\n<div class=\\\"box no-atendidas\\\"></div><div translate>No atendidas</div></div></div></div></div><md-progress-circular \\nng-if=\\\"vm.metrics.loading\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular></div><div\\n class=\\\"no-atendidas mt-40\\\"><p class=\\\"text-bold secondary-text\\\" translate>No atendidas</p><div \\nng-if=\\\"!vm.metrics.loading && vm.voiceService.data.no_atendidos\\\"><div class=\\\"card\\\" ng-init=\\\"vm.getChart()\\\"><div \\nng-if=\\\"vm.voiceService.data.no_atendidos.con_llamadas>0 || vm.voiceService.data.no_atendidos.sin_llamadas>0\\\"><chartist \\nclass=\\\"ct-chart ct-golden-section\\\" chartist-data=\\\"vm.donutChart.data\\\" chartist-chart-type=\\\"Pie\\\" \\nchartist-events=\\\"vm.donutChart.events\\\" chartist-chart-options=\\\"vm.donutChart.options\\\"></chartist></div><div \\nclass=\\\"foot\\\"><div class=\\\"item\\\"><div class=\\\"box emitidas\\\"></div><div translate class=\\\"mr-40\\\">LLamadas emitidas</div><div\\n class=\\\"mr-40\\\">{{vm.voiceService.data.no_atendidos.con_llamadas}}</div><div \\nng-if=\\\"vm.voiceService.data.no_atendidos.con_llamadas\\\">{{vm.voiceService.data.no_atendidos.con_llamadas_percentage}}%\\n</div></div><div class=\\\"item\\\"><div class=\\\"box sin-llamadas\\\"></div><div translate class=\\\"w-110 mr-40\\\">Sin llamadas</div>\\n<div class=\\\"mr-40\\\">{{vm.voiceService.data.no_atendidos.sin_llamadas}}</div><div \\nng-if=\\\"vm.voiceService.data.no_atendidos.sin_llamadas\\\">{{vm.voiceService.data.no_atendidos.sin_llamadas_percentage}}%\\n</div></div></div></div></div><md-progress-circular ng-if=\\\"vm.metrics.loading\\\" class=\\\"md-accent\\\" \\nmd-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular></div><div class=\\\"mt-40\\\"><p \\nclass=\\\"text-bold secondary-text\\\" translate>ASA llamadas perdidas</p><div ng-if=\\\"!vm.metrics.loading\\\"><div \\nclass=\\\"md-accent-fg font-size-26 pl-40\\\"><div>{{vm.voiceService.data.asa.tiempo.hour}} Horas</div><div>\\n{{vm.voiceService.data.asa.tiempo.minute}} Minutos</div><div>{{vm.voiceService.data.asa.tiempo.second}} Segundos</div>\\n</div></div><md-progress-circular ng-if=\\\"vm.metrics.loading\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" \\nmd-diameter=\\\"32\\\"></md-progress-circular></div><div class=\\\"mt-40\\\"><p class=\\\"text-bold secondary-text\\\" translate>\\nLeads atendidos en menos de una hora</p><div ng-if=\\\"!vm.metrics.loading\\\"><div class=\\\"md-accent-fg font-size-26 pl-40\\\">\\n<div>{{vm.voiceService.data.asa.menos_una_hora_percentage}}%</div></div></div><md-progress-circular \\nng-if=\\\"vm.metrics.loading\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular></div><div\\n class=\\\"users mt-40\\\"><table class=\\\"dataTable row-border hover\\\"><thead><tr><th>No atendidas asignadas a</th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({lead_managements__event:\\'outcomming_all\\', source__channel_id__in:1, with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Llamadas emitidas</a></th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({without_outgoing_calls:true, source__channel_id__in:1, with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Sin llamadas</a></th></tr></thead><tbody><tr ng-repeat=\\\"user in vm.voiceService.data.asignados\\\"><td>\\n{{user.asignado}}</td><td><span>{{user.con_llamadas}}</span></td><td><span>{{user.sin_llamadas}}</span></td></tr>\\n</tbody></table></div></div>\");\n$templateCache.put(\"app/main/metrics/views/digitalservice/digitalservice.html\",\"<div id=\\\"digitalService\\\"><h2>Niveles de servicio digital</h2><div><p class=\\\"text-bold secondary-text\\\" translate>\\nLeads digitales</p><div><div class=\\\"md-accent-fg font-size-26 pl-40\\\">{{vm.digitalService.data.totales.total}}</div>\\n<div><p class=\\\"pl-40 secondary-text\\\"><span translate>No contactados:</span>\\n{{vm.digitalService.data.totales.no_atendidas}}</p></div></div></div><div class=\\\"no-atendidas mt-40\\\"><p \\nclass=\\\"text-bold secondary-text\\\" translate>Leads canal digital con teléfono</p><div \\nng-if=\\\"!vm.metrics.loading && vm.digitalService.data.con_telefono\\\"><div class=\\\"card\\\" ng-init=\\\"vm.getChart()\\\"><div \\nng-if=\\\"vm.digitalService.data.con_telefono.con_llamadas>0 || vm.digitalService.data.con_telefono.sin_llamadas>0\\\">\\n<chartist class=\\\"ct-chart ct-golden-section\\\" chartist-data=\\\"vm.donutChartDigital.data\\\" chartist-chart-type=\\\"Pie\\\" \\nchartist-events=\\\"vm.donutChartDigital.events\\\" chartist-chart-options=\\\"vm.donutChartDigital.options\\\"></chartist></div>\\n<div class=\\\"foot\\\"><div class=\\\"item\\\"><div class=\\\"box emitidas\\\"></div><div translate class=\\\"mr-40\\\">LLamadas emitidas\\n</div><div class=\\\"mr-40\\\">{{vm.digitalService.data.con_telefono.con_llamadas}}</div><div \\nng-if=\\\"vm.digitalService.data.con_telefono.con_llamadas>0\\\">\\n{{vm.digitalService.data.con_telefono.con_llamadas_percentage}}%</div></div><div class=\\\"item\\\"><div \\nclass=\\\"box sin-llamadas\\\"></div><div translate class=\\\"w-110 mr-40\\\">Sin llamadas</div><div class=\\\"mr-40\\\">\\n{{vm.digitalService.data.con_telefono.sin_llamadas}}</div><div \\nng-if=\\\"vm.digitalService.data.con_telefono.sin_llamadas>0\\\">\\n{{vm.digitalService.data.con_telefono.sin_llamadas_percentage}}%</div></div></div></div></div><md-progress-circular \\nng-if=\\\"vm.metrics.loading\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular></div><div\\n class=\\\"mt-40\\\"><p class=\\\"text-bold secondary-text\\\" translate>ASA leads contactados telefónicamente</p><div \\nng-if=\\\"!vm.metrics.loading\\\"><div class=\\\"md-accent-fg font-size-26 pl-40\\\"><div>\\n{{vm.digitalService.data.asa.tiempo.hour}} Horas</div><div>{{vm.digitalService.data.asa.tiempo.minute}} Minutos</div>\\n<div>{{vm.digitalService.data.asa.tiempo.second}} Segundos</div></div></div><md-progress-circular \\nng-if=\\\"vm.metrics.loading\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular></div><div\\n class=\\\"mt-40\\\"><p class=\\\"text-bold secondary-text\\\" translate>Leads atendidos en menos de una hora</p><div \\nng-if=\\\"!vm.metrics.loading\\\"><div class=\\\"md-accent-fg font-size-26 pl-40\\\"><div>\\n{{vm.digitalService.data.asa.menos_una_hora_percentage}}%</div></div></div><md-progress-circular \\nng-if=\\\"vm.metrics.loading\\\" class=\\\"md-accent\\\" md-mode=\\\"indeterminate\\\" md-diameter=\\\"32\\\"></md-progress-circular></div><div\\n class=\\\"users mt-40\\\"><table class=\\\"dataTable row-border hover\\\"><thead><tr><th>Asignado a</th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({without_outgoing_calls:false, client__phone__isnull:false, source__channel_id__in:\\'2,3,7,5,9,10,11,8\\', with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Llamadas emitidas</a></th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({without_outgoing_calls:true, client__phone__isnull:false, source__channel_id__in:\\'2,3,7,5,9,10,11,8\\', with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Sin llamadas</a></th></tr></thead><tbody><tr ng-repeat=\\\"user in vm.digitalService.data.asignados\\\"><td>\\n{{user.asignado}}</td><td><span>{{user.con_llamadas}}</span></td><td><span>{{user.sin_llamadas}}</span></td></tr>\\n</tbody></table></div></div>\");\n$templateCache.put(\"app/main/metrics/views/servicelevel/servicelevel.html\",\"<div id=\\\"servicelevel\\\"><h2>Niveles de servicio</h2><div class=\\\"services mt-40 mb-40\\\"><p \\nclass=\\\"text-bold secondary-text\\\" translate>Niveles de servicio</p><div data-layout=\\\"row\\\" data-layout-wrap \\nlayout-margin=\\\"20px\\\"><div class=\\\"box\\\" ng-class=\\\"vm.getColor($index)\\\" ng-repeat=\\\"kpi in vm.servicelevel.data.kpis\\\" \\nng-if=\\\"kpi.title\\\"><div layout=\\\"row\\\" layout-align=\\\"end end\\\"><md-button \\nui-sref=\\\"app.leads.list(vm.concatFilters(kpi.filters,vm.metrics.filters))\\\" target=\\\"_blank\\\" class=\\\"md-icon-button\\\" \\naria-label=\\\"Ver leads\\\"><md-tooltip md-delay=\\\"300\\\">Ver leads</md-tooltip><md-icon md-font-icon=\\\"icon-eye\\\" \\nclass=\\\"secondary-text\\\"></md-icon></md-button></div><div class=\\\"pr-20\\\"><div><span class=\\\"number\\\">{{kpi.number}}</span> \\n<span class=\\\"percentage\\\" ng-if=\\\"kpi.number>0\\\">({{kpi.percentage}}%)</span></div><div class=\\\"title\\\">{{kpi.title}}</div>\\n</div></div></div></div></div>\");\n$templateCache.put(\"app/main/metrics/views/benchmark/benchmark.html\",\"<div id=\\\"benchmark\\\"><h2>Benchmark</h2><div class=\\\"funnel\\\" data-layout=\\\"row\\\"><div class=\\\"w-150\\\"><p \\nclass=\\\"text-bold secondary-text\\\" translate>LEAD RECIBIDO</p><p class=\\\"text-bold secondary-text\\\" translate>LEAD UTIL</p>\\n<p class=\\\"text-bold secondary-text\\\" translate>LEAD GANADOS</p></div><div class=\\\"chart\\\" flex=\\\"100\\\"><div><p \\nclass=\\\"md-accent-bg white-fg text-center\\\"><strong>{{vm.benchmark.data.funnel.lead_recibido}}</strong></p></div><div \\nclass=\\\"text-center\\\"><p style=\\\"width: {{vm.benchmark.data.funnel.lead_util_percentage}}%; display: inline-block\\\" \\nclass=\\\"mt-0 text-center\\\" ng-class=\\\"{\\'white-fg md-accent-bg\\': vm.benchmark.data.funnel.lead_util>0}\\\"><strong>\\n{{vm.benchmark.data.funnel.lead_util}}</strong> <span ng-if=\\\"vm.benchmark.data.funnel.lead_util>0\\\">\\n({{vm.benchmark.data.funnel.lead_util_percentage}}%)</span></p></div><div class=\\\"text-center\\\"><p \\nstyle=\\\"width: {{vm.benchmark.data.funnel.ganados_percentage}}%; display: inline-block\\\" class=\\\"mt-0 text-center\\\" \\nng-class=\\\"{\\'white-fg md-accent-bg\\': vm.benchmark.data.funnel.ganados>0}\\\"><strong>{{vm.benchmark.data.funnel.ganados}}\\n</strong></p><span ng-if=\\\"vm.benchmark.data.funnel.ganados>0\\\">({{vm.benchmark.data.funnel.ganados_percentage}}%)</span>\\n</div></div></div><div class=\\\"origins mt-40 mb-40\\\"><div layout=\\\"row\\\" layout-align=\\\"end end\\\"><md-button \\nng-if=\\\"vm.data_origins===\\'numbers\\'\\\" ng-click=\\\"vm.data_origins=\\'percentage\\'\\\" class=\\\"md-fab md-mini md-primary\\\" \\naria-label=\\\"Percentage\\\"><md-tooltip md-delay=\\\"300\\\">Datos porcentuales</md-tooltip><md-icon md-font-icon=\\\"icon-percent\\\" \\nclass=\\\"white-fg\\\"></md-icon></md-button><md-button ng-if=\\\"vm.data_origins!==\\'numbers\\'\\\" \\nng-click=\\\"vm.data_origins=\\'numbers\\'\\\" class=\\\"md-fab md-mini md-primary\\\" aria-label=\\\"Number\\\"><md-tooltip md-delay=\\\"300\\\">\\nDatos decimales</md-tooltip><md-icon md-font-icon=\\\"icon-numeric\\\" class=\\\"white-fg\\\"></md-icon></md-button></div><table \\nclass=\\\"dataTable row-border hover\\\"><thead><tr><th>Origen</th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({result__isnull:true, with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Abiertos</a></th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({result:\\'negative\\', with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Descartado</a></th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({result:\\'positive\\', with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Ganado</a></th><th>Total</th></tr></thead><tbody><tr ng-repeat=\\\"origin in vm.benchmark.data.origins\\\">\\n<td>{{origin.origen}}</td><td><span ng-if=\\\"vm.data_origins===\\'numbers\\'\\\">{{origin.abiertos}}</span> <span \\nng-if=\\\"vm.data_origins!==\\'numbers\\'\\\">{{origin.abiertos_percentage}}%</span></td><td><span \\nng-if=\\\"vm.data_origins===\\'numbers\\'\\\">{{origin.descartados}}</span> <span ng-if=\\\"vm.data_origins!==\\'numbers\\'\\\">\\n{{origin.descartados_percentage}}%</span></td><td><span ng-if=\\\"vm.data_origins===\\'numbers\\'\\\">{{origin.ganados}}</span> \\n<span ng-if=\\\"vm.data_origins!==\\'numbers\\'\\\">{{origin.ganados_percentage}}%</span></td><td class=\\\"total\\\">{{origin.total}}\\n</td></tr><tr><th class=\\\"total\\\">Total</th><th><span ng-if=\\\"vm.data_origins===\\'numbers\\'\\\">\\n{{vm.benchmark.data.total_origins.abiertos}}</span> <span ng-if=\\\"vm.data_origins!==\\'numbers\\'\\\">\\n{{vm.benchmark.data.total_origins.abiertos_percentage}}%</span></th><th><span ng-if=\\\"vm.data_origins===\\'numbers\\'\\\">\\n{{vm.benchmark.data.total_origins.descartados}}</span> <span ng-if=\\\"vm.data_origins!==\\'numbers\\'\\\">\\n{{vm.benchmark.data.total_origins.descartados_percentage}}%</span></th><th><span ng-if=\\\"vm.data_origins===\\'numbers\\'\\\">\\n{{vm.benchmark.data.total_origins.ganados}}</span> <span ng-if=\\\"vm.data_origins!==\\'numbers\\'\\\">\\n{{vm.benchmark.data.total_origins.ganados_percentage}}%</span></th><th>{{vm.benchmark.data.funnel.lead_recibido}}</th>\\n</tr></tbody></table></div><div class=\\\"users\\\"><div layout=\\\"row\\\" layout-align=\\\"end end\\\"><md-button \\nng-if=\\\"vm.data_users===\\'numbers\\'\\\" ng-click=\\\"vm.data_users=\\'percentage\\'\\\" class=\\\"md-fab md-mini md-primary\\\" \\naria-label=\\\"Percentage\\\"><md-tooltip md-delay=\\\"300\\\">Datos porcentuales</md-tooltip><md-icon md-font-icon=\\\"icon-percent\\\" \\nclass=\\\"white-fg\\\"></md-icon></md-button><md-button ng-if=\\\"vm.data_users!==\\'numbers\\'\\\" ng-click=\\\"vm.data_users=\\'numbers\\'\\\" \\nclass=\\\"md-fab md-mini md-primary\\\" aria-label=\\\"Number\\\"><md-tooltip md-delay=\\\"300\\\">Datos decimales</md-tooltip><md-icon \\nmd-font-icon=\\\"icon-numeric\\\" class=\\\"white-fg\\\"></md-icon></md-button></div><table class=\\\"dataTable row-border hover\\\">\\n<thead><tr><th>Asignado a</th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({result__isnull:true, with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Abiertos</a></th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({result:\\'negative\\', with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Descartado</a></th><th><a \\nui-sref=\\\"app.leads.list(vm.concatFilters({result:\\'positive\\', with_concession:true},vm.metrics.filters))\\\" \\ntarget=\\\"_blank\\\">Ganado</a></th><th>Total</th></tr></thead><tbody><tr ng-repeat=\\\"user in vm.benchmark.data.users\\\"><td>\\n{{user.asignado}}</td><td><span ng-if=\\\"vm.data_users===\\'numbers\\'\\\">{{user.abiertos}}</span> <span \\nng-if=\\\"vm.data_users!==\\'numbers\\'\\\">{{user.abiertos_percentage}}%</span></td><td><span ng-if=\\\"vm.data_users===\\'numbers\\'\\\">\\n{{user.descartados}}</span> <span ng-if=\\\"vm.data_users!==\\'numbers\\'\\\">{{user.descartados_percentage}}%</span></td><td>\\n<span ng-if=\\\"vm.data_users===\\'numbers\\'\\\">{{user.ganados}}</span> <span ng-if=\\\"vm.data_users!==\\'numbers\\'\\\">\\n{{user.ganados_percentage}}%</span></td><td class=\\\"total\\\">{{user.total}}</td></tr><tr><th class=\\\"total\\\">Total</th><th>\\n<span ng-if=\\\"vm.data_users===\\'numbers\\'\\\">{{vm.benchmark.data.total_users.abiertos}}</span> <span \\nng-if=\\\"vm.data_users!==\\'numbers\\'\\\">{{vm.benchmark.data.total_users.abiertos_percentage}}%</span></th><th><span \\nng-if=\\\"vm.data_users===\\'numbers\\'\\\">{{vm.benchmark.data.total_users.descartados}}</span> <span \\nng-if=\\\"vm.data_users!==\\'numbers\\'\\\">{{vm.benchmark.data.total_users.descartados_percentage}}%</span></th><th><span \\nng-if=\\\"vm.data_users===\\'numbers\\'\\\">{{vm.benchmark.data.total_users.ganados}}</span> <span \\nng-if=\\\"vm.data_users!==\\'numbers\\'\\\">{{vm.benchmark.data.total_users.ganados_percentage}}%</span></th><th>\\n{{vm.benchmark.data.funnel.lead_recibido}}</th></tr></tbody></table></div></div>\");\n$templateCache.put(\"app/main/sfas/views/list/sfas.html\",\"<div id=\\\"sfas\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\"></div><div \\nclass=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div\\n class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-arrange-bring-to-front\\\"></md-icon><span data-translate>Mis automatismos</span></div><div \\nclass=\\\"count secondary-text\\\"><span data-translate>Número de automatismos:</span> <span>{{vm.sfas.length}}</span></div>\\n</div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" data-layout-wrap><div data-layout=\\\"row\\\" \\ndata-layout-xs=\\\"column\\\" data-layout-align=\\\"space-between center\\\" data-layout-wrap></div><div class=\\\"actions\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"end center\\\" data-ng-if=\\\"hasPermission(\\'sfas\\',\\'POST\\')\\\"><md-button \\nclass=\\\"md-raised\\\" aria-label=\\\"{{\\'Nuevo automatísmo\\' | translate}}\\\" data-ng-click=\\\"vm.openSfaDialog($event)\\\"><md-icon \\nmd-font-icon=\\\"icon-plus-circle-outline\\\"></md-icon><span data-translate>Nuevo automatismo</span></md-button></div></div>\\n</div><div class=\\\"content-card\\\" data-layout=\\\"column\\\" data-flex><md-content class=\\\"content p-20\\\" flex ms-scroll><div \\nlayout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div class=\\\"no-results text-center\\\" ng-if=\\\"vm.sfas.length == 0\\\"><div\\n class=\\\"message\\\"><md-icon class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-arrange-bring-to-front\\\"></md-icon><div \\nclass=\\\"message-text\\\" translate>Sin automatismos</div></div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-repeat=\\\"sfa in vm.sfas\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><div \\nclass=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" layout-align=\\\"space-between center\\\"><div \\nlayout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"title\\\"><span ng-repeat=\\\"c in vm.channels\\\" \\nng-if=\\\"c.id===sfa.channel\\\">Canal: {{c.name}}</span></div><div class=\\\"title\\\"><span ng-repeat=\\\"e in vm.events\\\" \\nng-if=\\\"e.id===sfa.event\\\">Evento: {{e.name}}</span></div><div><p>{{sfa.text}}</p></div></div></div><div layout=\\\"row\\\" \\nlayout-align=\\\"end center\\\"><md-button data-layout=\\\"column\\\" class=\\\"md-warn\\\" data-layout-align=\\\"start center\\\" \\ndata-ng-if=\\\"hasPermission(\\'sfas\\',\\'DELETE\\')\\\" ng-click=\\\"vm.removeSfa($index, sfa)\\\"><md-icon class=\\\"pt-5\\\" \\ntitle=\\\"{{\\'Eliminar\\' | translate}}\\\" md-font-icon=\\\"icon-delete\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Eliminar\\n</span></md-button></div></div></div></div></div></div></md-content></div></div></div>\");\n$templateCache.put(\"app/main/sfas/dialogs/sfa/sfa-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"userForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><div \\nng-repeat=\\\"item in vm.user.sfa_configurations\\\" ng-if=\\\"!item.id\\\" class=\\\"bb mb-20\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><div flex=\\\"80\\\" layout=\\\"column\\\"><md-input-container \\nng-init=\\\"name=\\'sfa_configurations___\\'+$index+\\'___channel\\'\\\"><label data-translate>Canal</label><md-select \\nng-model=\\\"item.channel\\\" name=\\\"{{name}}\\\" required><md-option ng-repeat=\\\"channel in vm.channels\\\" ng-value=\\\"channel.id\\\">\\n{{channel.name}}</md-option></md-select><error-messages field=\\\"userForm[name]\\\" server-errors=\\\"vm.serverErrors\\\" \\nrequired></error-messages></md-input-container><md-input-container \\nng-init=\\\"name=\\'sfa_configurations___\\'+$index+\\'___event\\'\\\"><label data-translate>Evento</label><md-select \\nng-model=\\\"item.event\\\" name=\\\"{{name}}\\\" required><md-option ng-repeat=\\\"event in vm.events\\\" ng-value=\\\"event.id\\\">\\n{{event.name}}</md-option></md-select><error-messages field=\\\"userForm[name]\\\" server-errors=\\\"vm.serverErrors\\\" required>\\n</error-messages></md-input-container><md-input-container ng-init=\\\"name=\\'sfa_configurations___\\'+$index+\\'___text\\'\\\">\\n<input type=\\\"text\\\" name=\\\"{{name}}\\\" data-ng-model=\\\"item.text\\\" placeholder=\\\"{{\\'Comunicado\\' | translate}}\\\" required>\\n<error-messages field=\\\"userForm[name]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div>\\n</div></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.saveUser()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"userForm.$invalid || userForm.$pristine\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>\\nGuardar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/origins/dialogs/origin/origin-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"originForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><md-input-container flex=\\\"100\\\"><input \\ntype=\\\"text\\\" name=\\\"name\\\" data-ng-model=\\\"vm.origin.name\\\" placeholder=\\\"{{\\'Nombre\\' | translate}}\\\" required md-autofocus>\\n<error-messages field=\\\"originForm.name\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container>\\n<md-input-container><label data-translate>Canales permitidos</label><md-select ng-model=\\\"vm.origin.available_channels\\\" \\nmultiple=\\\"multiple\\\"><md-option ng-repeat=\\\"channel in vm.channels\\\" ng-value=\\\"channel.id\\\">{{channel.name}}</md-option>\\n</md-select></md-input-container><p data-translate>Icono:</p><md-input-container flex=\\\"100\\\" class=\\\"mt-0\\\"><md-button \\nng-click=\\\"vm.openFiles(originForm)\\\" class=\\\"md-accent md-raised\\\" aria-label=\\\"{{\\'Añadir icono\\' | translate}}\\\"><span \\nng-if=\\\"!vm.origin.icon\\\" data-translate>Añadir icono</span> <span ng-if=\\\"vm.origin.icon\\\" data-translate>Editar icono\\n</span></md-button><input type=\\\"file\\\" id=\\\"image-uploader\\\" name=\\\"icon\\\" data-ng-model=\\\"vm.origin.icon\\\" ng-show=\\\"false\\\">\\n<error-messages field=\\\"originForm.icon\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container>\\n<div><img ng-if=\\\"vm.origin.icon\\\" ng-src=\\\"{{ vm.origin.icon }}\\\"></div></div></md-dialog-content><md-dialog-actions \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\">\\n<md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveOrigin()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"originForm.$invalid || originForm.$pristine\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span \\ndata-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/tasks/dialogs/task/appraisal.html\",\"<div layout=\\\"column\\\"><md-input-container ng-init=\\\"nameBrand_model=\\'appraisal___brand_model\\'\\\"><label data-translate>\\nMarca/Modelo</label><input type=\\\"text\\\" name=\\\"{{ nameBrand_model }}\\\" data-ng-model=\\\"vm.task.appraisal.brand_model\\\">\\n<error-messages field=\\\"taskForm[nameBrand_model]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container ng-init=\\\"nameLicense_plate=\\'appraisal___license_plate\\'\\\"><label data-translate>\\nMatrícula</label><input type=\\\"text\\\" name=\\\"{{ nameLicense_plate }}\\\" data-ng-model=\\\"vm.task.appraisal.license_plate\\\">\\n<error-messages field=\\\"taskForm[nameLicense_plate]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container ng-init=\\\"nameKm=\\'appraisal___km\\'\\\"><label data-translate>Km</label><input \\ntype=\\\"text\\\" name=\\\"{{ nameKm }}\\\" data-ng-model=\\\"vm.task.appraisal.km\\\"><error-messages field=\\\"taskForm[nameKm]\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container \\nng-init=\\\"nameYear=\\'appraisal___year\\'\\\"><label data-translate>Año</label><input type=\\\"text\\\" name=\\\"{{ nameYear }}\\\" \\ndata-ng-model=\\\"vm.task.appraisal.year\\\"><error-messages field=\\\"taskForm[nameYear]\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container ng-init=\\\"nameGas=\\'appraisal___gas\\'\\\"><label data-translate>\\nCombustible</label><md-select name=\\\"{{ nameGas }}\\\" data-ng-model=\\\"vm.task.appraisal.gas\\\"><md-option \\ndata-ng-repeat=\\\"gas in vm.gasTypes.data\\\" data-ng-value=\\\"gas.id\\\">{{gas.name}}</md-option></md-select><error-messages \\nfield=\\\"taskForm[nameGas]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container \\nng-init=\\\"nameExtras=\\'appraisal___extras\\'\\\"><label data-translate>Extras</label><input type=\\\"text\\\" \\nname=\\\"{{ nameExtras }}\\\" data-ng-model=\\\"vm.task.appraisal.extras\\\"><error-messages field=\\\"taskForm[nameExtras]\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container \\nng-init=\\\"nameOrigin=\\'appraisal___origin\\'\\\"><label data-translate>Origen</label><md-select \\ndata-ng-model=\\\"vm.task.appraisal.origin\\\" name=\\\"{{ nameOrigin }}\\\"><md-option data-ng-repeat=\\\"origin in vm.origins\\\" \\ndata-ng-value=\\\"origin.id\\\">{{origin.name}}</md-option></md-select><error-messages field=\\\"form[nameOrigin]\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><div data-layout-xs=\\\"column\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\"><md-input-container flex=\\\"100\\\" \\nng-init=\\\"nameAppraisal=\\'appraisal\\'\\\"><input type=\\\"hidden\\\" name=\\\"{{ nameAppraisal }}\\\" data-ng-model=\\\"vm.task.appraisal\\\">\\n<error-messages field=\\\"form[nameAppraisal]\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n</div></div>\");\n$templateCache.put(\"app/main/tasks/dialogs/task/task-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"taskForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{ vm.title }}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><label data-translate \\nstyle=\\\"color: rgba(0, 0, 0, 0.54);font-size: 13px\\\">Fecha</label><div><md-datepicker name=\\\"date\\\" \\ndata-ng-model=\\\"vm.task.planified_realization_date\\\" style=\\\"margin-bottom: 14px\\\" md-placeholder=\\\"dd/mm/yyyy\\\">\\n</md-datepicker><md-icon md-font-icon=\\\"icon-clock\\\" class=\\\"s16\\\"></md-icon><input class=\\\"mb-10\\\" type=\\\"time\\\" \\ndata-ng-model=\\\"vm.task.datetime\\\" md-placeholder=\\\"hh:mm\\\" step=\\\"60\\\"><error-messages field=\\\"taskForm.date\\\" \\nserver-errors=\\\"vm.serverErrors\\\" forcechange></error-messages></div><md-input-container><label data-translate>Tipo\\n</label><md-select data-ng-model=\\\"vm.task.type\\\" name=\\\"type\\\" required><md-option \\ndata-ng-repeat=\\\"taskType in vm.taskTypes\\\" data-ng-value=\\\"taskType.key\\\">{{ taskType.name }}</md-option></md-select>\\n<error-messages field=\\\"taskForm.type\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container>\\n<md-input-container><label data-translate>Descripción</label><input type=\\\"text\\\" data-ng-model=\\\"vm.task.description\\\" \\nname=\\\"description\\\"><error-messages field=\\\"taskForm.description\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container><label class=\\\"md-container-ignore md-no-float\\\" data-translate>Medio</label>\\n<div layout=\\\"row\\\"><div class=\\\"p-10 pointer w-70 h-70\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" \\nng-class=\\\"{\\'border\\':vm.task.media===\\'Whatsapp\\'}\\\" ng-click=\\\"vm.task.media=\\'Whatsapp\\'\\\"><md-icon \\nmd-font-icon=\\\"icon-whatsapp s40\\\"></md-icon></div><div class=\\\"p-10 pointer w-70 h-70\\\" layout=\\\"column\\\" \\nlayout-align=\\\"center center\\\" ng-class=\\\"{\\'border\\':vm.task.media===\\'Phone\\'}\\\" ng-click=\\\"vm.task.media=\\'Phone\\'\\\"><md-icon \\nmd-font-icon=\\\"icon-phone s40\\\"></md-icon></div><div class=\\\"p-10 pointer w-70 h-70\\\" layout=\\\"column\\\" \\nlayout-align=\\\"center center\\\" ng-class=\\\"{\\'border\\':vm.task.media===\\'SMS\\'}\\\" ng-click=\\\"vm.task.media=\\'SMS\\'\\\"><md-icon \\nmd-font-icon=\\\"icon-message-text-outline s30\\\"></md-icon><span class=\\\"font-size-12\\\">SMS</span></div><div \\nclass=\\\"p-10 pointer w-70 h-70\\\" layout=\\\"column\\\" layout-align=\\\"center center\\\" \\nng-class=\\\"{\\'border\\':vm.task.media===\\'E-mail\\'}\\\" ng-click=\\\"vm.task.media=\\'E-mail\\'\\\"><md-icon \\nmd-font-icon=\\\"icon-email s40\\\"></md-icon></div><div class=\\\"p-10 pointer w-70 h-70\\\" layout=\\\"column\\\" \\nlayout-align=\\\"center center\\\" ng-class=\\\"{\\'border\\':vm.task.media===\\'face\\'}\\\" ng-click=\\\"vm.task.media=\\'face\\'\\\"><md-icon \\nmd-font-icon=\\\"icon-account-multiple s40\\\"></md-icon></div></div><input type=\\\"hidden\\\" data-ng-model=\\\"vm.task.media\\\" \\nname=\\\"media\\\"><error-messages field=\\\"taskForm.media\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><div class=\\\"fullwidth\\\" ng-if=\\\"vm.task.type===\\'appraisal\\' && false\\\" \\nng-include=\\\"\\'app/main/tasks/dialogs/task/appraisal.html\\'\\\"></div></div></md-dialog-content><md-dialog-actions \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\">\\n<md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveTask()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"taskForm.$invalid\\\" aria-label=\\\"{{ \\'Guardar\\' | translate }}\\\"><span data-translate>Guardar</span>\\n</md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/users/dialogs/available/available-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"availableForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><md-input-container><label data-translate>\\nMotivo</label><md-select data-ng-model=\\\"vm.form.unavailable_reason\\\" name=\\\"unavailable_reason\\\" required><md-option \\ndata-ng-repeat=\\\"reason in vm.reasons\\\" data-ng-value=\\\"reason.id\\\">{{ reason.name }}</md-option></md-select>\\n<error-messages field=\\\"taskForm.unavailable_reason\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div></md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button \\ndata-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.saveAvailable()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"availableForm.$invalid || availableForm.$pristine\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span \\ndata-translate>Guardar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/users/dialogs/user/user-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\"><form name=\\\"userForm\\\" class=\\\"md-inline-form\\\" novalidate>\\n<md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button class=\\\"md-icon-button\\\" \\ndata-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\"></md-icon></md-button>\\n</div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><div data-layout=\\\"row\\\" \\ndata-layout-align=\\\"space-between start\\\"><md-input-container flex=\\\"45\\\"><input type=\\\"text\\\" name=\\\"first_name\\\" \\ndata-ng-model=\\\"vm.user.first_name\\\" placeholder=\\\"{{\\'Nombre\\' | translate}}\\\" required md-autofocus><error-messages \\nfield=\\\"userForm.first_name\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container>\\n<md-input-container flex=\\\"45\\\"><input type=\\\"text\\\" name=\\\"last_name\\\" data-ng-model=\\\"vm.user.last_name\\\" \\nplaceholder=\\\"{{\\'Apellidos\\' | translate}}\\\"><error-messages field=\\\"userForm.last_name\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container></div><div><span translate>Asignar por defecto</span><div layout=\\\"row\\\">\\n<md-input-container data-layout=\\\"column\\\" flex=\\\"50\\\" class=\\\"mt-0\\\"><md-checkbox ng-model=\\\"vm.user.lost_calls\\\" \\naria-label=\\\"{{\\'Llamadas perdidas\\' | translate}}\\\" class=\\\"md-align-top-left no-margin\\\" flex><span data-translate>\\nLlamadas perdidas</span></md-checkbox></md-input-container><md-input-container data-layout=\\\"column\\\" flex=\\\"50\\\" \\nclass=\\\"mt-0\\\"><md-checkbox ng-model=\\\"vm.user.emails_received\\\" aria-label=\\\"{{\\'Mails recibidos\\' | translate}}\\\" \\nclass=\\\"md-align-top-left no-margin\\\" flex><span data-translate>Mails recibidos</span></md-checkbox></md-input-container>\\n</div></div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between start\\\"><md-input-container flex=\\\"45\\\"><label \\ndata-translate>Contraseña</label><input type=\\\"password\\\" name=\\\"password\\\" data-ng-model=\\\"vm.user.password\\\">\\n<error-messages field=\\\"userForm.password\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container flex=\\\"45\\\"><input match-password=\\\"password\\\" type=\\\"password\\\" name=\\\"repeat_password\\\" \\nng-model=\\\"vm.user.repeat_password\\\" placeholder=\\\"Repite la contraseña\\\"><error-messages field=\\\"userForm.repeat_password\\\" \\nserver-errors=\\\"vm.serverErrors\\\" password-match></error-messages></md-input-container></div><md-input-container \\nflex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"email\\\" data-ng-model=\\\"vm.user.email\\\" placeholder=\\\"{{\\'Email\\' | translate}}\\\" \\nrequired> <span class=\\\"hint\\\" data-translate>Se usará para acceder al sistema</span><error-messages \\nfield=\\\"userForm.email\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container>\\n<md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"phone\\\" data-ng-model=\\\"vm.user.phone\\\" \\nplaceholder=\\\"{{\\'Teléfono\\' | translate}}\\\"><error-messages field=\\\"userForm.phone\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"ddi_whatsapp_business\\\" \\ndata-ng-model=\\\"vm.user.ddi_whatsapp_business\\\" placeholder=\\\"{{\\'DDis WhatsApp Business\\' | translate}}\\\"><error-messages \\nfield=\\\"userForm.ddi_whatsapp_business\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container>\\n<md-input-container flex=\\\"100\\\"><input type=\\\"text\\\" name=\\\"ubunet_company\\\" data-ng-model=\\\"vm.user.ubunet_company\\\" \\nplaceholder=\\\"{{\\'PBX Empresa\\' | translate}}\\\"><error-messages field=\\\"userForm.ubunet_company\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container flex=\\\"100\\\"><input \\ntype=\\\"text\\\" name=\\\"ubunet_extension\\\" data-ng-model=\\\"vm.user.ubunet_extension\\\" \\nplaceholder=\\\"{{\\'PBX Extension\\' | translate}}\\\"><error-messages field=\\\"userForm.ubunet_extension\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container flex=\\\"100\\\"><input \\ntype=\\\"text\\\" name=\\\"ubunet_agent\\\" data-ng-model=\\\"vm.user.ubunet_agent\\\" placeholder=\\\"{{\\'PBX Agente\\' | translate}}\\\">\\n<error-messages field=\\\"userForm.ubunet_agent\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><p \\ndata-translate>Concesionarios a los que pertenece:</p><div ng-repeat=\\\"item in vm.user.related_concessionaires\\\" \\nng-init=\\\"name=\\'related_concessionaires___\\'+$index+\\'___concessionaire\\'\\\" layout=\\\"row\\\" \\nlayout-align=\\\"space-between center\\\"><div flex=\\\"80\\\"><div><md-autocomplete \\nmd-floating-label=\\\"{{\\'Concesionario\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"{{ name }}\\\" md-no-cache=\\\"true\\\" \\nmd-min-length=\\\"0\\\" flex=\\\"100\\\" md-selected-item=\\\"item.concessionaire_data\\\" md-search-text=\\\"searchTextConcessionaire\\\" \\nmd-items=\\\"concessionaire in vm.getConcessionaires(searchTextConcessionaire)\\\" md-item-text=\\\"concessionaire.name\\\">\\n<md-item-template><span md-highlight-text=\\\"searchTextConcessionaire\\\">{{concessionaire.name}}</span></md-item-template>\\n<md-not-found><span data-translate>No hay ningún concesionario con ese nombre</span></md-not-found></md-autocomplete>\\n<md-input-container flex=\\\"100\\\" class=\\\"no-margin\\\" ng-show=\\\"vm.serverErrors\\\"><error-messages field=\\\"userForm[name]\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><div layout=\\\"row\\\" class=\\\"mb-20\\\">\\n<md-input-container data-layout=\\\"column\\\" flex=\\\"50\\\" class=\\\"mt-0\\\"><md-checkbox ng-model=\\\"item.is_concessionaire_admin\\\" \\naria-label=\\\"{{\\'Es administrador del concesionario\\' | translate}}\\\" class=\\\"md-align-top-left no-margin\\\" flex><span \\ndata-translate>Es administrador del concesionario</span></md-checkbox></md-input-container><md-input-container \\ndata-layout=\\\"column\\\" flex=\\\"50\\\" class=\\\"mt-0\\\"><md-checkbox ng-model=\\\"item.is_business_manager\\\" \\naria-label=\\\"{{\\'Es gestor del concesionario\\' | translate}}\\\" class=\\\"md-align-top-left no-margin\\\" flex><span \\ndata-translate>Es gestor del concesionario</span></md-checkbox></md-input-container></div></div><div flex=\\\"20\\\" \\nlayout=\\\"row\\\" layout-align=\\\"center center\\\"><md-button ng-click=\\\"vm.removeConcessionaire($index,userForm, item)\\\" \\ndata-debouce-click class=\\\"md-fab md-mini md-warn\\\" aria-label=\\\"{{\\'Borrar\\' | translate}}\\\"><md-icon \\nmd-font-icon=\\\"icon-delete\\\"></md-icon></md-button></div></div><div><md-button ng-click=\\\"vm.addConcessionaire()\\\" \\nclass=\\\"md-accent md-raised\\\" aria-label=\\\"{{\\'Añadir concesionario\\' | translate}}\\\"><span data-translate>\\nAñadir concesionario</span></md-button></div><p data-translate>SFA</p><div \\nng-repeat=\\\"item in vm.user.sfa_configurations\\\" class=\\\"bb mb-20\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div \\nflex=\\\"80\\\" layout=\\\"column\\\"><md-input-container ng-init=\\\"name=\\'sfa_configurations___\\'+$index+\\'___channel\\'\\\"><label \\ndata-translate>Canal</label><md-select ng-model=\\\"item.channel\\\" name=\\\"{{name}}\\\" required><md-option \\nng-repeat=\\\"channel in vm.channels\\\" ng-value=\\\"channel.id\\\">{{channel.name}}</md-option></md-select><error-messages \\nfield=\\\"userForm[name]\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container>\\n<md-input-container ng-init=\\\"name=\\'sfa_configurations___\\'+$index+\\'___event\\'\\\"><label data-translate>Evento</label>\\n<md-select ng-model=\\\"item.event\\\" name=\\\"{{name}}\\\" required><md-option ng-repeat=\\\"event in vm.events\\\" \\nng-value=\\\"event.id\\\">{{event.name}}</md-option></md-select><error-messages field=\\\"userForm[name]\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container><md-input-container \\nng-init=\\\"name=\\'sfa_configurations___\\'+$index+\\'___text\\'\\\"><input type=\\\"text\\\" name=\\\"{{name}}\\\" data-ng-model=\\\"item.text\\\" \\nplaceholder=\\\"{{\\'Comunicado\\' | translate}}\\\" required><error-messages field=\\\"userForm[name]\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container></div><div flex=\\\"20\\\" layout=\\\"row\\\" \\nlayout-align=\\\"center center\\\"><md-button ng-click=\\\"vm.removeSFA($index,userForm, item)\\\" data-debouce-click \\nclass=\\\"md-fab md-mini md-warn\\\" aria-label=\\\"{{\\'Borrar\\' | translate}}\\\"><md-icon md-font-icon=\\\"icon-delete\\\"></md-icon>\\n</md-button></div></div><div><md-button ng-click=\\\"vm.addSFA()\\\" class=\\\"md-accent md-raised\\\" \\naria-label=\\\"{{\\'Añadir SFA\\' | translate}}\\\"><span data-translate>Añadir SFA</span></md-button></div></div>\\n</md-dialog-content><md-dialog-actions data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-button data-debouce-click type=\\\"submit\\\" \\ndata-ng-click=\\\"vm.saveUser()\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"userForm.$invalid || userForm.$pristine\\\" aria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>\\nGuardar</span></md-button></div></md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/users/dialogs/leadByUser/leadByUser-dialog.html\",\"<md-dialog class=\\\"task-dialog\\\" aria-label=\\\"New Task\\\" id=\\\"leadByUser\\\"><form name=\\\"leadByUserForm\\\" \\nclass=\\\"md-inline-form\\\" novalidate><md-toolbar class=\\\"md-accent md-hue-2\\\"><div class=\\\"md-toolbar-tools\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><span class=\\\"title\\\">{{vm.title}}</span><md-button \\nclass=\\\"md-icon-button\\\" data-ng-click=\\\"vm.closeDialog()\\\"><md-icon md-font-icon=\\\"icon-close\\\" aria-label=\\\"Close dialog\\\">\\n</md-icon></md-button></div></md-toolbar><md-dialog-content ms-scroll><div data-layout=\\\"column\\\"><md-content><md-tabs \\nmd-dynamic-height md-border-bottom><md-tab label=\\\"{{ concessionaire.name }}\\\" \\nng-repeat=\\\"concessionaire in vm.concessionaires\\\"><md-content class=\\\"md-padding\\\"><div class=\\\"todo-item\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-repeat=\\\"lead in concessionaire.leads\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nflex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\"><div><div class=\\\"title\\\"><md-icon md-font-icon=\\\"icon-car\\\" \\nclass=\\\"s16\\\"></md-icon>{{lead.vehicle_name}}</div><div class=\\\"tags\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\" \\nlayout-wrap><div layout=\\\"column\\\" layout-align=\\\"start start\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" class=\\\"mb-5\\\" \\nng-if=\\\"lead.client_name\\\"><md-icon md-font-icon=\\\"icon-account\\\" class=\\\"s16\\\"></md-icon><div class=\\\"tag-label\\\"><span>\\n<strong translate>Cliente:</strong> {{lead.client_name}}</span></div></div><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-if=\\\"lead.client_phone\\\"><md-icon md-font-icon=\\\"icon-phone\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"tag-label\\\"><span><strong translate>Teléfono:</strong> {{lead.client_phone}}</span></div></div></div></div></div>\\n</div></div></div></div><div class=\\\"mt-20\\\"><md-autocomplete md-floating-label=\\\"{{\\'Comercial\\' | translate }}\\\" \\nmd-delay=\\\"300\\\" md-input-name=\\\"user\\\" md-no-cache=\\\"true\\\" required md-selected-item=\\\"concessionaire.user_data\\\" \\nmd-search-text=\\\"searchTextUser\\\" md-items=\\\"user in vm.getUsers(searchTextUser,concessionaire.id)\\\" md-min-length=\\\"3\\\" \\nmd-item-text=\\\"vm.getFullUserName(user)\\\"><md-item-template><span md-highlight-text=\\\"searchTextUser\\\">\\n{{vm.getFullUserName(user)}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ningun comercial con ese nombre</span></md-not-found></md-autocomplete><md-button data-debouce-click \\ndata-ng-click=\\\"vm.reasign(concessionaire)\\\" class=\\\"send-button md-accent md-raised\\\" \\ndata-ng-disabled=\\\"!concessionaire.user_data\\\" aria-label=\\\"{{\\'Reasignar\\' | translate}}\\\"><span data-translate>Reasignar\\n</span></md-button></div></md-content></md-tab></md-tabs><div data-ng-show=\\\"!vm.isFormDisabled()\\\"><p translate>\\nYa puede realizar la baja del usuario</p></div></md-content></div></md-dialog-content><md-dialog-actions \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\"><div data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\">\\n<md-button data-debouce-click type=\\\"submit\\\" data-ng-click=\\\"vm.toggleActive(vm.user)\\\" \\nclass=\\\"send-button md-accent md-raised\\\" data-ng-disabled=\\\"vm.isFormDisabled()\\\" \\naria-label=\\\"{{\\'Dar de baja\\' | translate}}\\\"><span data-translate>Dar de baja</span></md-button></div>\\n</md-dialog-actions></form></md-dialog>\");\n$templateCache.put(\"app/main/users/views/list/users.html\",\"<div id=\\\"users\\\" class=\\\"page-layout carded fullwidth\\\" data-layout=\\\"row\\\"><div class=\\\"top-bg md-accent-bg\\\"></div><div \\nclass=\\\"center\\\" data-layout=\\\"column\\\" data-flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div\\n class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\">\\n<md-icon md-font-icon=\\\"icon-account\\\"></md-icon><span data-translate>Usuarios</span></div><div \\nclass=\\\"count secondary-text\\\"><span data-translate>Número de usuarios:</span> <span>{{vm.users.count}}</span></div>\\n</div><div data-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" data-layout-wrap><div data-layout=\\\"row\\\" \\ndata-layout-xs=\\\"column\\\" data-layout-align=\\\"space-between center\\\" data-layout-wrap><label class=\\\"search\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"start center\\\" data-flex><span data-hide-xs data-hide-gt-xs data-translate>Buscar\\n</span><md-icon md-font-icon=\\\"icon-magnify\\\" class=\\\"white-text icon search-icon\\\"></md-icon><input class=\\\"search-input\\\" \\ntype=\\\"text\\\" placeholder=\\\"{{\\'Buscar\\' | translate }}\\\" data-ng-model=\\\"vm.users.filters.search\\\" data-flex></label><div \\nclass=\\\"search-autocomplete\\\" data-layout=\\\"row\\\" data-layout-align=\\\"start center\\\"><md-autocomplete \\nmd-floating-label=\\\"{{\\'Concesión\\' | translate }}\\\" md-delay=\\\"300\\\" md-input-name=\\\"concessionaire\\\" md-no-cache=\\\"true\\\" \\nng-disabled=\\\"vm.isDisabled()\\\" flex=\\\"90\\\" md-selected-item=\\\"vm.users.filters.concessionaire_data\\\" \\nmd-search-text=\\\"searchTextConcessionaire\\\" md-items=\\\"concessionaire in vm.getConcessionaires(searchTextConcessionaire)\\\" \\nmd-min-length=\\\"3\\\" md-item-text=\\\"concessionaire.name\\\"><md-item-template><span \\nmd-highlight-text=\\\"searchTextConcessionaire\\\">{{concessionaire.name}}</span></md-item-template><md-not-found><span \\ndata-translate>No hay ningún concesionario con ese teléfono</span></md-not-found></md-autocomplete></div><div \\nclass=\\\"search pt-20 mr-20\\\"><md-select data-ng-model=\\\"vm.users.filters.online\\\" \\nplaceholder=\\\"{{ \\'Conexión\\' | translate }}\\\"><md-option data-ng-value=\\\"\\\"><span data-translate>Indiferente</span>\\n</md-option><md-option data-ng-value=\\\"true\\\"><span data-translate>Conectados</span></md-option><md-option \\ndata-ng-value=\\\"false\\\"><span data-translate>Desconectados</span></md-option></md-select></div><div \\nclass=\\\"search pt-20 mr-20\\\"><md-select data-ng-model=\\\"vm.users.filters.is_active\\\" \\nplaceholder=\\\"{{ \\'Estado\\' | translate }}\\\"><md-option data-ng-value=\\\"\\\"><span data-translate>Indiferente</span>\\n</md-option><md-option data-ng-value=\\\"true\\\"><span data-translate>Activos</span></md-option><md-option \\ndata-ng-value=\\\"false\\\"><span data-translate>Dados de baja</span></md-option></md-select></div></div><div \\nclass=\\\"actions\\\" data-layout=\\\"row\\\" data-layout-align=\\\"end center\\\" data-ng-if=\\\"hasPermission(\\'users\\',\\'POST\\')\\\"><md-button \\nclass=\\\"md-raised\\\" aria-label=\\\"{{\\'Nuevo concesionario\\' | translate}}\\\" data-ng-click=\\\"vm.openUserDialog($event)\\\"><md-icon\\n md-font-icon=\\\"icon-plus-circle-outline\\\"></md-icon><span data-translate>Nuevo usuario</span></md-button></div></div>\\n</div><div class=\\\"content-card\\\" data-layout=\\\"column\\\" data-flex><md-content class=\\\"content p-20\\\" flex ms-scroll><div \\nlayout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div class=\\\"no-results text-center\\\" ng-if=\\\"vm.users.count == 0\\\"><div\\n class=\\\"message\\\"><md-icon class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-account\\\"></md-icon><div class=\\\"message-text\\\" \\ntranslate>Sin usuarios</div></div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\ndata-dir-paginate=\\\"user in vm.users.data | itemsPerPage: 10 | orderBy:\\'order\\'\\\" data-total-items=\\\"vm.users.count\\\" \\ndata-current-page=\\\"vm.users.filters.page\\\" ng-class=\\\"{\\'red-100-bg\\':!user.is_active}\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" flex><div class=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" \\nlayout-align=\\\"space-between center\\\"><div layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><span \\nclass=\\\"avatar-wrapper mr-20\\\"><img data-md-menu-align-target class=\\\"avatar\\\" src=\\\"assets/images/avatars/profile.jpg\\\" \\nalt=\\\"Imágen de perfil\\\"><md-icon ng-if=\\\"user.session.online\\\" md-font-icon ng-style=\\\"{\\'color\\': \\'#4CAF50\\' }\\\" \\nclass=\\\"icon icon-checkbox-marked-circle status s16\\\"></md-icon><md-icon ng-if=\\\"!user.session.online\\\" md-font-icon \\nng-style=\\\"{\\'color\\': \\'#F44336\\' }\\\" class=\\\"icon icon-minus-circle status s16\\\"></md-icon></span><div><div class=\\\"mb-5\\\">\\n<span class=\\\"title\\\">{{user.first_name}} {{user.last_name}}</span> <span class=\\\"ml-10\\\"><span \\nclass=\\\"text-boxed m-0 green-bg white-fg\\\" ng-show=\\\"user.is_admin\\\" data-translate>Super Administrador</span> <span \\nclass=\\\"text-boxed m-0 green-bg white-fg\\\" ng-show=\\\"user.is_concession_admin\\\" data-translate>\\nAdministrador de concesionario</span> <span class=\\\"text-boxed m-0 green-bg white-fg\\\" \\nng-show=\\\"user.is_business_manager\\\" data-translate>Gestor comercial</span></span></div><div class=\\\"tags\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" layout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon \\nmd-font-icon=\\\"icon-email\\\" class=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\">{{user.email}}</div></div></div><div \\nclass=\\\"tags\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-repeat=\\\"concessionaire in user.related_concessionaires\\\"><md-icon \\nmd-font-icon=\\\"icon-car\\\" class=\\\"s16\\\"></md-icon><div class=\\\"ml-10 tag-label\\\">{{concessionaire.concessionaire_data.name}}\\n</div></div></div><div class=\\\"mt-10\\\"><span class=\\\"text-boxed m-0 green-bg white-fg\\\" ng-if=\\\"user.user_activation_date\\\" \\ndata-translate>Activado el {{ user.user_activation_date | date:\\'dd/MM/yyyy\\' }} </span><span \\nclass=\\\"text-boxed m-0 red-bg white-fg\\\" ng-if=\\\"user.user_deactivation_date\\\" data-translate>\\nDesactivado el {{ user.user_deactivation_date | date:\\'dd/MM/yyyy\\' }}</span></div></div></div><div layout=\\\"row\\\" \\nlayout-align=\\\"end center\\\"><md-button data-layout=\\\"column\\\" class=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" \\ndata-ng-if=\\\"hasPermission(\\'users\\',\\'PATCH\\')\\\" data-ng-click=\\\"vm.openUserDialog($event, user)\\\"><md-icon class=\\\"pt-5\\\" \\ntitle=\\\"{{\\'Editar\\' | translate}}\\\" md-font-icon=\\\"icon-pencil\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Editar</span>\\n</md-button><md-button data-layout=\\\"column\\\" class=\\\"md-warn\\\" data-layout-align=\\\"start center\\\" data-debouce-click \\ndata-ng-if=\\\"user.is_active && (vm.user.is_concession_admin || vm.user.is_admin)\\\" data-ng-click=\\\"vm.toggleActive(user)\\\">\\n<md-icon class=\\\"pt-5\\\" title=\\\"{{\\'Dar de baja\\' | translate}}\\\" md-font-icon=\\\"icon-arrow-down-bold\\\"></md-icon><span \\nclass=\\\"pt-5\\\" data-translate>Dar de baja</span></md-button><md-button data-layout=\\\"column\\\" \\ndata-layout-align=\\\"start center\\\" data-debouce-click data-ng-if=\\\"!user.is_active && vm.user.is_admin\\\" \\ndata-ng-click=\\\"vm.toggleActive(user)\\\"><md-icon class=\\\"pt-5 green-700-fg\\\" title=\\\"{{\\'Dar de alta\\' | translate}}\\\" \\nmd-font-icon=\\\"icon-arrow-up-bold\\\"></md-icon><span class=\\\"pt-5 green-700-fg\\\" data-translate>Dar de alta</span>\\n</md-button></div></div></div></div></div><dir-pagination-controls class=\\\"bottomFixed\\\"></dir-pagination-controls></div>\\n</md-content></div></div></div>\");\n$templateCache.put(\"app/main/users/views/detail/user.html\",\"<div id=\\\"user-detail\\\" class=\\\"white-bg\\\"><div class=\\\"header\\\" \\nstyle=\\\"background-image: url({{vm.user.header_image || \\'assets/images/headers/header.jpg\\'}})\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start end\\\"></div><div class=\\\"white-bg pt-30 pb-50\\\"><div class=\\\"container-krart\\\"><div layout=\\\"row\\\" \\nlayout-wrap><div flex=\\\"33\\\" flex-xs=\\\"100\\\" class=\\\"pr-40 white-bg negative-mt-130 p-20\\\"><div layout=\\\"row\\\" \\nlayout-align=\\\"start end\\\"><div class=\\\"border pb-20 container-image\\\" \\nstyle=\\\"background-image: url({{vm.user.photo || \\'assets/images/avatars/profile.jpg\\'}})\\\"></div><div layout=\\\"column\\\" \\nclass=\\\"text-uppercase pl-20\\\"><span class=\\\"font-size-16 grey-600-fg font-weight-300\\\">{{ vm.user.first_name }}</span> \\n<span class=\\\"font-size-12 font-weight-700\\\">{{ vm.user.last_name }}</span><div class=\\\"font-size-10 mt-30\\\"><span \\nclass=\\\"bt border-krart color-krart pt-10 mr-5\\\" ng-repeat=\\\"professional_profile in vm.professional_profiles\\\" \\nng-if=\\\"vm.user.professional_profile===professional_profile.id\\\">{{ professional_profile.name }} </span><span \\nclass=\\\"grey-600-fg mr-5\\\">/</span> <span class=\\\"grey-600-fg\\\">{{ vm.user.country_data.name }}</span></div></div></div>\\n<div layout=\\\"row\\\" layout-align=\\\"space-between center\\\" class=\\\"mt-50 border p-20\\\"><span data-translate \\nclass=\\\"font-size-12 grey-600-fg\\\">Valoración media</span><stars average=\\\"vm.user.average_rating\\\"></stars></div><div \\nclass=\\\"mt-50\\\"><span class=\\\"font-size-12 font-weight-700 color-krart text-uppercase mr-5\\\" data-translate>Biografía\\n</span> <span class=\\\"font-size-12 font-weight-700 color-krart mr-5\\\">/</span> <span \\nclass=\\\"font-size-14 font-weight-300 grey-600-fg\\\">{{ vm.user.biography }}</span></div><div class=\\\"mt-50\\\">\\n<intelli-social-share text=\\\"vm.user.alias\\\"></intelli-social-share></div></div><div flex=\\\"66\\\" flex-xs=\\\"100\\\">\\n<slider-products page-size=\\\"2\\\" profile=\\\"vm.user.id\\\"></slider-products><slider-projects page-size=\\\"2\\\" \\nprofile=\\\"vm.user.id\\\"></slider-projects></div></div></div></div></div>\");\n$templateCache.put(\"app/main/users/views/edit/user.html\",\"<div id=\\\"user-edit\\\" class=\\\"page-layout carded left-sidenav\\\" layout=\\\"row\\\"><div class=\\\"top-bg md-lantia-bg\\\"></div><div \\nclass=\\\"center\\\" layout=\\\"column\\\" flex><div class=\\\"header\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\" layout-wrap>\\n<div class=\\\"white-fg\\\" layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"h1 mb-20 pointer\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-click=\\\"historyBack()\\\"><md-icon md-font-icon=\\\"icon-keyboard-backspace\\\"></md-icon><span \\ndata-translate>Volver</span></div><div class=\\\"h1\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon \\nmd-font-icon=\\\"icon-account\\\"></md-icon><span data-translate>Administrar perfil</span></div></div></div><div \\nclass=\\\"content-card\\\" layout=\\\"column\\\" flex><md-content class=\\\"content p-20\\\" flex ms-scroll><div layout=\\\"row\\\" \\nlayout-xs=\\\"column\\\" layout-align=\\\"space-between start\\\" flex><form name=\\\"userForm\\\" novalidate data-layout=\\\"row\\\" \\ndata-layout-align=\\\"center start\\\" class=\\\"fullwidth\\\"><div data-layout=\\\"row\\\" layout-xs=\\\"column\\\" \\ndata-layout-align=\\\"start start\\\" flex=\\\"60\\\" flex-xs=\\\"100\\\"><div layout=\\\"column\\\" flex=\\\"50\\\" flex-xs=\\\"100\\\" class=\\\"pr-40\\\">\\n<md-input-container flex=\\\"100\\\" layout=\\\"column\\\" class=\\\"bb pb-20 w-250\\\"><div class=\\\"pb-20 container-image\\\"><img \\nng-src=\\\"{{vm.user.image}}\\\" alt=\\\"Imagen principal\\\" ng-if=\\\"vm.user.image\\\"> <img src=\\\"assets/images/avatars/profile.jpg\\\" \\nalt=\\\"Imagen principal\\\" ng-if=\\\"!vm.user.image\\\"></div><div flow-init=\\\"vm.ngFlowOptions\\\" \\nflow-name=\\\"vm.formFlow.imageFlow\\\" flow-drop flow-file-error=\\\"vm.imageError($file, $message, $flow)\\\" \\nflow-file-success=\\\"vm.reloadImage($file, $message, $flow)\\\" flow-files-submitted=\\\"$flow.upload()\\\" \\nflow-drag-enter=\\\"vm.dropping=true\\\" flow-drag-leave=\\\"vm.dropping=false\\\" ng-class=\\\"{\\'dropping\\':vm.dropping}\\\"><div \\nlayout=\\\"row\\\" layout-align=\\\"space-between center\\\" layout-wrap><md-button flow-btn aria-label=\\\"upload imagen\\\" \\nclass=\\\"md-raised grey-200-bg pl-10 pr-10 pt-5 pb-5 font-weight-700 line-height-16 no-margin\\\"><span \\nclass=\\\"font-size-10 grey-600-fg\\\" data-translate>Cambiar foto</span></md-button><md-button aria-label=\\\"delete imagen\\\" \\nng-click=\\\"vm.removeImage()\\\" \\nclass=\\\"md-raised grey-200-bg pl-10 pr-10 pt-5 pb-5 font-weight-700 line-height-16 no-margin\\\"><span \\nclass=\\\"font-size-10 grey-600-fg\\\" data-translate>Eliminar</span></md-button></div></div></md-input-container>\\n<md-input-container><label data-translate>Nombre</label><input name=\\\"first_name\\\" data-ng-model=\\\"vm.user.first_name\\\" \\nrequired><error-messages field=\\\"userForm.first_name\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container><md-input-container><label data-translate>Apellidos</label><input name=\\\"last_name\\\" \\ndata-ng-model=\\\"vm.user.last_name\\\" required><error-messages field=\\\"userForm.last_name\\\" server-errors=\\\"vm.serverErrors\\\" \\nrequired></error-messages></md-input-container><md-input-container flex=\\\"100\\\"><label data-translate>Email</label><input\\n name=\\\"email\\\" data-ng-model=\\\"vm.user.email\\\" required><error-messages field=\\\"userForm.email\\\" \\nserver-errors=\\\"vm.serverErrors\\\" required></error-messages></md-input-container></div><div layout=\\\"column\\\" flex=\\\"50\\\" \\nflex-xs=\\\"100\\\"><div><md-autocomplete md-floating-label=\\\"{{\\'Escuela\\' | translate }}\\\" md-delay=\\\"300\\\" \\nmd-input-name=\\\"school\\\" md-selected-item=\\\"vm.user.school_data\\\" md-search-text=\\\"searchTextSchool\\\" \\nmd-items=\\\"school in vm.getSchools(searchTextSchool)\\\" md-min-length=\\\"3\\\" md-item-text=\\\"school.name\\\"><md-item-template>\\n<span md-highlight-text=\\\"searchTextSchool\\\">{{school.name}}</span></md-item-template><md-not-found><span data-translate>\\nNo hay ninguna escuela con ese nombre</span></md-not-found></md-autocomplete><md-input-container flex=\\\"100\\\" \\nclass=\\\"no-margin\\\"><error-messages field=\\\"userForm.school\\\" server-errors=\\\"vm.serverErrors\\\" required></error-messages>\\n</md-input-container></div><md-input-container><label data-translate>Curso</label><md-select \\ndata-ng-model=\\\"vm.user.course\\\" name=\\\"course\\\"><md-option data-ng-repeat=\\\"course in vm.courses.data\\\" \\ndata-ng-value=\\\"course.id\\\">{{course.name}}</md-option></md-select><error-messages field=\\\"userForm.course\\\" \\nserver-errors=\\\"vm.serverErrors\\\"></error-messages></md-input-container><md-input-container><label data-translate>\\nEspecialidad</label><md-select data-ng-model=\\\"vm.user.speciality\\\" name=\\\"speciality\\\" multiple=\\\"multiple\\\"><md-option \\ndata-ng-repeat=\\\"speciality in vm.specialities.data\\\" data-ng-value=\\\"speciality.id\\\">{{speciality.name}}</md-option>\\n</md-select><error-messages field=\\\"userForm.speciality\\\" server-errors=\\\"vm.serverErrors\\\"></error-messages>\\n</md-input-container><md-input-container><label data-translate>Sexo</label><md-select data-ng-model=\\\"vm.user.sex\\\" \\nname=\\\"sex\\\"><md-option value=\\\"V\\\"><span data-translate>Varón</span></md-option><md-option value=\\\"M\\\"><span data-translate>\\nMujer</span></md-option></md-select><error-messages field=\\\"userForm.sex\\\" server-errors=\\\"vm.serverErrors\\\">\\n</error-messages></md-input-container><md-input-container class=\\\"mt-50\\\"><label class=\\\"md-no-float\\\" data-translate>\\nFecha en la que comenzó como profesor</label><md-datepicker name=\\\"hire_date\\\" data-ng-model=\\\"vm.user.hire_date\\\" \\nmd-placeholder=\\\"dd/mm/yyyy\\\"></md-datepicker><error-messages field=\\\"userForm.hire_date\\\" server-errors=\\\"vm.serverErrors\\\" \\nforcechange></error-messages></md-input-container><md-input-container class=\\\"mt-20\\\"><label class=\\\"md-no-float\\\" \\ndata-translate>Fecha de nacimiento</label><md-datepicker name=\\\"born_date\\\" data-ng-model=\\\"vm.user.born_date\\\" \\nmd-placeholder=\\\"dd/mm/yyyy\\\"></md-datepicker><error-messages field=\\\"userForm.born_date\\\" server-errors=\\\"vm.serverErrors\\\" \\nforcechange></error-messages></md-input-container><div layout=\\\"row\\\" layout-align=\\\"end end\\\" class=\\\"fullwidth\\\"><md-button\\n ng-click=\\\"vm.saveUser(vm.user)\\\" class=\\\"send-button md-accent md-raised\\\" data-debouce-click \\ndata-ng-if=\\\"hasPermission(\\'users\\',\\'PATCH\\')\\\" ng-disabled=\\\"userForm.$invalid || userForm.$pristine\\\" \\naria-label=\\\"{{\\'Guardar\\' | translate}}\\\"><span data-translate>Guardar</span></md-button></div></div></div></form></div>\\n</md-content></div></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-2/template-2.html\",\"<div class=\\\"template-2\\\"><div class=\\\"header p-16\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><div ng-if=\\\"card.avatar\\\"><img\\n class=\\\"avatar mr-16\\\" ng-src=\\\"{{card.avatar.src}}\\\" alt=\\\"{{card.avatar.alt}}\\\"></div><div class=\\\"info\\\"><div \\nclass=\\\"title\\\" ng-if=\\\"card.title\\\">{{card.title}}</div><div class=\\\"subtitle secondary-text\\\" ng-if=\\\"card.subtitle\\\">\\n{{card.subtitle}}</div></div></div><div class=\\\"media\\\"><img class=\\\"image\\\" ng-src=\\\"{{card.media.image.src}}\\\" \\nalt=\\\"{{card.media.image.alt}}\\\" ng-show=\\\"card.media.image\\\"></div><div class=\\\"text p-16\\\" ng-if=\\\"card.text\\\">{{card.text}}\\n</div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-1/template-1.html\",\"<div class=\\\"template-1\\\"><div class=\\\"media\\\"><img class=\\\"image\\\" ng-src=\\\"{{card.media.image.src}}\\\" \\nalt=\\\"{{card.media.image.alt}}\\\" ng-show=\\\"card.media.image\\\"></div><div class=\\\"content pv-24 ph-16\\\"><div class=\\\"title h1\\\" \\nng-if=\\\"card.title\\\">{{card.title}}</div><div class=\\\"subtitle secondary-text\\\" ng-if=\\\"card.subtitle\\\">{{card.subtitle}}\\n</div><div class=\\\"text pt-16\\\" ng-if=\\\"card.text\\\">{{card.text}}</div></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-10/template-10.html\",\"<div class=\\\"template-10 p-16\\\"><div class=\\\"pb-16\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div class=\\\"info\\\">\\n<div class=\\\"title secondary-text\\\" ng-if=\\\"card.title\\\">{{card.title}}</div><div class=\\\"subtitle h2\\\" \\nng-if=\\\"card.subtitle\\\">{{card.subtitle}}</div></div><div class=\\\"media ml-16\\\"><img class=\\\"image\\\" \\nng-src=\\\"{{card.media.image.src}}\\\" alt=\\\"{{card.media.image.alt}}\\\" ng-show=\\\"card.media.image\\\"></div></div><div \\nclass=\\\"text\\\">{{card.text}}</div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-3/template-3.html\",\"<div class=\\\"template-3 p-16 teal-bg white-fg\\\" layout=\\\"row\\\" layout-align=\\\"space-between\\\"><div layout=\\\"column\\\" \\nlayout-align=\\\"space-between\\\"><div class=\\\"info\\\"><div class=\\\"title h1\\\" ng-if=\\\"card.title\\\">{{card.title}}</div><div \\nclass=\\\"subtitle h3 secondary-text\\\" ng-if=\\\"card.subtitle\\\">{{card.subtitle}}</div></div><div class=\\\"cta\\\"><md-button \\nclass=\\\"m-0\\\">{{card.cta}}</md-button></div></div><div class=\\\"media pl-16\\\"><img class=\\\"image\\\" \\nng-src=\\\"{{card.media.image.src}}\\\" alt=\\\"{{card.media.image.alt}}\\\" ng-show=\\\"card.media.image\\\"></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-4/template-4.html\",\"<div class=\\\"template-4\\\"><div class=\\\"info white-fg ph-16 pv-24\\\"><div class=\\\"title h1\\\" ng-if=\\\"card.title\\\">{{card.title}}\\n</div><div class=\\\"text\\\" ng-if=\\\"card.text\\\">{{card.text}}</div></div><div class=\\\"media\\\"><img class=\\\"image\\\" \\nng-src=\\\"{{card.media.image.src}}\\\" alt=\\\"{{card.media.image.alt}}\\\" ng-show=\\\"card.media.image\\\"></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-5/template-5.html\",\"<div class=\\\"template-5 p-16\\\" layout=\\\"row\\\" layout-align=\\\"space-between start\\\"><div class=\\\"info\\\"><div \\nclass=\\\"title secondary-text\\\" ng-if=\\\"card.title\\\">{{card.title}}</div><div class=\\\"event h2\\\" ng-if=\\\"card.event\\\">\\n{{card.event}}</div></div><div class=\\\"media ml-16\\\"><img class=\\\"image\\\" ng-src=\\\"{{card.media.image.src}}\\\" \\nalt=\\\"{{card.media.image.alt}}\\\" ng-show=\\\"card.media.image\\\"></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-7/template-7.html\",\"<div class=\\\"template-7\\\" layout=\\\"row\\\" layout-align=\\\"space-between\\\"><div class=\\\"info\\\" layout=\\\"column\\\" \\nlayout-align=\\\"space-between\\\" layout-fill flex><div class=\\\"p-16\\\"><div class=\\\"title h1\\\" ng-if=\\\"card.title\\\">{{card.title}}\\n</div><div class=\\\"subtitle h4 secondary-text\\\" ng-if=\\\"card.subtitle\\\">{{card.subtitle}}</div><div class=\\\"text h4 pt-8\\\" \\nng-if=\\\"card.text\\\">{{card.text}}</div></div><div><md-divider></md-divider><div class=\\\"p-8\\\" layout=\\\"row\\\"><md-icon \\nmd-font-icon=\\\"icon-star-outline\\\" class=\\\"mh-5\\\"></md-icon><md-icon md-font-icon=\\\"icon-star-outline\\\" class=\\\"mh-5\\\">\\n</md-icon><md-icon md-font-icon=\\\"icon-star-outline\\\" class=\\\"mh-5\\\"></md-icon><md-icon md-font-icon=\\\"icon-star-outline\\\" \\nclass=\\\"mh-5\\\"></md-icon><md-icon md-font-icon=\\\"icon-star-outline\\\" class=\\\"mh-5\\\"></md-icon></div></div></div><div \\nclass=\\\"media\\\"><img class=\\\"image\\\" ng-src=\\\"{{card.media.image.src}}\\\" alt=\\\"{{card.media.image.alt}}\\\" \\nng-show=\\\"card.media.image\\\"></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-6/template-6.html\",\"<div class=\\\"template-6\\\"><div class=\\\"content pv-24 ph-16\\\"><div class=\\\"subtitle secondary-text\\\" ng-if=\\\"card.subtitle\\\">\\n{{card.subtitle}}</div><div class=\\\"title h2\\\" ng-if=\\\"card.title\\\">{{card.title}}</div><div class=\\\"text pt-8\\\" \\nng-if=\\\"card.text\\\">{{card.text}}</div></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-8/template-8.html\",\"<div class=\\\"template-8\\\"><div class=\\\"media\\\"><img class=\\\"image\\\" ng-src=\\\"{{card.media.image.src}}\\\" \\nalt=\\\"{{card.media.image.alt}}\\\" ng-show=\\\"card.media.image\\\"></div><div class=\\\"content pv-24 ph-16\\\"><div class=\\\"title h1\\\" \\nng-if=\\\"card.title\\\">{{card.title}}</div><div class=\\\"subtitle secondary-text\\\" ng-if=\\\"card.subtitle\\\">{{card.subtitle}}\\n</div><div class=\\\"buttons pt-16\\\"><md-button class=\\\"m-0\\\">{{card.button1}}</md-button><md-button class=\\\"m-0 md-accent\\\">\\n{{card.button2}}</md-button></div><div class=\\\"text pt-16\\\" ng-if=\\\"card.text\\\">{{card.text}}</div></div></div>\");\n$templateCache.put(\"app/core/directives/ms-card/templates/template-9/template-9.html\",\"<div class=\\\"template-9\\\"><div class=\\\"header p-16\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><div ng-if=\\\"card.avatar\\\"><img\\n class=\\\"avatar mr-16\\\" ng-src=\\\"{{card.avatar.src}}\\\" alt=\\\"{{card.avatar.alt}}\\\"></div><div class=\\\"info\\\"><div \\nclass=\\\"title\\\" ng-if=\\\"card.title\\\">{{card.title}}</div><div class=\\\"subtitle secondary-text\\\" ng-if=\\\"card.subtitle\\\">\\n{{card.subtitle}}</div></div></div><div class=\\\"text ph-16 pb-16\\\" ng-if=\\\"card.text\\\">{{card.text}}</div><div \\nclass=\\\"media\\\"><img class=\\\"image\\\" ng-src=\\\"{{card.media.image.src}}\\\" alt=\\\"{{card.media.image.alt}}\\\" \\nng-show=\\\"card.media.image\\\"></div><div class=\\\"buttons m-8\\\"><md-button class=\\\"md-icon-button mr-16\\\" \\naria-label=\\\"Favorite\\\"><md-icon md-font-icon=\\\"icon-heart-outline\\\" class=\\\"s24\\\"></md-icon></md-button><md-button \\nclass=\\\"md-icon-button\\\" aria-label=\\\"Share\\\"><md-icon md-font-icon=\\\"icon-share\\\" class=\\\"s24\\\"></md-icon></md-button></div>\\n</div>\");\n$templateCache.put(\"app/core/directives/ms-stepper/templates/vertical/vertical.html\",\"<div class=\\\"ms-stepper-vertical\\\"><div class=\\\"ms-stepper-vertical-line\\\"></div><div class=\\\"ms-stepper-steps\\\" \\nng-transclude></div></div>\");\n$templateCache.put(\"app/core/directives/ms-stepper/templates/horizontal/horizontal.html\",\"<div class=\\\"ms-stepper-horizontal\\\"><div class=\\\"ms-stepper-navigation-wrapper\\\"><div class=\\\"ms-stepper-navigation\\\" \\nlayout=\\\"row\\\" layout-align=\\\"center center\\\"><md-button class=\\\"ms-stepper-navigation-item\\\" \\nng-class=\\\"{\\'current\\': MsStepper.isStepCurrent(step.stepNumber), \\'valid\\': MsStepper.isStepValid(step.stepNumber), \\'disabled\\': MsStepper.isStepDisabled(step.stepNumber), \\'optional\\': MsStepper.isStepOptional(step.stepNumber)}\\\" \\nng-click=\\\"MsStepper.gotoStep(step.stepNumber)\\\" ng-disabled=\\\"MsStepper.isStepDisabled(step.stepNumber)\\\" \\nng-repeat=\\\"step in MsStepper.steps | filter:MsStepper.filterHiddenStep\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><div \\nclass=\\\"step md-accent-bg\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><span \\nng-if=\\\"!MsStepper.isStepValid(step.stepNumber) || MsStepper.isStepOptional(step.stepNumber)\\\">{{$index + 1}} </span>\\n<span ng-if=\\\"MsStepper.isStepValid(step.stepNumber) && !MsStepper.isStepOptional(step.stepNumber)\\\"><i \\nclass=\\\"icon icon-check s18\\\"></i></span></div><div layout=\\\"column\\\" layout-align=\\\"start start\\\"><div class=\\\"title\\\">\\n{{step.stepTitle}}</div><div class=\\\"subtitle\\\" ng-if=\\\"MsStepper.isStepOptional(step.stepNumber)\\\">Optional</div></div>\\n</md-button></div></div><div class=\\\"ms-stepper-steps\\\" ng-transclude></div><div class=\\\"ms-stepper-controls\\\" \\nlayout=\\\"row\\\" layout-align=\\\"center center\\\"><md-button class=\\\"md-accent md-raised\\\" ng-disabled=\\\"MsStepper.isFirstStep()\\\" \\nng-click=\\\"MsStepper.gotoPreviousStep()\\\">Back</md-button><div class=\\\"ms-stepper-dots\\\"><span \\nng-repeat=\\\"step in MsStepper.steps\\\" ng-hide=\\\"MsStepper.isStepHidden(step.stepNumber)\\\" \\nng-class=\\\"{\\'selected md-accent-bg\\':MsStepper.currentStepNumber === $index + 1}\\\"></span></div><md-button \\nclass=\\\"md-accent md-raised\\\" ng-if=\\\"!MsStepper.isLastStep()\\\" \\nng-disabled=\\\"!MsStepper.isStepValid(MsStepper.currentStepNumber)\\\" ng-click=\\\"MsStepper.gotoNextStep()\\\">Next</md-button>\\n<md-button type=\\\"submit\\\" class=\\\"md-accent md-raised\\\" ng-click=\\\"MsStepper.resetForm()\\\" ng-if=\\\"MsStepper.isLastStep()\\\" \\nng-disabled=\\\"!MsStepper.isFormValid()\\\">Submit</md-button></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/click2call/timeline-right.html\",\"<div id=\\\"timeline-incoming\\\" class=\\\"timeline-right\\\" flex=\\\"50\\\" flex-xs=\\\"100\\\"><div layout-align=\\\"center center\\\" \\nlayout=\\\"row\\\" layout-align-gt-md=\\\"center start\\\" class=\\\"ms-timeline-item\\\" ng-repeat=\\\"call in vm.leadsIncomingCalls.data\\\">\\n<div class=\\\"timeline-point md-accent-bg md-whiteframe-2dp\\\"><md-icon md-font-icon=\\\"icon-phone-incoming\\\"></md-icon></div>\\n<div class=\\\"timeline-detail\\\" flex=\\\"50\\\"><div class=\\\"time\\\" ng-if=\\\"call.startcall\\\">\\n{{call.startcall | date:\\'dd/MM/yyyy HH:mm\\'}}</div><div class=\\\"time\\\" ng-if=\\\"call.durationcallanswered\\\"><md-icon \\nmd-font-icon=\\\"icon-timer\\\"></md-icon>{{call.durationcallanswered}}</div></div><div class=\\\"timeline-card\\\" layout=\\\"row\\\" \\nflex=\\\"50\\\"></div></div></div><div id=\\\"timeline-outgoing\\\" class=\\\"timeline-right\\\" flex=\\\"50\\\" flex-xs=\\\"100\\\"><div \\nlayout-align=\\\"center center\\\" layout=\\\"row\\\" layout-align-gt-md=\\\"center start\\\" class=\\\"ms-timeline-item\\\" \\nng-repeat=\\\"call in vm.leadsOutgoingCalls.data\\\"><div class=\\\"timeline-point md-accent-bg md-whiteframe-2dp\\\"><md-icon \\nmd-font-icon=\\\"icon-phone-outgoing\\\"></md-icon></div><div class=\\\"timeline-detail\\\" flex=\\\"50\\\"><div class=\\\"time\\\" \\nng-if=\\\"call.startcall\\\">{{call.startcall | date:\\'dd/MM/yyyy HH:mm\\'}}</div><div class=\\\"time\\\" \\nng-if=\\\"call.durationcallanswered\\\"><md-icon md-font-icon=\\\"icon-timer\\\"></md-icon>{{call.durationcallanswered}}</div>\\n</div><div class=\\\"timeline-card\\\" layout=\\\"row\\\" flex=\\\"50\\\"></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/activity/activity-by-date.html\",\"<div layout=\\\"column\\\" layout-align=\\\"space-between start\\\" class=\\\"mb-20 md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"black-fg no-margin\\\"></md-icon><span>\\n{{activity.title}}</span></h2></div></md-toolbar><md-content flex layout-padding data-layout-xs=\\\"column\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\"><div \\nclass=\\\"no-results text-center\\\" ng-if=\\\"vm.objectSize(vm.leadsActivity[activity.key]) == 0\\\"><div class=\\\"message\\\"><md-icon\\n class=\\\"message-icon s96\\\" md-font-icon=\\\"icon-history\\\"></md-icon><div class=\\\"message-text\\\" translate>Sin resultados\\n</div></div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nng-repeat=\\\"activity in vm.leadsActivity[activity.key]\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><div \\nclass=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" layout-align=\\\"space-between center\\\"><div \\nlayout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"mb-5\\\"><span class=\\\"title\\\">\\n{{activity.activity_user.username}}</span></div><div class=\\\"tags\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap>\\n<div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-format-list-numbers\\\" class=\\\"s16\\\">\\n</md-icon><div class=\\\"ml-10 tag-label\\\"><span translate>Nº de actividades:</span> {{activity.count}}</div></div><div \\nclass=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\"><span translate>Comienzo:</span> {{activity.activity_date_start | date:\\'dd/MM/yyyy\\'}}</div>\\n</div><div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\">\\n</md-icon><div class=\\\"ml-10 tag-label\\\"><span translate>Fin:</span> {{activity.activity_date_end | date:\\'dd/MM/yyyy\\'}}\\n</div></div></div></div></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\"><md-button data-layout=\\\"column\\\" \\nclass=\\\"md-accent\\\" data-layout-align=\\\"start center\\\" data-ng-click=\\\"vm.openLeadActivityDialog($event, activity)\\\"><md-icon\\n class=\\\"pt-5\\\" title=\\\"{{\\'Consultar\\' | translate}}\\\" md-font-icon=\\\"icon-eye\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>\\nConsultar</span></md-button></div></div></div></div></div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/activity/timeline-right.html\",\"<div layout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div ng-repeat=\\\"activity in vm.activities\\\" class=\\\"fullwidth\\\">\\n<div class=\\\"fullwidth\\\" ng-include=\\\"\\'app/main/leads/views/edit/activity/activity-by-date.html\\'\\\"></div></div></div>\");\n$templateCache.put(\"app/main/leads/views/edit/history/history-by-date.html\",\"<div layout=\\\"column\\\" layout-align=\\\"space-between start\\\" class=\\\"mb-20 md-whiteframe-z1\\\"><md-toolbar \\nclass=\\\"md-grey-300-bg black-fg\\\"><div class=\\\"md-toolbar-tools\\\" layout=\\\"row\\\" layout-align=\\\"space-between center\\\"><h2 \\nclass=\\\"md-flex text-uppercase\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"black-fg no-margin\\\"></md-icon><span>\\n{{activity.title}}</span></h2></div></md-toolbar><md-content flex layout-padding data-layout-xs=\\\"column\\\" \\ndata-layout=\\\"row\\\" data-layout-align=\\\"space-between center\\\" layout-wrap class=\\\"fullwidth\\\"><div \\nclass=\\\"no-results text-center\\\" ng-if=\\\"vm.objectSize(vm.leadsHistory[activity.key]) == 0\\\"><div class=\\\"message\\\"><md-icon \\nclass=\\\"message-icon s96\\\" md-font-icon=\\\"icon-history\\\"></md-icon><div class=\\\"message-text\\\" translate>Sin resultados</div>\\n</div></div><div class=\\\"todo-item\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" \\nng-repeat=\\\"history in vm.leadsHistory[activity.key]\\\"><div layout=\\\"row\\\" layout-align=\\\"start center\\\" flex><div \\nclass=\\\"info\\\" flex=\\\"auto\\\"><div layout=\\\"row\\\" data-layout-xs=\\\"column\\\" layout-align=\\\"space-between center\\\"><div \\nlayout=\\\"row\\\" layout-align=\\\"space-between center\\\"><div><div class=\\\"mb-5\\\"><span class=\\\"title\\\">{{history.history_user}}\\n</span></div><div class=\\\"tags\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\" layout-wrap><div class=\\\"tag\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-format-list-numbers\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\"><span translate>Nº de actividades:</span> {{history.count}}</div></div><div class=\\\"tag\\\" \\nlayout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon><div \\nclass=\\\"ml-10 tag-label\\\"><span translate>Comienzo:</span> {{history.history_date_start | date:\\'dd/MM/yyyy\\'}}</div></div>\\n<div class=\\\"tag\\\" layout=\\\"row\\\" layout-align=\\\"start center\\\"><md-icon md-font-icon=\\\"icon-calendar\\\" class=\\\"s16\\\"></md-icon>\\n<div class=\\\"ml-10 tag-label\\\"><span translate>Fin:</span> {{history.history_date_end | date:\\'dd/MM/yyyy\\'}}</div></div>\\n</div></div></div><div layout=\\\"row\\\" layout-align=\\\"end center\\\"><md-button data-layout=\\\"column\\\" class=\\\"md-accent\\\" \\ndata-layout-align=\\\"start center\\\" data-ng-click=\\\"vm.openLeadHistoryDialog($event, history)\\\"><md-icon class=\\\"pt-5\\\" \\ntitle=\\\"{{\\'Consultar\\' | translate}}\\\" md-font-icon=\\\"icon-eye\\\"></md-icon><span class=\\\"pt-5\\\" data-translate>Consultar\\n</span></md-button></div></div></div></div></div></md-content></div>\");\n$templateCache.put(\"app/main/leads/views/edit/history/timeline-right.html\",\"<div layout=\\\"column\\\" layout-align=\\\"space-between start\\\"><div ng-repeat=\\\"activity in vm.activities\\\" class=\\\"fullwidth\\\">\\n<div class=\\\"fullwidth\\\" ng-include=\\\"\\'app/main/leads/views/edit/history/history-by-date.html\\'\\\"></div></div></div>\");\n$templateCache.put(\"app/core/directives/ms-stepper/templates/vertical/step/vertical-step.html\",\"<md-button class=\\\"ms-stepper-navigation-item\\\" \\nng-class=\\\"{\\'current\\': MsStepper.isStepCurrent(stepInfo.stepNumber), \\'valid\\': MsStepper.isStepValid(stepInfo.stepNumber), \\'disabled\\': MsStepper.isStepDisabled(stepInfo.stepNumber), \\'optional\\': MsStepper.isStepOptional(stepInfo.stepNumber)}\\\" \\nng-click=\\\"MsStepper.gotoStep(stepInfo.stepNumber)\\\" ng-disabled=\\\"MsStepper.isStepDisabled(stepInfo.stepNumber)\\\" \\nng-hide=\\\"MsStepper.isStepHidden(stepInfo.stepNumber)\\\" aria-label=\\\"Stepper navigation button\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\"><div class=\\\"step\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><span \\nng-if=\\\"!MsStepper.isStepValid(stepInfo.stepNumber) || MsStepper.isStepOptional(stepInfo.stepNumber)\\\"><i \\nclass=\\\"icon icon-checkbox-blank-circle-outline s18 md-accent-fg\\\"></i> </span><span \\nng-if=\\\"MsStepper.isStepValid(stepInfo.stepNumber) && !MsStepper.isStepOptional(stepInfo.stepNumber)\\\"><i \\nclass=\\\"icon icon-check-circle s18 md-accent-fg\\\"></i></span></div><div layout=\\\"column\\\" layout-align=\\\"start start\\\"><div \\nclass=\\\"title\\\" ng-if=\\\"stepInfo.stepTitleTranslate\\\">{{stepInfo.stepTitleTranslate | translate }}</div><div class=\\\"title\\\" \\nng-if=\\\"!stepInfo.stepTitleTranslate\\\">{{stepInfo.stepTitle}}</div><div class=\\\"subtitle\\\" \\nng-if=\\\"MsStepper.isStepOptional(stepInfo.stepNumber)\\\">Optional</div></div></md-button><div \\nclass=\\\"ms-stepper-step-content\\\" ng-transclude></div><div class=\\\"ms-stepper-controls\\\" layout=\\\"row\\\" \\nlayout-align=\\\"start center\\\" ng-show=\\\"MsStepper.isStepCurrent(stepInfo.stepNumber)\\\"><md-button \\nclass=\\\"md-accent md-raised\\\" ng-disabled=\\\"MsStepper.isFirstStep()\\\" ng-click=\\\"MsStepper.gotoPreviousStep()\\\">Back\\n</md-button><md-button class=\\\"md-accent md-raised\\\" ng-if=\\\"!MsStepper.isLastStep()\\\" \\nng-disabled=\\\"!MsStepper.isStepValid(MsStepper.currentStepNumber)\\\" ng-click=\\\"MsStepper.gotoNextStep()\\\">Next</md-button>\\n<md-button type=\\\"submit\\\" class=\\\"md-accent md-raised\\\" ng-click=\\\"MsStepper.resetForm()\\\" ng-if=\\\"MsStepper.isLastStep()\\\" \\nng-disabled=\\\"!MsStepper.isFormValid()\\\">Submit</md-button></div>\");}]);"],"sourceRoot":"/source/"}